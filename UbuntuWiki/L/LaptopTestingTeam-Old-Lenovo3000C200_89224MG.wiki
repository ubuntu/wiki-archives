{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* Contact: <nowiki>[[TWhetter]]</nowiki>
* Brand: Lenovo
* Make : 3000 C Series
* Model: C200 8922-4MG
* Website: http://www-307.ibm.com/pc/support/site.wss/quickPath.do?quickPathEntry=89224mg
* lspci output: <nowiki>[[lspci]]</nowiki>

<nowiki>[[http://tuxmobil.org/lenovo.html|{{http://tuxmobil.org/pics/tuxmobil_sticker.png}}]]</nowiki>

=== Hardware Specifications ===

* Intel Core 2 Duo T5500 (1.66 Ghz, 2 MB Cache)
* 512 MB Memory
* 15" XGA TFT Screen (1024x768)
* 80 GB SATA Hard Drive on Intel 82801GBM (ICH7) SATA Controller
* Intel 945GM graphic controller with 128 MB shared memory - Website spec has this as 950GM, lspci gives 945GM?
* DVD/DVD-RW Drive: <nowiki>[[http://www.lge.com/products/model/detail/gma-4082n.jhtml|LG GMA-4082N]]</nowiki>
* 56K Modem v.92: <nowiki>[[http://www.silabs.com/tgwWebApp/public/web_content/products/Wireline/Silicon_DAA/en/Si3054.htm|Si-3054]]</nowiki>
* LAN: Realtek RTL-8139
* WLAN: Intel PRO/Intel 3945ABG (802.11a/b/g)
* PCMCIA
* IEEE-1394: Ricoh
* MS/MS PRO/MMC/SD/SDIO/xD-Picture Card reader
* Audio: Intel Corporation 82801G (ICH7 Family) High Definition Audio Controller (Realtek Id 862)
* S-Video Out

=== Current Issues ===
This laptop has some problems with sound in Edgy and Feisty. The problems are very quiet sound and no laptop speakers. This can be fixed. See Notes below.

There are also problems with the Wireless Radio kill switch located on the front edge. It seems not to like booting with the kill switch enabled (Wireless off).

==== Installing Feisty ====

Make sure that the onboard modem is enabled in the BIOS to ensure trouble-free audio.

Make sure that the Wireless Radio kill switch located on the front edge is disabled (Wireless on)

Steps to install Feisty on this laptop:
* Insert the install CD, boot on it;
* Install the system, reboot at the end of the installation process;
* Enjoy!

Don't need to pass any extra parameter to kernel for installation. All goes fine.

==== Installing Edgy ====

I can't seem to run the Edgy installer on this laptop anymore. The only change I can think of is a BIOS update. The installer hangs and reports problems with not being able to read from the optical drive. On to Feisty I guess...

=== System Info ===
<pre>
bios-version:63ET14WW
system-manufacturer:LENOVO
system-product-name:89224MG
system-version:3000 C200
</pre>

=== Hardware details ===
{| class="wikitable"
|-
| 
| in Edgy?
| in Feisty (current stable)?
|-
| Installation works?
| Yes
| Yes
|}

{| class="wikitable"
|-
| <-4> '''Hardware Information'''
|-
| <-4> '''Screen & Monitors'''
|-
| <|2> '''Device'''
| <-2> '''Works?'''
| <|2> '''Bug #'''
|-
| in Edgy?
| in Feisty (current stable)?
|-
| Screen
| Yes
| Yes
| 
|-
| Correct resolution?
| Yes
| Yes
| 
|-
| Correct refresh rate?
| Yes
| Yes
| 
|-
| 3D Acceleration
| Yes
| Yes
| 
|-
| External monitor works?
| Yes
| Yes
| 
|-
| External monitor - mirrors
| Yes
| Yes
| 
|-
| External monitor - extend desktop
| Untested
| Untested
| 
|-
| S-Video Out
| Yes
| Yes
| 
|-
| <-4> '''Power Management'''
|-
| Battery detected?
| Yes
| Yes
| 
|-
| Hibernates?
| Yes (most of the time)
| Yes
| 
|-
| Sleep
| Yes
| Yes
| 
|-
| Dim monitor on battery
| Seems to brighten slightly! Same in windows
| As Edgy
| 
|-
| Blank monitor on inactivity
| Yes
| Yes
| 
|-
| Lid Close
| Yes
| Yes
| 
|-
| Cpu frequency scaling
| Yes
| Yes
| 
|-
| <-4> '''Sound'''
|-
| Sound works?
| Yes, with issues*
| As Edgy
| <nowiki>[[https://bugs.launchpad.net/ubuntu/+bug/84616|bug #84616]]</nowiki> <nowiki>[[https://bugtrack.alsa-project.org/alsa-bug/view.php?id=2725|alsa-bug #2725]]</nowiki>
|-
| Correct volume?
| No
| As Edgy
| <nowiki>[[https://bugs.launchpad.net/ubuntu/+bug/84616|bug #84616]]</nowiki><nowiki>[[https://bugtrack.alsa-project.org/alsa-bug/view.php?id=2725|alsa-bug #2725]]</nowiki>
|-
| Hardware volume switch
| Yes
| Yes
| 
|-
| Headphone jack
| Yes
| Yes
| 
|-
| Mic jack
| Yes
| Yes
| <nowiki>[[https://bugs.launchpad.net/ubuntu/+bug/84616|bug #84616]]</nowiki><nowiki>[[https://bugtrack.alsa-project.org/alsa-bug/view.php?id=2725|alsa-bug #2725]]</nowiki>
|-
| <-4> '''Networking'''
|-
| Wired NIC
| Yes
| Yes
| 
|-
| Wireless NIC
| Yes
| Yes
| 
|-
| PCMCIA NIC
| Untested
| Untested
| 
|-
| Firewire
| Yes
| Untested
| 
|-
| Modem
| No?
| Untested
| 
|-
| <-4> '''Touchpad & Mice'''
|-
| Touchpad
| Yes
| Yes
| 
|-
| Touchpad - Doubletap = double click
| Yes
| Yes
| 
|-
| Touchpad - Scroll down side
| Yes
| Yes
| 
|-
| Touchpad - turned off while typing
| No*
| No*
| 
|-
| External mouse - USB
| Yes
| Yes
| 
|-
| <-4> '''Docking Station/Port Replicator'''
|-
| AC through replicator
| Untested
| Untested
| 
|-
| USB
| Untested
| Untested
| 
|-
| Serial
| Untested
| Untested
| 
|-
| Parallel
| Untested
| Untested
| 
|-
| External Monitor - VGA
| Untested
| Untested
| 
|-
| External Monitor - DVI
| Untested
| Untested
| 
|-
| Modem
| Untested
| Untested
| 
|-
| NIC
| Untested
| Untested
| 
|-
| PS/2
| Untested
| Untested
| 
|-
| <-4> '''Additional Hardware'''
|-
| CD/DVD drive
| Yes
| Yes
| 
|-
| PCMCIA cards
| Untested
| Untested
| 
|-
| Card reader(s)
| xD card (No), SD (Yes), others (Untested)
| As Edgy
| 
|}

{| class="wikitable"
|-
| <-6 tablewidth="75%"> '''Function and other keys'''
|-
| <|2> '''Fn key'''
| <|2> '''Operation'''
| <|2> '''Keycode'''
| <-2> '''Works?'''
| <|2> Bug #
|-
| in Edgy?
| in Feisty (current stable)?
|-
| + Esc
| Mute
| 
| Yes
| Yes
| 
|-
| + F1
| Volume Down
| 
| Yes
| Yes
| 
|-
| + F2
| Volume Up
| 
| Yes
| Yes
| 
|-
| + F4
| Sleep
| e017
| Unaffected*
| Yes
| <nowiki>[[https://launchpad.net/ubuntu/+source/hotkey-setup/+bug/84625|bug #84625]]</nowiki>
|-
| + F5
| Toggle WLAN
| e016
| Unaffected*
| Unaffected*
| <nowiki>[[https://launchpad.net/ubuntu/+source/hotkey-setup/+bug/84625|bug #84625]]</nowiki>
|-
| + F7
| Toggle external monitor
| 
| Yes
| Yes
| 
|-
| + F10
| Brightness Down
| 
| Yes
| Yes
| 
|-
| + F11
| Brightness Up
| 
| Yes
| Yes
| 
|-
| + F12
| Hibernate
| e018
| Unaffected*
| Yes
| <nowiki>[[https://launchpad.net/ubuntu/+source/hotkey-setup/+bug/84625|bug #84625]]</nowiki>
|-
| + Arrow``Up
| Media Stop
| 
| Yes
| Unaffected
| 
|-
| + Arrow``Down
| Media Play/Pause
| 
| Yes
| Unaffected
| 
|-
| + Arrow``Right
| Media Next
| 
| Yes
| Unaffected
| 
|-
| + Arrow``Left
| Media Previous
| 
| Yes
| Unaffected
| 
|-
| + Pg``Up
| Home
| 
| Yes
| Yes
| 
|-
| + Pg``Down
| End
| 
| Yes
| Yes
| 
|-
| Numpad keys
| 
| 
| Yes
| Yes
| 
|-
| <-6> '''Other special keys'''
|-
| <|2> '''Key'''
| <|2> '''Operation'''
| <|2> '''Keycode'''
| <-2> '''Works?'''
| <|2> Bug #
|-
| in Edgy?
| in Feisty (current stable)?
|-
| Lenovo Care
| User Programmable Key
| e034
| Yes*
| Yes*
| <nowiki>[[https://launchpad.net/ubuntu/+source/hotkey-setup/+bug/84625|bug #84625]]</nowiki>
|-
| Mute
| Mute
| 
| Yes
| Yes
| 
|-
| Volume Down
| Volume -
| 
| Yes
| Yes
| 
|-
| Volume Up
| Volume +
| 
| Yes
| Yes
| 
|}

==== Notes ====

=== Sound ===

The sound is now fixed, here's how to get it working, I have done this in Feisty as it is now the current release, it should work for Edgy. Make sure the on-board modem is enabled in the BIOS.

'''Note:''' If you would rather not recompile ALSA yourself, you can download the requisite kernel modules, built from the latest ALSA development sources from the Mercurial repos (as of 20070519), <nowiki>[[http://codepolice.org/files/alsa-hg-hda-intel.tar.gz|here]]</nowiki>. This is rather hackish, but should work with Feisty with the latest updates -- no guarantees, however. Install as follows, and then restart the computer:
<pre>
cd /lib/modules/`uname -r`
sudo tar zxvf ~/alsa-hg-hda-intel.tar.gz (or path to downloaded file)
sudo depmod -a
</pre>

Otherwise, you'll need to install a few necessary build tools. Download the latest alsa-rc driver,lib and utils source.
Download a patch from the ALSA bugtracking system, copy the patch to the alsa-driver source directory, compile and install the alsa packages, insert the new module et voila!

This is intended as a copy&paste howto. You have to use Shift+Insert to paste into the Terminal.

This should get easier as time goes on and the patch gets commited. '''Note:''' The patch has been committed - an updated version of this page's description can be found on <nowiki>[[LaptopTestingTeam-Lenovo3000N100_FPG]]</nowiki>.

To start install some required build tools, open up a terminal (Accessories>Terminal) and:
<pre>
sudo apt-get install build-essential ncurses-dev gettext
</pre>
and then:
<pre>
sudo apt-get install linux-headers-`uname -r`
</pre>

Now we need to download the alsa packages and the patch. Make a temporary directory in your home directory:
<pre>
cd ~
mkdir alsa-src
cd alsa-src
wget ftp://ftp.alsa-project.org/pub/driver/alsa-driver-1.0.14rc3.tar.bz2
wget ftp://ftp.alsa-project.org/pub/lib/alsa-lib-1.0.14rc3.tar.bz2
wget ftp://ftp.alsa-project.org/pub/utils/alsa-utils-1.0.14rc2.tar.bz2
</pre>
Then we untar, apply the patch, and compile each one, Its best to stop alsa at this point.:

<pre>
sudo /etc/init.d/alsa-utils stop

tar xvf alsa-driver-1.0.14rc3.tar.bz2
tar xvf alsa-lib-1.0.14rc3.tar.bz2
tar xvf alsa-utils-1.0.14rc2.tar.bz2</pre>

The patch will have to be downloaded from ALSA bugtrack in a browser it seems. The file required is realtek6.tar.gz (this may have been updated since writing) Heres the<nowiki>[[https://bugtrack.alsa-project.org/alsa-bug/file_download.php?file_id=1955&type=bug|link.]]</nowiki>(direct link to file)

Download then move it to the same directory as the alsa packages "~/alsa-src"
You should be in "~/alsa-src" and have the file realtek6.tar.gz ready in that directory.
<pre>
cd ~/alsa-src
tar xvf realtek6.tar.gz
</pre>
Now we copy it over to the alsa-driver source directory:
<pre>
cp patch_realtek.c ~/alsa-src/alsa-driver-1.0.14rc3/alsa-kernel/pci/hda/
</pre>
Now we can compile the alsa packages:
<pre>
cd alsa-driver-1.0.14rc3
./configure --with-cards=hda-intel
make
sudo make install

cd ../alsa-lib-1.0.14rc3
./configure
sudo make install

cd ../alsa-utils-1.0.14rc2
./configure
sudo make install</pre>

Now we remove the old and insert the new alsa module:
<pre>
sudo modprobe -r snd-hda-intel && sudo modprobe snd-hda-intel
</pre>

Note: If you get a message saying "FATAL: Module snd-hda-intel in use" be sure that the Alsa driver has been stopped using:
<pre>
sudo /etc/init.d/alsa-utils stop
</pre>
Or
<pre>
sudo /etc/init.d/alsasound stop
</pre>

Which line you use depends on if you are installing on a fresh install (the first) or over a previous Alsa compile.

You should now have working speakers!

One final tweak I had to do to get recording working as expected was to open up the gnome volume control/mixer. Go to edit>preferences and tick the input source track to be visible.
This gives a new tab called options on the mixer where it is possible to choose the record source. Frontmic is for the internal mic, Mic for the external input, Line isn't used (will be removed in next patch) and CD is for...thats right cd.

If you ''still'' do not have sound, you may need to append the following line to /etc/modprobe.d/alsa-base:
<pre>
options snd-hda-intel single_cmd=1 model=laptop-eapd
</pre>

Big thanks to pshou at the ALSA bug tracker for the patches.

Thanks also to agklein for suggestions and pointing out a typo!

=== cpufreq applet ===
''from'' <nowiki>[[LaptopTestingTeam-Lenovo3000N100_0768]]</nowiki> -Thanks <nowiki>[[Dhenry]]</nowiki>

By default, the system controls itself the CPU frequencies (it gives more if needed), which is perfect for most people. If you want to control manually the CPU frequencies and governors with the applet, you must execute it with superuser privileges. In order to do this, run this command:
<pre>
sudo dpkg-reconfigure gnome-applets
</pre>

=== Function keys and special keys ===
''from'' <nowiki>[[LaptopTestingTeam-Lenovo3000N100_0768]]</nowiki> -Thanks <nowiki>[[Dhenry]]</nowiki>

'''Update:''' Sleep and Hibernate buttons are working fine in Feisty

There are four Fn keys which aren't working out of the box, but user can set them with the ''setkeycodes'' command. There is also a special “Lenovo Care” button, which can be set via this command. However, I don't know yet how to affect the Fn keys to the task there should do (sleep, toggle WLAN, switch display and hibernate).

Here is an example of how to activate the Lenovo Care button (scancode = e034):
<pre>
setkeycodes e034 129
</pre>

It will attach the keycode “129” to it, then you can configure it in Gnome keybinding properties (if you use Gnome).

In order to get the keys recognized after each boot, you must put these lines in an init script (in /etc/init.d/):
<pre>
setkeycodes e034 129
setkeycodes e017 130
setkeycodes e016 131
setkeycodes e041 132
setkeycodes e018 133
exit 0
</pre>

=== Touchpad ===

Quicktip: Hopefully not stating the obvious here, if you're looking for the middle click, you just have to click both buttons.

To get the most out of the touchpad and to configure sensitivity, tap to click etc it is easiest to install gsynaptic/qsynaptic/ksynaptic.

First you need to add a line to xorg.conf. Do the following:
<pre>
cd /etc/X11
sudo cp xorg.conf xorg.conf_synbackup  ## backup old xorg.conf to something memorable
sudo nano xorg.conf  ## you could use gedit here
</pre>

You need to add the line:
<pre>
 Option "SHMConfig" "on"
</pre>
To the section beginning with:
<pre>
Section "InputDevice"
        Identifier  "Synaptics Touchpad"
</pre>
Then its just a matter of installing the right synaptics for your window manager, for example Gnome:
<pre>
sudo apt-get install gsynaptics
</pre>
You can then go into System/Preferences/Touchpad and tweak away.
==== Disable Touchpad whilst typing ====

It is also possible to disable the touchpad whilst typing to avoid random selections and such from leaning on it.

This assumes that you have done the previous step of adding the line to your xorg.conf. If you haven't, do it.

All that is needed is to add the following line to your startup programs (System/Preferences/Sessions)
<pre>
syndaemon -i 1 -d
</pre>
This disables the touchpad for 1 second when a key is pressed.

=== Intel video driver with modesetting/Xrandr 1.2 ===
''from'' <nowiki>[[LaptopTestingTeam-Lenovo3000N100_0768]]</nowiki> -Thanks <nowiki>[[Dhenry]]</nowiki> - Check for updated info

<nowiki>[[http://fooishbar.org/|Daniel Stone]]</nowiki> has made Edgy packages for the intel modesetting video driver and Xrandr 1.2. Thanks to this new driver, we can get rid of ''915resolution'', correct modes will be automatically detected. Also, Xrandr 1.2 allows you to manage easily your outputs at run time (no need to reconfigure Xorg.conf and restart Xorg). Xrandr will let you handle three outputs on this laptop: LVDS (the laptop's screen), VGA (the VGA output) and TV (the TV-Out). See ''xrandr''``'s manpage for how to use it.

This is cool stuff, '''but still experimental''', they may blow up your machine, use at your own risk!

The repository is here: (add this line to /etc/apt/sources.list)
<pre>
deb http://www.fooishbar.org/packages/ randr-1.2/edgy/i386/
</pre>

You'll have to upgrade those packages:
<pre>
libdrm2 libgl1-mesa-dev libgl1-mesa-dri libgl1-mesa-glx libglu1-mesa libglu1-mesa-dev libxrandr-dev libxrandr2 mesa-common-dev 11proto-randr-dev xrandr xserver-xorg-core
</pre>

And install this one:
<pre>
xserver-xorg-video-intel
</pre>

If you want to go back to edgy's original driver, just uninstall the ''xserver-xorg-video-intel'' package. Xrandr will not work without it, so you'll have to reinstall edgy's packages (mesa, xrandr, etc.) if you want your Xrandr 1.1 to go back.

----
CategoryLaptop
