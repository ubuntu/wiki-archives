{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

Here are two xorg.conf files which work with the Lenovo 3000 N100 - 0768 B9G. The first is a clean version of the generated xorg.conf at installation, the second is more complex and supports external monitor through the VGA output (clone and extended desktop).

{| class="wikitable"
|-
| <bgcolor="#dddddd"><nowiki>[[https://wiki.ubuntu.com/htdocs/ubuntu/img/attention.png]]</nowiki> '''Note:''' the following xorg configurations use the ''i810'' driver.<<BR>>With Gutsy (and newer), you can use the newer ''intel'' driver which implements modesetting, randr 1.2+ and other cool stuff.<<BR>>Therefore, the following xorg configurations are a bit outdated.
|}

{| class="wikitable"
|-
| <bgcolor="#dddddd"><nowiki>[[https://wiki.ubuntu.com/htdocs/ubuntu/img/attention.png]]</nowiki> '''Note:''' configuring xorg for dual-head via /etc/X11/xorg.conf is now outdated (can we even consider it deprecated?).<<BR>>With Gutsy (and newer), you can configure VGA and TV outputs with ''xrandr'' at runtime.
|}

If you have better configurations for this laptop, feel free to edit this page. The TV-Out hasn't been enabled/tested yet.

=== Simple xorg.conf ===

I removed all the wacom tablet stuff and added the composite extension.

<pre>

Section "Files"
	FontPath	"/usr/share/fonts/X11/Type1"
	FontPath	"/usr/share/fonts/X11/100dpi"
	FontPath	"/usr/share/fonts/X11/75dpi"
	FontPath	"/usr/share/fonts/X11/misc"
	FontPath	"/usr/share/fonts/X11/encodings"
# path to defoma fonts
	FontPath	"/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
EndSection

Section "Module"
	Load	"i2c"
	Load	"bitmap"
	Load	"ddc"
	Load	"dri"
	Load	"extmod"
	Load	"freetype"
	Load	"glx"
	Load	"int10"
	Load	"type1"
	Load	"vbe"
EndSection

Section "InputDevice"
	Identifier	"Generic Keyboard"
	Driver		"kbd"
	Option		"CoreKeyboard"
	Option		"XkbRules"	"xorg"
	Option		"XkbModel"	"pc105"
	Option		"XkbLayout"	"fr"
	Option		"XkbOptions"	"lv3:ralt_switch"
EndSection

Section "InputDevice"
	Identifier	"Configured Mouse"
	Driver		"mouse"
	Option		"CorePointer"
	Option		"Device"		"/dev/input/mice"
	Option		"Protocol"		"ExplorerPS/2"
	Option		"ZAxisMapping"		"4 5"
	Option		"Emulate3Buttons"	"true"
EndSection

Section "InputDevice"
	Identifier	"Synaptics Touchpad"
	Driver		"synaptics"
	Option		"SendCoreEvents"	"true"
	Option		"Device"		"/dev/psaux"
	Option		"Protocol"		"auto-dev"
	Option		"HorizScrollDelta"	"0"
EndSection

Section "Device"
	Identifier	"Intel Corporation Mobile Integrated Graphics Controller"
	Driver		"i810"
	BusID		"PCI:0:2:0"
EndSection

Section "Monitor"
	Identifier	"Generic Monitor"
	Option		"DPMS"
EndSection

Section "Screen"
	Identifier	"Default Screen"
	Device		"Intel Corporation Mobile Integrated Graphics Controller"
	Monitor		"Generic Monitor"
	DefaultDepth	24
	SubSection "Display"
		Depth		1
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		4
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		8
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		15
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		16
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		24
		Modes		"1280x800"
	EndSubSection
EndSection

Section "ServerLayout"
	Identifier	"DefaultLayout"
	Screen		"Default Screen"
	InputDevice	"Generic Keyboard"
	InputDevice	"Configured Mouse"
	InputDevice	"Synaptics Touchpad"
EndSection

Section "DRI"
	Mode	0666
EndSection

Section "Extensions"
	Option	"Composite"	"Enable"
EndSection
</pre>

=== Enable external monitor ===

I haven't found a good method for enabling/disabling external monitor at run time (the Fn+F7 button doesn't work), so you have to edit the xorg.conf file each time... In the section “Server``Flags“ (at the end of the file), chose the default layout you want to use (the “Default``Server``Layout” option):
* DefaultLayout
* DualHeadClone
* DualHeadSeparate

You can also enable Xinerama so you can move windows from one screen to the other. NOTE that there is no direct-rendering when Xinerama is enabled! I noticed that GLX applications make the X server crash in Dual-Head Separate mode.

This configuration turns on Composite. All the wacom tablet stuff has been removed. This configuration file has been inspired by the <nowiki>[[HowtoSetupExternalMonitorForIntel915]]</nowiki> page.

<pre>

Section "Files"
	FontPath	"/usr/share/fonts/X11/Type1"
	FontPath	"/usr/share/fonts/X11/100dpi"
	FontPath	"/usr/share/fonts/X11/75dpi"
	FontPath	"/usr/share/fonts/X11/100dpi/:unscaled"
	FontPath	"/usr/share/fonts/X11/75dpi/:unscaled"
	FontPath	"/usr/share/fonts/X11/misc"
	FontPath	"/usr/share/fonts/X11/encodings"
# path to defoma fonts
	FontPath	"/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
EndSection

Section "Module"
	Load	"i2c"
	Load	"bitmap"
	Load	"ddc"
	Load	"dri"
	Load	"extmod"
	Load	"freetype"
	Load	"glx"
	Load	"int10"
	Load	"type1"
	Load	"vbe"
EndSection

Section "InputDevice"
	Identifier	"Generic Keyboard"
	Driver		"kbd"
	Option		"CoreKeyboard"
	Option		"XkbRules"	"xorg"
	Option		"XkbModel"	"pc105"
	Option		"XkbLayout"	"fr"
	Option		"XkbOptions"	"lv3:ralt_switch"
EndSection

Section "InputDevice"
	Identifier	"Configured Mouse"
	Driver		"mouse"
	Option		"CorePointer"
	Option		"Device"		"/dev/input/mice"
	Option		"Protocol"		"ExplorerPS/2"
	Option		"ZAxisMapping"		"4 5"
	Option		"Emulate3Buttons"	"true"
EndSection

Section "InputDevice"
	Identifier	"Synaptics Touchpad"
	Driver		"synaptics"
	Option		"SendCoreEvents"	"true"
	Option		"Device"		"/dev/psaux"
	Option		"Protocol"		"auto-dev"
	Option		"HorizScrollDelta"	"0"
EndSection

Section "Device"
	Identifier	"Intel 945GM Express (Default)"
	Driver		"i810"
	BusID		"PCI:0:2:0"
	VideoRam	131072
EndSection

Section "Device"
	Identifier	"Intel 945GM Express (Clone)"
	Driver		"i810"
	BusID		"PCI:0:2:0"
	Option          "MonitorLayout"		"CRT,LFP"
	Option          "Clone"			"true"
	VideoRam	131072
EndSection

Section "Device"
	Identifier	"Intel 945GM Express (Separate: LFP)"
	Driver		"i810"
	BusID		"PCI:0:2:0"
	Option          "MonitorLayout"		"CRT,LFP"
	VideoRam	131072
	Screen 0
EndSection

Section "Device"
	Identifier	"Intel 945GM Express (Separate: CRT)"
	Driver		"i810"
	BusID		"PCI:0:2:0"
	VideoRam	131072
	Screen 1
EndSection

Section "Monitor"
	Identifier	"Generic Monitor"
	Option		"DPMS"
EndSection

Section "Monitor"
	Identifier	"External Monitor"
	Option		"DPMS"
EndSection

Section "Screen"
	Identifier	"Default Screen"
	Device		"Intel 945GM Express (Default)"
	Monitor		"Generic Monitor"
	DefaultDepth	24
	SubSection "Display"
		Depth		1
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		4
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		8
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		15
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		16
		Modes		"1280x800"
	EndSubSection
	SubSection "Display"
		Depth		24
		Modes		"1280x800"
	EndSubSection
EndSection

Section "Screen"
	Identifier	"Default Screen (Clone)"
	Device		"Intel 945GM Express (Clone)"
	Monitor		"Generic Monitor"
	DefaultDepth	24
	SubSection "Display"
		Depth		24
		Modes		"1280x800"
	EndSubSection
EndSection

Section "Screen"
	Identifier	"External Screen (Clone)"
	Device		"Intel 945GM Express (Clone)"
	Monitor		"External Monitor"
	DefaultDepth	24
	SubSection "Display"
		Depth		24
		Modes		"1280x1024" "1280x800" "1024x768"
	EndSubSection
EndSection

Section "Screen"
	Identifier	"LFP Screen (Separate)"
	Device		"Intel 945GM Express (Separate: LFP)"
	Monitor		"Generic Monitor"
	DefaultDepth	24
	SubSection "Display"
		Depth		24
		Modes		"1280x800"
	EndSubSection
EndSection

Section "Screen"
	Identifier	"CRT Screen (Separate)"
	Device		"Intel 945GM Express (Separate: CRT)"
	Monitor		"External Monitor"
	DefaultDepth	24
	SubSection "Display"
		Depth		24
		Modes		"1280x1024" "1280x800" "1024x768"
	EndSubSection
EndSection

Section "ServerLayout"
	Identifier	"DefaultLayout"
	Screen		"Default Screen"
	InputDevice	"Generic Keyboard"
	InputDevice	"Configured Mouse"
	InputDevice	"Synaptics Touchpad"
EndSection

Section "ServerLayout"
	Identifier	"DualHeadClone"
	Screen		"Default Screen (Clone)"
	Screen		"External Screen (Clone)"
	InputDevice	"Generic Keyboard"
	InputDevice	"Configured Mouse"
	InputDevice	"Synaptics Touchpad"
EndSection

Section "ServerLayout"
	Identifier	"DualHeadSeparate"
	Screen 0	"LFP Screen (Separate)" 0 0
	Screen 1	"CRT Screen (Separate)" RightOf "LFP Screen (Separate)"
	InputDevice	"Generic Keyboard"
	InputDevice	"Configured Mouse"
	InputDevice	"Synaptics Touchpad"
EndSection

Section "ServerFlags"
	Option "DefaultServerLayout"	"DefaultLayout"
	Option "Xinerama"		"false"
EndSection

Section "DRI"
	Mode	0666
EndSection

Section "Extensions"
	Option	"Composite"	"Enable"
EndSection
</pre>

You can also edit the ''/etc/gdm/gdm.conf-custom'' file. After the ''[servers]'' section, add these lines:
{{{
[server-Standard]
name=Standard server
command=/usr/X11R6/bin/X -br -audit 0 -layout \"DefaultLayout\"
flexible=true

[server-Separate]
name=Separate Heads
command=/usr/bin/X -br -audit 0 -layout \"DualHeadSeparate\"
flexible=true

[server-Clone]
name=Clone Heads
command=/usr/bin/X -br -audit 0 -layout \"DualHeadClone\"
flexible=true}}}

Then you can chose which layout to use in gdmsetup (System → Administration → Login Manager, “Security” tab, “Configure X Server” button). Changes will take effect next time GDM will restart (and not only Ctrl-Alt-Backspace!).

I'm looking at how to be able to chose the layout at the GDM login screen (like when you chose the Desktop Environment). If you know how, please edit the page :-)
