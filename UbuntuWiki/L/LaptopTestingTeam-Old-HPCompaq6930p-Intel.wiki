{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


Contact: wanchai, MattPerry

Make: HP

Brand: EliteBook

Model: 6930p

Website: http://h10010.www1.hp.com/wwpc/us/en/sm/WF25a/321957-321957-64295-3740645-3955549-3688868.html

=== Current Issues ===

'''Sound:''' After a new install of Ubuntu 8.10 or 9.04, there is no sound on the built-in speakers (see ''Audio'' below). 
In Ubuntu 9.10 and 10.04, sound works out of the box. In 10.10, the internal microphone does not work out of the box (see ''Audio'' below).

'''Fingerprint:''' The fingerprint reader is not supported.

=== System Info ===

HP 6930p, model FL490AW

This model comes with a Mobile Intel GMA 4500MHD video card.  (Other 6930p models have an ATI card.)

=== Hardware details ===

{| class="wikitable"
|-
| <-7 tablewidth="75%"> '''Screen & Monitors'''
|-
| <|2> '''Device'''
| <-5> '''Works?'''
| <|2> '''Bug #'''
|-
| in Ubuntu 8.10
| 9.04
| 9.10
| 10.04 &beta;1
| 10.10
|-
| Screen
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Correct resolution
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Correct refresh rate
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| 3D Acceleration
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| External monitor works
| Yes
| Yes
| Yes
| No high resolution
| Yes
| <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-video-intel/+bug/524299|524299]]</nowiki>
|-
| External monitor - mirrors
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| External monitor - extend desktop
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Compiz
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| <-7> '''Power Management'''
|-
| Battery detection
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Hibernation
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Suspend
| Yes
| Yes
| Yes, after upgrade
| Yes
| Yes
| 
|-
| Dim monitor on battery
| No
| Yes
| Yes
| Yes
| Yes
| 284319
|-
| Blank monitor on inactivity
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Lid Close
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| CPU frequency scaling
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| <-7> '''Sound & Video'''
|-
| Sound
| Yes, after manual fix
| Yes, same fix
| Yes
| Yes
| Yes
| 284319, 269027
|-
| Correct volume
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Hardware volume switch
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Hardware mute switch
| Yes, after manual fix
| Yes, same fix
| Yes
| Yes
| Yes
| 284319, 269027
|-
| Headphone jack
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Internal Microphone
| Yes
| Yes
| Yes
| Yes
| Yes, after fix
| 
|-
| Mic jack
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Webcam
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| <-7> '''Networking'''
|-
| Wired NIC
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Wireless NIC
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| IEEE 1394
| Yes, see ''IEEE 1394''
| Yes, see ''IEEE 1394''
| Yes
| Yes
| Yes, see ''IEEE 1394''
| 
|-
| Bluetooth
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Modem
| Yes, see ''Modem''
| Yes, see ''Modem''
| No, see ''Modem''
| Untested
| Untested
| 
|-
| Infrared
| n/a
| n/a
| n/a
| n/a
| n/a
| 
|-
| <-7> '''Touchpad & Mice'''
|-
| Touchpad
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Touchpad - Tap = click
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Touchpad - Scroll down side
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Touchpad - Two Finger
| 
| Yes, see ''Touchpad''
| 
| No
| Yes, see ''Touchpad''
| 
|-
| External mouse - USB
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| External mouse - Serial
| n/a
| n/a
| n/a
| n/a
| n/a
| 
|-
| <-7> '''Docking Station/Port Replicator'''
|-
| AC through replicator
| Untested
| Yes
| Untested
| Yes
| Untested
| 
|-
| USB
| Untested
| Yes
| Untested
| Yes
| Untested
| 
|-
| Serial
| Untested
| Untested
| Untested
| Untested
| Untested
| 
|-
| Parallel
| Untested
| Untested
| Untested
| Untested
| Untested
| 
|-
| External Monitor - VGA
| Untested
| Yes
| Untested
| Untested
| Untested
| 
|-
| External Monitor - DVI
| Untested
| Untested
| Untested
| Untested
| Untested
| 
|-
| Modem
| Untested
| Untested
| Untested
| Untested
| Untested
| 
|-
| NIC
| Untested
| Untested
| Untested
| Untested
| Untested
| 
|-
| PS/2
| Untested
| Untested
| Untested
| Untested
| Untested
| 
|-
| <-7> '''Additional Hardware'''
|-
| Fingerprint reader
| No
| No
| No
| No
| No
| 
|-
| CD/DVD drive
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| PCMCIA cards
| n/a
| n/a
| n/a
| n/a
| n/a
| 
|-
| Express cards
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| Parallel Ports
| n/a
| n/a
| n/a
| n/a
| n/a
| 
|-
| MMC/SD Card reader
| Yes, after upgrade
| Yes
| Yes
| Yes
| Yes
| 311932
|-
| SmartCard reader
| Untested
| Untested
| Untested
| Untested
| Untested
| 
|}

{| class="wikitable"
|-
| <-9 tablewidth="75%"> '''Function and other keys'''
|-
| <|2> '''Fn key'''
| <|2> '''Operation'''
| <|2> '''Keycode'''
| <-5> '''Works?'''
| <|2> Bug #
|-
| in Ubuntu 8.10
| 9.04
| 9.10
| 10.04 &beta;1
| 10.10
|-
| + Space
| 
| 
| 
| 
| 
| 
| 
| 
|-
| + Esc
| 
| 
| 
| 
| 
| 
| 
| 
|-
| + F1
| 
| 
| 
| 
| 
| 
| 
| 
|-
| + F2
| 
| 
| 
| 
| 
| 
| 
| 
|-
| + F3
| Suspend
| 150
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| + F4
| Ext Monitor
| 235
| No
| Yes
| Yes
| Yes
| Yes
| 
|-
| + F5
| 
| 
| 
| 
| 
| 
| 
| 
|-
| + F6
| Lock Screen
| 160
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| + F7
| 
| 
| 
| 
| 
| 
| 
| 
|-
| + F8
| Battery Status
| 244
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| + F9
| Brightness Down
| 232
| No
| Yes
| Yes
| Yes
| Yes
| 284319
|-
| + F10
| Brightness Up
| 233
| No
| Yes
| Yes
| Yes
| Yes
| 284319
|-
| + F11
| Ambient Light Sensor on/off
| 199
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|-
| + F12
| 
| 
| 
| 
| 
| 
| 
| 
|-
| <-9> '''Other special keys'''
|-
| <|2> '''Key'''
| <|2> '''Operation'''
| <|2> '''Keycode'''
| <-5> '''Works?'''
| <|2> Bug #
|-
| in Ubuntu 8.10
| 9.04
| 9.10
| 10.04 &beta;1
| 10.10
|-
| Info Button
| no idea
| none
| No
| No
| No
| No
| No
| 
|-
| Presentation Mode Button
| no idea
| 0xC9
| see ''Notes''
| No
| No
| No
| No
| 
|-
| Wireless Button
| Wireless on/off
| 
| Yes
| Yes
| Yes
| Yes
| Yes
| 
|}
=== Screen Brightness ===
==== Ubuntu 8.10 ====
The brightness problem isn't solved yet (https://bugs.launchpad.net/ubuntu/+source/linux/+bug/284319), but creating a file ''/usr/share/hal/fdi/information/20thirdparty/30-keymap-private.fdi'' with the following content enabled the Fn F9/F10 keys:
<pre>
<?xml version="1.0" encoding="ISO-8859-1"?> <!-- -*- SGML -*- -->

<deviceinfo version="0.2">
  <device>

    <match key="@input.originating_device:info.linux.driver" string="atkbd">
      <match key="/org/freedesktop/Hal/devices/computer:system.hardware.vendor" prefix="Hewlett-Packard">
        <match key="/org/freedesktop/Hal/devices/computer:system.hardware.product" contains="6930p">
          <!-- HP Compaq 6930p -->
          <append key="input.keymap.data" type="strlist">e012:brightnessdown</append> <!-- FnF9 (brightness down) -->
          <append key="input.keymap.data" type="strlist">e017:brightnessup</append> <!-- FnF10 (brightness up) -->
        </match>
      </match>
    </match>
  </device>
</deviceinfo>
</pre>

When you have this file, you'll see the OSD when you press Fn F9/F10. After issuing the following command, these keys will actually work:
<pre>
xrandr --output LVDS --set BACKLIGHT_CONTROL native
</pre>
This helps if you boot with A/C power. If you boot on battery, the display will remain dimmed until you reboot with A/C power.

=== SD/MMC Card ===
==== Ubuntu 8.10 ====

The SD/MMC card reader works since kernel 2.6.27-14 which was released on 2009-03-13.

If you want to use an older kernel, you would have to compile your own with a replacement of the Ricoh driver from  http://git.kernel.org/?p=linux/kernel/git/drzeus/mmc.git;a=commit;h=0527a60c2b6bd7ab20e82cc5e488659e20eaaacd

=== Audio ===
==== Ubuntu 8.10 and 9.04 ====
The audio can be fixed as described in https://bugs.launchpad.net/ubuntu/+source/linux/+bug/269027. Adding the following line to ''/etc/modprobe.d/options'' was all that was needed in my case:
<pre>
options snd-hda-intel model=mobile
</pre>

==== Ubuntu 10.10 ====
The internal microphone works only if ''/etc/modprobe.d/options.conf'' contains the line
<pre>
options snd-hda-intel model=mobile
</pre>

=== IEEE 1394 (Firewire) ===

The IEEE 1394 interface (aka Firewire) works out of the box. However, regular users may not have permission to access the device. I tested with a film scanner that showed up as ''/dev/sg2'' with permissions 660. It's owner was ''root'', and in Ubuntu 8.10 the group was ''scanner''. After adding myself to the ''scanner'' group, I was able to use the device.

In Ubuntu 9.04, the ''scanner'' group does not exist anymore, now ''/dev/sg2'' belongs to group ''root''. The obvious quick fix of changing the permissions to 666 didn't work, the scanner software could not detect the scanner. After creating a file
''/lib/udev/rules.d/50-udev-scanner.rules'' containing a single line
<pre>
SUBSYSTEMS=="scsi", ATTRS{type}=="6", GROUP="plugdev"
</pre>
everything worked fine. Of course, ''plugdev'' can be replaced by any other group that you have access to.

In Ubuntu 9.10 and 10.04, my scanner works out of the box, no special udev rules required.

In Ubuntu 10.10 (64bit), we're back to the same behaviour as in 9.04, i.e. we need a udev-scanner rule.

Ubuntu does not create a ''/dev/raw1394'' device. If you need that, you need to ''modprobe raw1394'' or add ''raw1394'' to ''/etc/modules''.

=== Modem ===

Softmodems are an adventure in Linux. This laptop has a modem implemented as part of the sound card. Therefore, it could work with the Smartlink software modem daemon ''sl-modem-daemon'' (it's in the repository) together with the standard sound driver ''snd-hda-intel''. However, this machine uses LSI's (formerly Agere) modem chip 0x11C11040 which isn't supported.

The instructions found at http://linmodems.technion.ac.il/bigarch/archive-eighth/msg03863.html work 
for Ubuntu 8.10 and 9.04. Currently they do not work in Ubuntu 9.10 because the compilation of the kernel
modules for the modem fails.

Here is the skinny:

* Install package ''dkms'' from the Ubuntu repository.

* wget http://linux.zsolttech.com/linmodem/agrsm/dkms-agrsm_2.1.80-5_i386.deb

* dpkg -i dkms-agrsm_2.1.80-5_i386.deb

* modprobe agrmodem

* modprobe agrserial

* If everything goes fine, there will be a line "Hello Agere Driver" in ''/var/log/messages'' and ''ls -l /dev/ttyAG*'' should show you something.

* Try minicom or another terminal program with the ''ttyAG*'' device.

With minicom I was able to connect to an mgetty running on my server. However, the dialing process is completely quiet, you don't hear ringback and you can't hear the modems negotiating.

Another method that involves recompiling the sound module is described in: http://linmodems.technion.ac.il/packages/ltmodem/11c11040/HOWTO-Agere-11c11040-HDA.html   ~-(This procedure did not work for me when I tested it with 9.04 Beta. After recompiling the kernel and applying patches to the modem software I managed to get the ''agr'' modules compiled and inserted, but then minicom segfaulted. Apparently, this is a problem with the sound driver.)-~

=== Touchpad ===
==== Ubuntu 9.04 ====
Some touchpads can recognize more than one finger. This can be used for features such as two-finger-scrolling which
is a nice alternative to scrolling at the right edge of the touchpad, or tapping with two or three fingers to emulate
mouse buttons 2 and 3. You can check whether your touchpad supports multiple fingers by running ''synclient -m 10''.
This requires SHMConfig to be enabled (https://help.ubuntu.com/community/SynapticsTouchpad#Enabling%20SHMConfig). 
When you run this, you'll get the coordinates, the touch pressure, the number of fingers ''f'', the width of your finger(s) ''w'' and a few others.

On my machine, ''f'' is always 1. However, ''w'' changes when I use two fingers. Debian Sid has a newer version of the synaptics driver that allows you to define a threshold for ''w'' that distinguishes one or two fingers. See here for details: http://ubuntuforums.org/showpost.php?p=7253159&postcount=17. This works fine on my laptop. Big thanks to the author of that post.

==== Ubuntu 10.10 ====
Ubuntu 10.10 does not use HAL anymore. Therefore, the link given above is not applicable anymore. A two-finger emulation can now
be enabled by adding the following lines at the end of the ''Input Class'' section  in ''/usr/share/X11/xorg.conf.d/50-synaptics.conf'':
<pre>
Option "SHMConfig" "on"
Option "EmulateTwoFingerMinZ" "45"
Option "EmulateTwoFingerMinW" "6" 
</pre>
The values for ''MinZ'' and ''MinW'' may differ in your case. Run ''synclient -m 10'' to find the thresholds that work for you.

In principle, it is also possible to set the following option in ''50-synaptics.conf'':
<pre>
Option "TapButton2" "2" 
</pre>
This option specifies that a two-finger tap should be interpreted as a middle-click (see http://manpages.ubuntu.com/manpages/karmic/man4/synaptics.4.html for details). However, it seems that this setting gets overwritten later on, and two-finger taps
result in a right-click event. This can be changed by putting the following into a script that gets executed after every login:
<pre>
synclient TapButton2=2
</pre>

=== Notes ===

The hardware mute button on this machine seems to be rather "physical". Its status is not reflected in the software
volume controls and it affects only the speakers, not the headset.

The Fn+F4 for switching external monitors on and off isn't really needed. In Ubuntu 8.10 the Gnome screen resolution setting does a much better job than before. However, pressing Fn+F4 is much faster, although the resolution might not be exactly what you want. In Ubuntu 9.04 the opposite seems to be true: switching with Fn+F4 works properly,
whereas the gnome-display-properties tool does all sorts of weird things. In Ubuntu 9.10, 10.04 and 10.10 both button and display properties are working fine. However, 10.04 &beta;1 did not recognize make, model and resolution of the external monitor, it offered only resolutions up to 1024x768. Ubuntu 10.10 does not have this problem.

There is no screen lock icon on the F6 key, but the function is there anyway (it's been assigned to this key in ''30-keymap-hp.fdi'').

The Fn+F11 key enables or disables the built-in ambient light detection. This works, but I think the machine does this without involving the OS.

I tested the microphones only after applying the fix described in bug 269027.

The fingerprint reader is an AuthenTec 2810 which apparently isn't supported yet (http://reactivated.net/fprint/wiki/Unsupported_devices#AuthenTec_AES2550_.26_AES2810).

The battery info (Fn+F8) started working after update on 2008-12-09 which included new versions of the gnome-power-manager (2.24.0-0ubuntu8.1) and libx11-6 (2:1.1.5-2ubuntu1.1).

By default, the presentation key (0xC9) does nothing, but in Ubuntu 8.10 I was able to assign its code to the screensaver function in gconf-editor: /apps/gnome_settings_daemon/keybindings. This gave me back the "lock" button that I liked on my older laptop.

----
CategoryLaptop
