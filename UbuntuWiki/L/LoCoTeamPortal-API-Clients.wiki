{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



Starting in version 0.2.11, the Ubuntu !LoCo Directory provides a collection of Restful/JSON APIs for accessing the data it provides.

=== PHP5 Wrapper ===

To get the last version of the client :

`$ bzr branch lp:loco-directory-clients`

/!\ You need to install php5-curl :

`$ sudo apt-get install php5-curl`

/!\ then you have to restart apache :

`$ sudo apache2ctl graceful`

==== Available Services ====
All services support GET requests only, there is no write-support available at this time. Service URLs return Collections of objects if no id is given, or an individual Entity if the entity's id is appended to the end of the url. When using a Collection path, a query string may be used to filter the results using fieldname=value.

Refere to <nowiki>[[LoCoDirectory-API#Available Services|Available Services]]</nowiki>
==== How to use it ? ====
<pre>
<?php
/* the fist thing you need to do is to call the file ldapi.php	*/
include('ldapi.php');

/*
the class LocoDirectory acceptes 3 parameters

@param service                the service you are looking for : teams, global, events...
@param id                     the id of the item you are look for
@param params                 other parameters
* /

$ld = new LocoDirectory('users', '', '');
$ld->execute();
echo $ld->response;

?>
</pre>
==== Examples ====
http://loco.ubuntu.com/services/teams/13/ - Entity URL for the Florida LoCo Team.
<pre>
<?php
include('ldapi.php');
$ld = new LocoDirectory('teams', '13', '');
$ld->execute();
echo $ld->response;
?>
</pre>

http://loco.ubuntu.com/services/teams/?approved=1 - List only Approved LoCo teams
<pre>
<?php
include('ldapi.php');
$ld = new LocoDirectory('teams', '', 'approved=1');
$ld->execute();
echo $ld->response;
?>
</pre>

http://loco.ubuntu.com/services/teams/?countries__name=United+States - List all LoCo teams in the United States
<pre>
<?php
include('ldapi.php');
$ld = new LocoDirectory('teams', '', 'countries__name=United+States');
$ld->execute();
echo $ld->response;
?>
</pre>

http://loco.ubuntu.com/services/global/17/ - Entity URL for the Ubuntu Hour Global Event.
<pre>
<?php
include('ldapi.php');
$ld = new LocoDirectory('global', '17', '');
$ld->execute();
echo $ld->response;
?>
</pre>

http://loco.ubuntu.com/services/global/?date_end__gte=2010-06-21 - List events ending on or after June 21st, 2010.
<pre>
<?php
include('ldapi.php');
$ld = new LocoDirectory('global', '', 'date_end__gte=2010-06-21');
$ld->execute();
echo $ld->response;
?>
</pre>

http://loco.ubuntu.com/services/users/32/ - Entity URL for Michael Hall.
<pre>
<?php
include('ldapi.php');
$ld = new LocoDirectory('users', '32', '');
$ld->execute();
echo $ld->response;
?>
</pre>

http://loco.ubuntu.com/services/users/?groups=13 - List of Users in the Florida LoCo Team.
<pre>
<?php
include('ldapi.php');
$ld = new LocoDirectory('users', '', 'groups=13');
$ld->execute();
echo $ld->response;
?>
</pre>

=== Python Wrapper ===

To get the last version of the client :

`$ bzr branch lp:loco-directory-clients/python-client`

==== Available Services ====
All services support GET requests only, there is no write-support available at this time. Individual entities can be looked up by their ID using the singular methods, or collections can be filtered by passing key=value pairs to the plural methods.

Refere to <nowiki>[[LoCoDirectory-API#Available Services|Available Services]]</nowiki>
==== How to use it ? ====
<pre> python

from locodir import LocoDirectory
ld = LocoDirectory()
florida_team = ld.getTeam(13)# Florida Team is #13
fl_events = ld.getTeamEvents(teams=13, date_begin__gte='2010-06-21')# Events on or after June 21, 2010

for event in fl_events.values():
    coming = ld.getUsers(attendee__team_event=event['id'], attendee__promise='sure')
    print '%s (attending: %s)' % (event['name'], len(coming))
    for comment in ld.getComments(team_event=event['id']).values():
        cuser = ld.getUser(comment['comment_by'])
        print "  %s says: %s" % (cuser['username'], comment['comment'])
</pre>
