{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


{| class="wikitable"
|-
| <tablestyle="float:right; width:40%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em;">'''Table of Contents'''<<BR>>
|}

== Lunar Lobster リリースノート ==

== イントロダクション ==

'''Ubuntu 23.04''' (Lunar Lobster) リリースノートは、Ubuntuそのそのフレーバーについて、全体像と既知の問題点に関する情報を提供します。

=== サポート期間 ===
Ubuntu 23.04は2024年1月までの9ヶ月サポートされます。もしLong Term Support（長期サポート）版が必要な場合、<nowiki>[[https://wiki.ubuntu.com/JammyJellyfish/ReleaseNotes/|Ubuntu 22.04 LTS]]</nowiki>を利用してください。

== 23.04の新機能 ==

=== アップデートされたパッケージ ===

=== Linux kernel 🐧 ===

Ubuntu 23.04は、多くの新しい機能を伴った新しいLinux Kernel 6.2とともに提供されます。

Ubuntu kernelの特筆すべき以下の機能が含まれます:
* ジェネリックまたは低レイテンシーKernelでの<nowiki>[[https://discourse.ubuntu.com/t/ubuntu-kernel-is-getting-rusty-in-lunar/34977|out-of-tree Rust 🦀 modules]]</nowiki>のビルドと実行のサポート
* より新しいLSMスタックとAppArmorパッチセット

<nowiki>[[https://kernelnewbies.org/Linux_6.2|アップストリーム]]</nowiki>kernelの特筆すべき以下の機能が含まれます:

* Call Depth Trackingによる、より古いIntel Skylake CPUのパフォーマンス向上
* Intel Arc graphics DG2/Alchemistのサポート
* 新しいIntel TDX ゲストドライバー
* Sony !DualShock 4 ゲームパッドのサポート
* zstd 圧縮コードの更新
* BPFの多方面における改良
* 新しいハードウェアのサポート、様々なパフォーマンスとセキュリティの改良

=== systemd v252.5 ===

Initシステムはsystemd v252.5に更新しました。個別の機能についての詳細な情報は、アップストリームの<nowiki>[[https://github.com/systemd/systemd/releases/tag/v252|changelog ]]</nowiki>を参照してください。

=== ツールチェインの更新 🛠️ ===

==== OpenJDK ====
デフォルトのJavaランタイムとJDKはOpenJDK v17に更新されました。Java 17は最新のLTSバージョンとなります。

==== .Net ====
.Net v7 (7.0.105)ランタイムと関連パッケージを追加しました。.Net v6パッケージは最新のマンスリーリリースである6.0.116に更新されました。

==== golang ====
go言語コンパイラは、最新のアップストリームの安定版であるv1.20に更新されました。

==== Rust ====

runcコンパイラはv1.67に更新し、cargoパッケージマネージャーは0.68に更新されました

==== Python ====
Pythonはv3.11に更新されました

==== debuginfod サービス ====

このサイクルでは、<nowiki>[[https://debuginfod.ubuntu.com|ebuginfod サービス]]</nowiki>を改善するため、多くの作業が行われました。

* このサービスでは、多くのパッケージ (ビルド時に `dpkg-buildflags` に従うパッケージ) におけるソースコードのインデックスを作成し、提供するようになりました。 最終的に、これはユーザーがパッケージのソースコードを手動でダウンロードしたり（例えば `apt-get source` を使用するなど）、GDBの `dir` や `set substitute-path` コマンドで調整する必要がないことを意味します。 ソースコードの取得はデバッガーによって透過的に行われるため、かなりの時間を節約することができます。

* このサービスは、プライベートPPAからのデバッグ成果物をインデックスし、サービスできるようになりました。 現在、<nowiki>[[https://ubuntu.com/security/esm|ESM]]</nowiki> PPAのインデックスのみを作成しています。

* 新しい `ddebs` とソースコードのサービスインデックスを作成する速度が改善されました。

==== Ruby ====

Ruby 💎 はv3.0からv3.1に更新されました。詳細は以下のRubyセクションにあります。

=== Security強化 🔒 ===

ca-certificatesパッケージがMozilla certificate authority bundle の バージョン 2.60 に更新されました。

=== Base System ===

==== Netplan v0.106 ====
<nowiki>[[https://discourse.ubuntu.com/t/netplan-0-106-call-for-testing/33932|v0.106の詳細情報はこちら]]</nowiki>

* `match.macaddress` スタンザの（物理）インターフェースマッチングの動作が少し変更されました。'''MACAddress=''' マッチングは '''PermanentMACAddress=''' によるマッチングに置き換えられます。この変更はコンテナや仮想マシン環境に影響を与えるかもしれません。
* 新たに `netplan status` サブコマンドが追加され、現在のネットワークステータスをクエリできるようになりました。

=== Ubuntu Desktop ===

==== New Installer ====
* デフォルトのUbuntu Desktopのインストーラーは、subiquity と Snap パッケージをバックエンドとする Flutter アプリケーションになりました。
* Minimal インストールオプションはフルインストールよりも高速になりました（以前のインストーラーではそうではありませんでした）。
* 対象のシステムで利用できるセキュリティアップデートをインストールするようになりました。
* <nowiki>[[https://wiki.ubuntu.com/UEFI/SecureBoot#MOK_generation_and_signing_process|MOK Enrollment]]</nowiki> はまだサポートされてません。`ubuntu-drivers` が "Install third-party software" チェックボックスが選択されている場合はインストールは行われるものの、MOK Enrollmentを必要とするドライバのために追加の作業が必要です。
* 新しいインストーラーで問題が起きる場合に備えて、以前のインストーラーも <nowiki>[[https://cdimage.ubuntu.com/releases/23.04/|継続して利用可能]]</nowiki> です。

==== GNOME 👣 ====
* GNOME をアップデートすることで、最新の GNOME リリースである <nowiki>[[https://release.gnome.org/44/|GNOME 44]]</nowiki> の新機能とバグフィックスを取り込みました。

==== Ubuntu font の更新 ====

* Ubuntu fontがアップデートされました。

==== アプリケーションの更新 ====
* <nowiki>[[https://mozilla.org/firefox/releases/|Firefox]]</nowiki> 111 🔥🦊
* <nowiki>[[https://wiki.documentfoundation.org/ReleaseNotes/7.5.2|LibreOffice 7.5.2 ]]</nowiki> 📚
  LibreOffice が RISC-V 環境でも利用できるようになりました。
* Thunderbird 102.10 🌩️🐦

==== サブシステムの更新 ====

* <nowiki>[[https://git.kernel.org/pub/scm/bluetooth/bluez.git/tree/ChangeLog?id=5.66|BlueZ 5.66 ]]</nowiki>
* <nowiki>[[https://openprinting.github.io/cups-filters-Second-Generation-First-Beta-Release/|new cups-filters]]</nowiki>
* <nowiki>[[https://gitlab.freedesktop.org/NetworkManager/NetworkManager/-/blob/nm-1-42/NEWS|NetworkManager 1.42 ]]</nowiki>
* <nowiki>[[https://gitlab.freedesktop.org/pipewire/pipewire/-/blob/0.3.65/NEWS|Pipewire 0.3.65]]</nowiki>
* <nowiki>[[https://gitlab.freedesktop.org/poppler/poppler/-/blob/poppler-22.12.0/NEWS|Poppler 22.12]]</nowiki>
* <nowiki>[[https://github.com/flatpak/xdg-desktop-portal/blob/1.16.0/NEWS|xdg-desktop-portal 1.16]]</nowiki>

==== 新しい Active Directory 関連機能 ====

Active Directory (AD) 統合機能は、Ubuntu Desktop のエンタープライズ機能としてもっとも有名なもののひとつです。Ubuntu Desktop 22.04 LTS では Active Directory 統合の段階を <nowiki>[[https://github.com/ubuntu/adsys|ADsys]]</nowiki> によって引き上げています。このクライアントは、完全な '''Group Policy のサポート''' と権限昇格を伴うスクリプト実行が可能です。

Ubuntu 23.04 では、'''enterprise proxy''' と '''ソフトウェアの制限''' 、'''ネットワーク共有'''を追加しています。この機能はUbuntu 22.04 LTS と 20.04 LTS に年内にバックポートされる予定ですが、23.04 では先行して利用できます。

=== Ubuntu Server ===
==== Apache2 ====
* mod_http2 は 2.4.55 から接続とストリーム処理部分が部分的に書き直されています。APR pollset とパイプ処理は、stutteredなウェイト処理ではなく、変更をモニタする実装になりました。誤ったふるまいをするクライアントの接続におけるリソース効率も改善されています。
* mod_proxy_hcheck は、 AJP/CPING サポートを正しく判別できるようになりました。

==== AppArmor updates ====

二つの追加パッケージの AppArmor プロファイルが追加され、デフォルトで enforce モードで動作するようになりました: <nowiki>[[https://launchpad.net/ubuntu/+source/rsyslog/8.2210.0-3ubuntu2|`rsyslog`]]</nowiki> と <nowiki>[[https://launchpad.net/ubuntu/+source/isc-kea/2.2.0-3|`isc-kea`]]</nowiki> です。

これまでは `rsyslog` には apparmor プロファイルが含まれていましたが、デフォルトでは無効にセットされていました。このプロファイルは精査・修正され、これまでよりもより動的に構成され、また、更新された `rsyslog` 設定にあわせたものになりました。たとえば、MySQL 用の rsyslog モジュールがインストールされている場合、新しいプロファイルではローカルの MySQL サーバーへの接続を許可するように動作します。

`isc-kea` にはこれまで AppArmor プロファイルは含まれていませんでしたが、今回追加され、また、デフォルトで enforce 動作するようになりました。

==== Cloud images ====

* Cloud Images のデフォルトの fstab エントリが更新され、ルートファイルシステム用の ext4 には `commit=30 seconds` オプションが利用されるようになりました。30秒は amd64 イメージを `linux-kvm` カーネルフレーバーで利用している場合にのみ暗黙で適用され、これ以外の場合は 5 秒がセットされていました。この設定の更新により、データの安全性を犠牲に性能を強化することができます。詳細は、関連する <nowiki>[[https://bugs.launchpad.net/bugs/2006511|bug]]</nowiki> と <nowiki>[[https://code.launchpad.net/~ubuntu-core-dev/livecd-rootfs/+git/livecd-rootfs/+merge/436977|マージプロポーザル]]</nowiki> を参照してください。
* AWS amd64 images は `uefi-preferred` ブートモードを利用するようになりました。詳細は、<nowiki>[[https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ami-boot.html|AWSのドキュメント]]</nowiki>を参照してください。

==== Cloud-init ====
cloud-init が 22.4 から 23.1 リリースにアップデートされました。この新リリースに含まれるハイライトは次の通りです:
* 新しいデータソースのサポート: NWCS
* Azure: `hv_netvsc` にマッチするデバイスドライバマッチングの修正
* !AliYun: セキュリティトークンベースの IMDS 操作への対応
* LXD:
** LXD での `#cloud-config` の preseed に対応
** LXD datasource におけるオプトイン方式のネットワークホットプラグに対応
* !NoCloud: ライブインストーラーからの DMI 変数を kernel cmdline パラメータに展開可能に
* OpenStack: IMDS の IPv6 検知
* Netplan:
** netplan システムにおける v2 network config のダイレクトパススルー に対応
** レンダリングされるネットワーク設定において、セキュリティ要求の高い設定について root-readonly 設定が可能に
** gateway on-link サポートの追加
* Ansible: Ansible galaxy の install, control モジュールと pip bootstrap に対応
* ssh: 複数ホストに対応する証明書に対応する設定
* cloud-config schema
** /etc/cloud に配置された instance-data.json について、 jinja テンプレートと変数展開を許可
** `cloud-init schema --system` が user-data と vendor-data を検証するように
* `cloud-init status` において、 --format yaml/json でマシンリーダブルな設定を生成可能に
* `cloud-init clean --machine-id` によるインストール済みイメージのクローンを容易に
* docs: ドキュメントのオーバーホール、新しい !HowTo の追加、diataxis フレームワークへの準拠

==== Container runtimes ====

===== Docker =====

バージョン 20.10.21 に更新されました。このバージョンでは、多くのセキュリティ修正とバグ修正、ライブラリの修正が行われています。より詳細な変更の内容については、<nowiki>[[https://docs.docker.com/engine/release-notes/20.10/#201021|upstream のリリースノート]]</nowiki> を参照してください。

===== Containerd =====

バージョン 1.6.12 に更新されました。特に気にするべき変更点は次の通りです。

* k8s.gcr.io から registry.k8s.io への移行
* CAP_BPF と CAP_PERFMON のサポート
* Seccomp: clock_settime64 と CAP_SYS_TIME の併用に対応
* カーネル >= 4.8 では ptrace(2) をデフォルトで許可

これらに加えて、いくつかのセキュリティ修正が行われています。変更点の完全なリストは、<nowiki>[[https://github.com/containerd/containerd/releases|upstream のリリースページ]]</nowiki>を参照してください。

===== Runc =====

バージョン 1.1.4 に更新されました。特に気にするべき変更点は次の通りです。

* seccomp -ENOSYS スタブが、s390、s390x環境において、マルチプレクサ経由で呼び出されたシステムコールを正しくハンドリングできるようになりました。この変更により、-ENOSYS スタブコードがあるにも関わらず、ホストカーネルが -EPERM を返してしまう現象を解決します（この挙動は s390x ではシステムコールがマルチプレクサ経由になるためです）。
* libcontainer/cgroups/systemd において、 dbus が切断された際のリトライロジックが期待通りに動作するようになりました。この修正は runc バイナリそのものには影響しないものの、 libcontainer のユーザー（たとえば Kubernetes）に必要な修正です。

改善点とバグフィックスの完全なリストは、<nowiki>[[https://github.com/opencontainers/runc/releases|upstream のリリースページ]]</nowiki>を参照してください。

==== Dnsmasq ====

新しいオプションが 2.86 から 2.89 へのアップグレードによって追加されました。これには --fast-dns-retry, --use-stale-cache, --conf-script, と --port-limit が含まれます。また、--nftset が nftables における -ipset に相当する機能として追加されました

==== Dpdk ====

DPDK の LTS リリースの年間リリースフローに基づき、Ubuntu 23.04 では最新の DPDK LTS （LTS ストリームにおける最新の stable リリース）である 22.11.1 を含んでいます。

このバージョンには複数の新しいデバイスドライバーが含まれ、多くの修正と最適化が行われています。<nowiki>[[http://doc.dpdk.org/guides/rel_notes/release_22_11.html|リリースノート]]</nowiki>はかなり長大な分量になっていますが、しかしこれは 22.11 そのものについてのみ記載されています。 upstream の変更は年間3-4回のペースで行われており、以前採用されていた DPDK LTS 21.11 （Ubuntu 20.04、21.04、21.10に含まれていたもの）からの変更を確認する場合、<nowiki>[[http://doc.dpdk.org/guides/rel_notes/release_22_03.html|22.03]]</nowiki>, <nowiki>[[http://doc.dpdk.org/guides/rel_notes/release_22_07.html|22.07]]</nowiki>も利用する必要があります。

この新バージョンの DPDK は、 riscv64 用もビルド済でパッケージとして利用できます。

==== Frr ====

<nowiki>[[https://frrouting.org/|frr]]</nowiki> はバージョン 8.4.2 に更新されました。これまで2回の Ubuntu のリリース（Jammy から）において 8.1 が維持されていました。この変更には多くのバグ修正と機能強化が含まれています。詳細の確認には、 upsterem のリリースノートを参照してください。https://github.com/FRRouting/frr/releases

==== HA/Clustering ====

===== Corosync =====

3.1.7 へ更新されています。このリリースでは knet_mtu 機能へ重要なバグ修正が提供されています（詳細は corosync.conf(5) を参照してください）。これ以外の情報については、<nowiki>[[https://github.com/corosync/corosync/releases|upstream リリースノート]]</nowiki>を参照してください。

===== Fence Agents =====

4.12.1 へ更新されました。いくつかの修正と強化が複数のエージェントに対して行われています。詳細については<nowiki>[[https://github.com/ClusterLabs/fence-agents|upstream のリポジトリ]]</nowiki>を参照してください。

===== haproxy =====

haproxy は upstream の新しい LTS シリーズである 2.6 にアップデートされました。多くの新機能とパフォーマンス強化がこのリリースには含まれます。詳細については、https://www.mail-archive.com/haproxy@formilux.org/msg42371.html にあるリリースアナウンスと、これに関連する blog post https://www.haproxy.com/blog/announcing-haproxy-2-6/ を参照してください。

==== Heimdal ====

今回採用されたリリース 7.8 では、Heimdal database (HDB) propagation 機能と、漸進的な変化点の送出機能、部分ライト、非同期 IO と関連する機能強化が行われています。

==== ISC Kea (DHCP server) ====

これまでは Kea Control Agent サービス (`kea-ctrl-agent.service`) は localhost (127.0.0.1:8000) 経由でパスワードレスで接続できていました (<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/isc-kea/+bug/2007312|LP: #2007312]]</nowiki>)。これは、Kea サービスのシャットダウンや DHCP リースの管理、あるいは現在の設定のコピーなどの操作について、どのローカルユーザーでも行えたことを意味します。

バージョン 2.2.0-5ubuntu2 のパッケージでは（新規インストール・アップグレードの場合のいずれも）、 `kea-api` ユーザーのパスワードを入力するか、あるいはシステムが生成したランダムなものをセットすることが促されるようになります。ただし、デフォルトの動作（たとえば自動インストールの場合）では何も行いません。

 '''もしパスワードがセットされていない場合、Kea Control Agent は開始されません'''。この状態では、次のような出力が行われます:

<pre>
    $ systemctl status kea-ctrl-agent.service
    ○ kea-ctrl-agent.service - Kea Control Agent
     Loaded: loaded (/lib/systemd/system/kea-ctrl-agent.service; enabled; preset: enabled)
     Active: inactive (dead)
    (...)
    2023-03-31T17:51:01.638484+00:00 l-kea-debconf systemd[1]: kea-ctrl-agent.service - Kea Control Agent was skipped because of an unmet condition check (ConditionFileNotEmpty=/etc/kea/kea-api-password).
</pre>

この場合、 `dpkg-reconfigure kea-ctrl-agent` を実行することでパッケージインストール時に呼び出されるパスワード設定画面にアクセスすることができます。

==== Libvirt ====

libvirt の継続的なリリースである 9.0.0 が Ubuntu 23.04 では利用されています。多くの修正と機能強化、そして新機能が含まれています。具体的には:

* 典型的な例: Qemuへの新規機能追加:
** 外部スナップショットの削除
** swtpmの外部バックエンド
** <disk> をオープンする代わりに FDs を受け渡す挙動
** preferred ポリシー指定時の複数ノードの挙動
** Hyper-V Enlightenments の domcapabilities のレポート
** SGX EPCのサポート (enclave page cache)
** vTPM ステートを保持したマイグレーションのサポート（QEMU vm が共有ストレージ上にある場合に限る）
** qemu: コアスケジューリングのサポート(デフォルトでは無効)
** qemu: vCPU の物理アドレスサイズを bit 数で指定可能に
* <nowiki>[[https://libvirt.org/news.html|upstream の changelog]]</nowiki>を確認することで、Ubuntu 22.10 に導入されていた 8.6.0 との差分を把握することができます。

==== Net SNMP ====

いくつかのセキュリティとバグの修正に加えて、Dockerのオーバーレイファイルシステムを検出するようになりました (LP: #2007856)。これは snmpwalk を Docker container に対して発行したような場合を想定しています。

==== Open vSwitch ====

バージョン 3.1.0 に更新され、通常の更新と以下のような変更を含みます。

** riscv64 用にビルドされ、パッケージが提供されます。
** ovs-vswitchd は CPU アフィニティに対応するようになり、必要に応じてハンドラーや revalidator スレッドの数を調整できます。
** DPDK 22.11.1 のサポート。
** リンクスピードが推定できない場合、QoS max-rate と STP/RSTP の path-cost configuration はリンク速度が 10Gbps であると仮定するようになりました。
** ovs-ctl: 新オプション '--dump-hugepages' がコアダンプに hugepages を含むようになります。これにより、DPDK 関連の事後調査に利用できることが期待されます（ただし、コアダンプファイルのサイズが大きく増えることになります）。
** AF_XDP サポートがデフォルトでビルドされるようになりました。
** <nowiki>[[https://www.openvswitch.org/releases/NEWS-3.1.0.txt|The OVS Newsページ]]</nowiki> に、新バージョンのより詳細な情報があります。

==== OpenStack ====

Ubuntu 23.04 には、最新の OpenStack リリースである Antelope が利用されています。含まれるコンポーネントは次の通りです:

* !OpenStack Identity - Keystone
* !OpenStack Imaging - Glance
* !OpenStack Block Storage - Cinder
* !OpenStack Compute - Nova
* !OpenStack Networking - Neutron
* !OpenStack Telemetry - Ceilometer, Aodh, Gnocchi
* !OpenStack Orchestration - Heat
* !OpenStack Dashboard - Horizon
* !OpenStack Object Storage - Swift
* !OpenStack DNS - Designate
* !OpenStack Bare-metal - Ironic
* !OpenStack Filesystem - Manila
* !OpenStack Key Manager - Barbican
* !OpenStack Load Balancer - Octavia
* !OpenStack Instance HA - Masakari
* !OpenStack Container Orchestration - Magnum

詳細は、<nowiki>[[https://releases.openstack.org/antelope/|OpenStack Antelope release notes]]</nowiki>を確認してください。

!OpenStack Antelope は、Ubuntu Cloud Archive for !OpenStack Antelope を通じて、Ubuntu 22.04 LTSのユーザーにも提供されます。Ubuntu Cloud Archive for !OpenStack Antelope を有効にするには、次のコマンドを実行します。

> sudo add-apt-repository cloud-archive:antelope

警告: !OpenStackデプロイメントをアップグレードすることは容易ではないプロセスであり、各!OpenStackデプロイメント固有のアップグレード手順を計画し、テストを行うよう注意する必要があります。

もし Juju による !OpenStack デプロイメントを利用している場合、<nowiki>[[https://docs.openstack.org/charm-guide/latest|OpenStack Charm Release Notes]]</nowiki>の記載も確認してください。

==== PostgreSQL 15 ====

PostgreSQL は新しい PostgreSQL 15 リリースにアップデートされました。この新メジャーリリースでは、sort の性能強化、圧縮の機能強化、SQL MERGE コマンドのサポート、JSONロギングフォーマットのサポート（これにより構造化されたログシステムにログを送出することが可能になります）を含みます。

==== Qemu ====
Qemu はバージョン 7.2.0 にアップデートされ、大小の改善がおこなわれました。このバージョンには以下が含まれます。

* Arm
** Cortex-A76, Cortex-A35 および Neoverse-N1 CPU のエミュレーション
** virt board は GICv4.0 のエミュレーションをサポートします
** いくつかの新しい PCPU アーキテクチャの機能もエミュレートされるようになりました
* Risc-V
** privileged spec バージョン 1.12.0 のサポートを追加
** Zbkb, Zbkc, Zbkx, Zknd/Zkne, Zknh, Zksed/Zksh および Zkr 拡張のサポートを追加
** Zmmul 拡張のサポートの追加
** virt board に TPM サポートを追加
** virt マシンデバイスツリーの改善
* s390x
** s390x Vector-Enhancements Facility 2 with TCG のエミュレート
** s390-ccw bios が修正され、非 512 セクタサイズで典型的な DASD ドライブとは異なるジオメトリを持つデバイスからの起動も可能になりました。
** LZRF, VISTR, SACF 命令のエミュレーションを修正
** KVM ゲスト向けの強化された zPCI インタープリテーションサポート
** Message-Security-Assist Extension 5 (PRNO 命令を通じたランダム数の生成)の実装

* さらに
** zero-copy-send を Linux 上でサポート。これにより、ソースホストの CPU 使用が軽減されます。このサポートには locked memory が必要な点に留意してください。
** フルシステムエミュレーションにおける TCG パフォーマンスの改善
** AVX, AVX2, F16C, FMA3 および VAES 命令向けの TCG サポート
* その他多数の変更については、アップストリームの <nowiki>[[https://wiki.qemu.org/ChangeLog/7.1|バージョン7.1向けの changelog]]</nowiki> から全体像を確認してください。この中には、削除・非推奨・非互換となった機能の代替策のリストがあります。

==== Rclone ====

非常に機能が豊富で多用途な<nowiki>[[https://rclone.org/|rclone]]</nowiki>パッケージは、過去2回のUbuntuリリースではバージョン1.53に固定されていましたがアップデートされました。新しいバージョン1.60.1には、多くの新機能、バックエンド、バグフィックスが含まれています。1.60.1以前の変更点の詳細については、https://rclone.org/changelog/#v1-60-1-2022-11-17 にあるアップストリームのリリースノート群を確認してください。

==== Ruby 3.1 ====

デフォルトの Ruby インタープリターがバージョン 3.1 にアップデートされました。 Ruby 3.0 と互換性を保ちつつ、新しい機能が追加されています。変更箇所についての概要は <nowiki>[[https://www.ruby-lang.org/en/news/2021/12/25/ruby-3-1-0-released/|Ruby 3.1 リリースアナウンス]]</nowiki>から確認してください。

心に留めておくべき重要な点は、次の gem は標準ライブラリにバンドルされない点です:

* net-ftp
* net-imap
* net-pop
* net-smtp
* matric
* prime
* debug

複数のプロジェクトに影響する変更は Psych 4.0 がデフォルトで `Psych.load` から `safe_load` に変更されたことです。 Ruby 3.1 に移行する際は注意してください。

==== Samba ====
<nowiki>[[https://www.samba.org|samba]]</nowiki> パッケージが 4.17.x シリーズにアップデートされました。アップストリームのリリースノートはこちらです: https://www.samba.org/samba/history/samba-4.17.0.html

これまでのリリースと比べて特別なのは、このシリーズではファイル操作のパフォーマンス改善があった点です。これは、以前、シンボリックリンク攻撃に対するセキュリティ修正により影響を受けていたものです。 Samba はディレクトリ名を検証する際にシステムコールの数を減らすようになり、また、以前であればいくつかのクライアントに大きなレイテンシーを発生させていた  wakeup イベントも減りました。詳細は上にリンクしたリリースノートを確認してください。

==== SSSD ====

バージョン 2.8.0 で多数の新しい設定オプションが導入されました。その一覧は <nowiki>[[https://sssd.io/release-notes/sssd-2.8.0.html#configuration-changes|アップストリームのリリースノート]]</nowiki>から確認できます。

==== Subiquity ====

Subiquity 23.04.2 がリリースされました。完全な変更の詳細を確認するには、 !GitHub 上の <nowiki>[[https://github.com/canonical/subiquity/releases/tag/23.04.2|Subiquity 23.04.2]]</nowiki> リリースノートを確認してください。

==== virglrenderer ====
0.9.1 から 0.10.4 にアップグレードされるなかで、 Vulkan サポートが実装されました。これにより特定のハードウェアでの 3D パフォーマンスの改善が約束されました。

=== プラットフォーム ===

==== Raspberry Pi 🍓 ====

* Ubuntu 23.04では、<nowiki>[[https://launchpad.net/ubuntu/+source/libcamera|libcamera]]</nowiki>パッケージが0.0.4に更新され、v3カメラモジュールを '''除く''' すべての公式Raspberry Piカメラモジュールに対応しました。具体的に、OV5647ベースのv1（現在は生産終了しています）、<nowiki>[[https://www.raspberrypi.com/products/camera-module-v2/|IMX219ベースのv2]]</nowiki>、<nowiki>[[https://www.raspberrypi.com/products/raspberry-pi-high-quality-camera/|IMX477ベースの高画質カメラ]]</nowiki>、<nowiki>[[https://www.raspberrypi.com/products/raspberry-pi-global-shutter-camera/|IMX296ベースのグローバルシャッターカメラ]]</nowiki>はすべて動作しますが、<nowiki>[[https://www.raspberrypi.com/products/camera-module-3/|IMX708ベースのv3モジュール]]</nowiki>の作業は継続しています。<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/libcamera/+bug/2009824|(bug 2009824)]]</nowiki>

* Ubuntu 23.04では、Firefox snapをCore 22ベースに更新しました。これにより、ハードウェアコンポジットを含む、さまざまなグラフィカルハードウェアアクセラレーションの問題が修正されました (TODO:ブログ記事へのリンク)。
 
* Raspberry Pi向けのUbuntu 23.04 Desktopでは、初回起動時にルートファイルシステムのサイズを変更する際に、最後に16MBの空き領域を残すようになりました。この変更により、必要に応じてルートファイルシステムをより簡単に暗号化できるようになりました（TODO:手順があるブログ記事へのリンク）。

==== IBM Z および LinuxONE ====

Ubuntu Server 20.04 LTSから、最小アーキテクチャーレベルセットがz13（および、LinuxONE Rockhopper / Emperor）に引き上げられました。

これはUbuntu Server 23.04でも適用され、別途発表されるまでは、本日（23.04リリース日）時点でで利用されているすべての新しいハードウェアもサポート対象になります。将来的なハードウェアのサポートは、後に追加される可能性があります。
Ubuntu Server 23.04は、LPAR（クラシック、またはDPMシステム）、IBM z/VMゲスト、KVM仮想マシン、LXDや、docker、kubernetesなどの異なるコンテナ環境にインストールすることができます。 

* IBM ZとLinuxONEのキーパッケージであるs390-toolsパッケージが2.26.0に更新され<nowiki>[[https://bugs.launchpad.net/bugs/2003284|(bug 2003284)]]</nowiki>、これに伴い site-aware デバイスコンフィグレーションが導入され<nowiki>[[https://bugs.launchpad.net/bugs/1982339|(bug 1982339)]]</nowiki>、vmconvertとzgetdumpが統合されました <nowiki>[[https://bugs.launchpad.net/bugs/2008785|(bug 2008785)]]</nowiki>。
* DASDディスクに関連した、以下のより大きく、クロスコンポーネントな2つの機能が追加されました：
** DASD PPRC(Peer-to-Peer Remote Copy)の透過的な処理をサポート<nowiki>[[https://bugs.launchpad.net/bugs/1982341|(bug 1982341)]]</nowiki> と <nowiki>[[https://bugs.launchpad.net/bugs/2003281|(bug 2003281)]]</nowiki> 
** ECKD DASDからの、List Directed IPLや再IPL向けサポート<nowiki>[[https://bugs.launchpad.net/bugs/2003393|(bug 2003393)]]</nowiki>, <nowiki>[[https://bugs.launchpad.net/bugs/2003394|(bug 2003394)]]</nowiki>, <nowiki>[[https://bugs.launchpad.net/bugs/2003286|(bug 2003286)]]</nowiki>
 
* 仮想化機能は常に改善されている分野で、今回のリリースでは以下の内容が改善されています
** ストレージキーの削除が実装され<nowiki>[[https://bugs.launchpad.net/bugs/1835549|(bug 1835549)]]</nowiki>、外部プロセスからのストレージキー処理が可能になりました <nowiki>[[https://bugs.launchpad.net/bugs/1933177|(bug 1933177)]]</nowiki>
** カスタマーキーによる暗号化を含む<nowiki>[[https://bugs.launchpad.net/bugs/1959966|(bug 1959966)]]</nowiki>、Secure Execution ゲストダンプのサポートを追加しました <nowiki>[[https://bugs.launchpad.net/bugs/2003680|(bug 2003680)]]</nowiki>
** z16上でのSecure Executionにおけるゲストのメモリ再利用が改善されました<nowiki>[[https://bugs.launchpad.net/bugs/2006604|(bug 2006604)]]</nowiki>
** KVMでサブチャネル向けデバイスbusidを有効にしました<nowiki>[[https://bugs.launchpad.net/bugs/2004491|(bug 2004491)]]</nowiki>
** libvirt経由でのKVMゲストに対する仮想CPUトポロジを提供しました<nowiki>[[https://bugs.launchpad.net/bugs/1983222|(bug 1983222)]]</nowiki>（訳注：リンク先が存在しません）
* 暗号化技術は、openCryptoki v3.20.0にアップグレードすることで、以下の大幅な改善があります:
** ep11トークン向けのマスターキーの一貫性が確立されるようになりました <nowiki>[[https://bugs.launchpad.net/bugs/2003629|(bug 2003629)]]</nowiki> 
** PKCS#11 3.0のicaおよびsoftトークンが、AES_XTS<nowiki>[[https://bugs.launchpad.net/bugs/2003630|(bug 2003630)]]</nowiki>だけでなく、ep11トークン<nowiki>[[https://bugs.launchpad.net/bugs/2003632|(bug 2003632)]]</nowiki>もサポートするようになりました
** z16のep11トークンのサポートを追加しました<nowiki>[[https://bugs.launchpad.net/bugs/2003635|(bug 2003635)]]</nowiki> 
** ep11 7.2トークンで新しいベンダーの固有のキーを導出する機能をサポートするようになりました <nowiki>[[https://bugs.launchpad.net/bugs/2003638|(bug 2003638)]]</nowiki>
** CCAおよび EP11トークンのみで期待されるMKVPによる鍵生成<nowiki>[[https://bugs.launchpad.net/bugs/2003639|(bug 2003639)]]</nowiki>
** p11sakがDilithiumとKyberの鍵をサポートするようになりました<nowiki>[[https://bugs.launchpad.net/bugs/2003669|(bug 2003669)]]</nowiki>
** openssl-ibmcaは2.3.1<nowiki>[[https://bugs.launchpad.net/bugs/2004529|(bug 2004529)]]</nowiki>だけでなく、2.4.0にも更新されています。
** 新しいlibica 4.2.1<nowiki>[[https://bugs.launchpad.net/bugs/2003849|(bug 2003849)]]</nowiki>は、FIPS 140-3に準拠しました<nowiki>[[https://bugs.launchpad.net/bugs/2003670|(bug 2003670)]]</nowiki>
** そして、zcrypt kernelデバイスドライバーは、APコマンドフィルタリングをサポートするようになりました<nowiki>[[https://bugs.launchpad.net/bugs/2003637|(bug 2003637)]]</nowiki>, <nowiki>[[https://bugs.launchpad.net/bugs/2007797|(bug 2007797)]]</nowiki>

* その他、s390x特有のアップデートや改善があります:
** libzpcでのECCサポートの追加<nowiki>[[https://bugs.launchpad.net/bugs/2003636|(bug 2003636)]]</nowiki>
** driverctlは永続液な定義を一覧できるようになりました<nowiki>[[https://bugs.launchpad.net/bugs/2003678|(bug 2003678)]]</nowiki>
** qclibは最新のv2.3.2に更新されました <nowiki>[[https://bugs.launchpad.net/bugs/2004526|(bug 2004526)]]</nowiki>
** smc-toolsは最新のv1.8.2に更新されました<nowiki>[[https://bugs.launchpad.net/bugs/2004528|(bug 2004528)]]</nowiki>
** PCIのロギングが改良されました<nowiki>[[https://bugs.launchpad.net/bugs/2003390|(bug 2003390)]]</nowiki>
** z16向けのReset DAT-Protection機能のサポートが追加されました<nowiki>[[https://bugs.launchpad.net/bugs/1982378|(bug 1982378)]]</nowiki>
** そして、GLIBC_TUNABLES glibc.cpu.hwcaps経由で、hwcaps/stfleに影響を与えることができるようにglibcにパッチが当てられました<nowiki>[[https://bugs.launchpad.net/bugs/2007599|(bug 2007599)]]</nowiki>

== 既知の問題 ==
予想される通り、あらゆるリリースと同じように、今回のUbuntuリリースにもユーザーが陥りそうな重大な既知の不具合がいくつか存在します。現時点で判明している不具合（およびいくつかの回避策）をここに記録しておきます。これらの不具合については、再度報告する必要はありません。

=== 全般 ===

* ファイルシステムにzfsを使用し、暗号化してインストールするオプションは、初回起動時にすべてのファイルシステムがマウントされないというバグ (<nowiki>[[(https:--bugs.launchpad.net-ubuntu-manual-tests-+bug-1993318|LP: #1993318]]</nowiki>) により無効化されました。zfsと暗号化を使用したシステムを希望する場合、Ubuntu 22.04.1を使ってインストールし、Ubuntu 23.04にアップグレードしてください。

* 新しい Ubuntu Desktop インストーラーのライブセッションはローカライズされていません。新しいインストーラーを使って非英語環境のインストールはできますが、言語パックをダウンロードするためにインストール時にインターネットアクセスが必要になります。これが問題となる場合はレガシーインストーラーイメージを使用してください。(<nowiki>[[https://bugs.launchpad.net/ubuntu-release-notes/+bug/2013329|LP: #2013329]]</nowiki>)

=== Linux カーネル ===
* カーネルバージョン 5.15/5.19 と比較した際に、 SRIOV NVIDIA vGPU ドライバーのサポートにリグレッションがあります。 Canonical は NVIDIA と連携し、 Lunar の将来のカーネル SRU でこのリリース時のリグレッションが解決されるように対応を進めています。
* いくつかの Broadcom デバイスでは、 b43 カーネルモジュールはロードされるものの、 PHY がサポートされていないことで利用できません。 b43 モジュールを無効化して、 bcmwl を使用する手順については、本件のバグレポートに記載されています。(<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/ubuntu-drivers-common/+bug/2013236|LP: 2013236]]</nowiki>)
* ネットワークのデプロイメントが失敗します。 udev とカーネルが initrd に含まれるドライバーを列挙し、ロードすることができないため、この問題が発生します。調査は (<nowiki>[[https://bugs.launchpad.net/maas-images/+bug/2016908|LP: #2016908]]</nowiki>) で進行中です。

=== Ubuntu Desktop ===
* スクリーンリーダーが GTK4 アプリの多くの部分を読み上げることができません。(<nowiki>[[https://launchpad.net/bugs/2015760|LP: #2015760]]</nowiki>) スクリーンリーダーのサポートを必要とする場合は Ubuntu 22.04 LTS を使用してください。
* ''Try Ubuntu''  環境は新しい Ubuntu インストーラーでは翻訳されていません。 (<nowiki>[[https://launchpad.net/bugs/2013329|LP: #2013329]]</nowiki>)
* いくつかの Broadcom ワイヤレスデバイスの利用に必要な broadcom-sta ワイヤレスドライバーは自動的にインストールされないかもしれません。ただし、 software-properties 経由でインストールすることはできます。 (<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/ubuntu-drivers-common/+bug/2013236|LP: #2013236]]</nowiki>)
* 非 GNOME システムに xdg-desktop-portal-gnome がインストールされていると、 Firefox snap のように閉じ込められたアプリ内の file chooser がファイルを初めて開くときに、長時間かかります。(<nowiki>[[https://launchpad.net/bugs/2013116|LP: #2013116]]</nowiki>)
* ハイコントラストが有効になっているときに、 App アイコンで正しいハイコントラストテーマが使用されません。 (<nowiki>[[https://launchpad.net/bugs/2013107|LP: #2013107]]</nowiki>)
* Wayland セッションにログインして Firefox を最初に開く際に、黒いウィンドウとなるかもしれません。その時は、一旦 Firefox を閉じて、再度起動してください。この問題は SRU として、 23.04 がリリースされたら速やかに修正する予定です。

=== Ubuntu Server ===
* ミラーにアクセスできない場合でも、いくつかの状況ではオフラインインストールを進めることを許容できる場合があります。このようなシナリオでは、以下を使用することが勧められます:
<pre>
apt:
  fallback: offline-install
</pre>

=== プラットフォーム ===

==== Cloud Images ====

ありません

==== Raspberry Pi ====

* Raspberry Piに接続された一部のモニターで、一定時間操作しないとモニターの電源が落ち、その後電源が入り黒い画面が表示される可能性があります。影響を受けるモニターの種類については、(<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/mutter/+bug/1998716|LP: #198716]]</nowiki>)で調査を進めています。

* <nowiki>[[https://docs.kernel.org/admin-guide/gpio/sysfs.html|GPIO sysfsインタフェース]]</nowiki>はまだ無効です(<nowiki>[[https://bugs.launchpad.net/bugs/1918583|LP: #1918583]]</nowiki>, <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux-raspi/+bug/2004108|LP: #2004108]]</nowiki>)。これは、いくつかの汎用GPIOライブラリ(<nowiki>[[https://pypi.org/project/RPi.GPIO/|RPi.GPIO]]</nowiki>を含む)で操作できないことを意味します。 <nowiki>[[https://rpi-lgpio.readthedocs.io/en/latest/|RPi.GPIO]]</nowiki>との互換性を提供するshimが作成されており、Lunarの`python3-rpi-lgpio`パッケージで利用可能です。詳細は<nowiki>[[https://waldorf.waveform.org.uk/2022/the-one-where-dave-breaks-stuff.html|この投稿]]</nowiki>を参照してください。

* 公式のDSIディスプレイは、回転やタッチスクリーン操作を含めて正しく動作させるために `linux-modules-extra-raspi` をインストールする必要があります。フレームバッファコンソールを回転させるには (例えばServerリリース向け)、起動パーティションの `cmdline.txt` のカーネルコマンドラインに `fbcon=rotate:2` を追記します(<nowiki>[[https://launchpad.net/bugs/1970603|LP: #1970603]]</nowiki>)。

* initramfs のサイズを小さくするために、様々なカーネルモジュールが `linux-modules-raspi` パッケージから移動されました。もし、カーネルモジュールの不足が原因でアプリケーションが失敗した場合は、`sudo apt install linux-modules-extra-raspi` を試してみてください。

* (MMALベースとなる)レガシーなカメラスタックはarm64ではサポートされていません。<nowiki>[[https://www.raspberrypi.com/documentation/accessories/camera.html#libcamera-and-libcamera-apps|libcamera]]</nowiki>は arm64アーキテクチャにて、Pi Camera Modulesを使用するためにサポートされた方法です(起動時の設定は、公式モジュール用のオーバーレイを自動的にロードします。非公式カメラモジュールでは、起動パーティションの `config.txt` に該当するオーバーレイを追加する必要があります)。

* Desktopイメージでユーザーを初期設定した後、いくつかのパッケージがまだ自動削除ができる場合があります(<nowiki>[[https://launchpad.net/bugs/1925265|LP: #1925265]]</nowiki>)。 `sudo apt autoremove --purge` を実行してこの問題を回避してください。

* Desktopイメージ環境にて、Raspberry Piでは、pipewireスタックが再起動しても正しいオーディオデバイスを維持します(<nowiki>[[https://launchpad.net/bugs/1877194|LP: #1877194]]</nowiki>)が、Raspberry Pi 400では無効なオーディオデバイスがデフォルトで選択され(<nowiki>[[https://launchpad.net/bugs/1993316|LP: #1993316]]</nowiki>)、Raspberry Pi 4では不便なデフォルトのオーディオデバイス（訳注：アナログ出力 - 内蔵オーディオ）が選択されています(<nowiki>[[https://launchpad.net/bugs/1993347|LP: #1993347]]</nowiki>)。

* 22.04にて `crda` パッケージが削除されたため、無線LANの規制ドメインを設定する方法(`/etc/default/crda` を編集する方法)が使えなくなりました。Serverイメージでは、netplanの設定で `regulatory-domain` オプションを使用します。Desktopイメージでは、起動パーティション の `cmdline.txt` のカーネルコマンドラインに `cfg80211.ieee80211_regdom=GB` (GB部分を関連する国コードに置き換える)を追加してください(<nowiki>[[https://launchpad.net/bugs/1951586|LP: #1951586]]</nowiki>)。

* Desktopイメージでは、デフォルトのtotem動画プレイヤーは動画を開きません(<nowiki>[[https://launchpad.net/bugs/1998782|LP: #1998782]]</nowiki>)。 `sudo apt install vlc` で正しく動作する代替の動画プレイヤーをインストールできます。

==== s390X ====

まだありません。

== 公式フレーバー ==

公式フレーバーの各リリースノートは、以下のリンクで参照できます:
** <nowiki>[[https://discourse.ubuntu.com/t/edubuntu-23-04-released/35281|Edubuntu Release Notes]]</nowiki>
** <nowiki>[[https://wiki.ubuntu.com/LunarLobster/ReleaseNotes/Kubuntu|Kubuntu Release Notes]]</nowiki>
** <nowiki>[[https://lubuntu.me/lunar-released/|Lubuntu Release Notes]]</nowiki>
** <nowiki>[[https://ubuntubudgie.org/2023/04/ubuntu-budgie-23-04-release-notes/|Ubuntu Budgie Release Notes]]</nowiki>
** <nowiki>[[https://ubuntu-mate.org/blog/ubuntu-mate-lunar-lobster-release-notes/|Ubuntu MATE Release Notes]]</nowiki>
** <nowiki>[[https://ubuntustudio.org/ubuntu-studio-23-04-release-notes/|Ubuntu Studio Release Notes]]</nowiki>
** <nowiki>[[https://ubuntuunity.org/blog/ubuntu-unity-23.04/|Ubuntu Unity Release Notes]]</nowiki>
** <nowiki>[[https://wiki.xubuntu.org/releases/23.04/release-notes|Xubuntu Release Notes]]</nowiki>
** <nowiki>[[https://www.ubuntukylin.com/news/ubuntukylin2304-en.html|Ubuntu Kylin Release Notes]]</nowiki>
** <nowiki>[[https://ubuntucinnamon.org/ubuntu-cinnamon-23-04-lunar-lobster-released/|Ubuntu Cinnamon Release Notes]]</nowiki>

== より詳しい情報 ==

=== バグレポート ===

あなたのコメントやバグレポート、レポートへのコメント・パッチの投稿・提案は、バグの修正や将来のリリース品質の改善につながります。<nowiki>[[http://help.ubuntu.com/community/ReportingBugs|ツールを用いてバグを報告してください]]</nowiki>。バグの修正を通じて貢献したいのであれば、<nowiki>[[http://wiki.ubuntu.com/BugSquad|Bug Squad]]</nowiki>ページが役に立つでしょう。

=== リリース日に優先度がhigh、またはcriticalなCVEがあった場合はどうなりますか？ ===
Server、Desktop、Cloudはリリース日に合わせてにリリースされる予定ですが、一部例外もあります。

万が一、リリース当日に優先度がcriticalまたはhighであるCVEが発表された場合、リリースチームは以下の対応策を行うことで合意しています：

* 優先度がcriticalとなるCVEについては、そのCVEに対応した新しいイメージが構築されるまで、Server、Desktop、Cloudのリリースがブロックされます。
* 優先度がhighとなるCVEについては、プロダクト（Server、Desktop、Cloud）ごとにリリースをブロックするかどうかが決定され、CVEの性質によっては同じ日にイメージがリリースされない場合もあります。

これは、<nowiki>[[https://lists.ubuntu.com/archives/ubuntu-release/2023-April/005610.html|ubuntu-release メーリングリストにて2023年3月から4月]]</nowiki>にかけて議論されました。

また、このメーリングリストのスレッドでは、リリース前に優先度がhighまたはCriticalなCVEに対処するために、パッケージのアップデートや、セキュリティポケットにプッシュできない技術的またはポリシーによる理由がないことも確認されました。

=== Ubuntuに参加するには ===

Ubuntuを支援したいのであれば、以下の支援できる方法の一覧に目を通してみてください。

* https://community.ubuntu.com/contribute

=== Ubuntuに関して ===

Ubuntuに関するより詳しい情報は、<nowiki>[[http://www.ubuntu.com|UbuntuのWebサイト]]</nowiki>を確認してください。

Ubuntuの開発に関するアナウンスを受け取るには、Ubuntu開発アナウンスメーリングリストを購読してください。

* http://lists.ubuntu.com/mailman/listinfo/ubuntu-devel-announce
