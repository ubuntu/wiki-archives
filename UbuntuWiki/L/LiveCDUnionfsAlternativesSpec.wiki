{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad Entry''': UbuntuSpec:livecd-unionfs-alternatives
* '''Packages affected''': linux-ubuntu-modules

=== Summary ===

Look into switching to an alternative to unionfs. Possibly aufs (http://aufs.sourceforge.net/).

=== Release Note ===

None.

=== Rationale ===

Unionfs caused us many problems in gutsy release. The latest code base is buggy,
and does not play well with AppArmor patches.

=== Use Cases ===

* John wants his livecd to boot
* Jane wants MID platforms to work properly
* Ogra wants classmate to have a better union FS
* Marc wants the live CD to be testable from remote machines.

=== Assumptions ===

* Aufs is more stable than unionfs.  Anecdotal evidence suggests it is, and more than one livecd (including SLAX) has moved over to using aufs in preference to unionfs.
* Aufs is a near drop-in replacement for unionfs.  Aufs has diverged from the original Unionfs 1.x in a number of ways, but the basic features are the same, which is the majority of use-cases.
* Aufs support for NFS is going to be stable by hardy release.

=== Design ===

Provide aufs in lum.

=== Implementation ===

Supply unionfs-1.4 (as released in gutsy) along side of latest aufs in lum. This
will give the different users of this feature the ability to test aufs while
still being able to fall back to known-working unionfs-1.4.

To support aufs mounts of NFS exported systems some minor patches will need
to be applied to the core kernel.

The aufs patches to the core kernel may conflict with Apparmor but this has yet to be determined.  The aufs code in lum will almost certainly need to to be patched to support the Apparmor changes.
The difficulty of doing this has yet to be determined. 

=== Test/Demo Plan ===

After aufs is available in lum, projects wishing to test it will be notifed, and
expected to test+give-feedback.

=== Outstanding Issues ===

* Check if it possibly fixes the readahead issues we currently have.

=== BoF agenda and discussion ===

== aufs example == 

2008/03/28 <nowiki>[[aufsRootFileSystemOnUsbFlash|"AUFS ( Another Union File System ) Root File System On Usb Flash"]]</nowiki> - This is not a live cd example, but may offer ideas for the future. 

----
CategorySpec
CategoryKernel
