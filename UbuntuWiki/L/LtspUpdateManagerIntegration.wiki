{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* '''Launchpad Entry''': UbuntuSpec:ltsp-update-manager-integration
* '''Created''':  * '''Contributors''': OliverGrawert
* '''Packages affected''': ltsp-client/ltsp-server
=== Summary ===

Currently keeping an LTSP client chroot up to date or upgrading it to the next version requires commandline tasks from the adiminstrator. This spec shall define a way to integrate update management with the provided distro tools (for a start only integration with the gnome update manager will be discussed, but a kubuntu solution should be kept in mind while defining the implementation). Beyond security update management also dist-upgrader integration should take place so the client chroot gets upgraded to a new release automatically.

=== Rationale ===

Currently, upgrading an [Ed|K|X]ubuntu distribution is a graphical process, and easy for the administrator.  We should make upgrading the chroot just as easy.

=== Use Cases ===

* Richard, an Edubuntu sysadmin, receives his daily update notice, telling him what security and bug fix patches have come out.  He sees that not only does the host server have some upgrades to be done, but the chroot needs a few upgrades as well.  He clicks the "Update now" button as usual, and things happen as usual.
* Roberta is upgrading her Edubuntu classroom from Feisty to Gutsy.  When she clicks on the "Upgrade" button, both the host and the chroot upgrade, and she gets all the blingy new features in Gutsy.

=== Scope ===

* <code>update-manager</code>

=== Design ===

* Some modifications to <code>update-manager</code> to handle the chroot.
* Creation of a "ltsp-chroot" management script to handle management tasks of the chroot itself.

=== Implementation ===

* Implement using an "ltsp-chroot" wrapper script.
* (old bzr branch http://llama.freegeek.org/~vagrant/bzr/ltsp/features/)      
** Have a --list option to list all available chroots.
** Check if it's an appropriate architecture that the host can update.
** Update chroots that have similar architectures as the server.
** Mount /proc as necessary
** set the environment variable LTSP_HANDLE_DAEMONS="false" to avoid restarting anything in the chroot when doing updates.
** If the kernel's been updated, run ltsp-update-kernels. If it's not easy to do this, then simply run it by default every time (wasteful, but shouldn't introduce any problems)
* update-notifier should be able to show if any chroots needs updating. To do this, it needs to run apt-check $chroot and the apt cron-job that ensure that updates are downloaded needs to run inside the ltsp-chroot. 
* The most common use-case is that  people have one or two chroots.
* It should probably show a icon in a differnt color with a tooltip that shows all the available chroots 
* Its OK for now to run one update-manager instance per chroot, but it would be better to have a special mode so that it displays all chroots together in a single window (not too hard if u-m just runs "ltsp-chroot synaptic")

=== Outstanding Issues ===

* Need to investigate what needs to be done to run Synaptic in a chroot via gksu.

----
CategorySpec
CategoryEdubuntuSpec
