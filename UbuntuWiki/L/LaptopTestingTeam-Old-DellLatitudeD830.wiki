{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* Contact: MikeGreenly (Ubuntu), <nowiki>[[https://launchpad.net/~allee|allee]]</nowiki> (Kubuntu), GabrielAmbuehl (Kubuntu)

* Make : Dell
* Brand: Latitude
* Model: D830

==== Serious HD Problem ====
Beware there is a potential problem that could effect the life of your harddrive <nowiki>[[https://launchpad.net/bug59695.html|bug59695]]</nowiki>. I was experiencing this problem with the 120GB seagate drive (ST9120823AS).  I'm currently using the fixe described <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/acpi-support/+bug/59695/comments/14|here]]</nowiki>.  This fix keeps the harddrive from spinning down while it's on AC power.

I also set "ENABLE_LAPTOP_MODE=true" in /etc/default/acpi-support and "CONTROL_HD_POWERMGMT=1" in /etc/laptop-mode/laptop-mode.conf  This allows the drive to spin down when it's on battery power. (mgreenly)

==== Jaunty (9.04) ====
* serious HD problem still there <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/acpi-support/+bug/59695|bug59695]]</nowiki>
* sound almost unnoticeable when master down to 50 %
* Compiz is blacklisted although it seems to work fine.  This workaround will re-enable Compiz <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/compiz/+bug/363821/comments/7|bug363821]]</nowiki>

==== Intrepid ====
* serious HD problem still there <nowiki>[[https://launchpad.net/bug59695.html|bug59695]]</nowiki> (allee)
* sound almost unnoticeable when master down to 50 %  (allee)

==== Hardy ====
* sound when docked only works through docking station (<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux-meta/+bug/190178|bug report]]</nowiki> starting from 2.6.24-7 (GabrielAmbuehl)

==== Gutsy ====
* Sound not working.  (See below for a workaround)
* Suspend not reliable for everyone.  (See below)
* Bluetooth not working for everyone (Greenly), no problems in Kubuntu (allee)

==== Feisty ====
* D830 does not boot with the lifeCDs of Feisty  (i386 and amd64) 
* The Intel® Integrated Graphics Media Accelerator X3100 does not have a native X11 driver installed.  It does however get a very workable VESA driver with correct resolution etc...  Proper drivers are available from http://intellinuxgraphics.org (Or you use <nowiki>[[Prevu]]</nowiki> to <nowiki>[[http://blog.delgurth.com/2007/10/26/dell-latitude-d830-and-ubuntu-feisty-64-bit/|backport the Gutsy intel driver]]</nowiki> - DelGurth)
* For the Nvidia NVS 140M, install the package nvidia-glx-new (restricted modules) (no need to use Nvidia *.run file)
* When you plug in a head set it correctly mutes the speakers but removing the head set from the jack does not restore the speakers. 
* <nowiki>[[http://ubuntuforums.org/showthread.php?t=524518|CD-Rom drive does not work out of the box]]</nowiki>, but <nowiki>[[http://www.jordswart.org/kubuntu-on-dell-latitude-d830-with-intel-gpu/more-tuning|that is fairly easy to fix]]</nowiki> - DelGurth

=== System Info ===
<pre>
bios-version:A01 (Gutsy Info applies to A02  respectively A04 bios, I haven't seen any difference in between the two)
system-manufacturer:Dell Inc.
system-product-name:Latitude D830
System-version:No Specified
</pre>

=== Hardware details ===

{| class="wikitable"
|-
| <-5> '''Screen & Monitors'''
|-
| <|2> '''Device'''
| <-3> '''Works?'''
| <|2> '''Bug #'''
|-
| in Feisty (current stable)?
| in Gutsy (current development)?
| Gutsy (final) - intel graphics
|-
| Screen
| yes
| yes
| yes
| 
|-
| Correct resolution?
| yes
| yes
| yes (1650 x 1050, 1920x1200)
| 
|-
| Correct refresh rate?
| yes
| yes
| yes
| 
|-
| 3D Acceleration
| no
| yes, roughly 1100 FPS in glxgears on Core 2 2GHz T7300 (2450 FPS with Nvidia NVS 140M and Core 2 2.2GHz)
| yes (intel 965, little tweak for desktop effects)
| 
|-
| External monitor works?
| yes
| yes
| Yes
| 
|-
| External monitor - mirrors
| Untested
| Yes
| Yes
| 
|-
| External monitor - extend desktop
| Untested
| yes (xrandr 1.2)
| Yes
| 
|-
| <-5> '''Power Management'''
|-
| Battery detected?
| yes
| yes
| yes
| 
|-
| Hibernates?
| yes
| yes
| yes
| 
|-
| suspend
| no
| yes (use acpi-support below), however, sound won't work after suspend
| yes (yes everything  works) (have issues with CPUFreq after resume - GabrielAmbuehl)
| <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.22/+bug/78257/|#78257]]</nowiki> <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/kubuntu-meta/+bug/131855|131855]]</nowiki>
|-
| Dim monitor on battery
| yes
| yes
| yes
| 
|-
| Blank monitor on inactivity
| Untested
| yes
| yes
| 
|-
| Lid Close
| Untested
| yes
| yes
| 
|-
| Cpu frequency scaling
| yes
| yes
| yes
| 
|-
| <-5> '''Sound'''
|-
| Sound works?
| yes
| No (yes, after driver install)
| yes, after driver install via backport
| <nowiki>[[https://bugs.launchpad.net/bugs/131133|#131133]]</nowiki> <nowiki>[[https://wiki.ubuntu.com/Gutsy_Intel_HD_Audio_Controller|#Intel HD Audio]]</nowiki>
|-
| Correct volume?
| yes
| yes, after driver install
| yes
| 
|-
| Hardware volume switch
| yes
| yes (buttons), after driver install
| yes
| 
|-
| Headphone jack
| yes
| yes, after driver install, note: upon attaching a headphone to the docking station, laptop speakers remain on, but that can be changed in the mixer easily
| yes (no test with docking, laptop speakers just mute), docking  station works depending on actual driver used (alsa-1.0.15 does work)
| 
|-
| Mic jack
| no
| internal mic works(FrontMic in Mixer->Switches), Mic jack works (Mic in Mixer->Switches)
| yes
| 
|-
| <-5> '''Networking'''
|-
| Wired NIC
| yes
| yes
| yes, also thru docking stationg
| 
|-
| Intel® 3945 802.11a/g Wireless
| yes
| yes
| yes
| 
|-
| Intel® 4945 802.11a/g/n Wireless
| untested
| yes (tested with 8.02.11g APs)
| untested
| 
|-
| PCMCIA NIC
| Untested
| Untested
| Untested
| 
|-
| Firewire
| Untested
| Untested
| Untested
| 
|-
| Bluetooth
| no
| no (greenly), yes (allee)
| yes
| 
|-
| Modem
| Untested
| Untested
| Untested
| 
|-
| Infrared
| Untested
| Untested
| Untested
| 
|-
| <-5> '''Touchpad & Mice'''
|-
| Touchpad
| yes
| yes (very slow by default)
| yes (very slow by default)
| 
|-
| Touchpad - Singletap = click
| yes
| yes
| yes
| 
|-
| Touchpad - Doubletap = double click
| yes
| yes
| yes
| 
|-
| Touchpad - Scroll down side
| no?
| yes(Greenly)
| yes (no - GabrielAmbuehl)
| 
|-
| Touchpad - turned off while typing
| Untested
| NO
| no (but quite comfortable)
| 
|-
| Trackpoint
| yes
| yes (very fast by default)
| yes
| 
|-
| External mouse - USB
| yes
| yes
| yes
| 
|-
| External mouse - Serial
| Untested
| Untested
| Untested
| 
|-
| <-5> '''Docking Station/Port Replicator'''
|-
| AC through replicator
| yes
| yes
| yes
| 
|-
| USB
| yes
| yes
| 
| 
|-
| Serial
| Untested
| Untested
| Untested
| 
|-
| Parallel
| Untested
| Untested
| Untested
| 
|-
| External Monitor - VGA
| Untested
| yes
| yes
| 
|-
| External Monitor - DVI
| yes
| yes
| yes
| 
|-
| External monitor - only
| Untested
| yes
| ... but not as expected. See <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-video-intel/+bug/135557|#135557]]</nowiki>)
| Untested
|-
| Modem
| Untested
| Untested
| Untested
| 
|-
| Headphone jack
| Untested
| yes, but upon attaching a headphone to the docking station, laptop speakers remain on, but that can be changed in the mixer easily
| yes, with alsa-1.0.15
| 
|-
| NIC
| yes
| yes
| yes
| 
|-
| PS/2
| Untested
| Untested
| Untested
| 
|-
| <-5> '''Additional Hardware'''
|-
| Fingerprint reader
| Untested
| Untested
| Untested
| 
|-
| CD/DVD drive
| yes
| yes
| yes
| 
|-
| PCMCIA cards
| Untested
| Untested
| Untested
| 
|-
| Parallel Ports
| Untested
| Untested
| Untested
|-
| Card reader(s)
| Untested
| yes
| Untested
| ...needs a patched ccid package. See <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/ccid/+bug/162724|#162724]]</nowiki>)
|}

{| class="wikitable"
|-
| <-6 tablewidth="75%"> '''Function and other keys'''
|-
| <|2> '''Fn key'''
| <|2> '''Operation'''
| <|2> '''Keycode'''
| <-2> '''Works?'''
| <|2> Bug #
|-
| in Feisty (current stable)?
| in Gutsy (current development)?
|-
| + Space
| 
| 
| Untested
| Untested
| 
|-
| + Esc
| 
| 
| Untested
| Untested
| 
|-
| + F1
| Hibernate
| 
| Untested
| Hibernate event is triggered (I dont use hibernate so I cant say if it does anything further)
| 
|-
| + F2
| 
| 
| Untested
| Untested
| 
|-
| + F3
| Battery level (?)
| 
| Untested
| Shows battery level in both Gnome and KDE
| 
|-
| + F4
| 
| 
| Untested
| Untested
| 
|-
| + F5
| 
| 
| Untested
| Untested
| 
|-
| + F6
| 
| 
| Untested
| Untested
| 
|-
| + F7
| ?
| 
| Untested
| no reaction
| 
|-
| + F8
| CRT/LCD switch
| 
| Untested
| no, switches to LCD but not back (use xrandr instead)
| 
|-
| + F9
| 
| 
| Untested
| Untested
| 
|-
| + F10
| 
| 
| Untested
| Untested
| 
|-
| + F11
| 
| 
| Untested
| Untested
| 
|-
| + F12
| 
| 
| Untested
| Untested
| 
|-
| + ArrowUp
| Brightness up
| 
| Untested
| Yes
| 
|-
| + ArrowDown
| Brightness  down
| 
| Untested
| Yes
| 
|-
| + ArrowRight
| Keyboard illumination (?)
| 
| Untested
| no reaction, but then again I don't see anything happening in XP SP2 either
| 
|-
| + ArrowLeft
| Auto brightness
| 
| Untested
| Yes (may need the activation in the BIOS)
| 
|-
| + PgUp
| 
| 
| Untested
| Untested
| 
|-
| + PgDown
| 
| 
| Untested
| Untested
| 
|-
| <-6> '''Other special keys'''
|-
| <|2> '''Key'''
| <|2> '''Operation'''
| <|2> '''Keycode'''
| <-2> '''Works?'''
| <|2> Bug #
|-
| in Feisty (current stable)?
| in Gutsy (current development)?
|-
| Volume up
| 
| 
| Untested
| yes
| 
|-
| Volume down
| 
| 
| Untested
| yes
| 
|-
| Mute
| 
| 
| Untested
| OSD correctly shown, no action
| 
|}

Fn+Letters used for "Numpad" works.

==== Docking Station - D/Port Advanced Port Replicator (Greenly) ====

The port replication works just fine in both Feisty and Gutsy except the audio jack which seams to do nothing for me in either.  In Fiesty I couldn't get the external monitor to work at the correct resolutions.  In Gutsy the external monitor works fairly well with the Intel graphics.  The laptops LCD is blanked and the external LCD used at the correct resolution.     The Intel driver doesn't seem to support the second screen settings yet.
* Audio: works with certain alsa releases (2.6.22-12 and alsa 1.0.15rc1 works fine for me, 2.6.22-14 does not) - GabrielAmbuehl
* Graphics Output: for dual head you can use xrandr, but you need a Virtual screen defined in Xorg that is the sum of both screen widths wide and the higher of the two screens high for it to truly work. Can use either DVI or VGA. DVI AND VGA at the same time also works, but then the internal screen will shut off.  - GabrielAmbuehl

For me docking a running system does not work in either Feisty and Gutsy. The system just hangs and the only way to solve that is to reset it. - DelGurth
* I agree, docking/undocking only works in suspend for me - GabrielAmbuehl

==== Example config for dual head ====
I use this xorg.conf snippet to drive my internal 1920x1200 LCD together with an external 1600x1200 LCD.
<pre>
Section "Screen"
        Identifier      "Default Screen"
        Device          "Intel Corporation Mobile GM965/GL960 Integrated Graphics Contr
        Monitor         "Generic Monitor"
        DefaultDepth    24
        SubSection "Display"
                
                       Virtual 3520 1200
        EndSubSection
EndSection
</pre>
the interesting part is the Virtual line (see above for calculation details). In order to get the screens up and running you may have to tinker with xrandr, along the lines of:
<pre>
xrandr --output TMDS-1 --mode 1600x1200 --left-of LVDS
xrandr --output LVDS --mode 1920x1200
</pre>DVI t
LVDS is always internal screen, external screen may either be VGA or TMDS-1 (in case of DVI through docking station). I haven't tried TV, but  that probably works in a similar fashion.
Note that you can't run compiz on screens bigger than 2048*2048 easily.

==== Bluetooth (mgreenly) ====
Bluetooth does not work for me under BIOS version A01 or A05.  Given other peoples working installations I suspect that either mine is broke or because mine was an extremely early purchase for this model there may have been a change/fix after mine was made.  No devices show up when I do "hcitool dev" nor do any Bluetooth controllers show up in lsusb's output.  It works correctly in Windows.

==== Bluetooth (AchimBohnet) ====
I've never had problems Dell's builtin bluetooth.  Worked out of the box on my D830 in Gusty (and in half a dozend other Latitude laptops with earlier Kubuntu releases).   `hcitool dev`  lists my adapter.   FWIW. right now I'm connected to the internet via the builtin in bt adapter ;) ---  -- AchimBohnet 
For Feisty you need to install gnome-bluetooth before bluetooth can be used (from GNOME). But with that package I'm able to receive files from my mobile phone, for example. - DelGurth

==== Fixing sound on Gutsy(final) ====
To fix the audio install the kernel-backports-modules and restart.
<pre>
sudo apt-get install linux-backports-modules-generic
</pre>
then reboot

==== Fixing sound on Gutsy (alternative) ====
Sound on Gutsy and the D830 be fixed by using a newer version of ALSA:
make sure you have all requirements to build the kernel installed (i.e. sources, corresponding compilers etc)
get [alsa-driver-1.0.15 ftp://ftp.alsa-project.org/pub/driver/alsa-driver-1.0.15r])
in the newly create folder, run
<pre>
./configure --with-cards=hda-intel --with-kernel=/usr/src/linux-headers-`uname -r`/                     
make 
sudo make install
</pre>
then reboot

See also: <nowiki>[[Gutsy_Intel_HD_Audio_Controller]]</nowiki>

==== Notes ====

===== Gutsy =====

* 9-Dec 2007: to get desktops effects working with the 965 intel: http://linux.dell.com/wiki/index.php and type  "gstreamer-properties" on the commandline. On the window that pops up selected the video tab and changed it to X windows (no xv) so I could play video.

* 13-Sep: retried again and problem is gone:  10-Sep: External monitor: a pkg upgrade over the weekend has broken external DVI.  During boot  external monitor works as before, but as soon as Xserver starts the external monitor is black (Monitor tells me that here is still a signal).   Xrandr output and commands seem to work as before, just that the display stays black.  Switching with Alt-Ctrl-F1 to console and I see the output on DVI again. Needs some more investigation what changed ... --  <nowiki>[[https://bugs.launchpad.net/~allee|allee]]</nowiki>

* Guidance Power Manager sometimes claims that there is no battery installed.
** Looks like it's related to package updates and restarted hald (see <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/kde-guidance/+bug/123812|#123812]]</nowiki>) -- 

* Laptop plugged into docking station, the lid closed and external monitor switched on: 
** After reboot, gfx driver uses pixel and size infos of the laptop monitor, not the external ones (See <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-video-intel/+bug/135557|#135557]]</nowiki>)
** Hibernated Laptop without docking station; the put it in: After restart the the external monior is not switched on
** Tribe5: Laptop alone suspended fine for me.  But with docking it did not work --  <nowiki>[[https://bugs.launchpad.net/~allee|allee]]</nowiki>
** Works with acpi-support below for me - GabrielAmbuehl
** Possibly related to the alsa version, see just below -- GabrielAmbuehl

* Sometimes after logout, kdm's greeter is not shown (black screen).  Alt-Crtl-F1, then Alt-Ctrl-F7, 'fixes' it --  <nowiki>[[https://bugs.launchpad.net/~allee|allee]]</nowiki>

* After suspend-to-ram, only CPU0 (i.e. one core) is being used and that's stuck at whatever speed it was when it was suspended (which is likely 800MHz). This happens on both 2.6.22 from repos as well as custom compiled 2.6.23 so it's possibly a kernel bug. See <nowiki>[[https://bugs.launchpad.net/bugs/145876|#145876]]</nowiki>. It seems like removing acpi_cpufreq and possibly cpufreq_drivers and reloading them can fix this - GabrielAmbuehl

===== Feisty =====
* Life CDs don't work in general with GMA X3100 .
* Feisty did NOT use correct resolution with VESA on my machine 
* Technically, you can install xorg stuff from Gutsy and get it to work, even with 3d acceleration (there's a few threads on the forum) but it's a very ugly hack and might have other, weird side-effects. 

----
==== Working /etc/default/acpi-support ====

The following acpi-support configuration will successfully suspend the 2.6.22  and 2.6.23 kernel even while docked (in doubt, try alsa-1.0.15 instead of backported driver). You might want to mess with unloading additional modules if it doesn't work for you:

<pre>
ACPI_SLEEP=true

ACPI_HIBERNATE=true

ACPI_SLEEP_MODE=mem

MODULES="usbhid ehci_hcd uhci_hcd kvm kvm_intel"

MODULES_WHITELIST=""

VBESTATE=/var/lib/acpi-support/vbestate

POST_VIDEO=false

SAVE_VIDEO_PCI_STATE=true

HIBERNATE_MODE=shutdown

STOP_SERVICES="mysql "

RESTART_IRDA=false

</pre>

CategoryLaptop
