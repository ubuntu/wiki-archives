{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

I'm trying to collect the useful information about setting up a more or less properly running Xubuntu 8.04 on a Sony Vaio sz740n laptop. It might take time :)

Sorry for my English, it's not my native language...

== Sound ==
<pre>
sudo mousepad /etc/modprobe.d/alsa-base
</pre>

Add these lines to the end:

<pre>
alias snd-card-0 snd-hda-intel
options snd-card-0 index=0
options snd-hda-intel model=vaio
</pre>

I had to reboot as restarting only alsa didn't work.

from:
http://doube.org/hardy-vaio.html#audio

== Suspend ==
I've found a perfect howto here: http://ubuntuforums.org/showthread.php?p=5706726
thanks to dwitkin (http://ubuntuforums.org/member.php?u=546810)

open a terminal and:
<pre>
cd /etc/default
sudo cp acpi-support acpi-support.bak
gksudo mousepad acpi-support
</pre>

delete everything in the file and paste this instead:
<pre>
ACPI_SLEEP=true

ACPI_HIBERNATE=true

ACPI_SLEEP_MODE=mem

MODULES="uvcvideo iwlagn"

MODULES_WHITELIST="fglrx"

SAVE_VBE_STATE=false

VBESTATE=/var/lib/acpi-support/vbestate

POST_VIDEO=false

USE_DPMS=false

HIBERNATE_MODE=shutdown

LOCK_SCREEN=true

RESET_DRIVE=true

STOP_SERVICES=""

RESTART_IRDA=false

ENABLE_LAPTOP_MODE=false

SPINDOWN_TIME=12
</pre>

Reboot.

Both going to sleep mode and waking up take about 10 sec. if it takes more, than you can try what's below at the hibernation part, modifying the interfaces file...

One small problem I realized so far: the bluetooth led is lighting after resume.

NOTE: I've only tested it with my nvidia VGA card, i don't know if it's working with the intel's. As soon as it's tested i'll write it here.

== Hibernate ==
Hibernate works with nvidia VGA card. If you think it takes too long, you can try to put a # in front of the "auto eth0" in the "/etc/network/interfaces":
<pre>
sudo mousepad /etc/network/interfaces
</pre>

change this line:
<pre>
auto eth0
</pre>

to this:
<pre>
</pre>

== Webcam ==
Install the version which fits to your kernel version nr. (you can check it in terminal easily: uname -a)
http://www.arakhne.org/spip.php?article50

Project page:
http://wiki.mediati.org/R5u870

You can test/record easily with xawtv.

== Automatic VGA card detection ==
I use the intel driver included in ubuntu and i use the restricted driver of nvidia from the repository. I also have tried to get the nvidia driver from Envy-ng working. it was working but switching from and to the intel's couldn't work that way, so i decided to stay with the driver in the repo.

first we have to create a script which copies the correct xorg.conf file to it's place.

<pre>
sudo nano /etc/init.d/xorg_conf
</pre>

copy paste this(ctrl-c ; shift-insert):

<pre>
VIDEO=`/usr/bin/lspci |grep -c nVidia`

if [ "$VIDEO" = 1 ]; then
cp -f /etc/X11/xorg.conf.speed /etc/X11/xorg.conf
echo 0 > /sys/devices/platform/sony-laptop/bluetoothpower
else
cp -f /etc/X11/xorg.conf.stamina /etc/X11/xorg.conf
echo 0 > /sys/devices/platform/sony-laptop/bluetoothpower
fi
</pre>

* NOTE: the <code>echo 0 > /sys/devices/platform/sony-laptop/bluetoothpower</code> line is only there to switch off the bluetooth led, you can remove (or simply put a # in front of them) that line from both part if you want to use bluetooth...

save and exit (ctrl-x)

now we have to make it executable:

<pre>
sudo chmod +x /etc/init.d/xorg_conf
</pre>

and to link it to the right place so it's running when system starts:

<pre>
sudo ln -s /etc/init.d/xorg_conf /etc/rc2.d/S12xorg_conf
</pre>

i use these two xorg.conf file:

/etc/X11/xorg.conf.speed
<pre>

Section "InputDevice"
	Identifier	"Generic Keyboard"
	Driver		"kbd"
	Option		"XkbRules"	"xorg"
	Option		"XkbModel"	"pc105"
	Option		"XkbLayout"	"us"
EndSection

Section "InputDevice"
	Identifier	"Configured Mouse"
	Driver		"mouse"
	Option		"CorePointer"
EndSection

Section "InputDevice"
	Identifier	"Synaptics Touchpad"
	Driver		"synaptics"
	Option		"SendCoreEvents"	"true"
	Option		"Device"	"/dev/psaux"
	Option		"Protocol"	"auto-dev"
	Option		"HorizEdgeScroll"	"0"
EndSection

Section "Device"
	Identifier	"Configured Video Device"
	Driver		"nvidia"
	Option		"NoLogo"	"True"
EndSection

Section "Monitor"
	Identifier	"Configured Monitor"
EndSection

Section "Screen"
	Identifier	"Default Screen"
	Monitor		"Configured Monitor"
	Device		"Configured Video Device"
	Defaultdepth	24
EndSection

Section "ServerLayout"
	Identifier	"Default Layout"
  screen "Default Screen"
	Inputdevice	"Synaptics Touchpad"
EndSection
Section "Module"
	Load		"glx"
EndSection
</pre>

/etc/X11/xorg.conf.stamina
<pre>

Section "InputDevice"
	Identifier	"Generic Keyboard"
	Driver		"kbd"
	Option		"XkbRules"	"xorg"
	Option		"XkbModel"	"pc105"
	Option		"XkbLayout"	"us"
EndSection

Section "InputDevice"
	Identifier	"Configured Mouse"
	Driver		"mouse"
	Option		"CorePointer"
EndSection

Section "InputDevice"
	Identifier	"Synaptics Touchpad"
	Driver		"synaptics"
	Option		"SendCoreEvents"	"true"
	Option		"Device"		"/dev/psaux"
	Option		"Protocol"		"auto-dev"
	Option		"HorizEdgeScroll"	"0"
EndSection

Section "Device"
	Identifier	"Configured Video Device"
EndSection

Section "Monitor"
	Identifier	"Configured Monitor"
EndSection

Section "Screen"
	Identifier	"Default Screen"
	Monitor		"Configured Monitor"
	Device		"Configured Video Device"
EndSection

Section "ServerLayout"
	Identifier	"Default Layout"
	Screen		"Default Screen"
	InputDevice	"Synaptics Touchpad"
EndSection
</pre>

== Useful Links ==
Similar hw:
http://doube.org/hardy-vaio.html
http://www.linux.it/~malattia/wiki/index.php/Vaio_VGN-SZ72B
http://www.linux-on-laptops.com/sony.html

linux forum on sony's page, fn-keys workaround
http://club.vaio.sony.eu/clubvaio/gb/en/forum/viewthread?thread=54628&offset=20

To be continued...
