{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* Contact: <nowiki>[[OGerlich]]</nowiki>
* Make: Toshiba
* Brand: Satellite
* Model: L40-14N
* Website: <nowiki>[[http://de.computers.toshiba-europe.com/cgi-bin/ToshibaCSG/jsp/productPage.do?service=DE&PRODUCT_ID=137265&toshibaShop=false]]</nowiki>

=== Current Issues (tested with Hardy 8.04 LiveCD) ===
* WLAN does not work out-of-the-box (requires Ndiswrapper)
* Brightness control works but has weirdness
* Modem doesn't seem to be detected
* Some Fn keys do not work

=== System Info ===
* $ sudo dmidecode -s system-manufacturer:
   TOSHIBA
* $ sudo dmidecode -s system-product-name
   Satellite L40
* $ sudo dmidecode -s system-version
   PSL48E-01E00VGR

=== Hardware details ===

{| class="wikitable"
|-
| <-5 tablewidth="75%"> '''Screen & Monitors'''
|-
| <|2> '''Device'''
| <-3> '''Works?'''
| <|2> '''Bug #'''
|-
| in Ubuntu 6.06 LTS
| in Edgy
| in Gutsy (current stable release)
|-
| Screen
| Untested
| Untested
| Yes
| 
|-
| Correct resolution?
| Untested
| Untested
| Yes (1280 x 800)
| 
|-
| Correct refresh rate?
| Untested
| Untested
| Yes (60Hz)
| 
|-
| 3D Acceleration
| Untested
| Untested
| Yes
| 
|-
| External monitor works?
| Untested
| Untested
| Works, but not automatically; also, Fn+F5 doesn't switch
| 
|-
| External monitor - mirrors
| Untested
| Untested
| Yes
| 
|-
| External monitor - extend desktop
| Untested
| Untested
| Untested
| 
|-
| <-4> '''Power Management'''
|-
| Battery detected?
| Untested
| Untested
| Yes
| 
|-
| Hibernates?
| Untested
| Untested
| Yes (including orange LED glow)
| 
|-
| Suspend
| Untested
| Untested
| Yes
| 
|-
| Dim monitor on battery
| Untested
| Untested
| Yes
| 
|-
| Blank monitor on inactivity
| Untested
| Untested
| Untested
| 
|-
| Lid Close
| Untested
| Untested
| Yes
| 
|-
| Cpu frequency scaling
| Untested
| Untested
| Yes
| 
|-
| <-4> '''Sound'''
|-
| Sound works?
| Untested
| Untested
| Yes
| 
|-
| Correct volume?
| Untested
| Untested
| Yes
| 
|-
| Hardware volume switch
| Untested
| Untested
| Yes
| 
|-
| Headphone jack
| Untested
| Untested
| Untested
| 
|-
| Mic jack
| Untested
| Untested
| Untested
| 
|-
| <-4> '''Networking'''
|-
| Wired NIC
| Untested
| Untested
| Yes
| 
|-
| Wireless NIC
| Untested
| Untested
| No
| 
|-
| PCMCIA NIC
| Untested
| Untested
| Untested
| 
|-
| Firewire
| <-3> ''N/A''
| 
|-
| Bluetooth
| <-3> ''N/A''
| 
|-
| Modem
| Untested
| Untested
| Untested
| 
|-
| Infrared
| <-3> ''N/A''
| 
|-
| <-4> '''Touchpad & Mice'''
|-
| Touchpad
| Untested
| Untested
| Yes
| 
|-
| Touchpad - Doubletap = double click
| Untested
| Untested
| Yes
| 
|-
| Touchpad - Scroll down side
| Untested
| Untested
| Yes
| 
|-
| External mouse - USB
| Untested
| Untested
| Yes
| 
|-
| External mouse - Serial
| Untested
| Untested
| Untested
| 
|-
| <-4> '''Docking Station/Port Replicator'''
|-
| AC through replicator
| Untested
| Untested
| Untested (don't have replicator)
| 
|-
| USB
| Untested
| Untested
| Untested
| 
|-
| Serial
| Untested
| Untested
| Untested
| 
|-
| Parallel
| Untested
| Untested
| Untested
| 
|-
| External Monitor - VGA
| Untested
| Untested
| Untested
| 
|-
| External Monitor - DVI
| Untested
| Untested
| Untested
| 
|-
| Modem
| Untested
| Untested
| Untested
| 
|-
| NIC
| Untested
| Untested
| Untested
| 
|-
| PS/2
| Untested
| Untested
| Untested
| 
|-
| <-4> '''Additional Hardware'''
|-
| Fingerprint reader
| <-3> ''N/A''
| 
|-
| CD/DVD drive
| Untested
| Untested
| Yes (burn functionality untested)
| 
|-
| PCMCIA cards
| <-3> ''N/A''
| 
|-
| Express cards
| Untested
| Untested
| Untested
| 
|-
| Parallel Ports
| <-3> ''N/A''
| 
|-
| Card reader(s)
| <-3> ''N/A''
| 
|}

{| class="wikitable"
|-
| <-7 tablewidth="75%"> '''Function and other keys'''
|-
| <|2> '''Fn key'''
| <|2> '''Operation'''
| <|2> '''Keycode'''
| <-3> '''Works?'''
| <|2> Bug #
|-
| in Ubuntu 6.06 LTS?
| in Edgy?
| in Gutsy (current stable)?
|-
| + Esc
| Mute volume
| 
| Untested
| Untested
| Yes
| 
|-
| + F1
| Screen Lock
| Super L
| Untested
| Untested
| No
| 
|-
| + F2
| "Change power saving mode"
| 
| Untested
| Untested
| No
| 
|-
| + F3
| Suspend-to-RAM
| 
| Untested
| Untested
| Yes
| 
|-
| + F4
| Suspend-to-Disk
| 
| Untested
| Untested
| No
| 
|-
| + F5
| "Change active display device"
| ''ACPI''
| Untested
| Untested
| No
| 
|-
| + F6
| Brightness down
| 
| Untested
| Untested
| Yes
| 
|-
| + F7
| Brightness up
| 
| Untested
| Untested
| Yes
| 
|-
| + F8
| "Switch between active wireless devices"
| ''ACPI''
| Untested
| Untested
| No
| 
|-
| + F9
| "Enable/disable touchpad"
| ''ACPI''
| Untested
| Untested
| Yes (see below)
| 
|-
| + F11
| NumLock
| 
| Untested
| Untested
| Yes
| 
|-
| + F12
| ScrollLock
| 
| Untested
| Untested
| Untested
| 
|-
| + Up
| Volume up
| 
| Untested
| Untested
| Yes
| 
|-
| + Down
| Volume down
| 
| Untested
| Untested
| Yes
| 
|-
| <-7> '''Other special keys''': ''N/A''
|}

==== Notes ====

===== Wireless LAN =====
The machine has a built-in '''Realtek RTL8187B''' WLAN adapter, connected via USB (vendor ID: ''0x0bda'', product ID: ''0x8197''). The adapter is shown by ''lsusb'', but Gutsy does not load any driver for it.

There is a patched Realtek driver available at <nowiki>[[http://www.datanorth.net/~cuervo/blog/2007/09/26/no-more-vista/]]</nowiki> which basically seems to work (NetworkManager shows available WLAN hotspots - havn't tested to actually connect to a hotspot). The driver seems to have some drawbacks, though:
* WPA seems to require a modified wpa_supplicant (contained in the .tgz) but overall the WPA support seems to be quite unstable
* link quality is broken (it shows lowest quality for all APs)

After loading this driver, the little orange WLAN LED (near the WLAN switch at the front) gets orange - no clue what that actually means. Toggling the hardware WLAN switch has no effect on the LED; pressing Fn+F8 (which is meant for "switching between active wireless devices") has no effect on the LED either. I have no WLAN available for testing, so no idea what these two switches actually do for the connection :-)

The broken WPA support finally led me to try <nowiki>[[Ndiswrapper]]</nowiki>, which has worked out very well. There are some hints on the net to use the Win98 driver, which can be found at <nowiki>[[ftp:--202.65.194.212-cn-wlan-RTL8187B_driver_only.zip]]</nowiki>. The chip is not detected automatically by the driver, so this has to be forced. Installation instructions:
* download and unzip the driver
* change to Win98 directory in the unzipped driver
* run "sudo ndiswrapper -i net8187b.inf"
* check with "ndiswrapper -l" that the driver is listed as installed
* run "sudo ndiswrapper -a 0bda:8197 net8187b" (this forces the driver to recognize this specific chipset)
* run "modprobe ndiswrapper"

After doing this, NetworkManager should show that it has recognized the WLAN adapter. It also shows signal strength for detected APs and supports WPA. To load the driver automatically on boot, add the line ''ndiswrapper'' to the file ''/etc/modules''.

'''Update:''' as described in <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux-ubuntu-modules-2.6.24/+bug/258344|LP 258344]]</nowiki>, a driver for "Realtek 8187 USB" has been published as kernel update for Ubuntu Hardy (linux-ubuntu-modules-2.6.24, version 2.6.24-21.31). The driver source seems to indicate support for product ID 0x8197, so it might work for this laptop (haven't tested it, though).

'''Update:''' with Ubuntu Intrepid, Wireless LAN works out of the box (tested with Live CD), including WPA. According to Network Manager, the rtl8187 driver is used.

===== Brightness control =====
Brightness control basically works (via Fn+F6/F7, via Brightness Applet, and automatically when unplugging AC). However, there is the weirdness that when using the applet and dragging the slider from highest to lowest value, the brightness dims twice: when going from highest to half value, screen is dimmed; when going a bit further down, it switches back to brightest display, and then goes to dimmed again when going to lowest slider value. The Fn buttons have a similar effect when used for the first time after boot or after using the applet.

Also, brightness changes done through Fn buttons don't seem to update the applet slider.

===== Desktop Effects (Compiz) =====
Desktop Effects on this machine were not enabled automatically by Gutsy, and enabling them through the control dialog doesn't work either. Apparently this happens because the integrated Intel 965 graphics chip (PCI ID: ''8086:2a02'', using ''intel'' driver) is blacklisted by compiz (see <nowiki>[[http://wiki.compiz-fusion.org/Hardware/Blacklist]]</nowiki>). Removing its PCI ID from the blacklist makes compiz available, but indeed makes Totem crash as is documented on the Blacklist page. After disabling XV for gstreamer (with gstreamer-properties), Totem no longer crashes.

'''Update:''' with Ubuntu Hardy the desktop effects are automatically enabled (at least on LiveCD), and there don't seem to be any problems with that (Totem can use XV without crashing now).

However there is still the problem that windowed OpenGL applications don't work well under Compiz (see <nowiki>[[https://bugs.launchpad.net/ubuntu/+bug/116793/|bug #116793]]</nowiki>). This is not specific for this laptop model, but seems to affect all OpenGL drivers (except NVidia and ATI?). In summary: most 3D games should work (as they use fullscreen mode) but applications like GoogleEarth will have constant flickering etc. and are practically unusable. Switching off Desktop Effects when using such an application is the only workaround I know of.

===== External monitor =====
When plugging in an external 17" CRT in the VGA socket, nothing happens. But running ''xrandr'' in terminal shows that the CRT is detected. Running ''xrandr --output VGA --auto'' wakes up the CRT, displays the current screen in 1024x768, and moves/resizes the Gnome panels to fit to that (smaller) resolution. Although I usually run the CRT at 1280x1024, it apparently only advertises up to 1024x786 over EDID; so adapting to the lower resolution seems acceptable.

After unplugging the CRT, again nothing happens on the laptop display. After running ''xrandr --output VGA --off'', the Gnome panels are moved/resized to their original position.

===== Fn keys =====
Of the available Fn+? key combinations, several combos work automatically and don't require any manual configuration (marked as "Yes" in the Fn key table above). Here's the situation for the other Fn combos:
* Fn+F1: gives keycode ''Win Key + L'' (the Screen Locking combo under Windows); probably can be made available in Gnome if Win Key can be used as hotkey modifier
* Fn+F2: should switch the power saving mode; I haven't found a way to detect this keypress in Ubuntu in any way
* Fn+F4: should activate Suspend-to-Disk; again, I haven't gotten any reaction under Ubuntu for this key
* Fn+F5: should switch active display device; when running ''acpi_listen'', pressing this combo prints ''hotkey ATKD 00000061 0000000e''
* Fn+F8: should switch between active wireless devices; is displayed in ''acpi_listen'' with these two lines:
** ''hotkey ATKD 0000005d 0000001b''
** ''hotkey ATKD 0000005e 0000001d''
 but only if the wireless switch (at the front) is switched to ON - otherwise no ACPI event is generated for this combo!
* Fn+F9: enable/disable the touchpad; to make it work, enable SHMConfig in xorg.conf by adding
 <pre>
    Option "SHMConfig" "on"
 </pre>
 in `/etc/X11/xorg.conf`, on the end Touchpad `Section "InputDevice"`.

I suppose the non-working combos that are displayed in acpi_listen could be made available somehow (as described on <nowiki>[[http://people.freedesktop.org/~hughsient/quirk/quirk-keymap-index.html]]</nowiki>).

 Also see https://wiki.ubuntu.com/LaptopTestingTeam/HotkeyResearch

===== Modem =====
The modem is apparently an Agere (now LSI) softmodem with PCI ID ''11c1:1040''. Under Windows, it appears as "Toshiba Software Modem". It is connected via the HDA bus.

As it seems, this chip is at the moment not supported under Linux. Details can be found at <nowiki>[[http://linmodems.technion.ac.il/archive-seventh/msg00915.html]]</nowiki> (Apr. 2007).

The PCI ID seems to indicate that the modem is based on the DAA1040 chipset (see <nowiki>[[http://www.lsi.com/networking_home/networking_products/modem_chip_sets/daa1040/index.html]]</nowiki>).
