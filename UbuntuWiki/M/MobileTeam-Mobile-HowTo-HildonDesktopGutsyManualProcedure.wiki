{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

== Procedure to have the Hildon Desktop running on Gutsy ==

This is the step-by-step procedure to have the Hildon Desktop that will be used in the Ubuntu Mobile and Embedded project.

Warning: Albeit possible, having the mobile system running in a normal Gutsy installation is more probable to cause problems, specially in these early stages of development, therefore, it's safer to have a chroot environment, which is what's described below.

=== Preparing the base environment ===

* Prepare a gutsy chroot in ${DIR}:
<pre>
$ sudo debootstrap --arch i386 gutsy ${DIR} http://archive.ubuntu.com/ubuntu
$ sudo mount --bind /tmp ${DIR}/tmp
$ sudo mount -t proc none ${DIR}/proc
$ sudo mount --bind /sys ${DIR}/sys
</pre>

* Everything should be ready, so:
<pre>
$ sudo chroot ${DIR}
</pre>
 
=== Packages ===

The meta-package ubuntu-mobile provides all the necessary packages and it's dependencies so, inside the chroot:

* Add the universe repository to `/etc/apt/sources.list`: <pre>
deb http://archive.ubuntu.com/ubuntu/ gutsy main restricted universe
</pre>
* Update the repositories and install `ubuntu-mobile`: 
<pre>
$ apt-get install ubuntu-mobile
</pre>

Note: If you have problems installing hal then do this and try again
<pre>
printf '#!/bin/sh\nexit 101' > /usr/sbin/policy-rc.d ; chmod 755 /usr/sbin/policy-rc.d
</pre>

=== Development packages ===

Those are packages that are likely to be used when developing applications using the environment above so you can have the hildon desktop shown in your normal desktop.

* `xserver-xephyr`

=== Preparation ===

* Create a normal user inside the chroot:
<pre>
sudo adduser ume
</pre>
  
=== Running ===

* Enter the chroot
* start dbus <pre>
/etc/init.d/dbus restart
</pre>
* and su - to the user created above.
* Outside the chroot execute Xephyr like this:
 
<pre>
Xephyr :1 -host-cursor -screen 800x480x16 -dpi 96 -ac
</pre>
 
* Execute the following `start-hildon` script as the user you created above.

<pre>

PREFIX=/usr
THEME=${PREFIX}/share/themes/plankton

export DISPLAY=:1

export GTK2_RC_FILES=${THEME}/gtk-2.0/gtkrc:${THEME}/gtk-2.0/gtkrc.maemo_af_desktop
export LANG=en_GB.UTF-8
export LC_ALL=en_GB.UTF-8
export LANGUAGE=en_GB.UTF-8

exec /usr/lib/libgconf2-4/gconfd-2 &

exec ${PREFIX}/bin/matchbox-window-manager -display ${DISPLAY} \
                                           -theme ${THEME}/matchbox/theme.xml \
                                           -use_titlebar yes \
                                           -use_desktop_mode plain \
                                           -use_lowlight no \
                                           -use_cursor yes \
                                           -use_super_modal yes &

exec ${PREFIX}/lib/sapwood/sapwood-server &

exec ${PREFIX}/bin/hildon-desktop</pre>

As result, you should see the hildon desktop inside the Xephyr window.
