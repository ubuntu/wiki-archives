{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Introduction ===

This page describes the sequence of startup events that occur during the startup of a MID ( Mobile Internet Device ) running Ubuntu Mobile.  It was created as an aid to those debugging problems involving startup, and also as a resource to be used for improving boot/startup times of a system running Ubuntu Mobile.

It also should be noted that there's considerable overlap between a standard desktop system running Ubuntu and a MID, however since MIDs run a hybrid Gnome/Hildon desktop, there are some major differences.

''Note'' - the term ''task'' used below refers to an Upstart task defined in ''/etc/event.d''.

=== Startup Events ===

1. init (upstart) process ( pid=1 ) started

* ''init'' issues ''startup'' system event

2. ''rcS'' task started
* [ start on ''startup'', stop on ''runlevel'' ]
* sets up ''PREV/RUNLEVEL'' environment variables
* execs ''/etc/init.d/rc S''

3. Start Single User Mode ( ''/etc/init.d/rc S'' )
* runs each script in ''/etc/rcS.d'' in the following order:
** mountkernfs
** hostname
** console-kybd
** linux-restricted-modules
** hwclock
** ifup loopback
** udev
** module-init-tools ( /etc/modules )
** udev-finish
** networking ( lo ) ---> /etc/network/interfaces
** mount filesystems

4. ''rc-default'' task started
* [start on stopped ''rcS'']
* execs ''telinit 2'' ( sends a ''runlevel 2'' command to init/upstart )

5. ''rc2'' task started
* [start on ''runlevel 2'']
* updates ''PREV/RUNLEVEL'' environment variables
* execs ''/etc/init.d/rc 2''

6. Start Multiuser Mode ( ''/etc/init.d/rc 2'' )
* runs each script in ''/etc/rc2.d'' in the following order:
** moblin-applets ( loads ACPI modules! )
** syslogd
** xorg wacom
** klogd
** dbus - starts dbus system bus ( on startup, runs scripts present in ''/etc/dbus-1/event.d'' )
*** NetworkManager
*** NetworkManagerDispatcher
** hal
** makedev ( dvb no-op )
** dhcdbd ( dbus dhclient )
** bluetooth
** usplash
** rc.local ( no-op )
** rmnologin

7. ''session'' task started
* [start on runlevel 2]
* execs ''su -l ume -c "/usr/bin/startx" -config xorg-crownbeach.conf''

''Note'' - this task is started in parallel with the ''rc2'' task as they both use ''start on runlevel 2''.

[startx????]

8. X11 started
** during startup, X also will run any scripts found in ''/etc/X11/Xsession.d'':
** 25ume-config-common-startup
*** sets GTK2_RC_FILES and LANG (en_GB.UTF-8) env vars
*** execs ''/usr/share/ume-config-common/ume-start-gui''
** 75dbus-dbus-launch - starts dbus session bus

9. Start Desktop  ( ''/usr/share/ume-config-common/ume-gui-start'' )
* this script starts the following applets, daemon processes, and commands: 
** matchbox-window-mgr ( daemon )
** sapwood-server ( gtk theming daemon )
** for each in ''/etc/xdg/autostart''
** bluetooth-applet.desktop
** nm-applet.desktop
** volume-applet.desktop
** for each in ''/usr/share/autostart''
** moblin-settings-daemon
** xhost ( allows root to write to X )
** for each in ''/usr/share/gnome/autostart''
** gnome-visual-at ( visual assistance tech ) - no-op
** hildon-desktop!!!

''The End''
