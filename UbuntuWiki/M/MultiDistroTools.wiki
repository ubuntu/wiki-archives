{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== What is MultiDistroTools ? ==

'''multidistrotools''' is a package providing lots of small scripts useful to MOTUs and other Debian derivatives developers. Currently, it particularly targets scripts dealing with lists of packages (all software written in ruby, all science-related software), allowing the user to get a ''global view'' of the packages it cares about. But the scope of multidistrotools might be larger in the future.
 
The multidistrotools package provides /usr/bin/mdt. This executable is a wrapper for a lot of other small scripts which reside in /usr/share/multidistrotools. Those scripts can be run directly, but it is easier to run them through ''mdt''.

== More info ==
Scripts in /usr/share/multidistrotools should do only one thing, but do it well. Scripts longer than 50 lines should really be exceptions.

Scripts in /usr/share/multidistrotools can be written in whatever language one want. However, limiting ourselves to a small set of languages and tools might be a good idea. The packages needed to run those scripts is listed as Recommends, because the user might not want to run all the scripts.

Scripts are coded in a smart way, allowing chaining. They should read their input from ''stdin'' as much as possible, and use ''stdout'' and ''stderr' for output.

Currently, multidistrotools depends on ruby, because /usr/bin/mdt is written in this language. However, /usr/bin/mdt is less than 100 lines, so you can rewrite it in python if this dependancy bothers you too much.

== TODO / DONE list ==
Scripts needed:
* Packages and Sources file management
** download Packages and Sources files for a distribution (Debian, Ubuntu) and a section (main, contrib, non-free, universe, multiverse) in a local folder (''~/.multidistrotools/'' ?) '''done'''
** Output those packages files for a distribution (Debian, Ubuntu) and a section (all of them, main, contrib, non-free, universe, multiverse)
** Get a list of binary/source packages matching something from those Packages or Sources files:
*** Recursive dependancies of something (using Depends, Recommends or Suggests) '''done: depends (but still need more love to select distribution and dependancy type)'''
*** Recursive reverse dependancies of something (using Depends, Recommends or Suggests) '''done: depends'''
*** Section
*** any grep-dctrl predicate
* Filter a file containing data with a list of packages '''done: filter'''
* Build a list of binary packages from a list of source packages
* Build a list of source packages from a list of binary packages '''done: src2bin'''
* <nowiki>[[http://en.wikipedia.org/wiki/Naive_set_theory|Set theory]]</nowiki> on package lists : union, intersection, difference, substraction, etc. So one can build exactly the list one want. '''done: list_*'''
* Get a list of bugs in the Debian BTS, in the Ubuntu Bugzilla, or in Malone, for a list of packages
* Compare versions of packages in Debian and Ubuntu
* Get the popcon results for a list of binary packages. Also for a list of source packages, using the most installed binary package as reference.
* Generate HTML reports for the list of bugs or the versions of packages
* Any other cool stuff that you are going to add to this list now

== Real life example ==
(Working with multidistrotools >= 0.0.9)
<pre>
cd /tmp

mdt depends --reverse libruby1.8 > binpkg

mdt bin2src < binpkg > srcpkg

if [ ! -d $HOME/.multidistrotools/sid ]; then
        mdt dist-create sid http://ftp.debian.org/debian unstable main contrib non-free
fi
if [ ! -d $HOME/.multidistrotools/dapper ]; then
        mdt dist-create dapper http://archive.ubuntu.com/ubuntu dapper main restricted universe multiverse
fi

mdt dist-apt-get sid update
mdt dist-apt-get dapper update

mdt compare-versions sid dapper > versionslist

mdt filter srcpkg < versionslist > rubyversionslist

mdt versions2html < rubyversionslist > rubyversionslist.html

</pre>

Here are <nowiki>[[http://tiber.tauware.de/~lucas/versions/|some example results]]</nowiki>.

== multidistrotools and motu-tools: what's the difference ? ==
motu-tools is a set of scripts written by ReinhardTartler, StephanHermann and others. Those scripts (<code>lpbugs.py, lpmerge.py</code>) aims at easing the merge process. At some point, they might (or not) be merged into multidistrotools. This hasn't been discussed yet.

== Development info ==
=== How can you help ? ===
* If you have some personal scripts, start your own branch and add them and ping me
* Test multidistrotools, report problems, provide ideas for other scripts, etc (all of this will be easier when we will have a package in universe)

=== Branches ===
* LucasNussbaum's branch: <code>bzr branch http://ox.blop.info/bazaar/multidistrotools/</code>
=== Building the package ===
Build the package: <code>dpkg-buildpackage -rfakeroot -us -uc -I.bzr</code><<BR>>
Read the <code>README</code> if you're interested in adding your scripts.
----
<nowiki>[[CategoryMOTU]]</nowiki>
