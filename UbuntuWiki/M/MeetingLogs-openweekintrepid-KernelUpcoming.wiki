{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Ubuntu Open Week - Kernel: From Intrepid to Jaunty - Ben Collins - Fri, Nov 7th, 2008 ===

<pre>
(03:05:57 PM) BenC: Welcome everyone
(03:06:37 PM) BenC: For this session I wanted to review a lot of what we did in Intrepid in relation to the kernel, and how we will apply that to jaunty moving forward
(03:08:11 PM) BenC: For those that followed the development cycle, you will realize we started a new tree called ubuntu-next (not to be confused with linux-next) where we continued to track the latest upstream kernel source
(03:08:46 PM) BenC: This in fact allowed us to make a last minute decision to go with 2.6.27 in Intrepid instead of 2.6.26
(03:09:22 PM) BenC: While over all that paid off, I'm sure it doesn't mean we will always follow bleeding edge that much...it just happened to work out well this time
(03:09:46 PM) BenC: I think we will continue to have an ubuntu-next tree regardless though
(03:10:03 PM) BenC: Laney: QUESTION: What made you decide to switch to .27?
(03:10:46 PM) BenC: The team reviewed a lot of the infrastructure that was going into .27, which would satisfy a lot of hardware support we were aiming for, and additionally fix a lot of issues we were having
(03:11:14 PM) BenC: Most notable in suspend/resume area, and wireless support
(03:11:44 PM) BenC: I don't think we have any regrets on the decision, but it was a little scary having something so new being pushed for release :)
(03:12:51 PM) BenC: It does mean that if jaunty follows past cycles, it will be .28, but we haven't decided that quite yet (UDS topic)
(03:13:29 PM) BenC: One other thing we did in Intrepid was to remove all support for ports from our main tree
(03:14:04 PM) BenC: While this helped us immensely for our main support, it is definite that it also hurt ports such as sparc and powerpc
(03:14:29 PM) BenC: The kernel wasn't as consistent as it had been in the past
(03:14:53 PM) BenC: We will be reviewing this at UDS and decide if certain ports (namely sparc and powerpc) can be added back to our main tree
(03:15:37 PM) BenC: QUESTION: <persia> Is there a plan to change the architecture sets for Jaunty?  Currently there seems to be one kernel for i386/amd64, another for lpia, and yet another for everything else.
(03:16:27 PM) BenC: first off, lpia is a special case...it's been tossed around between the Ubuntu Mobile folks and kernel team, and I think settling this down will be of major concern next cycle.
(03:16:41 PM) BenC: I don't know enough about the criteria for this kernel to comment well
(03:17:03 PM) BenC: But as I just said, some of the ports may find themselves back in the main tree
It's worth pointing out that each architecture has it's own set of criteria, and sometimes these clash enough to force a split in development methods
(03:18:14 PM) BenC: We strongly encourage community to help, especially with the ports
(03:19:32 PM) BenC: Any other questions on this before I move on?
(03:20:53 PM) BenC: Another major change in the kernel development was how we organized third-party modules
(03:21:10 PM) BenC: A lot of what used to be in linux-ubuntu-modules has moved back to the kernel tree under the ubuntu/ subdirectory
(03:21:37 PM) BenC: The reason was consistency in source maint. The split was not giving us any benefit
(03:21:50 PM) BenC: Yet another change was linux-restricted-modules
(03:22:01 PM) BenC: Most of this was split out into dkms style packages for nvidia and fglrx
(03:22:47 PM) BenC: We are trying to encourage more use of dkms, especially in restricted modules
(03:23:07 PM) BenC: The reason is that it allows better support for custom kernels (e.g. -rt)
(03:23:33 PM) BenC: QUESTION: <marrow> Why was it necessary to take these into the kernel? What are the benefits?
(03:23:51 PM) BenC: Easier to maintain, and easier to track ABI, plus module conflicts
(03:24:21 PM) BenC: being built with the kernel retains a lot of the sanity checking that we already have in the kernel build, some which can only be done at build time with the kernel
(03:24:50 PM) BenC: Means we don't have to worry about actual changes in the ABI of these third-party modules, since it will be controlled by the kernel ABI as a whole
(03:25:15 PM) BenC: Before, if linux-ubuntu-modules changed ABI, first off, it would not be noticed or tracked
(03:25:47 PM) BenC: Secondly, it required us to export headers, sometimes conflicting with the kernel headers, for user installed modules to be able to use
(03:27:56 PM) BenC: Jaunty is going to see some continued changes in this area, attempting to build on the experience gained thus far
(03:28:18 PM) BenC: One thing I know is that we will be doing a rework of our firmware packaging, which showed up last minute as linux-firmware in intrepid
(03:31:27 PM) BenC: Ok, so sebner asked what linux-backports-modules was about, and I can answer that quickly
03:32:19 PM) BenC: It's a package that allows us to introduce new or updated drivers without forcing existing users to install what may be a regression or not very well tested driver
(03:33:00 PM) BenC: This package isn't installed by default, and is generally installed by people experiencing a known problem that we have attempted to fix with an updated version of the driver
(03:34:43 PM) BenC: QUESTION: <johanbr> In the past, it has happened that patches not yet included upstream have been dropped by mistake when the kernel is rebased for the next Ubuntu release, thus causing regressions. Is there a procedure in place to minimize these occurrences?
(03:35:06 PM) BenC: Unfortunately, this is a manual and error prone procedure
(03:35:23 PM) BenC: Usually these patches get dropped because they either fail to apply cleanly, or fail to compile cleanly
(03:35:51 PM) BenC: The person doing this rebase is expected to retain a list of such patches in an effort to reintroduce them later
(03:36:10 PM) BenC: I've been responsible for dropping the ball on this, so I'm definitely not pointing fingers :)
(03:36:41 PM) BenC: That's a good topic for UDS I believe
(03:36:50 PM) BenC: I don't have any good suggestions off-hand
(03:37:42 PM) BenC: QUESTION: <sebner> A goal for jaunty is faster boot time. Did you decide that before knowing this 5 seconds boot thing? Also how many seconds do you think will the 28er kernel be faster? Or do you plan further work on init/xorg? How many seconds to you plan to be faster than intrepid? I hope it's not too early to answer this question
(03:38:00 PM) BenC: Boot time is one of the top priorities for jaunty
(03:38:40 PM) BenC: While a lot of this can be handled in the kernel, a good portion of boot time is unrelated to the kernel itself
(03:39:22 PM) BenC: Compiling in some modules, and reducing the amount of time spent loading and initializing modules is one of the biggest factors I've been informed of so far
(03:40:18 PM) BenC: The exact numbers we want to meet are held by others in the ubuntu dev team. How much we have to reduce it by and where these precious seconds will come from, is a system wide issue
(03:40:35 PM) BenC: The kernel team will definitely do it's part though
(03:41:11 PM) BenC: The first two parts of your question I cannot answer
(03:41:19 PM) BenC: (because I don't know)
(03:41:51 PM) BenC: QUESTION: <gQuigs> How about Kernel Mode Setting for Jaunty?
(03:42:14 PM) BenC: We review all new features in the kernel for whether they will benefit us...kernel-mode-setting is one of them
(03:42:57 PM) BenC: Since it requires some close synchronization with Xorg, it will require more decision making and information that I can provide
(03:43:04 PM) BenC: It is something we want, is the short answer
(03:43:48 PM) BenC: I believe we looked at it for interpid, but it was still just too unstable for us (required a lot of bleeding edge stuff for Xorg)
(03:44:36 PM) BenC: QUESTION: <gQuigs> what kernel is alpha 1 going to come with, ubuntu-next?
(03:45:01 PM) BenC: ubuntu-next isn't a kernel version, we will be tracking 2.6.28-rc in jaunty, and hope that it will make Alpha 1
(03:45:41 PM) BenC: ubuntu-next is what we use to continue tracking upstream kernel after we have settled on a stable point release
(03:45:45 PM) BenC: it isn't meant for uploading
(03:46:17 PM) BenC: QUESTION: <sebner> What I've read so far is that jaunty will have .28 if not something important leads to 29er. right?
(03:46:37 PM) BenC: That's correct. Our normal development cycle would put us at .28, but that has yet to be decided for sure
(03:47:15 PM) BenC: QUESTION: <Yasumoto> It seems like a lot of cool features (Kernel Mode Setting, faster boot) may require either bleeding-edge upstream stuff or even some work on our end to get it working right. Is there a general feel for how to deal with this balance of new features vs. stability?
(03:47:57 PM) BenC: First off, faster boot doesn't require anything bleeding edge...just some detailed review of the boot process and looking at alternatives to the main problem points
(03:48:56 PM) BenC: Things like kernel-mode-setting, we generally lean toward stability, especially in a feature that is very limited on who benefits, very superficial in the benefit, and very difficult to maintain for 18 months
(03:50:44 PM) BenC: QUESTION: <sebner> This faster boot thing is really popular now. As you just said mostly it's not magic but "some detailed review of the boot process and looking at alternatives to the main problem points". Why do you think wasn't this make earlier. months, years ago?
(03:51:12 PM) BenC: I believe boot time has always been watched...the only thing that seems to have changed was the bar we want to reach for how long is too long
(03:51:37 PM) BenC: Checkout bootchart, and searching google/wiki you will find that it's been used for quite a few years
(03:52:22 PM) BenC: Ok, looks like I have time for one or two more questions is all
(03:54:50 PM) BenC: QUESTION: <sebner> How many dev's work currently on the kernel in ubuntu?
(03:55:07 PM) BenC: As with many community oriented projects, it's hard to put a number on some of these things :)
(03:55:51 PM) BenC: I can tell you that Canonical employs 6 kernel devs now, most of which are dedicated to the dev and stable releases
(03:55:52 PM) sebner: BenC: canoncial guys? .. to make it easier :)
(03:55:56 PM) sebner: heh
(03:56:50 PM) BenC: I would guess at least that many community folks are out there, and several times as many from vendors interested in Ubuntu's kernel
(03:57:08 PM) BenC: e.g. AMD, Intel, nVidia, etc...
(03:57:42 PM) BenC: Last question...
(03:57:51 PM) BenC: QUESTION: <pwnguin> how far in the future before btrfs is default?
(03:57:59 PM) sebner: BenC: mine is last :P
(03:58:12 PM) BenC: I only have two minutes :)
(03:58:25 PM) BenC: pwnguin: My crystal ball is in the shop at the moment...
(03:58:32 PM) BenC: sebner: "maybe"
(03:58:39 PM) sebner: BenC: 50-50?
(03:58:52 PM) BenC: I would say 40-40
(03:59:24 PM) sebner: and 20% are?
(03:59:33 PM) BenC: with 20% going to the off chance ext5 comes out, or reiser is set free
(03:59:44 PM) sebner: heh
(04:00:04 PM) BenC: sebner: Honestly I don't know, but we will bring it up at UDS I'm sure
(04:00:04 PM) pwnguin: 1 in 5 chance. very generous
(04:00:12 PM) jcastro: ok, that's about it for time
(04:00:17 PM) BenC: pwnguin: I was being generous to ext5 :)
(04:00:19 PM) jcastro: thanks Ben and thanks to everyone for participating
(04:00:22 PM) BenC: Thanks everyone!
</pre>
