{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* '''Launchpad Entry''': https://launchpad.net/distros/ubuntu/+spec/migration-assistance
* '''Created''': 10/20/06 by EvanDandrea
* '''Contributors''': EvanDandrea
* '''Packages affected''': ubiquity, ubiquity-frontend-gtk, debian-installer
* See also: KubuntuUbiquityMigrationAssistant

=== Summary ===

Further the development of migration-assistant to the point that it can be included in Feisty Fawn.  Work prior to Feisty is covered in the <nowiki>[[/Edgy]]</nowiki> specification.  Work for Feisty is covered in the <nowiki>[[/Feisty]]</nowiki> specification.

=== Rationale ===

The reality for most potential Ubuntu users is that they've bought their computer with Windows pre-installed or have already installed another Linux distribution. These users have probably already used their existing operating system for a decent period of time and have accumulated documents, email, settings, and other files that can be imported and translated for use in Ubuntu, but the existing Ubuntu graphical installer mercilessly destroys them. If users could install Ubuntu knowing that all of their existing Office documents would be placed in their Documents folder, their email would be imported into Evolution, and their bookmarks imported into Firefox, they would have much more incentive to make the switch, be it from Windows or another Linux distribution.

=== Use cases ===

* Andrew is a long time Gentoo user, tired of having to manually configure his system, and wants a distribution that "just works". He'd like to copy over his home directory to the new system when he installs Ubuntu.
* Dave is a busy parent who has been using Windows XP for the past year, and he and his children have accumulated a large number of pictures, music, documents, and bookmarks between their four user accounts. He'd like to be able to copy over all of the user accounts while selecting what files to keep and what to throw away when installing Ubuntu.       
* Joe is a CAD engineer who would like to switch his home computer to Ubuntu. While Ubuntu does not have software to read Autodesk files, he would nevertheless like to save his set. He does not have a CD burner and the files are too big for email attachments.
* Colin's grandparents were using Windows with multiple accounts and found that to be too much, and would much rather use one account between the two of them.

=== Scope ===

A package containing all of the importing code and the debian-installer hooks was uploaded as a source package in Universe.  The changes to Ubiquity will need to be merged in to the main branch and migration-assistant will be uploaded to main.

=== Design ===
Ubiquity flow:
<pre>
Language
Location
Keyboard
Migration-Assistant defaults seeding
User, Password, Hostname
Partitioning
Migration-Assistant
Summary
Install process (ma-apply is run)
</pre>
** migration-assistant defaults seeding takes the full name and login name from the first operating system it finds, if it finds one, and seeds them in the passwd debconf keys so they show up automatically in the User``Setup dialog.
** If the user chooses to set up a dual boot, migration-assistant is run, otherwise it is skipped.  Since the goal of this specification is to smooth the migration path to Ubuntu, skipping it when the user is not dual-booting is not of great concern.
** The defaults seeding code is always run, regardless of the partition table configuration.
** migration-assistant will provide basic information about what it is going to import and to what user it's importing in the summary dialog.
<pre>
 ______________________________________
|                                      |
| What accounts do you want to import? |
| +-------------------------------+--+ |
| |                               |/\| |
| | \/ [X] Evan (Gentoo)          |  | |
| |       [X] AIM Settings        |  | |
| |       [ ] Bookmarks           |  | |
| |       [ ] Address Book        |  | |
| |-------------------------------|  | |
| |  > [X] Colin (Windows)        |  | |
| |-------------------------------|  | |
| |  > [ ] Lucy (Windows)         |  | |
| |  > [ ] Evan (Windows)         |  | |
| |                               |\/| |
| +-------------------------------+--+ |
| [Select All] [Select None]           |
|                                      |
| Full Name:  [ Colin Watson ]         |
| Login Name: [ Colin     |\/]         |
| Passphrase: [              ]         |
| Confirm:    [              ]         |
|                                      |
|              [Cancel] [Back] [Next]  |
|______________________________________|
</pre>
** Marking the checkbox next to a user causes all of its child items to be selected.  Unmarking the checkbox next to a user causes all of its items to be unselected.

** Selecting a user (as Colin is in the mockup) or item below one causes the login information, the lower portion of the dialog, to change to input that user.  The full name field is populated from the information we obtain from the previous operating system.  The login name is populated by taking the previous operating system login name, lowercasing it and replacing spaces with dashes.
** If the user types in a login name that already exists in the combo input box, the full name field changes to the existing values for that user.  If the user changes that information, it is changed for that user.
** The drop down list for login name is populated with all of the already created users, including the default user created in User``Setup.
** Incorrectly typing the password a second time, failing to type the full name, or failing to type the login name will result in an error that will appear alongside the offending field.
** We do not present the option to make one of the users an administrator as that is already covered in the User``Setup dialog for the first user.

=== Implementation ===

migration-assistant is broken into five programs:

* '''ma-ask:'''<<BR>>
 This is shell code that asks the user all of the questions via debconf that ma-apply needs to import the documents and settings.
* '''ma-search-users:'''<<BR>>
 This finds users suitable for importing from given the operating system and location specified in its arguments.
* '''ma-search-items:'''<<BR>>
 This looks for all available items to import given the operating system and location specified in its arguments.
* '''ma-apply:'''<<BR>>
 This reads all of the debconf questions, creates any needed users, and feeds the rest of the data to ma-search-items.
* '''ma-import:'''<<BR>>
 This imports a type of item given arguments of operating system type, location, existing user, location to import to, and user to import into.

ma-ask is called within debian-installer and a modified version of Ubiquity seeds the questions that ma-ask asks.

migration-assistant as a whole searches the hard drive on which it is being installed for user accounts as well as the documents and settings that go along with each account, and presents its findings as options in the installer that the user can select to be imported into their new Ubuntu installation.  Configuration data is translated into its appropriate Ubuntu equivalent.  AOL Instant Messenger accounts, for example, are translated into XML and added to the .gaim/accounts.xml file in that user's home directory.

migration-assistant will merge data from multiple operating systems, or multiple applications that map to a single application in Ubuntu, into single entities in Ubuntu.  For example, if the user has AOL IM, MSN IM, and Yahoo! IM installed, migration-assistant will import all of them into the .gaim/accounts.xml file so they can all be used in Gaim.  If the user has both Firefox and Internet Explorer bookmarks then migration-assistant will import both of them into Firefox.

The transferring of data is done by means of running ma-import, which copies the files and settings the user has selected to the new Ubuntu filesystem, after the LiveCD filesystem is copied.

==== Data ====

'''Files:'''
* Documents are imported into the default Ubuntu location (~/Documents).
* Pictures are imported into the default Ubuntu location (~/Pictures, I think).
* Music is imported into the default Ubuntu location and the appropriate gconf keys are set so Rhythmbox automatically finds and displays it when first run.
* Email messages
* Fonts

'''Settings:'''
* User accounts
* Email clients (Outlook, Thunderbird, Opera Mail, etc)
* Instant messaging accounts (AOL, MSN, Yahoo!, ICQ, etc)
* Bookmarks (Firefox, Opera, Internet Explorer, etc)
* Desktop background
* User picture (This will complement the new face browser)
* Internet connection settings (proxy, wireless access points, domain, etc)
* Address book

=== Future work ===

** Sending the imported objects to removable media or some external source, such as a CD-R, USB key, or web server, will be evaluated for Feisty+1.
** Resizing partitions will be re-evaluated for Feisty+1, provided the code to do that stabilizes.
** Importing to both KDE and GNOME by default, not to be confused with importing to them separately, determined by which front-end they are running,  will be evaluated for Feisty+1.
** Migrate not just from Windows, but also from other Linux distributions.

=== Rejected Ideas ===

** The program will not exclude importing files to allow the program to operate entirely in memory as users will want to preserve their documents.
** The program will not convert files to free formats, rather it will defer that work to the applications that read the formats.
** Importing files will be done by directory, not by file extension or contents as this allows the program to maintain no knowledge of the underlying formats and eliminates much uncertainty about what the user is importing when they select an item like "Documents."
** The program will not be ported to Windows as that is well outside the scope of this specification.

=== Proposals ===

** Nicol√≤Chieffo: I will propose a feature in which the user can choose to share the same documents with other OSes. (for instance making symlinks). It would be more useful than simply importing the settins+files. So a user who is dual-or-+-booting will have everything always synced without wasting space!

** It would be nice (if the process doesn't take too long) if the migration assistant could find out your installed software and save that information in the system that will be installed. When the users boots up his/her new system he/she will be presentated with a screen that recommends equivilant software based on the information gathered at installation.
