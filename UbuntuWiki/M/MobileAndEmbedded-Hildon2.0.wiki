{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

This page outlines the tasks and packages needed to be upgraded to fully support the Hildon 2.0 Release in UME.

=== General Approach on Packaging ===

* Use of bzr of individual patches?
  - Feature branches allow changesets to be managed by bzr and are the best long term solution
  - Tools to manage a set of feature branches aren't in wide use and are quite yound
  - Usage of feature branches requires a long individual training
  - Many patches means many feature branches

 => decision to use patches stack below debian/patches

** Which patch system?
   - Quilt powerful for large stacks, but too complex for our general use case
  - Dpatch liked or disliked by various people, clutters slightly the top of
    patches
  - Simple patch systems like CDBS simple patchsys or a simple shell "for" loop

 => decision to use a simple patch system and document in a wiki page the process of adding a patch system to a package

* All maemo / Hildon packages and all Moblin projects must have an Ubuntu bzr branch ("ubuntu") derived from the SVN import ("trunk") done by Launchpad (Please report on the ubuntu-mobile@ mailing list missing branches)

* List of Moblin projects (find the hildon-related ones):  http://moblin.org/repos/projects/

* TODO:
   - Document on the wiki how to add CDBS simple-patchsys to packages

=== Hildon modules review / TODO ===

==== hildon-1 / libhildon ====
 upstream: https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-1/2.0.1-1/
 bzr:      https://code.launchpad.net/~vcs-imports/hildon-1/trunk

* DONE (based on status of 1.0.5+repack-0ubuntu1):
  - Bzr pull/merge from upstream up to 2.0.1-1 and repack upstream tarball
  - Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
    . Fri, 10 Aug 2007        Added patch from Peter Zhu to hildon-window.c to avoid crash when hildon window is destroyed in some cases.
  - Merge missing Moblin patches as new patch files
   . 26 hours ago Horace Li  set hildon banner line wrap mode to both support ...  master
   . 5 days ago   Horace Li  fix bug #146109, reolace string longer than 80 charac ...
   . 2007-12-07   Horace Li  Remove application name from window titlebar, displ ...
  - Rebuild reverse Build-Depends to see if they still build
  - Push to Launchpad ubuntu bzr branch
* TODO
  - Tag

* Assigned to StevenK

* Status as of 2008/03/16:
   - Update done; just need a bzr tag.

==== hildon-desktop ====

* target upstream -https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-desktop/2.0.9-1/

* DONE
** Bzr pull/merge from upstream up to 2.0.9-1 and repack upstream tarball (Steven K./Bill F.)
** Add a patch system (Steven K./Bill F.)
** extract the remaining Ubuntu source changes and convert them to patch files (Steven K./Bill F.)
** Push to Launchpad ubuntu bzr branch (Bill F.)

* TODO:
** Merge missing Moblin patches as new patch files: (Bob Spencer)
** Add interface to handle screen change in home plugi ...
** update default/local config path and desktop files, ...
      (Sabotage to discuss with Horace to ensure we are doing the "Right Thing" in this regard and find out if Hildon really can/should be shoehorned into XDG/LSB standards?). Specs being considered:    - http://standards.freedesktop.org/basedir-spec/latest/
** Support dynamic screen resolution switch between ...  In progress...
** fix bug #179032, tuning status bar length to be ...   In progress...

** Rebuild reverse Build-Depends to see if they still build? (Steven K.)
** Tag (Steven K.)

* Assignees above

* Status as of 2008/03/16:
   - Upstream release update done
   - Status of patch merging not clear
   - Upstreaming in progress, some patches need work

==== hildon-control-panel ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-control-panel/1:2.0.1-1/

* TODO:
** Bzr pull/merge from upstream up to 2.0.1-1 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** apply patches from Moblin
** 2007-08-21 Todd Brandt added hcp-fix.patch
** 2007-07-17 bxu1 modify the desktop.in file
** 2007-07-05 bxu1 modify postinstall file to make two dirs after install
** 2007-07-04 bxu1 modify the dependency
** Bzr tag

* Status: 2.0.0-1 merged; 2.0.1-1 tarball not available, mailed lucasr from Nokia; need to merge Moblin patches

==== sapwood ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/sapwood/3.0.0-1/

* DONE:
** Merge done accordingly to Loic's notes.
** There was no need for a patch system as the only small source patch was incorporated upstream.
** Uploaded to PPA.
** StevenK will check and upload tonight (08/04/08).

* Assigned to agoliveira

==== hildon-notify ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-notify/2.0.0-1/

* TODO:
** make a Bzr ubuntu branch and import upstream up to 2.0.1-1 and repack upstream tarball
** Check copyright for new package
** Bzr tag

* Assigned to bfiller

==== hail 2.0.0-1 ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hail/2.0.0-1/

* TODO:
** Bzr pull/merge from upstream up to 2.0.1-1 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** Patches from Moblin missing in UME?
** Check copyright for new package
** Bzr tag

* Assigned to horaceli

==== hildon-fm / libhildonfm ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-fm/1_2.0.0/

* TODO:
** Bzr pull/merge from upstream up to 2.0.0 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** Bzr tag

* Assigned to smagoun

==== hildon-thumbnail ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-thumbnail/2.0.0/

DONE:
* Merge, needed in main for hildon-desktop upload.

==== libhildonmime ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/libhildonmime/2.0.0-1/

* TODO:
** Bzr pull/merge from upstream up to 2.0.0 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files

* Assigned to StevenK

==== hildon-theme-layout-4 ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-theme-layout-4/0.14.8-1/

* TODO:
** Bzr pull/merge from upstream up to 0.14.8-1 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** Get applicable patches from moblin (sabotage, peter zhu)
** Bzr tag

* Assigned to Matthew Garrett (mjg59)

==== hildon-theme-plankton ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-theme-plankton/4.14.4-1/

* TODO:
** Bzr pull/merge from upstream up to 4.14.4-1 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** Get applicable patches from moblin (sabotage, peter zhu)
** Bzr tag

* Assigned to lool

==== hildon-theme-tools ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-theme-tools/0.5.2-1/

* TODO:
** Bzr pull/merge from upstream up to 0.5.2-1 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** Get applicable patches from moblin (sabotage, peter zhu)

* Assigned to agoliveira

==== hildon-help ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-help/2.0.0-1/

* TODO: XXX what's the status of this module?

==== hildon-input-method ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-input-method/1_2.0.0-1/
* TODO:
** Bzr pull/merge from upstream up to 1_2.0.0-1 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** Bzr tag

* Assigned to bfiller

==== hildon-input-method-framework ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-input-method-framework/1_2.0.0-1/
* TODO:
** Bzr pull/merge from upstream up to 1_2.0.0-1 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** Bzr tag

* Assigned to smagoun

==== hildon-input-method-plugins-example ====

https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-input-method-plugins-example/2.0.0-1/
* TODO:
** Bzr pull/merge from upstream up to 1_2.0.0-1 and repack upstream tarball
** Add a patch system and extract the remaining Ubuntu source changes and convert them to patch files
** Bzr tag

* Assigned to horaceli

=== Raw notes on an update scenario ===

* Grab latest upstream tarball from http://repository.maemo.org/pool/sardine/main/source/h/hildon-control-panel/; dget -x the 2.0.0-1 dsc; extract the tarball, remove debian/ and repack as 2.0.0.repack:
<pre>
% tar cvzf hildon-control-panel_2.0.0+repack.orig.tar.gz 2.0.0+repack
</pre>

* Find out the SVN rev of this tarball
<pre>
% svn info https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-control-panel/1:2.0.0-1/
...
Last Changed Rev: 14231
Last Changed Date: 2007-10-01 13:56:01 +0200 (Mon, 01 Oct 2007)
...
=> 2007-10-01 11:56:01 UTC
</pre>

(or: % svn log https://stage.maemo.org/svn/maemo/projects/haf/tags/hildon-control-panel/1:2.0.0-1/ | head
=> r14230, "Fixed debian package version.")
}}}

* Find the corresponding bzr rev for that SVN rev

<pre>
% bzr branch lp:~vcs-imports/hildon-control-panel/trunk
% cd trunk && bzr visualize
=> r82, vcs-imports@canonical.com-20071001115525-j2u24ld1g4q2clkf, 11:55:25 UTC
</pre>

** Grab Ubuntu bzr tree and pull/merge the new revs into it

<pre>
% bzr branch lp:~ubuntu-mobile/hildon-control-panel/ubuntu
% cd ubuntu
% bzr pull -r 82 ~/bzr/launchpad/vcs-imports/hildon-control-panel/trunk/
bzr: ERROR: These branches have diverged. Use the merge command to reconcile them.
% bzr merge -r 82 ~/bzr/launchpad/vcs-imports/hildon-control-panel/trunk/
...
Text conflict in ChangeLog
Text conflict in debian/changelog
Text conflict in debian/control
Text conflict in src/hcp-config-keys.h
Text conflict in src/hcp-window.c
=> solve conflicts, update packaging for the new upstream changes, update
debian/changelog
% bzr commit
% bzr push bzr+ssh://...
</pre>
