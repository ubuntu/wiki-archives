{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

Ruby on Rails on Feisty Fawn.

== Setting up ==

Mostly followed <nowiki>[[http://rails.homelinux.org/|Four Days On Rails]]</nowiki> and <nowiki>[[https://help.ubuntu.com/community/RubyOnRails|RoR on Ubuntu Help]]</nowiki>.

After I have followed <nowiki>[[http://www.howtoforge.com/ruby_on_rails_debian_etch|RoR on Debian Etch]]</nowiki> I have successfully set up the fcgi.

I have installed everything using Ubuntu packages. Nothing was installed via gem.

Installed ruby packages:

<pre>
i   eruby                           - Embedded Ruby Language                    
i A liberb-ruby                     - Tiny eRuby                                
i   liberuby                        - Library for eruby                         
i   libfcgi-ruby1.8                 - FastCGI library for Ruby                  
i   libgems-ruby1.8                 - libraries to use RubyGems, a package manag
i   libhtml-htmltokenizer-ruby      - simple HTML tokenizer/parser for Ruby     
i   libopenssl-ruby1.8              - OpenSSL interface for Ruby 1.8            
i A libpgsql-ruby1.8                - PostgreSQL extension library for Ruby 1.8 
i A libreadline-ruby1.8             - Readline interface for Ruby 1.8           
i A libredcloth-ruby1.8             - Textile module for Ruby 1.8               
i A libruby1.8                      - Libraries necessary to run Ruby 1.8       
i   libyaml-ruby                    - YAML for Ruby                             
i   libzlib-ruby                    - Extension library to use zlib from Ruby   
i   rails                           - MVC ruby based framework geared for web ap
i A rake                            - a ruby build program                      
i A rdoc                            - Generate documentation from ruby source fi
i A ruby                            - An interpreter of object-oriented scriptin
i A ruby1.8                         - Interpreter of object-oriented scripting l
i   ruby1.8-dev                     - Header files for compiling extension modul
i   rubygems                        - package management framework for Ruby libr
i   vim-ruby                        - Vi IMproved - enhanced vi editor - with Ru
i   libapache2-mod-fcgid            - an alternative module compat with mod_fast
i   libfcgi0c2                      - Shared library of FastCGI
</pre>

== Authentication ==

<nowiki>[[http://technoweenie.stikipad.com/plugins/show/Acts+as+Authenticated|Act As Authenticated]]</nowiki> has it all.

== Troubleshooting ==

=== mySQL accounts ===

If rake db:migrate says Access denied...

<pre>
$ rake db:migrate --trace
(in /home/proj/klub-goryu/goryu-is/klub-is)
* * Invoke db:migrate (first_time)
* * Invoke environment (first_time)
* * Execute environment
* * Execute db:migrate
rake aborted!
</pre>

Then you have to set up the password for the particular user in the database:

<pre>
$ mysql -u user
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 8
Server version: 5.0.38-Ubuntu_0ubuntu1-log Ubuntu 7.04 distribution

Type 'help;' or '\h' for help. Type '\c' to clear the buffer.

mysql> set password for 'user'@'localhost' = password('userspwd');
Query OK, 0 rows affected (0.10 sec)
</pre>

== Issues ==

=== Apache 2 + fcgi + rails ===

I wasn't able to make fcgi work. I keep getting the error:

<pre>
ActionController::RoutingError (no route found to match "/" with {:method=>:get}):
    /vendor/rails/actionpack/lib/action_controller/routing.rb:1266:in `recognize_path'
...
    /home/proj/proj/app/public/dispatch.fcgi:24
</pre>

System works nicely without fcgi (quite slow, however).

* File bug in launchpad <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/libfcgi-ruby/+bug/126263|126263]]</nowiki>.

'''Solution''' (it was all my fault): Rewrite rule was specified twice in the <code>.htaccess</code> file.

Working <code>.htaccess</code> (as described in <nowiki>[[http://www.howtoforge.com/ruby_on_rails_debian_etch|RoR on Debian Etch]]</nowiki>.

<pre>
AddHandler fcgid-script .fcgi
Options +FollowSymLinks +ExecCGI

RewriteEngine On

RewriteBase /klub/

RewriteRule ^$ index.html [QSA]
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ dispatch.fcgi [QSA,L]

ErrorDocument 500 "<h2>Application error</h2>Rails application failed to start properly"
</pre>
