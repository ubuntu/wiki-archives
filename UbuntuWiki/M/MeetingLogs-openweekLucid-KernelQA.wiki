{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Open Week -- Kernel Q+A -- Andy Whitcroft  -- Thu, May 6 ===
EDT -5
<pre>
(11:02:31 AM) akgraner: apw and ogasawara  will be fielding the Kernel Questions today
(11:02:47 AM) akgraner: if you all are ready - talk it away!
(11:02:47 AM) ***ogasawara waves
(11:02:49 AM) ***apw waves hello
(11:02:55 AM) ogasawara: thanks akgraner
(11:03:02 AM) ogasawara: Hi Everyone!
(11:03:02 AM) ogasawara: Welcome to the Kernel Q&A (question and answer) session.
(11:03:11 AM) ogasawara: My name is Leann Ogasawara and I'm a member of the Canonical Kernel Team.
(11:03:17 AM) ogasawara: I'm here with Andy Whitcroft and other members of the team to field any questions that you may have about the Ubuntu Kernel.
(11:03:27 AM) ogasawara: Please remember to post your questions to #ubuntu-classroom-chat and prefix them with "QUESTION:".
(11:03:27 AM) ogasawara: We'll try to answer them as best we can.
(11:03:40 AM) ogasawara: Let's get started!  Does anyone have any questions?
(11:03:58 AM) ClassBot: bullgard4 asked: What does mean "to field the Kernel Questions"?
(11:04:28 AM) ogasawara: bullgard4: we're here to just answer any questions you may have regarding the Ubuntu Kernel
(11:04:50 AM) ogasawara: akgraner: next
(11:05:09 AM) ClassBot: Resno asked: How does the Ubuntu kernel measure up against other distros?
(11:06:12 AM) apw: our key aim is to be as close to mainline as possible, so we offer the freshest offering we can
(11:06:43 AM) apw: at the time of release.
(11:07:04 AM) apw: in addition we are always striving to cover the most common hardware as seen in systems
(11:07:18 AM) apw: regular people will buy.  to be a friendly and easy to use
(11:07:44 AM) apw: pretty similar to what other community distributions are trying to achieve
(11:08:01 AM) apw: akgraner, next
(11:08:14 AM) ClassBot: bullgard4 asked: /etc/init.d/unmountfs produces a message: "Unmounting weak filesystems." What are 'weak filesystems?' Those filesystems that have been mounted to /|/proc|/dev|/.dev|/dev/pts|/dev/shm|/dev/.static/dev|/proc/*|/sys|/lib/init/rw)?
(11:08:52 AM) apw: that sounds like a userspace message, not a designation i have seen used in the kernel before
(11:09:05 AM) apw: we'll have to look into that and try and get back to you
(11:09:09 AM) apw: akgraner, next
(11:09:16 AM) ClassBot: popey asked: Testing kernels sounds hard and might cuase problems for my system, how can you make it easier for me to test new kernels, and can I be happy that I wont break my production machine?
(11:10:03 AM) ogasawara: popey: great question.  I've actually been leveraging testdrive to do a lot of my testing.
(11:10:27 AM) ogasawara: popey: I don't have the link off the top of my head
(11:11:01 AM) ogasawara: akgraner: next
(11:11:07 AM) ClassBot: bullgard4 asked: '~$ ps -ef | grep flush; root       252     2  0 May05 ?        00:00:00 [flush-8:0]' What process spawns this process? Where is described the function of this process?
(11:11:58 AM) apw: those processes are spawed by the kernel itself to handle flushing of block devices within the kernel, they are there to provide process
(11:12:35 AM) apw: contexts where needed.  they are tripped by fsync and similar calls to perform data-writes.  they are relativly new and may not appear before kucid
(11:12:37 AM) apw: lucid
(11:12:42 AM) apw: akgraner, next
(11:12:47 AM) ClassBot: sebsebseb asked: Apparently the upstream Linux developers will support the version of Linux that 10.04 is using for three years, however since 10.04 is LTS, that means Ubuntu developers will probably have to support it on their own for  the last two years when it comes to the server. By then it will probably be rather secure, but surely it would be better if 10.04 started to then use an upstream version of the kernel, but no security
(11:13:25 AM) akgraner:  updates only?
(11:13:33 AM) apw: ok there are a couple of strands here
(11:14:10 AM) apw: firstly we normally only do security updates at the later stages of support for a kernel so the change is minimal at these ages
(11:14:38 AM) apw: however, as there is synergy [sic] between the distros on v2.6.32 there is a strong likelyhood there will be longer
(11:14:47 AM) apw: term support for that release from the stable tree than there is normally
(11:15:16 AM) apw: secondly we are introducing backported kernels for servers on the 10.04 LTS.  here we will pull back kerenls from Maverick a
(11:15:36 AM) apw: and later to the LTS for use on servers
(11:15:48 AM) apw: akgraner, next
(11:15:54 AM) ClassBot: Odd-rationale asked: Does the Ubuntu kernel use a pae enabled kernel by default? If not, why not?
(11:16:30 AM) apw: by default we only install a PAE kernel where the machine has sufficient ram to warrent the use of it.
(11:16:52 AM) apw: for machines with less memory there is no benefit to be had from using a PAE kernel in general and there is a minimal cost
(11:17:33 AM) apw: to enabling PAE.  as we have to have a non-PAE kernel currently for the older hardware which does not support this, it is used where sensible.
(11:17:45 AM) apw: akgraner, next :)
(11:17:52 AM) ClassBot: bullgard4 asked: '~$ ps -ef | grep flush; root       252     2  0 May05 ?        00:00:00 [flush-8:0]' What process spawns this process? Where is described the function of this process?
(11:18:14 AM) apw: akgraner, that one is a duplicate
(11:18:14 AM) ogasawara: I think apw answered this already
(11:18:24 AM) jcastro: sorry
(11:18:25 AM) ClassBot: sebsebseb asked: I like how Resno called it the Ubuntu kernel.  Well when Ubuntu developers are supporting the 10.04 kernel on their own (unless they can convince upstream developers to support it for longer) then really it is a fork of the Linux kernel?
(11:18:26 AM) jcastro: I took over
(11:18:40 AM) jcastro: did you guys answer this one?
(11:18:59 AM) apw: jcastro, thats new
(11:19:12 AM) jcastro: ok, proceed! :)
(11:19:27 AM) ogasawara: sebsebseb: I actually wouldn't consider it a fork.  the key bits to note is we do closely follow the upstream kernel as much as we can.
(11:19:50 AM) jcastro: he says you answered that question when you answered the last one
(11:19:57 AM) ClassBot: ZykoticK9 asked: I have heard that Ubuntu submits fewer upstream kernel bugs then some other much smaller distros.  Is this accurate?  Are steps being taken to submit more bugs, regarding the kernel, upstream?
(11:21:05 AM) apw: yeah this is probabally true.  the kernel team in general is pretty small in Ubuntu
(11:21:24 AM) apw: we can and should be moving more of our bugs upstream as we find they are not things we introduced
(11:21:39 AM) apw: we use mainline kernel testing heavily to determine this and when we find that we are not the
(11:21:49 AM) apw: cause of the issue, we should be pushing bugs to the kernel bugzilla
(11:22:03 AM) apw: this is one area in which community help is much appreciated.
(11:22:25 AM) apw: when triaging bugs in the early phases we often find things are 'affecting mainline' and those helping with triage
(11:22:37 AM) apw: would be in a good position to help detect these and push them up.
(11:22:50 AM) apw: launchapd provides great integration once they are upstream
(11:23:10 AM) apw: and cirtainly in my experience moving them up to bugzilla often gets good responce from the mainline kernel developers
(11:23:16 AM) apw: who frankly hate their code to be broken
(11:23:46 AM) apw: our main drive is to increase the triage team to aid this process
(11:24:10 AM) apw: and they should encourage the reportrs to push them upstream as the developers often want direct testing help
(11:24:27 AM) apw: jcastro, next
(11:24:32 AM) ClassBot: popey asked: Using testdrive is great for testing stuff, but how much of the kernel testing is needed on bare metal? Is testdrive sufficient for most tests?
(11:25:11 AM) ogasawara: popey: obviously testing on bare metal is great, so say using a liveusb to test is something else to use.
(11:25:59 AM) ogasawara: popey: we've also started generating custom kernel iso's for testing.  we've been taking them to linux fest type conferences to wider testing as well.
(11:26:32 AM) ogasawara: popey: but for those wanting to just fire up a vm and test, testdrive is sufficient
(11:26:56 AM) ogasawara: akgraner: next
(11:27:01 AM) ClassBot: popey asked: I'm not a coder, what can I do to help make kernels better?
(11:27:21 AM) ogasawara: popey: I love this question.
(11:27:34 AM) ogasawara: popey: there's many places to contribute that don't involve writing code.
(11:28:02 AM) ogasawara: popey: like you've pointed out, we can always use help testing kernels, triaging bugs, or even cleaning up docs.
(11:28:27 AM) ogasawara: popey: we're always willing to mentor someone and get them pointed in the direction that scratches their itch
(11:28:51 AM) ogasawara: popey: come find us in #ubuntu-kernel and we'll get you going
(11:28:57 AM) ogasawara: akgraner, jcastro: next
(11:29:14 AM) ClassBot: popey asked: If there was a magic bullet you could get from the community which would help you guys/gals do your job, what would it be?
(11:29:51 AM) apw: i think the short answer is more help
(11:30:01 AM) apw: we are a small team and we have a heap of work to do
(11:30:16 AM) apw: people helping with trigaing is always going to help there
(11:30:36 AM) apw: also helping out on bug days ... we always need more bugs hugged
(11:30:50 AM) apw: we are going to have a specific Community session at UDS to dicsuss
(11:31:09 AM) apw: how we can better reach out to _you_ the community and help you get involved in _your_ kernel
(11:31:30 AM) apw: that will be open to remote and local participation for those who would like to contribute ideas
(11:31:46 AM) apw: jcastro, next pls
(11:31:51 AM) ClassBot: JanC__ asked: are those special kernel testing ISOs available somewhere publicly?
(11:32:18 AM) apw: they are meant to be being rebuilt nightly, that process seems to be broken at the moment
(11:32:34 AM) apw: but expect to see an announcement when they are ready for consumption
(11:32:42 AM) apw: jcastro, next
(11:32:48 AM) ClassBot: jcastro asked: Tell us about the mainline PPA builds
(11:33:20 AM) apw: the mainline PPA builds are a little bit of a misnomer.  they are actually an archive of all of the
(11:33:40 AM) apw: mainline kernel snapshots we have build installable .deb's for.
(11:34:03 AM) apw: these are both daily snapshots of the upstream trees such as Linus' mainline tree.  plus the officially tagged releases
(11:34:08 AM) apw: such as v2.6.32.
(11:34:31 AM) apw: they represent totally unmodified source for those kernels but built using an Ubuntu compatible kernel configuration
(11:34:58 AM) apw: these are primarily used to find out where problems were introduced or where they may be fixed
(11:35:16 AM) apw: for example if our latest 10.04 LTS kernel is based on 2.6.32.11 then we can try that version to confirm
(11:35:38 AM) apw: that the Ubuntu changes are not the cause of the issue.  we can use the latest v2.6.34-rcN kerenls to confirm
(11:35:46 AM) apw: if the issues are fixed in upstream mainline
(11:35:58 AM) apw: this in turn allows us to isolate potential fixes more quickly
(11:36:19 AM) apw: jcastro, next
(11:36:30 AM) ClassBot: LibertyZero asked: Are there any plans to switch to another scheduler like BFS in the (near) future?
(11:37:00 AM) apw: generally we look to follow upstream recommendations on such things
(11:37:38 AM) apw: so if there are more than one version of a particular piece of functionality
(11:37:52 AM) apw: as there is with the allocator we generally will select the recommended version upstream over the others
(11:38:18 AM) apw: in the case of BFS the patches are not in the kernel as yet so that is not even on our radar as an option
(11:38:46 AM) apw: new functionality and options tend to appear on our radar when they enter the kernel and are interesting (as BTRFS has recently)
(11:39:03 AM) apw: of course this does not stop people building their own kernels with different options and offereing them in a PPA
(11:39:13 AM) apw: of course those come with no warrently ... you get to keep both bits
(11:39:26 AM) apw: jcastro, next :)
(11:39:30 AM) ClassBot: bullgard4 asked: I got a message: "An automatic file system check (fsck) of the root filesystem failed. The fsck should be performed in maintenance mode with the root filesystem in read-only mode." Can you explain the term 'maintenance mode' please
(11:39:51 AM) jcastro: Not really kernel related but I guess you guys are closest to cover this area. :)
(11:40:14 AM) apw: maintenance mode is essentially a different boot mode wherein only the very minimum of
(11:40:32 AM) apw: services are started.  normally for a filesystem check the disk in question will not even be mounted read-write
(11:40:58 AM) apw: so normal operation is not possible.  this keeps the fsck process safe from interferance while it sorts out the issues found in the filesystem
(11:41:06 AM) apw: a good thing generally.
(11:41:41 AM) apw: maintenance mode is typically somewhere you end up when this sort of failure occurs
(11:42:03 AM) apw: normally you don't have to try and get there yourself, but booting into single user is pretty close
(11:42:15 AM) apw: jcastro, next
(11:42:21 AM) ClassBot: nealmcb asked: What is the status of ext4 performance issues in general and the recent issue of forced syncs for umount?
(11:42:43 AM) apw: there has been a lot of talk about how ext4 is now slow ... this should be taken in the context
(11:42:58 AM) apw: of it still being significantly faster than ext3 has ever been.
(11:43:21 AM) apw: yes fixing some correctness issues and working round bad userspace applications has
(11:43:36 AM) apw: contributed to a reduction in ext4 performance from its height, but correctness is always the right
(11:43:39 AM) apw: path.
(11:44:09 AM) apw: the recent forced unmount performance issues seem to be fallout from another change probabally in the quota
(11:44:26 AM) apw: system, which removed a forced sync there.  we actually have patches in test right now which may well sort out the
(11:44:46 AM) apw: underlying issue for lucid and upstream they have a rework in progress to fix it completely for all filesystems
(11:45:00 AM) apw: jcastro, next
(11:45:06 AM) jcastro: no questions right now
(11:45:13 AM) jcastro: so why don't you tell us what you plan to do for Maverick!
(11:45:55 AM) ogasawara: heh, well most of what will be happening in Maverick will be discussed next week at UDS
(11:46:31 AM) ogasawara: but we know for sure that since it's following an LTS release, it's going to be radical and a huge jump in terms of kernel version
(11:46:37 AM) ClassBot: nealmcb asked: My Dell 1012 freezes sometimes and even sysrq REISUB doesn't work, with nothing in /var/log.  How can I get more debugging info to provide good bug reports and figure out if it is kernel, xorg, etc?
(11:47:37 AM) ogasawara: nealmcb: well, there's a couple of things to test.  Is this a recent regression?  ie. if you revert to a previous kernel, does it begin to work.  that's usually a good indicator.
(11:47:52 AM) ogasawara: nealmcb: how reproducible is the issue?
(11:47:59 AM) ogasawara: nealmcb: can you trigger on demand
(11:48:24 AM) ogasawara: nealmcb: you could possibly try to use a serial console to get at the logs
(11:48:45 AM) ogasawara: nealmcb: could be a temp/overheat issue. . .
(11:48:59 AM) apw: nealmcb, thats probabally one to bring and discuss on the #ubuntu-kernel channel as we have lots of ideas mostly mad :)
(11:49:07 AM) ogasawara: heh, exactly
(11:49:10 AM) ogasawara: jcastro: next
(11:49:17 AM) ClassBot: Odd-rationale asked: Maybe this is taking a lttile away from the next session, but how does the default kernle differ from the server kernel? or is there a difference at all?
(11:49:44 AM) apw: the main difference is focus for the kernel.  the desktop kernel is more tuned for interactive use
(11:50:03 AM) apw: the server kernel is more aligned with server needs.  this means we tend to use a different disk
(11:50:23 AM) apw: scheduler algorithm, often the scheduling tick is slower as we care less about gettting to a user
(11:50:30 AM) apw: qucikly and more about getting stuff done
(11:50:52 AM) apw: there have been less and less differences recently as the kernel has gotten better at
(11:50:56 AM) apw: self tuning.
(11:51:11 AM) apw: the other difference is that we support the server kernle for longer
(11:51:20 AM) apw: jcastro, next
(11:51:26 AM) ClassBot: Odd-rationale asked: can you tell us a little about kerneloops? how it works and how it is integrated with Ubuntu?
(11:51:55 AM) apw: kerneloops is a post processor for kernel panics and dumps
(11:52:12 AM) apw: it pulls out the kernel stack trace for the incident and pushes it to the kerneloops.org site
(11:52:37 AM) apw: this allows the site to work out which kernel issues are most prevalent and possibly associate those with
(11:52:51 AM) apw: specific kernel versions or even with specific builds by specific distributions
(11:53:14 AM) apw: in ubuntu the kerneloops submissions are triggered directly from apport when it is about to report those
(11:53:20 AM) apw: same traces back to LaunchPad
(11:53:31 AM) apw: jcastro, next
(11:53:40 AM) jcastro: waiting on questions
(11:53:50 AM) apw: almost perfect timing :)
(11:55:03 AM) apw: jcastro, you have one now :)
(11:55:32 AM) ClassBot: ogasawara asked: Where can I reach members of the Ubuntu Kernel Team if I have more questions?
(11:56:15 AM) ogasawara: so I'm talking to myself :) but  We usually hang out on FreeNode in the #ubuntu-kernel channel.
(11:56:28 AM) ogasawara: Our team spans a wide range of timezones so chances are good that one of us will be online.
(11:56:34 AM) ogasawara: ..
(11:56:53 AM) ogasawara: we can also be found at kernel-team@lists.ubuntu.com
(11:57:35 AM) ogasawara: but the mailing list is more for technical discussion (ie patches etc).  Not to gripe about bugs :)
(11:57:47 AM) ogasawara: jcastro: next
(11:58:15 AM) ogasawara: prolly last one as we're nearing the end of our session
(11:58:24 AM) ClassBot: nealmcb asked: Do you have any good links to generic Ubuntu kernel debugging help pages? :)
(11:58:50 AM) ogasawara: https://wiki.ubuntu.com/KernelTeam/KnowledgeBase#Debugging has some general debugging tips
(11:59:44 AM) apw: as we are running out of time, we'd just like to thank you all for your
(11:59:57 AM) apw: interesting and detailed techinical questions ...
(12:00:04 PM) apw: it cirtainly was entertaining
(12:00:26 PM) apw: hope to see you in #ubuntu-kernel
(12:00:45 PM) ogasawara: thanks everyone!
(12:00:49 PM) ***ogasawara hand it off to the server team
</pre>
