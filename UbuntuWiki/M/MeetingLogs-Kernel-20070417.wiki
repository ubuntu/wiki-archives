{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Log ===
TZ UTC+1
<pre>
05:00	BenC	So, we're all here...
05:00	BenC	Agenda is at: https://wiki.ubuntu.com/KernelTeam/Meeting although it is a bit out-of-date
05:00	BenC	kernel-release schedule...uh, released :)
05:01	BenC	bug status...stable, but still reviewing for post-release updates
05:02	BenC	I think basically we're at a point where we can move on to gutsy topics, and the new kernel tree
05:02	rtg	Lets cleanup the wireless stuff.
05:02	BenC	well, the tree is going to change considerably
05:02	BenC	stock kernel is going to be in ubuntu-2.6.git
05:03	BenC	all extra drivers are being moved to a linux-ubuntu-modules package
05:03	pkl_	the current tree will be used for any updates to Feisty?
05:03	pkl_	The new tree will only be for Gutsy?
05:03	BenC	pkl_: ubuntu-feisty.git is for feisty security and stable release updates
05:03	BenC	right
05:04	BenC	ubuntu-2.6.git right now is just a clone of linux-2.6.git
05:04	zul	im still mulling over the virtualization infrastructure stuff
05:04	BenC	I'll push that to the public kernel.org repo soon
05:04	BenC	zul: probably best to hang tight till I get the build infrastructure in place
05:04	zul	BenC: no problem..
05:05	BenC	at this point, I have a local .diff of the delta between ubuntu-feisty.git and upstream code
05:05	BenC	I'm merging patches into for-linus branch in preparation for the 2.6.22 merge window with Linus
05:06	BenC	but we'll be sending out the patches sooner than that to get good feedback
05:06	pkl_	how much of this delta will be pushed upstream?
05:06	BenC	my intention is to get all of it pushed upstream
05:06	mjg59	Are you differentiating between core code and external drivers?
05:06	BenC	the current diff is only ~65k, and a lot of that is toshiba_acpi and DSDT-acpi-initramfs
05:07	mjg59	Ok
05:07	BenC	mjg59: yes
05:07	mjg59	Len's consistently refused the DSDT-acpi-initramfs patch
05:07	BenC	I haven't touched the ubuntu/* stuff yet
05:07	BenC	I know, but it's so bogus to do so
05:07	mjg59	Indeed
05:07	BenC	we allow DSDT to be built into the kernel, so there's no argument for not allowing manual DSDT override
05:08	BenC	I think it's the initramfs early prep that's ugly, but unavoidable
05:09	BenC	Anyway, I'll post my current diff, and keep it updated as I put things in for-linus...need to push that branch out to the ubuntu-2.6.git anyway
05:10	fabbione	BenC: question... now that you want to have ubuntu-2.6.git basically vanilla and linux-ubuntu-modules...
05:10	fabbione	what about patches that affects deeply vanilla?
05:10	fabbione	are we going to fork the code and slam it in ubuntu-modules?
05:10	fabbione	and if so how to we managed changes to core parts of the kernel that needs to be inline?
05:10	BenC	in severe cases yes...minor updates (like some of the ocfs2 stable patches) we can keep in the vanilla tree
05:11	BenC	I'm going to be extremely tight on what goes in there...mostly to keep myself in check
05:11	BenC	I've always been pretty liberal with syncing to things like drivers/ata/, and most times for good reason, but we always end up getting bitten with some unforseen bugs
05:12	BenC	check-ins for ubuntu-2.6 will most times go through a two-signed-off-by process
05:12	BenC	even for me :)
05:13	fabbione	    Signed-off-by: Ben Collins <bcollins@ubuntu.com>
05:13	BenC	exceptions will be things like debian/* updates and trivial s/KERN_ERR/KERN_INFO/ types things
05:13	fabbione	    Signed-off-by: Angie Collins <acollins@ubuntu.com>
05:13	BenC	lol, busted
05:14	BenC	I'll be writing up a more thorough explanation of the gutsy tree this week
05:14	BenC	update wiki, etc.
05:14	rtg	I assume jgarzik will choose 2.6.22 as the next stable tree. Why wouldn't we track it almost exactly for the next 3 or 4 months?
05:15	fabbione	rtg: because users will never be satisfied without their tons of extra drivers
05:15	BenC	rtg: we'll get it by naturally following linux-2.6, so to avoid delta and crud, we'll just wait for it
05:15	fabbione	or tons of extra patches to gain half FPS out of glxgears
05:15	BenC	rtg: if he syncs for 2.6.22, then we'll get it within 3-4 weeks anyway
05:16	BenC	fabbione: I need for gutsy's kernel process to be an excercise in how gutsy+1 will go (since it maybe the next LTS)
05:16	BenC	so we may end up saying "Sorry, we can't take in a huge chunk of code for drivers/char/drm/ updates because we need the current code to remain stable"
05:17	kylem	did you revert the drm stuff for feisty, btw?
05:17	fabbione	BenC: oh yeah. i get your idea.. that's not the issue... i have the feeling it's going to clash with other kind of requests like .. we need to support my Bluetooth dildo kind of thing
05:17	BenC	where as before it was like "Sure, I'll git-pull the entire damn thing"
05:17	BenC	kylem: I reverted my initial sync, but then dropped back to 2.6.21's stuff
05:18	kylem	ok.
05:18	BenC	fabbione: bluetooth dildo == Wishlist...want me to open a bug for you? :)
05:19	fabbione	BenC: sure thing :)
05:20	BenC	so a big portion of the roadmap for gutsy revolves around these changes in the build system, and kernel maint policies
05:20	BenC	some of these things will get discusses at UDS because they could benefit from input outside the kernel-team (release managers, archive maint, etc)
05:21	BenC	some of them will just get done (ditching kernel-package, O= build system, linux-source split from linux-ubuntu-modules, etc.)
05:23	BenC	Ah, another bug area we want to fill is validation testing of the kernel build
05:23	mjg59	Well, the difficulty is in ensuring that we don't regress in breadth of hardware support
05:23	BenC	things like module.alias checking, alias overlaps, etc
05:23	BenC	mjg59: exactly
05:24	mjg59	And sometimes, that's likely to require us to modify core code
05:24	BenC	we already have a trivial module checker in feisty that makes sure we don't have modules go missing between builds
05:25	BenC	mjg59: I don't think we have any patches in feisty like that...things we have to core code can either be synced upstream now, or if it's major, pushed to linux-ubuntu-modules
05:25	BenC	toshiba_acpi is one I think might end up that way
05:25	mjg59	Well, strictly toshiba_acpi should be rewritten to generate input events
05:26	BenC	but the likelyhood of that happening considering the acpi-event patch has been around over a year? :)
05:26	mjg59	Depends on how much spare time I have
05:27	mjg59	It's not likely to be merged in its current state
05:27	BenC	yeah, I recall the lkml discussions about the current patch
05:28	BenC	toshiba_acpi still has a bunch of stuff to be compatible with our own toshset package though
05:28	kylem	or someone else could just fix it up...
05:29	mjg59	toshiba_acpi as it currently stands is a bit of a screaming nightmare
05:29	mjg59	And the old maintainer doesn't handle it any more
05:29	mjg59	I should just take over
05:29	BenC	guess we should move on...
05:30	BenC	feisty security/updates
05:30	BenC	we already know what's in git
05:30	BenC	are there any patches we knew of in lp right now that need to go into post-release feisty kernel?
05:30	BenC	I know we need some more id's moved from ata_piix to piix
05:31	BenC	bug #84603
ubotu	Malone bug 84603 in linux-source-2.6.20 "Hard disk I/O randomly freezes when hald is running and optical drive is empty" [Medium,Confirmed]  https://launchpad.net/bugs/84603
05:31	zul	the microsoft keyboard patch is one I can think of
05:31	BenC	there's a workaround, so not critical for release
05:31	rtg	I'm close to figuring out bug #103768
05:31	ubotu	Malone bug 103768 in linux-source-2.6.20 "softmac and network-manager cite unreconcilable differences" [Critical,Unconfirmed]  https://launchpad.net/bugs/103768
05:32	pkl_	tifm driver, moving from 0.7 to 0. again (reverted sometime last month)
05:32	BenC	rtg: don't forget ubuntu/net/wireless/wext-old.c ...it's the most likely area of the problem
05:32	pkl_	0. -> 0.8
05:32	rtg	BenC: I'm leaving tracks all over it trying to figure out the race.
05:33	BenC	rtg: compare the code to what's in net/core/wireless.c
05:33	BenC	might give some clues
05:33	fabbione	BenC: the OCFS2 stuff please
05:33	BenC	pkl_: did I revert that by mistake when I updated tifm/mmc?
05:33	fabbione	(for feisty)
05:33	BenC	fabbione: In git, so queued
05:33	pkl_	BenC: yes
05:33	fabbione	BenC: cool
05:34	BenC	pkl_: ok, shoot me later...can you prepare a diff to bring things back?
05:34	pkl_	BenC: yes
05:34	BenC	as of now, any patches proposed for feisty (other than embargoed security patches) should go through kernel-team@lists.ubuntu.com
05:37	BenC	I think that's all the main topics I had to discuss
05:37	BenC	anyone have anything they want to bring up?
05:38	BenC	Anyone have comments on the feisty kernel release, how the crisis was handled, addition suggestions for improvement, or suggestions for gutsy kernel, specs, etc...
05:38	BenC	?
05:38	fabbione	hmm i somehow have one...
05:38	pkl_	only, wondering it's normally like that at release time :)
05:39	fabbione	note that this is only my point of view..
05:39	fabbione	pkl_: no we have seen far worst at release time
05:39	BenC	pkl_: usually not that bad...we always have a crisis, but never 5 in a row :)
05:39	BenC	strictly speaking for the kernel side of things
05:39	fabbione	but i think now that the kernel team is growing, you should be able to handover stuff between members in a slightly easier way
05:39	BenC	fabbione is right, we've had some bad release crisis before
05:39	fabbione	and in case of disasters like this one
05:40	BenC	fabbione: that's on my personal agenda...handing off more of my responsibilities
05:40	fabbione	with a 4 people kernel team, you should be able to cover the 24h without issues
05:40	fabbione	BenC: yeps.. i am just saying what i think i saw
05:40	fabbione	it's up to you guys how much you want to weight it
05:40	fabbione	i don't expect you to follow my directions ;)
05:40	BenC	well, we can't cover 24hours since pkl sleeps late, kyle and I are both EST, and Tim is only 2 hours behind us :)
05:41	fabbione	BenC: well that's where i want to go..
05:41	BenC	plus tim wakes up early
05:41	fabbione	if there is a crisis, i think there is the option for people in the team to shift a few hours around
05:41	fabbione	and cover almost the 24h
05:41	BenC	fabbione: might be a good idea for us to spread out during major milestones
05:41	fabbione	i know that 75% of kernel team is US based but most of the distro team is EU
05:42	BenC	beta and RC seem like good points for that
05:42	cjwatson	pkl_: I'm in the process of writing up a document/rant/whatever on past Ubuntu release panics
05:42	fabbione	that somehow clashes a bit when there are situations like this one
05:42	fabbione	in which we need to be more in sync than ever
05:42	cjwatson	pkl_: mostly so that people experiencing it for the first time don't feel quite so much like the universe is collapsing
05:42	fabbione	BenC: yeps.. just to have a Plan B crisis for when it's strictly required.
05:42	fabbione	BenC: i am not saying you should be 24/7 always
05:42	fabbione	that would be an insane expectation
05:43	BenC	fabbione: bad thing is, most of the team gets up after EU, and because of the flow, kernel team needs to fix things in order for EU folks to get things done(cd runs)
05:43	BenC	so it gets bad for people like cjwatson and Mithrandir
05:43	cjwatson	there was a case during this crisis where I ended up trying to hack up test kernels because nobody else was around and I couldn't find the current state
05:43	cjwatson	I'd like that not to happen again
05:43	cjwatson	(and mdz was desperate to get progress)
05:44	BenC	cjwatson: maybe a crisis center we can keep updated and concise for things like this
05:44	BenC	s/crisis center/wiki page/
05:44	fabbione	BenC: yes i do understand that.. nothing stops one of the kernel team to be part of the release process and be able to pre-build CD at the end of the US shift right before EU wakes up
05:44	cjwatson	BenC: lag between kernel team and CD team is several hours, so had it been the other end of the day it would have been OK
05:44	BenC	cjwatson: right
05:44	cjwatson	it gets bad when you get stuff done around your early afternoon that needs to be pushed through urgently
05:45	fabbione	anyway it was just the way i felt it.. nobody should take it personal or feel bad because i know you have still done an amazing job
05:45	BenC	we could definitely see about two kernel team members working more evening shifts to do things, and catch the EU folks before handing off to the other kernel team members
05:45	pkl_	There was a number of times I didn't know what had happen to the kernel overnight (after I'd gone to bed), but was being asked as I was the only kernel team member around.
05:45	cjwatson	pkl_: yeah, in those cases I had a feeling you simply didn't have the information but had to ask
05:46	BenC	we should do a better job of handing off info and state, for sure
05:46	cjwatson	next time, I would like things to be arranged such that you do have the information
05:46	BenC	post mortum will be a hot topics at UDS :)
05:46	cjwatson	fabbione: it wouldn't hurt to have a session at UDS on rapid change management - how to get from kernel git commit to CDs as fast as possible
05:46	BenC	generally, I'm hoping process changes for development cycle will reduce the crisis level altogether, but a good crisis policy is required
05:46	cjwatson	perhaps informally
05:47	fabbione	cjwatson: sounds like an idea.. it would also help for people to be more familiar with git
05:47	fabbione	as it is now it's only a very few of us
05:47	rtg	kylem has offered to lead a git bootcamp at UDS.
05:49	fabbione	rtg: yes i know.. it would be more interesting to see how many people will actually show up :)
05:49	BenC	cjwatson: what can we do about making it easier to get urgent kernel uploads into the buildd's faster?
05:49	fabbione	git == kernel in some people mind and kernel == evil
05:49	cjwatson	BenC: speaking of distributing responsibilities, would it be possible to distribute the task of preparing feisty bits for upstream merge and setting up the gutsy tree?
05:50	BenC	cjwatson: yes, we discussed that at the beginning
05:50	cjwatson	BenC: even if it's really only a one-person task, I think that would be useful to increase the team's familiarity with what we've changed versus upstream
05:50	cjwatson	ok
05:50	cjwatson	I read through but I guess I missed that you were distributing it
05:50	BenC	however gutsy tree will be new build system, so it's going to be in flux for a couple weeks
05:51	BenC	I think I can push off the upstream merge entirely to someone else, if anyone is interested
05:51	fabbione	BenC: i strongly reccomends to get a gutsy upload for toolchain soonish and change the build system immediatly after
05:51	cjwatson	BenC: urgent kernel uploads> I think that really comes under Soyuz improvements, which will hopefully be a bit easier now that we have two Soyuz hackers again
05:51	fabbione	BenC: or at least coordinate that with doko
05:51	BenC	fabbione: how about I just get you a linux-libc-dev upload out of the tree, no kernel images
05:51	cjwatson	significant publisher speed improvements are due to land with PPA
05:51	fabbione	BenC: it's an option.. but talk to doko to make sure it's ok with him
05:52	fabbione	BenC: glibc should be fine with the current running kernels on the buildd.. i am not sure about all arches tho
05:52	BenC	cjwatson: do you think ppa will be a good alternative to the way we were doing things with test kernels (build locally, upload to rookery)?
05:52	doko	BenC: I would appreciate it if the kernel headers could stay stable until new glibc/binutils/gcc are in the archive.
05:53	BenC	doko: so you don't want me to upload anything yet?
05:53	cjwatson	BenC: I think the immediate intention is more for things that aren't speed-critical
05:53	cjwatson	it'll build from scratch every time, so it isn't going to get near the performance of a ccached incremental build
05:54	doko	BenC: well, the current toolchain updates are tested; and it's likely that headers break on some architecture. AFAIK the archive isn't open yet.
05:54	fabbione	doko: aren't we supposed to bootstrap the toolchain starting from kernel headers? or do you want to change that later?
05:54	BenC	cjwatson: maybe a dedicated machine for this sort of thing would be nice...I'm not sure the whole team can do fast build/upload cycles like we were doing
05:54	fabbione	doko: ok
05:54	cjwatson	(PPA => Personal Package Archives, basically per-person apt archives with uploaders and such attached implemented in Launchpad)
05:54	doko	fabbione: we never did a full bootstrap; I did put that on the UDS agenda
05:55	cjwatson	BenC: let's talk about this more on the phone in a bit, but one idea would be to ensure that each of you has access to the others' fast personal build machines
05:55	BenC	doko: Catch be out-of-band for more discussion, I want to make sure I'm not blocking you
05:55	BenC	cjwatson: ok
05:55	BenC	we're just about out of time
05:55	cjwatson	datacentre hosting is good for most of the distro team, but for kernel development having the box locally is pretty valuable
05:56	BenC	any last minute comments?
05:56	fabbione	LOVE YA!
05:57	BenC	kylem, pkl, rtg: Congrats on your guys first release cycle nearly at an end...I know it was rough, but everyone did a great job
05:57	BenC	fabbione: DITTO!
05:57	BenC	have a good week everyone, party on Thursday
</pre>
