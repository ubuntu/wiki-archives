{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== cpufreq (Processor frequency scaling) ==

Slowing down the CPU can save vast amounts of battery and heat output when the extra (wasted) CPU cycles are not needed.  '''powernowd'''  is reckoned to be better than '''cpudynd''' and is the userspace component that monitors the current usage and updates the scaling to reflect need.  It talks to the new Linux 2.6 /sysfs cpufreq interface.

Mostly this interface is provided by already loaded ACPI or pmac support.  However, some times we need to figure out which extra modules to load; for instance, on PIII-M machines with Intel ICH chipsets, load '''speedstep-ich.o''' .

There's the starts of a shell script which greps /proc/cpuinfo and tries to figure out what extra needs loading:

** http://www.paul.sladen.org/ubuntu/cpufreq-detect.sh

The failure-mode isn't too critical;  if the module doesn't load, then '''powernowd''' doesn't work.  Nothing lost, except battery power.  This isn't ideal but does mean that nothing is left screwed.

ACPI will also work in most cases, although apparently it may offer less options (eg. only minimum or maximum with nothing in between).

=== TODO ===

** Check if ACPI / pmac has already given us enough
** Check what needs to doing on PPC PowerBooks
     Turns out that the cpufrequency module is built in to the kernel on PowerPC, so we don't need to worry about this. AMD64 is currently all powerfreq-k8.ko - the powernowd init script already handles both of these cases. ThomMay
** figure out relationship with speedstep_lib.o

=== Notes ===

PaulSladen 2004-09-23

From SidneidaSilva Wed Nov 17 16:01:27 +0000 2004
From: Sidnei da Silva
Date: Wed, 17 Nov 2004 16:01:27 +0000
Subject: powerpc
Message-ID: <20041117160127+0000@https://www.ubuntulinux.org>

Seems like the default powerpc kernel has all the support compiled in, except its also has CPU_FREQ_24_API set to Y.
I don't know all the details, but seems like this is what is missing to get powernowd working.

See comment here: https://bugzilla.ubuntu.com/show_bug.cgi?id=1444#c18

Let me know if there's something else I can do to help.

From DexterAng Mon Jan 17 18:01:05 +0000 2005
From: Dexter Ang
Date: Mon, 17 Jan 2005 18:01:05 +0000
Subject: IBM Thinkpad T30
Message-ID: <20050117180105+0000@www.ubuntulinux.org>

For IBM Thinkpad T30 (2366-81A), loading speedstep-ich module is needed for cpu throttling.

CategoryArchive
