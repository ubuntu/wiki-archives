{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

<nowiki>[[https://help.ubuntu.com/community/MacBookPro4-1|<nowiki>[[File:IconsPage/up2.png|up]]</nowiki></nowiki>]]

== MacBookPro4.1 and Ubuntu 10.04 Lucid Lynx ==
<nowiki>[[File:MacBooksmall.png]]</nowiki><<BR>>

This page aims to describe the steps needed to fully enable all features of the '''4-th Generation Mac``Book``Pro''' (release date: Feb 2008) when using '''Ubuntu 9.10 Lucid Lynx'''.  ''Users running an older version of Ubuntu on this hardware should refer to the <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages#Mactel%20Wiki%20Support%20Matrix|Wiki Page Matrix]]</nowiki> to find the proper page.''  
<<BR>>
<<BR>>
<nowiki>[[File:IconsPage/terminal.png]]</nowiki> A terminal is opened by going to Applications -> Accessories -> Terminal. You can find out what model you have by typing at the terminal:
<pre>
sudo dmidecode -s system-product-name
</pre>

If your model is different from "Mac``Book``Pro4.1", please go <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki> to find the right wiki.

=== Overview ===

Anything not mentioned here probably already works out of the box. If not, please refer to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>. 

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| Sound
| <nowiki>[[File:IconsPage/check_small.png]]</nowiki>
|-
| Suspend & Hibernate
| <nowiki>[[File:IconsPage/check_remark_small.png]]</nowiki>
|-
| Graphics / Video Card
| <nowiki>[[File:IconsPage/check_remark_small.png]]</nowiki>
|-
| Keyboard functions (Brightness,volume,...)
| <nowiki>[[File:IconsPage/check_remark_small.png]]</nowiki>
|-
| Plymouth (pretty grub)
| <nowiki>[[File:IconsPage/check_remark_small.png]]</nowiki>
|-
| CD/DVD Writing
| <nowiki>[[File:IconsPage/query_small.png]]</nowiki>
|-
| Bluetooth
| <nowiki>[[File:IconsPage/check_small.png]]</nowiki>
|-
| External Monitor
| <nowiki>[[File:IconsPage/check_remark_small.png]]</nowiki>
|-
| Wireless (AirPort)
| <nowiki>[[File:IconsPage/check_remark_small.png]]</nowiki>
|-
| iSight
| <nowiki>[[File:IconsPage/check_small.png]]</nowiki>
|-
| Touchpad (bcm5974)
| <nowiki>[[File:IconsPage/check_remark_small.png]]</nowiki>
|-
| Mic
| <nowiki>[[File:IconsPage/query_small.png]]</nowiki>
|-
| Apple Remote Control
| <nowiki>[[File:IconsPage/query_small.png]]</nowiki>
|-
| Firewire
| <nowiki>[[File:IconsPage/query_small.png]]</nowiki>
|}
<nowiki>[[File:IconsPage/check_small.png]]</nowiki> (works out-of-the-box) <<BR>>
<nowiki>[[File:IconsPage/check_remark_small.png]]</nowiki> (works, with remarks) <<BR>>
<nowiki>[[File:IconsPage/warning_small.png]]</nowiki> (needs manual install) <<BR>>
<nowiki>[[File:IconsPage/dont_small.png]]</nowiki> (won't work)<<BR>>
<nowiki>[[File:IconsPage/query_small.png]]</nowiki> (not yet documented)<<BR>>

=== Basic Installation Instructions ===
Installation procedure is mostly independent of the Mac model you have. You should follow the steps in the <nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Apple Intel Installation Wiki Page]]</nowiki>.

''Be wary of a <nowiki>[[http://ubuntuforums.org/showthread.php?t=767677|bug]]</nowiki> in the Ubuntu Installer that can wipe out your MBR, leaving your system unbootable after a seemingly successful install.'' To avoid being bitten by this bug you should carefully follow one of the installation procedures documented <nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|here]]</nowiki>.

=== Sound ===
Sound works out of the box.

=== Suspend & Hibernate ===
Suspend works out of the box.

Waking from sleep can be slow if the battery is inserted (as it usually is). Adding the kernel boot option "acpi=rsdt" (as suggested in https://bugzilla.kernel.org/show_bug.cgi?id=8246#c67) can help. It also helps with intermittent freezes of VirtualBox guests that poll ACPI information (see http://www.virtualbox.org/ticket/2836).

This can be done by going to a terminal and entering the command 
<pre>
sudo dpkg-reconfigure grub-pc
</pre>
and entering "acpi=rsdt" (without the quotes) at the end of the linux default command line. The rest of the options may be left as they are.

Reconnecting wireless after waking from sleep has improved since Karmic, but is still slow.  Especially in contrast to some of the other operating systems you may run on your Macbook Pro.  A simple workaround is to not notify NetworkManager of sleep status.  This is done by:
1. Edit '''/usr/lib/pm-utils/sleep.d/55NetworkManager'''
2. Insert "'''exit 0'''" (without the quotes) after the comments about how nifty Apple is.
3. Save the file.
This workaround will quickly reconnect wireless in the same location, but may take more time if you wake from sleep in another location.

Hibernate works but can be very slow.

=== Graphics / Video Card ===

A Proprietary Driver is Available:

Go to System -> Administration -> Hardware Drivers. Enable the Nvidia accelerated graphics driver and reboot.

==== Desktop Effects (Compiz) ====
Use the Appearance window (System -> Preferences -> Appearance) to enable Visual Effects. Set this to "Extra" under the Visual Effects tab.

For further tweaking, in the Synaptic Package Manager find and install compizconfig-settings-manager. This program will let you enable other plugins and adjust plugin settings (i.e. desktop cube, animations, water effect, painting fire, etc.)

Once installed, the Compiz Settings Manager will be available under System -> Preferences.

=== Wireless (Broadcom) ===
Works after enabling the proprietary wireless driver in System -> Administration -> Hardware Drivers. You need to restart the computer in order for the change to take effect.
Reconnecting wireless after waking from sleep is very slow.  Please see the fix under <nowiki>[[http://help.ubuntu.com/community/MacBookPro4-1/Karmic#Suspend%20&%20Hibernate|Suspend & Hibernate]]</nowiki>.
=== Keyboard ===

==== Special functions (Volume, Keyboard backlight, Caps Lock LED) ====

To fix keyboard backlight install the package pommed:
<pre>
sudo apt-get install pommed
</pre> 

You can also manually change the keyboard backlight from the terminal (or create a script using these commands):

To set brightness to maximum:
<pre>
echo 255 | sudo tee -a /sys/class/leds/smc::kbd_backlight/brightness
</pre>

To turn off keyboard backlight:
<pre>
echo 0 | sudo tee -a /sys/class/leds/smc::kbd_backlight/brightness
</pre>

The mouseemu package can interfere with the LED on the caps lock key, however it is not installed by default in 10.04.

The Expo and Dashboard keys are assignable under Lucid.  Run CompizConfig Settings Manager and use choose Expo Plugin -> Expo key -> Grab key combination to assign Expo to expose all desktops.  It should report as "XF86LaunchA".

==== Fn Key ====
By default, the Fn key must be pressed in order to use F1, F2, F3, etc. Otherwise you get the special function of those keys (Screen brightness, keyboard backlight, sound volume, etc) as in OS X. Some users prefer that swapped so that F1, F2, F3, etc is the default. To make this change see the <nowiki>[[https://help.ubuntu.com/community/AppleKeyboard#Jaunty%20(or%20later?):|Apple Keyboard Wiki Page]]</nowiki>

==== Swap Command and Control ====

Users who prefer to switch the functionality of command and control keys should see <nowiki>[[http://ubuntuforums.org/showthread.php?t=1006952|this thread]]</nowiki>; see pages 2 and 3. 

=== Plymouth (Pretty Grub) ===

As with many other systems, the Macbook Pro has some trouble here (especially after installing nVidia proprietary driver)

I followed <nowiki>[[http://idyllictux.wordpress.com/2010/04/26/lucidubuntu-10-04-high-resolution-plymouth-virtual-terminal-for-atinvidia-cards-with-proprietaryrestricted-driver/ | this guide]]</nowiki> to get it to work, but in case that link breaks here is a summary:

<pre>
 sudo apt-get install v86d hwinfo
 sudo hwinfo --framebuffer
]}}

From there, you should get a list of resolutions that you can support, pick the one that you want (I went with 1024x1280-24)

Edit /etc/grub/default with:
<pre>
 sudo gedit /etc/grub/default
</pre>

Find and change the relevant lines to:

<pre>
...
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash nomodeset video=uvesafb:mode_option=1366x768-24,mtrr=3,scroll=ywrap"
...
GRUB_GFXMODE=1366x768
</pre>

Save it

Execute these commands:

<pre>
 sudo echo "uvesafb mode_option=1366x768-24 mtrr=3 scroll=ywrap">> /etc/initramfs-tools/modules
 sudo echo FRAMEBUFFER=y | sudo tee /etc/initramfs-tools/conf.d/splash
 sudo update-grub2
 sudo update-initramfs -u
</pre>

Then reboot and test!

=== Screen Brightness ===

Screen brightness and its associated function keys works out of the box.

=== Bluetooth (Mighty  Mouse) ===

Bluetooth works out of the box.

=== iSight ===

The iSight camera works out of the box.

=== Touchpad (bcm5974) ===

Left-click and basic trackpad functions work out of the box. You have however to activate them by going to System -> Preferences -> Mouse and selecting the tab Touchpad.

=== External Monitor ===

If you have the restricted drivers enabled, the default monitor configuration tool in Ubuntu wont be able to set up the graphics card and will instead direct you to Nvidias proprietary configuration tool. Just go to X Server Display Configuration, click Detect Displays, select the secondary display and enable it.

=== Microphone ===
Mic seems to work out of the box but in case it won't go to System -> Preferences -> Sound and then under the tab named Input change Connector to Microphone 1.
 
=== Sensors and Power Management ===
Works out of the box.  You can install lm-sensors to read your temps.

=== Apple Remote Control ===
Untested.

----
<nowiki>[[https://help.ubuntu.com/community/CategoryMac|CategoryMac]]</nowiki> 
----
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/IconUsers.png]]</nowiki><<BR>> Please update this page, if you have figured out anything, that is not mentioned here!
|}
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/IconUsers.png]]</nowiki><<BR>> The <nowiki>[[http://ubuntuforums.org/group.php?groupid=352|MactelSupportTeam]]</nowiki> is about to restructure and reorganize the documentation for Intel-based Macs. If you are interested in helping, please visit our <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam|team page]]</nowiki> for information. For all Mactel wikis, there is a starting place <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki>. There is also a <nowiki>[[http://ubuntuforums.org/showthread.php?t=969360|thread]]</nowiki> about planning the Mactel documentation going on.
|}
<<BR>><<BR>>
----
CategoryMac
