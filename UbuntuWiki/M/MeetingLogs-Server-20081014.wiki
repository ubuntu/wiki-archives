{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

=== Agenda ===

Items we will be discussing:

* Review ACTION points from previous meeting.
* Review progress made on the specification listed on the <nowiki>[[ServerTeam-Roadmap| Roadmap]]</nowiki>.
* JeOS is replaced by the F4 option on the server installer, thanks to Mathiaz, Soren, the installer team and others...  We would need some tests with the latest installer to make sure it works well. - nijaba
* python-vm-builder: new version coming in universe in the next couple days.  Needs testing, specially on the Xen and VMWare sides, which lacks some love. - nijaba
* Open Discussion.
* Agree on next meeting date and time.

=== Minutes ===

===== KVM =====

kirkland reported he had been chasing down the virtio disk bug. It seems to be related to grub: grub-install writes a broken bootloader to the disk. He is looking into the bug and may ask for help.

mathiaz reported that the virtio network bug had been fixed. The installer correctly detects network interfaces attached to a virtio device.

===== JeOS =====

mathiaz reported that a new option had been added to the installer: Install a minimal virtual machine. The -virtual flavour has also been promoted to main and is seeded in the -server isos.

mathiaz asked which host environments were supported. ESX and kvm are fully supported. After some discussion it turned out that Xen was also supported and should work. He also wondered if someone had access to  ESX and Xen to test the new installer option and the -virtual kernel. nijaba said that the QA team may have access to an ESX environment.

===== python-vm-builder =====

nijaba asked for sponsoring of the <nowiki>[[https://code.launchpad.net/~ubuntu-virt/vmbuilder/trunk|trunk branch]]</nowiki> as it contains several bug fixes. He implemented some missing functions to support xen and is looking for testers. Both ESX and xen environments require some testing.

ACTION: mathiaz to look at sponsoring python-vm-builder.

===== ebox =====

mathiaz reported that an FFexception request still had to be filed for ebox. The packages can be found in the <nowiki>[[https://launchpad.net/~ebox/+archive|ebox PPA]]</nowiki>. ivoks volunteered to take a look at the packages.

===== Agree on next meeting date and time =====

Next meeting will be on Tuesday, October 21st at 15:00 UTC in #ubuntu-meeting.

=== Log ===
<pre>
[16:01] <mathiaz> #startmeeting
[16:01] <MootBot> Meeting started at 10:01. The chair is mathiaz.
[16:01] <MootBot> Commands Available: [TOPIC], [IDEA], [ACTION], [AGREED], [LINK], [VOTE]
[16:01] <persia> It's not that.  It's about the 40th.  I may have lost count along the way, but not by that much.
[16:02] <mathiaz> Today's agenda: https://wiki.ubuntu.com/ServerTeam/Meeting
[16:03] <mathiaz> Last week's minutes: https://wiki.ubuntu.com/MeetingLogs/Server/20081007
[16:03] <mathiaz> [TOPIC] Bacula SRU
[16:03] <MootBot> New Topic:  Bacula SRU
[16:03] <mathiaz> zul: ^?
[16:03] <nxvl> persia: don't make us lose the joy
[16:03] <mathiaz> zul: I think it has been published?
[16:04] <zul> mathiaz: uploaded not accepted afaik yet
[16:04] <zul> ill bug pitti about it
[16:05] <mathiaz> zul: ok.
[16:05] <mathiaz> [TOPIC] Review ServerGuide for Intrepid
[16:05] <MootBot> New Topic:  Review ServerGuide for Intrepid
[16:05] <mathiaz> sommer: anything new?
[16:07] <mathiaz> ok - noone is there - moving on
[16:07] <mathiaz> [TOPIC] KVM
[16:07] <MootBot> New Topic:  KVM
[16:07] <mathiaz> kirkland: what's the update on virtio bugs?
[16:07] <kirkland> mathiaz: i'm chasing down the virtio disk bug
[16:07] <mathiaz> kirkland: there were two bugs: one related to network and one related to block device
[16:07] <kirkland> mathiaz: looks to be grub geometry
[16:08] <mathiaz> kirkland: IIRC the network virtio bug is fixed
[16:08] <kirkland> mathiaz: the disk geometry for virtio disks is wrong in grub
[16:08] <kirkland> mathiaz: i'm checking if any of the other distros have solved that yet
[16:09] <mathiaz> kirkland: ok - that may point to an issue with kvm on the host
[16:09] <sommer> mathiaz: sorry, nothing new :)
[16:09] <mathiaz> kirkland: or an issue with the kernel guest
[16:09] <mathiaz> sommer: ok - I'll try to send an update to the support section
[16:09] <kirkland> mathiaz: i was concentrating on the guest
[16:10] <mathiaz> kirkland: if this is an issue with the guest kernel we may be hit by the kernel freeze
[16:10] <nealmcb> this one? https://bugs.launchpad.net/bugs/281492
[16:10] <ubottu> Launchpad bug 281492 in grub "grub does not install properly to a virtio disk in kvm (/dev/vda)" [Undecided,Confirmed]
[16:10] <mathiaz> kirkland: that is scheduled for this thursday
[16:10] <mathiaz> nealmcb: yes
[16:11] <kirkland> mathiaz: i may need to employ some additional expertise on this
[16:11] <mathiaz> kirkland: let's assume we are not able to fix grub in time
[16:11] <mathiaz> kirkland: what are the options?
[16:12] <mathiaz> kirkland: should we emit a warning? add some code to check if /boot is on a vd* device?
[16:12] <kirkland> mathiaz: tell people to install using a plain disk, and after installation is done, use a virtio disk
[16:13] <mathiaz> kirkland: that means some more work to be done in the installer
[16:13] <mathiaz> kirkland: or in grub-install?
[16:14] <kirkland> mathiaz: i'm trying to fix it in grub, as i said
[16:14] <kirkland> mathiaz: grub-install writes a borked bootloader to the disk
[16:14] <kirkland> mathiaz: if we get a good bootloader on the disk, it boots fine
[16:15] <mathiaz> kirkland: right - I think it's the right to try to solve the issue
[16:15] <kirkland> mathiaz: but when the grub writes the bootloader to a /dev/vd* disk, it hoses the disk for booting
[16:15] <kirkland> mathiaz: that's in the installer, and in runtime
[16:15] <mathiaz> kirkland: However I'm wondering about contigency plan if we don't fix it in time for intrepid
[16:16] <mathiaz> kirkland: right - so grub-install would be the correct place to emit a warning if it tries to write on a vd* device
[16:16] <nijaba> o/
[16:16] <mathiaz> kirkland: you said you'd ask for help
[16:16] <kirkland> mathiaz: sure
[16:16] <jdstrand> kirkland: I'm somewhat confused-- if the backup plan is to install to /dev/hda, then change to firtio *after* install, won't the next invocation of grub (eg through a kernel update), mess up the mbr (or whatever is borked)?
[16:16] <mathiaz> kirkland: what kind of expertise would you require?
[16:17] <mathiaz> jdstrand: I don't think so
[16:17] <mathiaz> jdstrand: the next invocation of grub will just update menu.lst
[16:17] <kirkland> mathiaz: i was going to ask cjwatson and aliguori, unless you can point me to someone else
[16:17] <jdstrand> mathiaz: good point
[16:17] <mathiaz> jdstrand: however it would break the boot loader if grub itself was updated
[16:18] <jdstrand> mathiaz: or if the user played with grub-install manually
[16:18] <mathiaz> kirkland: I don't think of anyone else - it seems to be kernel related somehow
[16:19] <mathiaz> jdstrand: correct.
[16:20] <mathiaz> kirkland: ok - it seems you've some ressource to get things moving
[16:20] <mathiaz> kirkland: however keep in mind the kernel freeze on thursday
[16:20] <kirkland> mathiaz: I'm trying
[16:21] <mathiaz> kirkland: on thursday we may need to see if we should try to keep fixing grub or go with a contigency plan since it will be hard to fix the kernel if necessary
[16:22] <mathiaz> kirkland: other than this bug, is there anything else on kvm?
[16:22] <kirkland> mathiaz: have you verified the virtio networking fix?
[16:22] <mathiaz> kirkland: yes - it's working from me in a hardy host
[16:23] <mathiaz> kirkland: and on your side?
[16:23] <kirkland> mathiaz: i would like to mirror your test
[16:23] <mathiaz> kirkland: on a intrepid host?
[16:23] <kirkland> mathiaz: i could not get it working on Friday, but i think my invocation or setup might have been wrong
[16:23] <mathiaz> kirkland: ok - I'll outline my test after the meeting
[16:23] <kirkland> mathiaz: thanks
=== txwikinger2 is now known as txwikinger
[16:24] <mathiaz> [ACTION] mathiaz to explain his virtio network test to kirkland
[16:24] <MootBot> ACTION received:  mathiaz to explain his virtio network test to kirkland
[16:24] <mathiaz> kirkland: anything on the virt-manager front?
[16:25] <kirkland> mathiaz: no
[16:25] <mathiaz> kirkland: ok - thanks for the update on the virtualization front
[16:25] <kirkland> mathiaz: sure
[16:25] <mathiaz> [TOPIC] JeOS
[16:25] <MootBot> New Topic:  JeOS
[16:26] <mathiaz> nijaba: so I've got all things sorted out
[16:26] <nijaba> yes, that's great.  I guess we need some testing now..
[16:26] <mathiaz> nijaba: the -virtual kernels are on the -server cd and the F4 option to install a minimal virtual machine has been added to the installer
[16:27] <mathiaz> nijaba: I'm going to test today's -server isos as they're the first ones shipping with the -virtual kernels
[16:27] <nijaba> so we have a full intergartion of the jeos installer in the server cd, coolio
[16:27] <mathiaz> nijaba: yop - however JeOS is not mentionned anywhere
[16:27] <nijaba> yes, and the first time we have a 64bit kernel for -virtual
[16:28] <mathiaz> nijaba: technically -virtual is just a -server kernel with a lot of modules not included
[16:28] <nijaba> JeOS has never been mentionned elswhere than in the docs, so that's ok
[16:28] <mathiaz> nijaba: well - JeOS was part of the iso name
[16:28] <mathiaz> nijaba: and part of the product name too
[16:29] <nealmcb> nijaba: ahh - 64bit kernel - nice
[16:29] <nijaba> mathiaz: yes, but better safe than sorry, right ;)
[16:29] <mathiaz> nijaba: I was wondering if it should be added to the F4 option some how
[16:29] <nijaba> well, do not worry too much about this, I'll put plenty of explanation on the web, wiki, etc...
[16:30] <nijaba> mathiaz: I think the wording you proposed is more self explanatory
[16:30] <mathiaz> nijaba: "Install a minimal virtual machine"
[16:30] <nijaba> JeOS seems to be confusing for some, they were often trying to install it on real hw
[16:31] <nijaba> mathiaz: yes, that's really clear
[16:31]  * nealmcb nods
[16:31] <nijaba> mathiaz I have added a couple test cases on the server test for qa, how can I get the tests added to qa.u.c?
[16:32] <mathiaz> nijaba: great - so we've got JeOS fully integrated in intrepid -server iso
[16:32] <mathiaz> nijaba: they should be added by tomorrow
[16:32] <mathiaz> nijaba: do we have access to ESX somewhere?
[16:32] <nijaba> I tried to ping heno but did not get a reply
[16:32] <nijaba> mathiaz: IS has one up and running
[16:33] <nijaba> you can request access to it, I guess
[16:33] <mathiaz> nijaba: hm - I don't know how
[16:33] <mathiaz> nijaba: I'll ask heno or cr3 about it
[16:33] <nijaba> ok, I'll email heno tonight
[16:34] <mathiaz> nijaba: does JeOS support xen also?
[16:34] <nijaba> nope
[16:34] <mathiaz> nijaba: only ESX and kvm are supported?
[16:34] <nijaba> the -virtual kernel is not a paravirt kernel
[16:34] <nijaba> mathiaz: officially, yes, but it could work elsewhere
[16:34] <mathiaz> nijaba: well -virtual is the -server kernel
[16:35] <zul> nijaba: umm what?
[16:35] <nijaba> just need a full virtualization env, not paravirt
[16:35] <mathiaz> nijaba: the -virtual kernel is not a different kernel build AFAIUI
[16:36] <mathiaz> nijaba: is just a sub-selection of the -server build
[16:36] <nijaba> mathiaz: right, and this is the issue, AFAIK, to run it in a paravirt env, no?
[16:37] <nijaba> zul: do you agree that we need a -xen kernel to run ubuntu as a paravirtualizatin guest?
[16:37] <mathiaz> nijaba: I'm not sure - I'm running intrepid -server kernel as kvm guests.
[16:37] <nijaba> mathiaz: kvm == full virtualization, as vmware and virtualbox
[16:37] <zul> nijaba: no, you can run xen paravirt stuff with the server kernel
[16:37] <mathiaz> nijaba: hm - ok
[16:38] <nijaba> zul: ah, ok, so the paraviort extension made it in the plain kernel
[16:38] <zul> nijaba: yep
[16:38] <nijaba> coolio
[16:38] <nijaba> I did not know that
[16:38] <mathiaz> zul: do you have access to a xen host ?
[16:38] <mathiaz> zul: in order to test JeOS in xen?
[16:39] <zul> mathiaz: I can quickly
[16:39] <mathiaz> nijaba: or we don't need to test on xen?
[16:39] <zul> xen is in universe though
[16:39] <nijaba> that would be nice if we could support it as well with -virtual
[16:40] <zul> I dont think it will work with virtual though it hasnt been tested though
[16:40] <nijaba> zul: xen host is, but we decided to officially support xen as a guest option for ubuntu
[16:40] <zul> nijaba: interesting..
[16:40] <nijaba> zul: dom0 ->  community, domU -> full maintenance
[16:41] <mathiaz> nijaba: which version of xen host should we test on then?
[16:41] <zul> nijaba: ok then, I just want to add the -virutal kernel needs to add the xen modules then
[16:42] <nijaba> zul: I am lost, do you need extension to the kernel or not to run in a xen env as a DomU?
[16:43] <zul> the extensions to the kernel, the way that it works is that it takes a list of modules from the server kernel and repackages them, afaik right now the xen block devices and network devices are not packaged with the -virtual kernel
[16:43] <zul> Ill send a patch to the kernel team mailing list today to get this fixed
[16:43] <mathiaz> zul: ok - so keep in mind the kernel freeze on thursday
[16:43] <nijaba> zul: ah, ok, we do not have the *modules*
[16:44] <nijaba> zul: so let's think about it for Jaunty
[16:44] <zul> mathiaz: I can submit the patch after I go vote ;)
[16:44] <nijaba> zul: too late, too risky, IMHO
[16:44] <mathiaz> zul: nijaba: ok - so we don't try to support xen guest in intrepid?
[16:45] <nijaba> zul: not with the virtual kernel
[16:45] <mathiaz> nijaba: zul: ok - let's  move on
[16:45] <mathiaz> nijaba: we can discuss that later
[16:45] <nijaba> sure
[16:45] <mathiaz> [TOPIC] python-vm-builder
[16:45] <MootBot> New Topic:  python-vm-builder
[16:45] <mathiaz> nijaba: you - again?
[16:46] <nijaba> mathiaz, actually to ask you to take a look at the current trunk
[16:46] <nijaba> ask you to review it and upload it if you think it is fit
[16:46] <mathiaz> nijaba: I thought kees uploaded it yesterday
[16:46] <nijaba> once uploaded, i need for somemone to test it a bit on xen + libvirt
[16:47] <nijaba> mathiaz: nope, that was a fix kirkland did for ubuntu-virt-mgmt
[16:47] <mathiaz> nijaba: ah ok then
[16:47] <mathiaz> [ACTION] mathiaz to look at sponsoring python-vm-builder
[16:47] <MootBot> ACTION received:  mathiaz to look at sponsoring python-vm-builder
[16:48] <mathiaz> nijaba: what's the url?
[16:48]  * ivoks hi
[16:48] <zul> nijaba: we should get poppy's fix in there as well
[16:48] <nijaba> mathiaz: https://code.launchpad.net/~ubuntu-virt/vmbuilder/trunk
[16:48] <mathiaz> nijaba: thnks.
[16:48] <nijaba> nope, thank you
[16:48] <mathiaz> nijaba: anything else on vm-builder?
[16:49] <nijaba> nope, apart from testing required...
[16:49] <nijaba> I implemented some missing function to support xen, but do not have a xen host
[16:50] <nijaba> zul validated that the fstab was ok, but nobody tested with libvirt
[16:50] <mathiaz> ok - so it seems we'd need access to ESX and xen environment to test both JeOS and vm-builder
[16:50] <nijaba> would be nice
[16:51] <mathiaz> ok - let's move on
[16:51] <mathiaz> [TOPIC] Open Discussion
[16:51] <MootBot> New Topic:  Open Discussion
[16:51] <mathiaz> ivoks: so what's on your plate this week?
[16:51] <ivoks> mathiaz: i've finished testing of drbd and rhcs, all fine (except one minor bug in drbd)
[16:52] <ivoks> mathiaz: i plan testing bacula during this week
[16:52] <mathiaz> ivoks: bacula in intrepid?
[16:52] <ivoks> mathiaz: right
[16:52] <ivoks> mathiaz: and if there is anything anyone needs help with, i would be glad to help
[16:53] <mathiaz> ivoks: ebox testing is still on my TODO list
[16:53] <ivoks> i guess squashing bugs :D
[16:53] <ivoks> mathiaz: i could do that...
[16:53] <zul> ivoks: if you need anything from me just poke me with a stick just not in the eye :)
[16:53] <mathiaz> ivoks: and preparing a FFe request for the motu release team
[16:53] <ivoks> zul: i'll poke you with a drbd patch
[16:53] <nijaba> :D
[16:53] <zul> ivoks: im expecting it :)
[16:54] <ivoks> mathiaz: FFE for motu?
[16:54] <mathiaz> ivoks: yes
[16:54] <ivoks> mathiaz: for ebox?
[16:54] <mathiaz> ivoks: it's a new upstream revision
[16:54] <ivoks> ok
[16:54] <ivoks> put me in for ebox testing
[16:54] <mathiaz> ivoks: so a FFe needs to be written and motu-release subscribed
[16:54] <ivoks> or.. sign me in
[16:54] <ivoks> mathiaz: i know
[16:55] <ivoks> mathiaz: could i squeez ipmitool update into that? :)
[16:55] <mathiaz> ivoks: https://launchpad.net/~ebox/+archive <- that's what needs to be reviewd and sponsored
[16:55] <mathiaz> ivoks: of course :D
[16:55] <ivoks> ok
[16:56] <ivoks> all right... lots of packages :)
[16:56] <mathiaz> ivoks: but only the modules that are already in hardy need to be looked at
[16:56] <ivoks> k
[16:56] <mathiaz> ivoks: that's about 2/3 of the listed packages IIRC
[16:57] <zul> mathiaz: are they still using courier-imap for their mail module?
[16:57] <mathiaz> zul: I don't know
[16:57] <pgraner> \
[16:57] <mathiaz> pgraner: is the kernel team meeting now?
[16:57] <mathiaz> pgraner: or in one hour?
[16:58] <ivoks> in an hour, imho
[16:58] <ivoks> iirc
[16:58] <pgraner> mathiaz: one hour,
[16:58] <mathiaz> ok
[16:58] <mathiaz> anything else to add?
[16:58] <pgraner> mathiaz: I typed in the wrong window :-(
[16:58] <mathiaz> pgraner: I thought you were making signs... ;)
[16:59] <ivoks> oh...
[16:59] <ivoks> if anyone needs virtual machine for testing, let me know - i have one just for that
[16:59] <pgraner> mathiaz: nope just stupidity on my part...
[16:59]  * nijaba needs to part.... catching a flight...  thanks all
[16:59] <ivoks> nijaba: have a good trip
[17:00] <mathiaz> [TOPIC] Agree on next meeting date and time.
[17:00] <nijaba> thanks ivoks
[17:00] <MootBot> New Topic:  Agree on next meeting date and time.
[17:00] <mathiaz> same time, same place, next week?
[17:00] <sommer> sure
[17:01] <ivoks> ok
[17:01] <ivoks> (i might be late again :/)
[17:01] <mathiaz> excellent then. See you all next week, same place same time
[17:02] <mathiaz> thanks for attending and happy testing!
[17:02] <mathiaz> #endmeeting
</pre>
