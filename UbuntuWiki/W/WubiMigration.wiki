{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:wubi-migration
* '''Created''': 2008-12-06
* '''Contributors''': AgostinoRusso

=== Summary ===

Provide a tool to help users migrate a Wubi installation to a dedicated partition

=== Implementation ===

 Rely on existing Ubuntu CD or USB stick.
 Create a Ubiquity branch registered with CIA 
 
* When Ubiquity is started autodetect existing Wubi installations (OS-Prober -> find OS -> scan windows OS)
* If an installation is found ask the user whether they want to migrate or they want to do a fresh installation
* Show the partitioning page disabling options that are inappropriate (such as wiping the full disk or the partition hosting wubi)
* Confirmation Page
* mount partitions and clear if necessary (i.e. normal bottom half of partman)
** Have to take care of /host /usr /home partitions and mount them accordingly (i.e. mount root.disk, then read fstab, then mount other disks.)
* copy - potential checksumming will depend on method of copying:
** (see components/install which calls scripts/install.py) 
** dd + resize filesystem (only if we have a sane method of dding a sparse file)
** partimage (backup suite that can skip zeros) http://www.partimage.org/Partimage-manual_Introduction
** file-level copy as usual in ubiquity
* skip all extra setps except grub installation
* regenerate fstab from scratch
* remove lupin-support package
* install grub package and do usual grub installation
* regenerate initramfs
* (post-install) Notify the user that they can remove Wubi from the Windows side.
