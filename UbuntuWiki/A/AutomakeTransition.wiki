{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': https://launchpad.net/distros/ubuntu/+spec/automake-transition
* '''Created''':  by ScottJamesRemnant
* '''Contributors''': ScottJamesRemnant, EricDorland
* '''Packages affected''': automake1.4, automake1.7, automake1.8, automake1.9, automake1.10 and depending packages.

=== Summary ===

The default version of automake is currently 1.4, this is not only incredibly old and unsupported, but more problematically ignores the "minimum version" requirement applications can specify to be built with. Now that many of our primary packages require a later version, we should adjust things such that the latest version of automake is the default and transition the build-depends of such packages that have problems.

All patches should be provided to Debian so that they may follow in this transition when they see fit.

As of October 15th, the latest version of Automake is 1.10

=== Rationale ===

Automake is a package used by a large majority of the sources in Ubuntu main to generate their Makefiles, while it is not usually used at build-time by the upstream sources, once Debian and Ubuntu developers make changes it is often required to rebuild the Makefiles.

The only package in the set that actually provides `automake` is actually the oldest package, `automake1.4` which has been unsupported upstream for a while.  Not only does this not support many of the features developers are now using, it also does not support the `AM_INIT_AUTOMAKE` argument that enforces a minimum version of Automake!  So software cannot even guard against incorrect Makefiles being generated.

Having the oldest package use the expected name also means that most new developers are installing this package by accident, and not realising that many hundreds of bugs are fixed by the new packages, but also that they can take advantage of many newer features available in the later versions.

All of the packages provide the `automaken` virtual package, which would imply that they work with any version of Automake; if that's true, then they should have no problem with just the latest version being installed, rather than any.

All of the packages provide versioned binaries (e.g. `/usr/bin/automake-1.9`), so packages that need an exact version can already depend on the particular package and use the particular path.

All of the packages also provide an alternative that can be changed to point to any version, in practice this causes a lot of trouble, because packages end up needing to Build-Conflict particular versions to ensure that they are not installed and causing trouble.

The rationale for this in Debian has always been that other packages need to be fixed before Automake can be.  We can do this in Ubuntu first, prove it works, and then provide all of the patches to Debian so that they can make the transition quickly.

=== Use cases ===

* James is a GNOME developer, he wishes to use automake for his package and is shocked to discover that the default version is too old to support the GNOME macros.

* Ross is a software developer who wishes to use automake for his package, however after installing the `automake` package encounters many bugs that discourage him.  These bugs are all fixed in later versions.

* Michael is an Ubuntu maintainer, a package he maintains needs changes to the Makefiles so automake needs to be invoked during the build.  Many users experience problems building them due to the different versions of Automake available.

=== Design ===

This is the chosen option, which was suggested by the Debian maintainer.

* Adjust priorities of the alternatives provided by the different packages so that `automake1.9` is the highest priority, and older versions have decreasing priorities.

* Rename the `automake` source package that provides `automake1.4` to just `automake1.4`.

* Drop the alternatives from `automake1.4` entirely so that it can only be called by the version-specific name.

* Drop the `automake` and `automaken` provides from `automake1.4`.

* Rename the `automake1.9` package to `automake`, and make the versioned name a virtual package.

* A future `automake1.10` package would have the `automake` name, and the older version would be repackaged as `automake1.9` again if it was not compatible.

* Drop older automake packages if there are no regressions and software can use the later versions.

This ensures that the `automake` name in the archive, which is what users would install, is always the best version for them to use.  It still allows them to install older versions and adjust the `/usr/bin/automake` alternative to point to different ones, if they know what they're doing.  It does not allow them to point this alternative at `automake1.4` which will ignore any version requirement from building packages.

Packages may depend on `automaken | automake$VER` and use `AM_INIT_AUTOMAKE` with a minimum-version specify to guard against an older version being the default on users systems.

Packages that cannot build, or be modified to build, with the newer versions should depend on `automake1.4` and invoke it by its versioned name.

=== Implementation ===

==== Code ====

The changes to the family of packages are relatively small, and largely involve modification of the `postinst` and `control` files, except for the renaming.  These patches would be provided to EricDorland and confirmed with him.

==== Data preservation and migration ====

Packages that build-depend on any of the family, especially `automake` will need to be checked.  The following is recommended:

* All packages that build-depend on `automake` should be attempted to be compiled with `automake1.9` (this can be automated).  Any failures will be fixed if trivial, or the package modified to build-depend on `automake1.4`

* All packages that build-depend on version-specific `automake` packages will be attempted to be compiled with `automake1.9` to see whether they can be changed to depend on the virtual package.

* All packages that build-depend on `automaken` will be checked and modified to not depend on a virtual package.

All patches created will be supplied to the appropriate Debian maintainers.

----
CategorySpec
