{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:other-o-arm-faster-preinstall-filesystem
* '''Created''': 2011-04-22
* '''Contributors''': Tobin Davis
* '''Packages affected''':

=== Summary ===

Investigate the performance of various filesystems on SD for use in preinstalled images.  Select one that provides the fastest performance on first run for end-users.  Use this filesystem for preinstall image builds.

=== Release Note ===

Ubuntu 11.10 now uses ${FILESYSTEM} for preinstalled images, providing a significant increase performance from the first use.

=== Rationale ===

ext3 is a perfectly fine filesystem, but it isn't especially well suited to flash media.  Filesystem limitations create a perception that Ubuntu is slower than it need be on some hardware, leading some users to select alternate software solutions.

=== User stories ===

=== Assumptions ===

=== Design ===

The first part is to back up the rootfs onto a different system, then reformat the root partition & restore.  Benchmarks can be made at this time.

=== Implementation ===

Once benchmarking has helped establish a better choice in filesystem, the image builder scripts will be modified to enable that filesystem during build.  Also, netinstall environment could be modified to mark that filesystem as default (but still user selectable).

==== Code Changes ====

Changes to livecd and debian installer.

=== Test/Demo Plan ===

To begin, several supported filesystems will be listed for testing.  They will be then looked at for how well they can be integrated into the existing image.  Filesystems lacking tools for resizing and image building will not be considered.  The remaining filesystems will be tested individually for pre-boot and post-boot performance on SD and USB memory devices.

=== Test Results ===

Base system: pandaboard a1, Transcend SDHC 16G class 10, Ubuntu 11.04 preinstalled netbook, no updates.

* <nowiki>[[http://people.canonical.com/~tobin/fs-tests/test-results/ext3/index.html|EXT3 results]]</nowiki>

* <nowiki>[[http://people.canonical.com/~tobin/fs-tests/test-results/ext4/index.html|EXT4 results]]</nowiki>

Multiple attempts to convert the natty desktop image to btrfs failed with filesystem mount errors.  Since this filesystem is still not fully stabilized, it is not recommended at this time.

Only other filesystem that would be practical was nilfs, but it is also under active development and did not support resizing at the time of Natty release.  Further testing will be done in Oneiric to keep it as a possible solution.

Based on the above results, current recommendation is to use ext4, as it is the default for the rest of Ubuntu.

----
CategorySpec
