{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad Entry''': UbuntuSpec:kernel-alsa-in-lum
* '''Packages affected''': linux-ubuntu-modules, linux-source

=== Summary ===

Alsa is a fast moving tree, especially in areas such as HDA sound. Stock kernel
sound drivers are rarely (if ever) up-to-date enough to handle latest hardware.

Moving alsa drivers to lum, and syncing with upstream more regularly, will help
alleviate this problem.

=== Release Note ===

More up-to-date sound drivers.

=== Rationale ===

After every release, we are constantly trying to keep up with latest HDA sound
driver to work with newer laptops and desktops. These updates are generally
driven by vendor obligations. Some of these updates require changes to the core
sound driver, and thus become very tedious.

=== Use Cases ===

=== Assumptions ===

=== Design ===

You can have subsections that better describe specific parts of the issue.

=== Implementation ===

This section should describe a plan of action (the "how") to implement the changes discussed. Could include subsections like:

==== UI Changes ====

Should cover changes required to the UI, or specific UI that is required to implement this

==== Code Changes ====

Code changes should include an overview of what needs to change, and in some cases even the specific details.

==== Migration ====

Include:
* data migration, if any
* redirects from old URLs to new ones, if any
* how users will be pointed to the new way of doing things, if necessary.

=== Test/Demo Plan ===

It's important that we are able to test new features, and demonstrate them to users.  Use this section to describe a short plan that anybody can follow that demonstrates the feature is working.  This can then be used during CD testing, and to show off after release.

This need not be added or completed until the specification is nearing beta.

=== Outstanding Issues ===

There is a historical issue that has existed since we started building modules outside the kernel. In general, this is an issue that affects any module built outside the kernel that is a duplicate of an existing kernel module, e.g., ALSA. Each update to ALSA has changed the ALSA ABI by changing public data structures. This primarily affects third party modules (like DKMS). For example, currently external builds are against installed kernel headers packages, but at runtime the modules that are installed may have been built against different headers (e.g. l-u-m ALSA local headers), thereby creating an ABI incompatibility. Modprobe typically refuses to install the third party module claiming ABI differences.

Following is a list of steps that the kernel team thinks will solve many of the ABI issues:

==== Changes needed to fix ABI/API breakage across lum/lbm and kernel source ====

*** Kernel patch: [WWW] http://paste.ubuntu-nl.org/57332/
*** lum should Build-Conflicts with lbm headers
*** lum and lbm should provide headers in /lib/modules/uname -r/ubuntu-headers-{lbm,lum}
*** headers package are flavour specific
*** Need meta packages for these headers
*** v4l drivers that require alsa should be copied to lum
*** CONFIG_SND should be disabled in kernel
*** Use missing module list to cross check modules that need to be moved to lum

=== BoF agenda and discussion ===

Looks like we'll just follow alsa in our kernel tree, using alsa's ksync script
to update our sources based on upstream alsa point releases.

After release, we can use linux-backports-modules to update specific drivers
(usually snd-hda-intel).

----
CategorySpec
CategoryKernel
