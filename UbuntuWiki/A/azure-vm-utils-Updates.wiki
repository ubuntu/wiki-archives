{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

This page describes the policy for updating the azure-vm-utils source package in regard to upstream LTS stable releases. This is an exception to the standard SRU process under the banner of the SRU "New upstream microreleases" exception.

=== Background on azure-vm-utils ===

This outlines details of the project and the current state of their verification to prove that the LTS releases can be considered for an MRE exception.

The azure-vm-utils package is a collection of utilities and udev rules to make the most of the Linux experience on Azure. For a detailed list of functionality this package provides to Ubuntu cloud images, refer to the upstream project page at Git``Hub: https://github.com/Azure/azure-vm-utils

Cloud platforms evolve at a rate that can't be handled in six-month increments, and they will often develop features that they would like to be available to customers who don't want to upgrade from earlier Ubuntu releases. As such, updating vm-azure-utils to more recent upstream releases is required within all Ubuntu releases, so they continue to function properly in their environment.

azure-vm-utils was synced in Ubuntu universe during the 25.04 release cycle.

New versions of azure-vm-utils can be SRUed into older releases provided the following process is followed.

=== QA Process ===

When a new version of azure-vm-utils is uploaded to -proposed, the following will be done:

* the CPC team will write new automated tests to cover new testable functionality (if any) in the new package
* the automated testing that the CPC team normally runs against Azure images before they are published will be run against the -proposed package
* the Microsoft's Azure VM Utils team will be asked to validate
** that the new package addresses the issues it is expected to address, and
** that the new package passes their internal image validation

In addition, the CPC team does the following testing
* The new package candidate version is built in devel-proposed and tested on the target suite. This will involve one or both of:
** Installing the devel-proposed packages on an Azure VM, manually restoring the VM to a first boot state and rebooting it,
** Generating a fresh image with the devel-proposed package version preinstalled and testing that directly
* Once the manual packaging tests pass successfully and the package requires no further changes, it will be marked as such on the tracking bug. On the development release, this is done by removing the '''block-proposed''' tag.

'''''If appropriate due to the nature of the changes (embargo on publication), the steps above may be done in a private PPA prior to landing in devel-proposed.'''''

The following additional steps also apply for the SRUs to supported releases once the packages have been accepted into the development release (if applicable):
* Once accepted in to -proposed, a test image is built from -proposed, which is subjected to the full CPC image tests; this tests for more regressions across multiple Azure instance sizes.  

==== Pre-SRU Test Cases ====

These are the test cases that all azure-vm-utils are subjected to before even getting to SRU:

<pre>
1.) Launch instance on Azure with nmve devices
2.) Upgrade azure-vm-utils (usually from PPA)
3.) Execute azure-nvme-id tool and check output
4.) Check for errors in the sys and dpkg logs
</pre>

==== SRU Test Cases ====

The following will be executed for representative combinations of supported architectures, image types and machine sizes:

<pre>
1.) Build new cloud image with -proposed package
2.) Boot machine from image
3.) Run all CPC image tests against machine
</pre>

=== Releasing the SRU ===
Since the only consumer of the azure-vm-utils is the Azure cloud, the SRU may be released without meeting the aging period of 7 days provided all the above steps have been completed.

=== SRU Template ===
<pre>
=== Begin SRU Template ===
[Impact]
This release contains both bug-fixes and new features and we would like to
make sure all of our supported customers have access to these improvements.
The notable ones are:

** <TODO: list any LP: # included>

See the changelog entry below for a full list of changes and bugs.

[Test Case]
The following development and SRU process was followed:
https://wiki.ubuntu.com/vm-azure-utils-Updates

The Microsoft team will execute their testsuite against the azure-vm-utils that is in
-proposed. A successful run will be required before the proposed azure-vm-utils
can be let into -updates.

The CPC team will be in charge of attaching a summary of testing to the bug.  CPC team members will not
mark ‘verification-done’ until this has happened.

=== End SRU Template ===

<TODO: Paste in change log entry>
</pre>
