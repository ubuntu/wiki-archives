{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

One simple way of testing a new Asterisk/FreePBX system is using two softphones as extensions to call and leave messages for one another.

=== FreePBX Setup ===

The following is taken from a set of <nowiki>[[http://www.freepbx.org/forum/freepbx/installation/install-instructions-on-ubuntu-8-04-server#comment-18908|install instructions]]</nowiki> at freepbx.org.

In the FreeBPX webadmin, make sure you are under the setup tab (not the tools tab) and click “Extensions”

The Device should be “Generic SIP device” if so, click Submit.
At the next screen you need to fill out the following (leaving the rest of the settings as default)

Add Extension
User Extension : 1000
Display Name: Tester1
Device Options
secret: 1234
Voicemail and Directory
Status: Enabled
Voicemail Password: 1234
Email Address: enter your email address
Email Attachment: yes
Play CID: yes
Play Envelope: yes

Then click submit. For the second test extension, make the extension 1001, name Tester2 and fill in the rest the same as the first.

You should now have two extensions <1000> Tester1 and <1001> Tester2

Click the “Apply Configuration Changes” at the top.

==== Getting emails from voicemail ====

Please note that for emails to be delivered, you must have a mail transfer agent installed on your Asterisk server. I like to use postfix, but others use exim. For the former, 'sudo apt-get install postfix' and configure for internet site should do it. Be careful to specify a valid hostname that can be looked up on the web, or many systems will reject the emails as spam. The file /etc/mailname controls this if you need to reset (and then do a 'sudo postfix reload'). Similarly, you may need to set the relayhost parameter in /etc/postfix/main.cf if you need to forward all email through your isp.

=== Testing with Softphones ===

In general, it will be easiest to test with two softphones running on two computers.

==== Testing with XLite softphone ====

The XLite softphone is a popular one to use for testing. It can be downloaded <nowiki>[[http://www.counterpath.net/X-Lite-Download.html|here]]</nowiki>.

After launching the program, on the first start up you should see a screen that says “SIP Accounts”
Click the Acct #1 (the only account present)
Then click Properties
Type Tester1 under Display Name
Type 1000 under User Name
Type 1234 under Password
Type 1000 under Authorization User Name
Type your IP.Address under Domain
Then click OK
You should see your softphone connecting to the domain at the top
Once registered you should see “Ready. You user name is 1000”

If you want to configure connection to the another extension for a different softphone, use 1001 rather 1000 above.

==== Calling and Messages ====

Once two softphones are connected to the domain, you can call one from the other.

On user name 1000, dial 1001
The softphone registered to user name 1001 should receive the call.
Talk for a little to ensure sound works properly

On user name 1001, dial 1000
Do the same as above to ensure both work correctly

On user name 1000, dial 1001. Don’t answer 1001
Leave a voice message and hang up.

On user name 1001, dial 1000. Don’t answer 1000
Leave a voice message and hang up.

If all has worked correctly, when the voice message was received you should have gotten an email to the email address entered in the extension.

Also if you go to Reports there should be 4 calls listed.
You can also go to Recordings and log on as 1000 or 1001 and see one voice mail.
