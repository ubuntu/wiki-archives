{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': https://launchpad.net/distros/ubuntu/+spec/authentication-infrastructure
* '''Created''':  by JaneWeideman
* '''Contributors''': JaneWeideman, HeinPietervanbraam
* '''Packages affected''': 
* Packages affected: gdm, libpam0g
* Depends: libpam-ldap, libpam-smbpass || winbind, libpam-mount, libnss-ldap

=== Summary ===

This spec aims to provide a catch-all spec for ubuntu client-side authentication for dapper, it aims to provide details and provoke discussion on the way authentication is currently done.

=== Rationale ===

Currently, ubuntu is an island, like most other linux distributions out there, SuSE being pretty much the only difference to the norm. While it is possible to set up ubuntu to authenticate to whatever you want, you can even authenticate to slashdot, it is far but easy,  and the average sysadmin, let alone user, is not going to be able to set everything up correctly and securely.

In this spec I aim to provide ideas for a system that makes configuring pam and nss an breez(y) 

=== Use cases ===

Jim is a home power user, has his own little network with 3 computers that centrally log into a windows 2003 server, so he can access his files from all the PCs on his network, and keep his kids from his personal information. Jim being the curious type, heard a lot about this 'ubuntu' thing and decides to try it, only to find that he has to manage all the users and mounts himself. Jim feels overwhelmed and gives up.

Katie administers a small network, and has both desktops and laptop systems. She wants to migrate a couple of laptops to ubuntu, but finds out that to switch authenticating against the server or locally, she needs to change all the pam settings each time, or face a timeout for each NSS look up or authentication session. She would like to be able to choose this at login time.

=== Scope ===

This spec covers the client side part of the network authentication infrastructure, the server side part will be specced later.

=== Design ===

Pam in itself is rather flexible but not as flexible as I would like to have it, plugging authentication mechanisms in and out doesn't work for different users on the same machine, especially for nss.

I propose "proxy" pam authentication and session modules, that take an argument of one of the available and configured authentication methods, authenticates the user using the authentication method that the person prefers to use, and sets up a pam session where a NSS proxy library can do the same for all NSS related activities.

The different authentication methods would have to be configurable through an easy to use interface to be ran by a user with admin privileges on the system. 

In the end, it should go a bit like this:
# a user tries to log into GDM, gdm checks in /etc/security/available-methods and presents the user with a selection box of the available methods if there are more than one listed. 
# PAM receives the credentials and checks /etc/security/available-methods, and invokes the mentioned pam module to handle the actual authentication. User availability will be checked by NSS in much the same way.
# PAM sets up a session, out of which nss can retrieve the preferred NSS look up method.

==== The GUI ====

The GUI for all of this should be able to query LDAP servers, test authentication to ldap servers, be able to join windows NT domains or Active Directories (needed for winbind authentication) just like a windows client does. 

==== Data preservation and migration ====

Preserving the current password and group files is the main concern, also, providing a safe fallback mechanism for a user with a specified UID would be very welcome.

=== Outstanding issues ===

* . Security is obviously a big concern, personally I do not see how this extra layer to PAM can cause more security issues, but it is something that will have to receive a lot of thought.
* . Mounting the home directories, there needs to be a way to discern the home directory paths and other shares and mount them automatically on login. I am not sure if that belongs in this spec, I do however, have ideas and real-world experience with that issue.
----
CategorySpec
