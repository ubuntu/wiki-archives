{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

This page describes how you upgrade your LTSP client chroot on an upgrade to the next Edubuntu version

/!\ Before following the notes below, make sure you have an up to date system on the Server, follow the UpgradeNotes  wikipage for that.

'''While it is easy to just upgrade your client chroot to the recent package set, it is recommended to rather recreate the chroot to take advantage of all new features (some of them are set up during chroot creation, so you won't see them with a plain package upgrade).'''

==== Upgrading the client chroot (not recommended) ====

* Copy your servers sources.list file into the chroot
 {{{
 sudo cp /etc/apt/sources.list /opt/ltsp/i386/etc/apt/sources.list}}}
* Make sure we have a /proc filesystem available (some packages need that)
 {{{
 sudo chroot /opt/ltsp/i386 mount -t proc proc /proc}}}
* Update the package lists in the chroot
 {{{
 sudo chroot /opt/ltsp/i386 apt-get update}}}
* Upgrade the packages
 {{{
 sudo chroot /opt/ltsp/i386 apt-get dist-upgrade}}}
* Clean up after us, we don't need the /proc filesystem anymore
 {{{
 sudo chroot /opt/ltsp/i386 umount /proc}}}
* Make sure the new client Kernel is used for tftpboot
 {{{
 sudo ltsp-update-kernels}}}

After that procedure your LTSP clients have the most recent packages installed

==== Recreating the client chroot (recommended) ====

* Delete your old LTSP Client chroot
 {{{
 sudo rm -rf /opt/ltsp/i386}}}
* Create a new LTSP Client chroot
 {{{
 sudo ltsp-build-client}}}

This will set up a new chroot automatically for you, after the command has finished you can just use your Thin Clients as usual.

Note: if you're using a deb repository different from the standard one you must specify it with the --mirror option of  ltsp-build-client - see ltsp-build-client --help for more information

Make sure your client artwork environment is up to date through one of the above procedures and run:

 {{{
 sudo dpkg-reconfigure -pcritical edubuntu-artwork}}}

Beside the themes it will give you a default configuration with:

* Local device support (please see also the <nowiki>[[EnableLTSP5LocalDevices]]</nowiki> page)
* Network swapping
* Sound support
* 16bit colors to save bandwidth
* Centralized logging of the clients to the server

==== Keyboard ====

If using a keyboard different from English, upgrading to edgy with the second method will obviously loose keyboard layout customization, and your clients' keyboards will be have the english layout. You will have to modify '''/opt/ltsp/i386/etc/lts.conf''' adding the line:

{{{
 XKBLAYOUT=es}}}

(es is the layout code for Spanish, change with you layout)

and you must reboot the clients (not the server).
----
CategoryEdubuntuUserContributedDocs
