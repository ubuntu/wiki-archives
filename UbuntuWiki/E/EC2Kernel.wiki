{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:server-karmic-ec2-kernel
* '''Created''':
* '''Contributors''': 
* '''Packages affected''':

=== Summary ===

Provide an EC2 compatible kernel for both amd64 and i386 images for karmic.

=== Release Note ===

This section should include a paragraph describing the end-user impact of this change.  It is meant to be included in the release notes of the first release in which it is implemented.  (Not all of these will actually be included in the release notes, at the release manager's discretion; but writing them is a useful exercise.)

It is mandatory.

=== Rationale ===

We want to provide a compatible kernel for EC2 which is being used for both the Ubuntu server version and EC2 version.

=== User stories ===

# Dave wants to use EXT4 for his filesystems which is not provided by the default EC2 kernel provided by Amazon.
# Joe wants to use a new fancy kernel feature only found in the Ubuntu Kernel.

=== Assumptions ===

=== Design ===

* We are going to use the XEN paravit-ops features found in 2.6.31.
* We will need to package the vmlinux version of the kernel since the version of Xen cant read the bzImage yet.
* We will need to provide an xen-blkfront module which uses sda block device rather than xvda block device.

=== Implementation ===

* The ec2 kernel implementation will be packaged similarily to the virtual kernel but that will be left up to the kernel team.
* The kernel team already has the necessary patches that are needed in order to use our kernel on EC2.

=== BoF agenda and discussion ===

- There are two ways to implementate the ec2 kernel for karmic.

1. Xensource patchset.
    - maintained by Xensource/citrix
   - based on 2.6.18
   - need to be forward ported to $KARMIC_KERNEL_VERSION
   - pain in the ass
2. XEN pv-ops
    - we already have this for karmic on both (i386 and amd64)
    - need to strip the vmlinuz
    - easily maintainable little overhead to maintain

We need to let the kernel team know what we need to do, which includes the following:

- Kernel configuration changes
- Additional patches that are needed in order to run a kernel for EC2.
- Additional help that is needed.

----
CategorySpec
