{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

== Automated Installation over Network with Cobbler ==

Some tips and hints for Deploying Ubuntu Installations from A Cobbler Server.
Cobbler provides PXE booting and kickstart / preseed file generation and serving.

=== Installation of Cobbler ===

See elsewhere. http://cobbler.github.com/

Example paths are for Cobbler 2.2.3 on CentOS 6

=== Integrating Ubuntu Installation in Cobbler ===

Get the Netboot images

Download the netboot.tar.gz file from here: http://cdimage.ubuntu.com/netboot/ and extract it.
Copy the folder ubuntu-installer to the root of your tftpboot directory. (e.g. /var/lib/tftpboot/)

Add Ubuntu to the PXE-Menu

There are two possibilites. One is that you adapt the pxemenu Templates (e.g. /etc/cobbler/pxe/pxedefault.template)

==== Manually add the PXE Menu Entries ====

You can just load the original ubuntu pxe menu by adding following:
<pre>
LABEL UBUNTU Precise 64bit
        kernel menu.c32
        append ubuntu-installer/amd64/boot-screens/menu.cfg
</pre>

Or you can directly add the enries provides by the menu.

You can find working menu entries in the downloaded netboot files (main file: menu.cfg). Make shure you only copy the entries, not the styling of the menu and the default marker. (e.g. ubuntu-installer/amd64/boot-screens/txt.cfg)

<pre>
label install
        menu label ^Install
        kernel ubuntu-installer/amd64/linux
        append vga=788 initrd=ubuntu-installer/amd64/initrd.gz -- quiet

label autoinstall
        menu label ^Desktop Auto Install unattended
        kernel ubuntu-installer/amd64/linux
        append vga=788 initrd=ubuntu-installer/amd64/initrd.gz auto url=http://your.url.to/ubuntu.seed  debian-installer/locale=en_US netcfg/choose_interface=auto priority=critical --

</pre>

==== Add Ubuntu Distro and Profile in Cobbler ====

Create a new Distro. Add the location to the kernel and initrd 

{{{ 
/var/lib/tftpboot/ubuntu-installer/amd64/linux
/var/lib/tftpboot/ubuntu-installer/amd64/initrd.gz
}}}

Set Breed and OS Version.

Create a Profile, Select the Distro.
Enter the desired Parameters to the Kernel Options: <code> -- priority=critical netcfg/choose_interface=auto vga=788 debian-installer/locale=en_US </code>

!NOTE: Options get sorted automatically. Thats why the option <code> auto url= </code> won't work. 

If you want to serve a Preseed file enter the local path to it. <code> /var/lib/cobbler/kickstarts/ubuntu_puzzle.seed </code>

! NOTE: These file get parsed by Cheetah! To bypass cheetah. Add <code> #raw </code> at the beginning of the file and <code> #endraw </code> at the end.

=== Preseed File ===

Here's the offical example with many useful annotations and references to further resources:
https://help.ubuntu.com/12.04/installation-guide/example-preseed.txt

Addition:
The options for partman/crypto are basically undocumented.
To fully automatise the setup with encrypted Harddisk-Passphrase use following:

<pre>

d-i partman-auto/method string crypto
d-i partman-crypto/passphrase password yourpassphrase
d-i partman-crypto/passphrase-again password yourpassphrase
</pre>

The rest of the crypto method is the same as LVM.
----
CategoryEnterprise
