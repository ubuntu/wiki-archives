{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


== API changes in python-launchpad-bugs 0.3 ==

There are some API related differences between python-launchpad-bugs 0.2 and 0.3. This documents aims to describe these and show necessary changes to code using this library.

=== Exceptions ===

python-launchpad-bugs 0.3 now has a separate module called `exceptions` where basically two classes of exceptions are defined: `LaunchpadError` and `PythonLaunchpadBugsError`. Both have several subclasses, for a complete list please have a look at `help(exceptions)`.

In former versions of python-launchpad-bugs there only existed one exception-class as an attribute of the connector class, so there were code like:

{{{#!python
>>> from launchpadbugs.connector import ConnectBug
>>> Bug = ConnectBug()
>>> try:
...     b = Bug(url="https://bugs.launchpad.net/someinvalidproduct/+bug/1")
... except Bug.Error.LPUrlError, e:
...     print e
... 
'Page not found (url: https://bugs.launchpad.net/someinvalidproduct/+bug/1)'
>>> 
}}}

This now changed to something like:

{{{#!python
>>> from launchpadbugs.connector import ConnectBug
>>> from launchpadbugs.exceptions import LaunchpadError
>>> Bug = ConnectBug()
>>> try:
...     b = Bug(url="https://bugs.launchpad.net/someinvalidproduct/+bug/1")
... except LaunchpadError, e:
...     print e
... 

*** message: Page not found
*** url: https://bugs.launchpad.net/someinvalidproduct/+bug/1
>>> 
}}}

However, it is still possible to use the old `Bug.Error.LPUrlError` method.

=== Filtering BugList-objects ===

In the past BugList-objects had a method called `filter()` for filter purposes. This method has now been removed, please use the buildin `filter()` function instead.

In the past filtering of buglists looked like:

{{{#!python
>>> from launchpadbugs.connector import ConnectBugList
>>> BugList = ConnectBugList()
>>> l = BugList("https://bugs.launchpad.net/ubuntu/+source/bughelper/+bugs") 
>>> BugList.set_filter(minbug=100000, filterbug="117701,109628", status="New")
>>> l = l.filter()
>>> print l
### .... [output]
}}}

This has now been replaced by:

{{{#!python
>>> from launchpadbugs.connector import ConnectBugList
>>> BugList = ConnectBugList()
>>> l = BugList("https://bugs.launchpad.net/ubuntu/+source/bughelper/+bugs")
>>> print l
BugList([<BugInfo 239007>,<BugInfo 129341>,<BugInfo 88102>,<BugInfo 150887>])
>>> filter(lambda x: int(x) > 100000 and int(x) not in (117701, 109628) and x.status == "New", l)
[<BugInfo 129341>]
>>> 
}}}

In python-launchpad-bugs 0.3 it is also possible to filter bugs during the fetching process, for more information on this please visit <nowiki>[[BugHelper-Dev-python-launchpad-bugs-BugList]]</nowiki>

=== Downloading attachments ===

As in former versions of python-launchpad-bugs the default download location for attachments is `~/.bughelper/attachments-cache/<package>/<bugnumber>/<attachment_id>/<filename>`.
In the past changing the `~/.bughelper/attachments-cache/`-part of the location could be done by changing a global setting:
{{{#!python
>>> from launchpadbugs.connector import ConnectBug
>>> Bug = ConnectBug()
>>> Bug.attachment_path = "/tmp/"
>>> b = Bug(234904)
>>> a = b.attachments[0]
>>> a
<Attachment (up: 14708361)>
>>> a.text # by doing this the file is downloaded and the content is returned
....some content here ...
>>> a.locale_filename
'/tmp/terminator/234904/14708361/terminator-ctrl-tab.patch'
>>>
}}}

This behaviour changed a bit, `Bug.attachment_path` has been removed, there is not global setting any more. Instead you can now give an explicit location where the file will be downloaded:

{{{#!python
>>> from launchpadbugs.connector import ConnectBug
>>> Bug = ConnectBug()
>>> b = Bug(229201)
>>> a = b.attachments[0]
>>> a
<Attachment (up: 14525858)>
>>> a.download("/tmp/boo.diff")
>>> a
<Attachment (up: 14525858), (down: /tmp/boo.diff)>
>>> a.text
....some content here ...
}}}

=== Constants ===

The `launchpadbugs.lpconstants` module defines some global constants for python-launchpad-bugs, for example there is a class of BASEURL constants. This BASEURL constants define the valid url scheme for the different objects and are server independent. In former versions there where two url constants for bug objects (BASEURL.BUG_NG and BASEURL.BUG). BASEURL.BUG_NG has been remove in python-launchpad-bugs 0.3. BASEURL.BUG is now the only valid url definition for bug-objects, its value is `https://bugs.launchpad.net`.
