{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

Bluetooth in Ubuntu is powered by BluezGnome (<nowiki>[[http://www.bluez.org/|official site]]</nowiki>). You can join Ubuntu’s <nowiki>[[https://launchpad.net/people/bluetooth|Bluetooth team]]</nowiki> to help make Bluetooth ''ROCK'' in Ubuntu, working together with upstream to test it and make it work out of the box. There’s also a <nowiki>[[https://lists.ubuntu.com/mailman/listinfo/ubuntu-bluetooth|mailing list of Bluetooth-related bugs]]</nowiki>. ''For help using Bluetooth in Ubuntu, see <nowiki>[[https://help.ubuntu.com/community/BluetoothSetup|Ubuntu Help]]</nowiki>.''

How you can help out: <nowiki>[[https://launchpad.net/people/bluetooth/+packagebugs|bugs]]</nowiki>, <nowiki>[[TestPlan|testing]]</nowiki>, package <nowiki>[[NewApps|interesting new apps]]</nowiki>.

The rest of this page is an '''archived design specification''' for Bluetooth features in Ubuntu, as it developed from <nowiki>[[https://launchpad.net/indicator-bluetooth/13.04/0.0.1|2012]]</nowiki> to 2016.

=== Use cases ===

{X} not possible (./) defined  /!\ undefined

{| class="wikitable"
|-
| '''Function'''
| '''Phone'''
| '''Tablet'''
| '''PC'''
|-
| Connect a Bluetooth USB dongle
| {X}
| {X}
| /!\
|-
| Verify that Bluetooth is working
| <-2> (./) indicator, settings
| /!\
|-
| Set up Bluetooth headset/speakers
| <-2> (./) settings
| /!\ indicator, settings
|-
| Switch to a different headset
| <-2> (./) settings
| /!\
|-
| Stop using headset/speakers
| <-3> (./) <nowiki>[[Sound#primary-output|notification bubble]]</nowiki>
|-
| Set up a Bluetooth mouse/touchpad
| (./) settings (pocket PC only)
| {X}
| /!\
|-
| – No other mouse/touchpad is connected
| (./) prompt
| {X}
| /!\
|-
| Stop using a Bluetooth mouse
| (./) settings, automatic (pocket PC only)
| {X}
| /!\
|-
| Set up a Bluetooth keyboard
| (./) settings (pocket PC only)
| {X}
| /!\
|-
| – No other keyboard is connected
| (./) prompt
| {X}
| /!\
|-
| Stop using a Bluetooth keyboard
| (./) settings, automatic (pocket PC only)
| {X}
| /!\
|-
| Set up a Bluetooth printer
| {X}
| {X}
| /!\
|-
| Stop using a Bluetooth printer
| {X}
| {X}
| /!\
|-
| Transfer files using Bluetooth
| {X}
| {X}
| /!\
|-
| Set up a Wii Remote as a joystick
| {X}
| {X}
| /!\
|-
| Stop using a Wii Remote
| {X}
| {X}
| /!\
|-
| Turn off Bluetooth to save power
| <-2> (./) indicator, settings
| (./) indicator, settings
|}

=== Bluetooth icon ===

{| class="wikitable"
|-
| <tablestyle="float:left;margin:0 1em 1em 0" style="border:none"><nowiki>[[File:bluetooth-icons.png]]</nowiki>
|}

In the Bluetooth indicator across form factors, and on <nowiki>[[SystemSettings#phone|the System Settings overview screen]]</nowiki>, the current Bluetooth status should be represented by an icon:
* If Bluetooth is off, a skeletal Bluetooth icon, with accessible label “Bluetooth (off)”.
* If it is on, a lozenge Bluetooth icon (fixing bug Bug:761766), with accessible label “Bluetooth (on)”.
* If a device is paired, a lozenge Bluetooth icon between two arrowheads, with accessible label “Bluetooth (paired)”.

Each of these should always be full color when used in System Settings or dialogs, and always monochrome when used in the menu bar or status bar. (Though when Bluetooth is off on a phone, <nowiki>[[#phone-indicator|there is no icon at all]]</nowiki>.)

{| class="wikitable"
|-
| <tablestyle="clear:both" style="border:none">
|}

=== Phone ===

==== System Settings ====

===== Access =====

{| class="wikitable"
|-
| <tablestyle="float:left;margin:0 1em 1em 0" style="border:none"><nowiki>[[File:bluetooth-access.phone.png]]</nowiki>
|}

<nowiki>[[SystemSettings#phone|The main screen of System Settings]]</nowiki> should have a “Bluetooth” category. 

In addition, whenever (a) any device is paired, ''or'' (b) a device was paired the last time Bluetooth was turned off, ''or'' (c) you have not left System Settings since the last time Bluetooth was on, the <nowiki>[[SystemSettings#phone-quick-access|quick access area]]</nowiki> should contain a “Bluetooth” switch. The switch itself should temporarily be replaced by a spinner whenever Bluetooth is turning on or off.

{| class="wikitable"
|-
| <tablestyle="clear:both" style="border:none">
|}

===== Discoverability =====

Bluetooth pairing happens between devices that are unpleasantly referred to as “master” and “slave”. On both devices, Bluetooth must be on, and the “slave” device must also be ''discoverable''.

Ubuntu could have a toggle for whether your Ubuntu device is discoverable. But that would constantly consume power. And if you are wanting to connect a new device, you will almost always either have the System Settings Bluetooth screen open. So we can use that interaction itself for discoverability, instead of having a separate switch that you might not know to turn on (or might forget to turn off).

Furthermore, for interference reasons, when <nowiki>[[BrightnessAndDisplays#wi-fi-display|Wi-Fi Display]]</nowiki> is in use, you can continue an existing Bluetooth connection, but not browse or start a new one.

Therefore, your Ubuntu device should be discoverable when ''all'' of the following are true:
* Bluetooth is on
* Wi-Fi Display is not in use
* the System Settings “Bluetooth” screen has been open, ''or'' the Bluetooth menu has been open, for more than one second.

To indicate this (bug Bug:1501630):

{| class="wikitable"
|-
| <^ style="border:none"><nowiki>[[File:bluetooth-on-wi-fi-display.phone.png]]</nowiki>
| <^ style="border:none">Whenever Bluetooth is on, but not discoverable because Wi-Fi Display is in use, the status text should be “To connect to other devices, turn off Wi-Fi Display first.”, with a “Wi-Fi Display Settings…” button to navigate to <nowiki>[[BrightnessAndDisplays#wi-fi-display|the Wi-Fi Display screen]]</nowiki>.
|-
| <^ style="border:none"><nowiki>[[File:bluetooth-on-undiscoverable.phone.png]]</nowiki>
| <^ style="border:none">Otherwise, whenever Bluetooth is on but you have been on the screen for less than one second, the status text should be “Not discoverable” opposite a spinner.
|-
| <: style="border:none">↓
|-
| <^ style="border:none"><nowiki>[[File:bluetooth-on-discoverable.phone.png]]</nowiki>
| <^ style="border:none">Once you’ve been on the screen for a second or more, the status text should change to “Discoverable”, opposite the visible name of the device.
|-
| <: style="border:none">↓
|-
| <^ style="border:none"><nowiki>[[File:bluetooth-on-undiscoverable-exit.phone.png]]</nowiki>
| <^ style="border:none">If you navigate back to the System Settings overview, the status text should change immediately to “Not discoverable”, without a spinner, and System Settings should pause for one second so that you can see this.
|-
| <: style="border:none">↓ (1 second)
|-
| <^ style="border:none"><nowiki>[[File:system-settings-top.phone.png]]</nowiki>
| <^ style="border:none">After one second, System Settings should return to the overview.
|}

===== Listing devices =====

{| class="wikitable"
|-
| <^ tablestyle="float:right;margin:0 0 1em 1em" style="border:none"><nowiki>[[File:bluetooth-settings-off.phone.annotated.png]]</nowiki>
| <^ style="border:none"><nowiki>[[File:bluetooth-settings-on.phone.annotated.png]]</nowiki>
|}

The “Bluetooth” switch and discoverability text may be followed by between zero and three lists of devices. In order:

 1. “Connected devices:”, if any devices are currently paired or automatically pairing. If a device is automatically pairing, it should have a spinner at its trailing end. On a pocket PC, as long as hardware keyboards and pointing devices can be used only on an external display, this list should be followed by the caption, “A keyboard, mouse, or touchpad can be used only when an external display is connected.”.

 2. “Connect a device:”/“Connect another device:”, if Bluetooth is on and you are not currently using Wi-Fi Display. If no devices are detected that are not already paired or automatically pairing, the list should contain only placeholder text “None detected”. The list should update every ten seconds, with a spinner showing opposite the label whenever scanning is in progress (bug Bug:1272317).

  A. If a device is of a type that Ubuntu Touch does not currently work with, it should be present (so that you don’t think there’s a problem with the hardware) but greyed out and with a ⛔ no entry icon (bug Bug:1419866).

  A. Otherwise, if a device is of a type that usually doesn’t require entering a PIN (for example, a headset, keyboard, or mouse), it should have no special formatting or visual style.

  A. If the device is of a type that ''does'' require entering a PIN, its name should end in an ellipsis (because further input will be required).

 3. “Connect automatically when detected:”, if any devices have been remembered with that setting.

Each list should be sorted alphabetically. Each item should include an icon representing the device’s Bluetooth profile, or a generic Bluetooth icon for an unknown profile. Because an ellipsis at the end of an item indicates further input required (entering the PIN), any device name too long to fit in the list item should be ellipsized in the middle.

{| class="wikitable"
|-
| <tablestyle="clear:both" style="border:none">
|}

===== Pairing manually =====

{| class="wikitable"
|-
| <tablestyle="float:left;margin:0 1em 1em 0" style="border:none"><nowiki>[[File:phone-bluetooth-pair.png]]</nowiki>
|}

''Erratum: The PIN field should default to empty, not 0000.''

Tapping a device in the “Connect a device:”/“Connect another device:” list should begin pairing (bug Bug:1489505). While pairing is in progress, the list item for the device should have a spinner at its trailing end (bug Bug:1488885).

If the device is of a type that usually has the PIN “0000” (a headset, keyboard, or mouse), Ubuntu should try this first. If that doesn’t work, or for any other kind of device, a ‘PIN for “{device name}”’ or ‘Passkey for “{device name}”’ dialog should appear, with an empty PIN/passkey field that is numeric if appropriate. “Pair” should be disabled whenever the field contents are the wrong length. When you choose “Pair”, the dialog should stay open in the standard progress state until pairing is complete, in case you entered the wrong PIN/passkey and need to correct it.

If pairing is successful, the “Bluetooth” screen should scroll to the top, so that you can see the device’s list item slide up to join the “Connected devices:” list (bug Bug:1542368). If the newly-connected device is a headset, and a headset was already paired, that previously-paired headset should automatically be disconnected, sliding down to rejoin the “Connect another device:” list, so that you never have more than one headset paired at a time.

'''''Disclaimer:''' Requirements for actual use of storage or other kinds of Bluetooth device are not yet defined.''

{| class="wikitable"
|-
| <tablestyle="clear:both" style="border:none">
|}

===== Examining and disconnecting =====

{| class="wikitable"
|-
| <^ tablestyle="float:left;margin:0 1em 1em 0" style="border:none"><nowiki>[[File:bluetooth-settings-device-manual.phone.png]]</nowiki>
| <^ style="border:none"><nowiki>[[File:bluetooth-settings-device-automatic.phone.png]]</nowiki>
|}

Choosing a device in the “Connected devices:” list, or the “Connect automatically when detected:” list, should navigate to a screen with the device name as its header. It should contain a key-value table showing the “Name:” (full and wrapped to multiple lines if necessary), “Type:” (with icon), and “Status:” — “Connecting…”, “Connected”, “Disconnecting…”, or “Disconnected”.

When “Status:” is “Connected:”, it should be followed by “Signal:” with a one-minute sparkline of signal strength and “Excellent”/“Good”/“Fair”/“Poor” text.

When “Status:” is “Disconnected”, it should be followed by “Last connected:” with the date and time that the device was most recently connected.

Finally, the screen should have a “Connect automatically when detected” checkbox, and if the device is currently connected, a “Disconnect” button. “Disconnect” should be insensitive whenever “Connect automatically when detected” is checked (because the device would immediately reconnect after disconnecting).

If you choose “Disconnect”, that button should become insensitive, “Status:” should change to “Disconnecting…”, and one second later you should be returned to the main “Bluetooth” screen to see the device sliding down from the “Connected devices:” list to the “Connect a device:”/“Connect another device:” list.

If you uncheck “Connect automatically when detected” for a device that is not currently connected, the device’s details should not be deleted until you navigate to any other System Settings screen, so that you have an opportunity to undo the setting before the screen itself disappears.

{| class="wikitable"
|-
| <tablestyle="clear:both" style="border:none">
|}

==== Indicator and menu ====

{| class="wikitable"
|-
| <tablestyle="float:left;margin:0 1em 1em 0" style="border:none"><nowiki>[[File:phone-bluetooth-menu.png]]</nowiki>
|}

When Bluetooth is on, <nowiki>[[#icon|the indicator icon]]</nowiki> should appear in the <nowiki>[[StatusBar|status bar]]</nowiki>. When Bluetooth is off, to save space the Bluetooth indicator should not be present at all.

For reassurance about whether a device is still paired, the Bluetooth switch should be followed by an insensitive item, with icon, for each currently-paired device.

“Bluetooth Settings…” should open the Bluetooth screen of System Settings.

{| class="wikitable"
|-
| <tablestyle="clear:both" style="border:none">
|}

=== PC ===

<nowiki>[[File:bluetooth-menu-setting.png]]</nowiki>

At the bottom of the “Bluetooth” panel in System Settings should be a checkbox, “Show Bluetooth status in the menu bar”. It should be checked by default for a new user account, but should be sensitive only when there is a powered Bluetooth card or dongle.

<nowiki>[[File:bluetooth-menu.png]]</nowiki>

Whenever that checkbox is sensitive and checked, a Bluetooth menu should appear <nowiki>[[MenuBar#system-status|in the menu bar]]</nowiki>.

<nowiki>[[File:bluetooth-menu-title.png]]</nowiki>

The menu should begin with “Bluetooth” and “Visible” switch items. Whenever “Bluetooth” is off, “Visible” should be both off ''and'' insensitive.

After a separator, “Send Files to Device…” should open a “Choose Files to Send” file picker, followed (if you select files) by a dialog for choosing which device to send the files to. And “Show Files on Device…” should open the dialog for choosing which device to browse. Both items should be insensitive when Bluetooth is off.

If any devices have been paired and not forgotten, these should be listed following another separator, with an icon for each.

Finally, after another separator, “Set Up New Device…” should open the setup assistant, and “Bluetooth Settings…” should open the Bluetooth panel of System Settings.

=== Bluetooth device battery charge ===

When known, the battery charge for a paired Bluetooth device should be represented in <nowiki>[[Power|the battery UI]]</nowiki> on both PC and phone.

{| class="wikitable"
|-
| <tablestyle="clear:both" style="border:none">
|}

----
CategoryUbuntuTeams CategoryBluetooth
