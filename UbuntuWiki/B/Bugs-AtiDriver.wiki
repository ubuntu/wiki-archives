{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



This page is about the open-source "ati" driver only, not the proprietary, closed-source "fglrx" driver originating from ATI Inc. For support on the "fglrx" driver, contact ATI Inc, or file a bug on the fglrx-installer package in Ubuntu.

If you are using the "fglrx" driver, be very careful about adding comments to a bug in the "ati" driver. They will likely add more confusion than anything else.

Please go through all steps below in the order they are listed before filing a bug or even commenting on an existing one! (See rationale below)

''In general, whenever a X or startup problem arises, try removing the "splash" and "quiet" keywords from the grub prompt, so that you can read error messages and rule out any usplash problems.''

=== Ubuntu 7.10 (Gutsy) ===
(this release is using xorg 7.3 and ati driver 6.7.195)
# The old Merged``FB configuration of multi-screen setups must be replaced by xrandr, see http://www.intellinuxgraphics.org/dualhead.html
# The new xrandr code allocates a framebuffer in the video memory, defined by the virtual desktop size. If you're tight on video memory, add a '''Virtual ''x-size'' ''y-size'' ''' to the Display subsection (of the Screen section) in xorg.conf, since the default size might use too much of your video memory.
# Radeon 7500 Mobile cards with black screen, see <nowiki>[[https://bugs.launchpad.net/bugs/132716|bug #132716]]</nowiki>. Workaround: add '''Option "LVDSBios``Native``Mode" "false"''' to the Device section of <code>/etc/X11/xorg.conf</code>, or install the newer driver from XorgOnTheEdge.
# Try disabling DRI, by adding '''Option "DRI" "off"''' to the Device section of <code>/etc/X11/xorg.conf</code> . If this helps, you have a DRI problem. If this doesn't help, please mention it in your bug report anyway, so we don't have to ask about it.

==== DRI problems ====

# Make sure you don't have any "dangerous" options like <code>AGPFastWrite</code> in your xorg.conf. Please try running without any xorg.conf.
# Try adjusting the AGP aperture in your BIOS settings (for instance to 64MB) <nowiki>[[https://bugs.freedesktop.org/show_bug.cgi?id=6111|upstream 6111]]</nowiki>
# AGP cards only, try forcing PCI bus instead of AGP bus (Option "Bus``Type" "PCI") <nowiki>[[https://bugs.launchpad.net/bugs/139210|bug #139210]]</nowiki>
# PCI cards, try newest drivers from XorgOnTheEdge <nowiki>[[https://bugs.launchpad.net/bugs/114520|bug #114520]]</nowiki>

==== Other bugs ====
If the workarounds above do not help you, you should probably not post any comments to the bugs mentioned here. Search for another existing bug report, or file a new bug.

=== Ubuntu 7.04 (Feisty) ===
(this release is using xorg 7.2)
 
 1. AGP cards only, try without framebuffer (Option "UseFBDev" "false") <nowiki>[[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=392915|Debian 392915]]</nowiki>

 1. AGP cards only, try forcing PCI bus instead of AGP bus (Option "BusT``ype" "PCI")

 1. For RV280 (9200/9250) PCI cards, see <nowiki>[[https://bugs.launchpad.net/bugs/114520|bug #114520]]</nowiki>

 1. Try disabling DRI, by commenting out '''Load "dri"''' from <code>/etc/X11/xorg.conf</code> . If this helps, you have a DRI problem. If this doesn't help, please mention it in your bug report anyway, so we don't have to ask about it.

''All below mentioned bugs have been fixed!''

=== Ubuntu 6.10 (Edgy) ===
(this release is using xorg 7.1)

 1. If you have an ATI Radeon X700 Mobility PCI-E or ATI FireGL V5000 card, see <nowiki>[[https://launchpad.net/bugs/22985|bug #22985]]</nowiki> and <nowiki>[[EdgyKnownIssues/22985]]</nowiki> before doing anything else. The Monitor``Layout option should help.

 1. If you can't even boot the Desktop CD and/or install the system, see <nowiki>[[https://launchpad.net/bugs/59618|bug #59618]]</nowiki> and <nowiki>[[EdgyKnownIssues/59618]]</nowiki> before anything else. You should be able to install using the "vesa" driver, and then go from there.

 1. If your console screens are corrupted (you can switch with ctrl-alt-F1, but you can't see or read anything, only funny colours and patterns etc) you have the "usplash" problem in <nowiki>[[https://launchpad.net/bugs/63558|bug #63558]]</nowiki>. Simply remove the "splash" keyword from the #kopt line in /boot/grub/menu.lst and rerun update-grub:
 <pre>
 sudo nano /boot/grub/menu.lst
 sudo update-grub}}}

 1. If you have a X600/X700/X800 card and you get the message "Failed to start the X server", it is probably <nowiki>[[https://launchpad.net/bugs/28925|bug #28925]]</nowiki>. Changing driver from "ati" to "radeon" in xorg.conf should help.

 1. Try disabling DRI, by commenting out '''Load "dri"''' from <code>/etc/X11/xorg.conf</code> . If this helps, you have a DRI problem. If this doesn't help, please mention it in your bug report anyway, so we don't have to ask about it.

==== DRI problems ====

# Check AGP speed setting in BIOS vs setting in Xorg.conf, see <nowiki>[[https://launchpad.net/bugs/67487|bug #67487]]</nowiki>.
# (not specific to ATI) Sudden crashes, with a backtrace in /var/log/Xorg.0.log, see <nowiki>[[https://launchpad.net/bugs/60288|bug #60288]]</nowiki>.

==== Other bugs ====
If the workarounds above do not help you, you should probably not post any comments to the bugs mentioned here. Search for another existing bug report, or file a new bug.

=== Ubuntu 6.06 LTS (Dapper) ===
(the "ati" driver is the xserver-xorg-driver-ati package)

 1. If you have an ATI Radeon X700 Mobility PCI-E or ATI FireGL V5000 card, see <nowiki>[[https://launchpad.net/bugs/22985|bug #22985]]</nowiki> and <nowiki>[[EdgyKnownIssues/22985]]</nowiki> before doing anything else. The Monitor``Layout option should help.

 1. If you have a X600/X700/X800 card and you get the message "Failed to start the X server", it is probably <nowiki>[[http://launchpad.net/bugs/28925|bug #28925]]</nowiki>. Changing driver from "ati" to "radeon" in xorg.conf should help.

 1. Try disabling DRI, by commenting out '''Load "dri"''' from <code>/etc/X11/xorg.conf</code> . If this helps, you have a DRI problem. If this doesn't help, please mention it in your bug report anyway, so we don't have to ask about it.

==== DRI problems ====

# Check AGP speed setting in BIOS vs setting in Xorg.conf, see <nowiki>[[https://launchpad.net/bugs/67487|bug #67487]]</nowiki>
# System freezes on ATI Radeon 7000, see <nowiki>[[https://launchpad.net/bugs/16873|bug #16873]]</nowiki>

==== Other bugs ====
If the workarounds above do not help you, you should probably not post any comments to any of the bugs mentionned here. Search for another relevant bug report, or file a new bug.

=== Ubuntu 5.10 (Breezy) ===

 1. If you have an ATI Radeon X700 Mobility PCI-E or ATI FireGL V5000 card, see <nowiki>[[https://launchpad.net/bugs/22985|bug #22985]]</nowiki> and <nowiki>[[EdgyKnownIssues/22985]]</nowiki> before doing anything else. The Monitor``Layout option should help.

=== Rationale for this page ===
Your ATI card doesn't work in Ubuntu? That's not a bug - that's a symptom of a bug, maybe of one bug out of many possible bugs, or the combination of several of these. This page may help to identify which bug you are fighting with, and also, equally important, which known bugs are not relevant.

Please add comments to existing bug report, but make sure your comments are relevant to exactly that bug. Otherwise they will be overseen, especially when that bug report is closed. If you are not sure, file a new bug. Bug triagers will then help to put it into the right place and identify duplicates.

=== Filing a new bug ===

You are supposed to have read ReportingBugs and <nowiki>[[https://help.ubuntu.com/community/DebuggingXAutoconfiguration|DebuggingXAutoconfiguration]]</nowiki> as well!

Try using the "vesa" driver instead of the "ati" driver. If the problem only arises with the "ati" driver, then file the bug on the '''xserver-xorg-video-ati''' package. If it happens using "vesa" as well, file the bug on the '''xorg''' package instead.
Always attach <code>/etc/X11/xorg.conf</code> and <code>/var/log/Xorg.0.log</code> to your bug reports.

==== Freezes / hangs / lockups /crashes ====
It is important to differentiate between lockups and crashes:
* Lockups: Screen is frozen, not reacting to key presses - but the system is running (you can hear music continue playing, you can log in remotely through ssh, etc). Sometimes pressing the power button will cause a clean shutdown. This is often related to the Xorg server getting trapped in a loop and consuming all the CPU.
  
* Crashes: The whole system crashes - the kernel panics, etc. You have to shut off the power the hard way. This is often related to a bug in a kernel module.

Although the lockups and crashes might look similar for an unexperienced user, they are often caused by different issues, and they have to be solved in different ways. However, note that a lockup might make the system crash after a while.

See <nowiki>[[https://help.ubuntu.com/community/DebuggingSystemCrash|DebuggingSystemCrash]]</nowiki> for how to debug remotely with the help of another computer, and DebuggingXorg for information on how to debug the X server in particular.

==== DRI / drm problems ====
More verbose debugging information can be obtained by enabling the debug option of the ''drm'' kernel module:
{{{
echo 1 | sudo tee /sys/module/drm/parameters/debug
</pre>
Note that leaving this option on will generate a lot of messages in your /var/log/kern.log and /var/log/syslog! To turn it off again:
<pre>
echo 0 | sudo tee /sys/module/drm/parameters/debug
</pre>

==== PowerTOP and C3 state ====
Looks like the radeon driver has a problem related to <nowiki>[[http://lkml.org/lkml/2007/5/14/487|VBLANK interrupts]]</nowiki> similar to <nowiki>[[http://www.linuxpowertop.org/known.php#intelgfx|intel graphic driver]]</nowiki>. This causes around 60 wakeups/sec my Compaq X1000 laptop (Radeon 9000/9200 graphics) while in X, which essentially prevents entry into C3. A small patch is available <nowiki>[[http://lkml.org/lkml/2007/5/16/53|here]]</nowiki>. It does <nowiki>[[http://www.bughost.org/pipermail/power/2007-May/000332.html|solve]]</nowiki> the problem without even any loss of 3D. Updated patch from <nowiki>[[http://www.mail-archive.com/dri-devel@lists.sourceforge.net/msg31018.html|dri-devel]]</nowiki>.

=== Comments ===
See also EdgyKnownIssues for other common bugs.

Radeon 9250 lockups: AGP aperture bug http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=392915

X700 dual screen: https://bugs.freedesktop.org/show_bug.cgi?id=7243

To follow the development of the R300 driver, see http://dri.freedesktop.org/wiki/R300

Most of the information here is relevant to other drivers as well.
