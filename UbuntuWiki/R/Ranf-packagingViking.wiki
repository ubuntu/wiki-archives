{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

packaging viking

http://viking.sf.net

== Prerequisites ==
* TODO* list the packages we need
http://revu.tauware.de/~laserjock/

== Start ==
{{{ 
cd 
mkdir src
cd src

mkdir viking
cd viking

wget http://downloads.sourceforge.net/viking/viking-0.1.3.tar.gz

tar xvfz viki<TAB>
cd viki<TAB>
dh_make --help
dh_make -e ranfyy@gmail.com -c gpl -f ../viking-0.1.3.tar.gz -s -b 
}}}
You need a GPG key for the next step. 
<pre>
gpg --gen-key
</pre>
create a source package
<pre>
debuild -S -sa
pbuilder-gutsy build ../*.dsc
</pre>

I get this error with pbuilder:
<pre>
config.status: creating viking.spec
config.status: creating src/config.h
config.status: executing depfiles commands
/usr/bin/make -C . 
make[1]: Entering directory `/tmp/buildd/viking-0.1.3'
Making all in src
make[2]: Entering directory `/tmp/buildd/viking-0.1.3/src'
/usr/bin/make  all-recursive
make[3]: Entering directory `/tmp/buildd/viking-0.1.3/src'
Making all in icons
make[4]: Entering directory `/tmp/buildd/viking-0.1.3/src/icons'
gdk-pixbuf-csource --name="`basename addtr_18.png .png`" --struct addtr_18.png > addtr_18.png_h
failed to load "addtr_18.png": Couldn't recognize the image file format for file 'addtr_18.png'
make[4]: *** [addtr_18.png_h] Error 1
make[4]: Leaving directory `/tmp/buildd/viking-0.1.3/src/icons'
make[3]: *** [all-recursive] Error 1
make[3]: Leaving directory `/tmp/buildd/viking-0.1.3/src'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/tmp/buildd/viking-0.1.3/src'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory `/tmp/buildd/viking-0.1.3'
make: *** [debian/stamp-makefile-build] Error 2
pbuilder: Failed autobuilding of package
 -> Aborting with an error
 -> unmounting dev/pts filesystem
 -> unmounting proc filesystem
 -> cleaning the build env 
    -> removing directory /var/cache/pbuilder/build//29054 and its subdirectories
</pre>

=== What is wrong here? ===
<pre>
 $ dpkg -S gdk-pixbuf-csource
 libgtk2.0-dev: /usr/share/man/man1/gdk-pixbuf-csource.1.gz
 libgtk2.0-dev: /usr/bin/gdk-pixbuf-csource
</pre>

Added to debian/control Build-depends: ", libgtk2.0-dev"

Google for:
<pre>
failed to load Couldn't recognize the image file format for file
</pre>
http://lists.freebsd.org/pipermail/freebsd-questions/2005-February/077073.html
suggests gdkpixbuf. Searched http://packages.ubuntu.com for it, added "libpngwriter0-dev" to Build-depends: doesn't cut it.

<pre>
$ pbuilder-gutsy login
failed to load "addtr_18.png": Couldn't recognize the image file format for file 'addtr_18.png'
addtr_18.png: PNG image data, 18 x 18, 8-bit/color RGBA, non-interlaced

</pre>

I stop here. It "just works" with a feisty pbuilder. No idea why.

<pre>
dput -lo ../viking_0.1.3-0ubuntu1_source.changes
</pre>
* bad-distribution-in-changes-file
* changelog-should-mention-nmu
* source-nmu-has-incorrect-version-number
