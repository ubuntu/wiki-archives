{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Summary ===

This wikipage covers hard real time support in Ubuntu Feisty.

=== Implementation ===

We have a source package that contains only the realtime-preempt patch (~2MB). This package has a build dependency on linux-source-2.6.20 package. When it's compiled, it extracts the kernel code from linux-source-2.6.20, applies the patch, sets the realtime kernel configuration, and builds all binary packages: linux-image-2.6.20-X-realtime, linux-image-debug-2.6.20-X-realtime, linux-headers-2.6.20-X-realtime, linux-image-2.6.20-X-realtime-trace.

=== Unresolved issues ===

Please see "Unresolved issues" in <nowiki>[[https://wiki.ubuntu.com/RealTime/Gutsy|Gutsy related wikipage]]</nowiki>. <<BR>>

The realtime kernel breaks ABI compatibility.<<BR>>

=== Packages available ===

Add, as root, to your /etc/apt/sources.list (remember to do a backup of this file) the following line:
<pre>
deb http://www.texware.it/ubuntu feisty/
deb-src http://www.texware.it/ubuntu feisty/
</pre>

Then execute:

<pre>
wget -q http://www.texware.it/ubuntu/feisty/BBA3222D.gpg -O- | sudo apt-key add -
sudo apt-get update
sudo apt-get install linux-realtime
</pre>

Binary packages available (based on Ingo's 2.6.20-rt8 patch):

linux-realtime<<BR>>
linux-image-realtime<<BR>>
linux-image-2.6.20-16-realtime<<BR>>
linux-headers-realtime<<BR>>
linux-headers-2.6.20-16-realtime<<BR>>
linux-image-2.6.20-16-realtime-trace<<BR>>
linux-image-debug-2.6.20-16-realtime<<BR>>
linux-restricted-modules-realtime<<BR>>
linux-restricted-modules-2.6.20-16-realtime<<BR>>
cyclictest

Source package:

linux-patch-realtime-preempt-2.6.20<<BR>>

Linux restricted modules sources:

<nowiki>[[http://www.texware.it/ubuntu/feisty/linux-restricted-modules-2.6.20_2.6.20.5.orig.tar.gz|linux-restricted-modules-2.6.20_2.6.20.5.orig.tar.gz]]</nowiki> <<BR>>
<nowiki>[[http://www.texware.it/ubuntu/feisty/linux-restricted-modules-2.6.20_2.6.20.5-16.28.diff.gz|linux-restricted-modules-2.6.20_2.6.20.5-16.28.diff.gz]]</nowiki>

'''ATTENTION: linux-restricted-modules package is produced with little change in upstream code (present in mm/memory.c). This is necessary for building nvidia and ati(fglrx) close drivers. We discourage the use of such modules and the use of this change for building other closed source drivers.'''

=== FAQ ===

Please see "FAQ" in <nowiki>[[https://wiki.ubuntu.com/RealTime/Gutsy|Gutsy related wikipage]]</nowiki>. <<BR>>

=== BoF agenda and discussion ===

* Any suggestions/feedbacks/requests? <nowiki>[[AlessioIgorBogani|alessio]]</nowiki> <<BR>><<BR>>
* I can host the packages on my repo if bandwidth is necessary <nowiki>[[Ttoine|ttoine]]</nowiki> <<BR>><<BR>>
* I confirm that it seems to rock for music production, jack like it; will do my best to have it in the next Ubuntu Studio, hope that we will have the restricted modules packages for full opengl support, etc... <nowiki>[[Ttoine|ttoine]]</nowiki> <<BR>><<BR>>
* http://help.ubuntu.com/community/UbuntuStudioPreparation -> Here you will find the PAM settings we use at the moment with Ubuntu Studio. Alessio, feel free to contact me by mail if you feel that we can tweak better. It is already very good with your kernel. <nowiki>[[Ttoine|ttoine]]</nowiki> <<BR>><<BR>>
* The restricted modules are working for me, if taking time uninstalling and then re-install linux-realime-x and linux-restricted-module-x-realtime, on a workstation with nvidia chipset, amd athlon x2 cpu and nvidia graphic card. <<BR>><<BR>>
* See this on <nowiki>[[http://ttoine.net/bazard/desktop-effect-rtkernel.png|Screenshot Desktop Effects with realtime kernel]]</nowiki> , without any x-runs or scratch on the sound ;-) The only matter is that I can't get the cube working, it stay flat, but I have basic animations. <nowiki>[[Ttoine|ttoine]]</nowiki> <<BR>><<BR>>
* Alessio has now joined the UbuntuStudio team. Hopefully we can get this work into Ubuntu for the next release. :) -CKontros<<BR>><<BR>>
* Hello Alessio, I am getting a lot of those logs on my syslog with your kernel:<<BR>>
  [  417.585793]  =======================<<BR>>
  [  483.072990] APIC error on CPU0: 02(02)<<BR>>
  [  483.073032]  [<c01151b8>] smp_error_interrupt+0x68/0x80<<BR>>
  [  483.073052]  [<c01044f8>] error_interrupt+0x28/0x30<<BR>>
  [  483.073066]  [<dc8df62e>] sil_interrupt+0x6e/0x2a0 [sata_sil]<<BR>>
  [  483.073085]  [<c015a3ec>] handle_IRQ_event+0x5c/0x100<<BR>>
  [  483.073101]  [<c015aa3e>] thread_simple_irq+0x5e/0x90<<BR>>
  [  483.073108]  [<c015b45a>] do_irqd+0x28a/0x2f0<<BR>>
  [  483.073116]  [<c015b1d0>] do_irqd+0x0/0x2f0<<BR>>
  [  483.073119]  [<c013ce2a>] kthread+0xba/0xf0<<BR>>
  [  483.073127]  [<c013cd70>] kthread+0x0/0xf0<<BR>>
  [  483.073132]  [<c0104697>] kernel_thread_helper+0x7/0x10<<BR>>
  [  483.073141]  =======================<<BR>>
 Sorry I dind't mean to spam the wiki ;) -<<BR>>
 Anyway nor the standard nor the lowlatency kernels behave like that, I also tried rolling out<<BR>>
 my own RT kernel using the configuration from the default one and then tweaking the entries<<BR>>
 relative to realtime, and that worked without the above issue as well(I test-checked it to make<<BR>>
 sure it really is RT).<<BR>>
 My system has an AthlonXP 2800+ CPU, and I suspect this has to do with the fact that your<<BR>>
 kernel is '''SMP'''-enabled, some older systems like mine just dont like that.<<BR>>
 Ciao. -gzed<<BR>><<BR>>
* same problem as gzed here with 2.6.20-16-realtime. 2.6.20-15-realtime was ok though -frasse <<BR>>

----
CategorySpec
