{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad entry''': https://blueprints.launchpad.net/ubuntu/+spec/realtime-hardy
* '''Created''':   by AlessioIgorBogani
* '''Contributors''': <nowiki>[[PeterLJones|PeterLJones]]</nowiki>, <nowiki>[[DeraldWoods|DeraldWoods]]</nowiki>, <nowiki>[[miguel|Miguel]]</nowiki>
* '''Source Package''': linux
* '''Binaries Packages''': linux-image-2.6.24-X-rt, linux-headers-2.6.24-X-rt, linux-restricted-modules-2.6.24-X-rt, linux-ubuntu-modules-2.6.24-X-rt

=== Summary ===

This specification details the plan to improve hard real time support in Ubuntu Hardy. In particular, to comply with quality levels that users want from an LTS release.

=== Rationale ===

In order to push Ubuntu in very highly demanding business (e.g. industrial automation, financial, robotics, advanced multimedia and telco) and other contexts, it is necessary to improve real-time kernel flavour support.

=== Use Cases ===

'''1.  Deterministic (Hard-Realtime)''' [Industrial Control, Robotics, Automation, DAQ, etc.]<<BR>>

*** Alex is developing an application (<nowiki>[[http://en.wikipedia.org/wiki/SCADA|SCADA]]</nowiki> type) for a customer and he would be very happy to use Linux and Ubuntu for the deployment.

*** John is using the Ubuntu distribution, with the '''linux-rt''' kernel, as the RTOS, for a GANTRY type widget assembly application. The system has digital I/O, servo motors, and GPIB instrumentation. 

'''2.  Non-Deterministic (Low-Latency)''' [Data Sampling, Analysis Tools, Realtime Monitoring, etc.]<<BR>>

*** Beth is a user wanting application stability but with real-time performance capability for running Audio and MIDI applications (such as <nowiki>[[http://jackaudio.org/|JACK]]</nowiki> and its clients).  This could include running a full <nowiki>[[http://www.x.org|X]]</nowiki>/<nowiki>[[http://www.gtk.org|Gtk]]</nowiki> UI stack with <nowiki>[[http://www.winehq.com|Wine]]</nowiki> and/or <nowiki>[[http://www.joebutton.co.uk/fst/|FST]]</nowiki>, with networking to allow for collaborative performances (e.g. <nowiki>[[http://ninjam.com|NINJAM]]</nowiki>).  Stability: must be reliable enough for live performance (system hangs look terribly unprofessional).  Performance: no dropped MIDI messages (hanging notes suck...), no dropped audio frames (audio glitches suck...).

=== Scope ===

This specification covers the rt linux kernel flavour in Ubuntu.

=== Implementation ===

We will use the new kernel build system created by the Ubuntu Kernel Team for production kernel: <nowiki>[[http://kernel.ubuntu.com/git?p=ubuntu/ubuntu-hardy.git;a=blob;hb=HEAD;f=debian/binary-custom.d/README|More nformation about it]]</nowiki>.

Rt-tests packages will be released through <nowiki>[[https://launchpad.net/~abogani|Alessio's]]</nowiki> <nowiki>[[https://help.launchpad.net/PPA|PPA]]</nowiki> archive.

We use <nowiki>[[KernelGitGuide|Git]]</nowiki> for handle kernel source code and <nowiki>[[http://savannah.nongnu.org/projects/quilt|Quilt]]</nowiki> for handle the preempt-rt one.

Other utilities as like <nowiki>[[http://rt.wiki.kernel.org/index.php/Preemption_Test|Preemption test]]</nowiki>  or <nowiki>[[http://devresources.linux-foundation.org/craiger/hackbench/|hackbench]]</nowiki> are postponed to hardy+1. It is the same for  integration with PolicyKit (framework for secure privilege elevation integration) and for RT related documentation due to lack of interest.

=== Outstanding Issues ===

1. High precision timers don't work on machine which have only PIT as souce clock <nowiki>[[http://www.mail-archive.com/linux-rt-users@vger.kernel.org/msg00375.html|more info]]</nowiki> <<BR>>
2. The realtime kernel could expose you to security issues (probably local only) <<BR>>
3. Restricted modules increase latencies (please buy only hardware which have a free driver!) <<BR>>

=== Packages available ===
Packages available in Hardy archive: <<BR>>
linux-rt <<BR>>
linux-image-rt <<BR>>
linux-image-2.6.24-16-rt <<BR>>
linux-ubuntu-modules-2.6.24-16-rt <<BR>>
linux-headers-rt <<BR>>
linux-headers-2.6.24-16-rt <<BR>>
linux-restricted-modules-rt <<BR>>
linux-restricted-modules-2.6.24-16-rt <<BR>>
linux-backports-modules-rt <<BR>>
linux-backports-modules-hardy-rt <<BR>>
linux-backports-modules-2.6.24-16-rt <<BR>>

Packages available in <nowiki>[[https://launchpad.net/~abogani/+archive|Alessio's PPA]]</nowiki> archive: <<BR>>
rt-tests <<BR>>

=== FAQ ===

'''Q) Did you manage to include all the regular Ubuntu kernel patches in it? If not, is it possible to know what was left out?''' <<BR>>
A) We use _only_ the full Ubuntu Kernel (not vanilla, not custom version or other).  The Ubuntu Realtime kernel is the Ubuntu Kernel plus the real-time pre-emption patch.  Also the configuration (aka /boot/config*) is the same except for specific real-time options.

'''Q) Where can I find documentation?''' <<BR>>
A) All existing docs are available on http://rt.wiki.kernel.org

'''Q) What are the differences from vanilla Ingo Molnar's patch?''' <<BR>>
A) A simple adaptation to the BenC's kernel git tree isn't the only difference: We work on Ubuntu specific code or drivers (aka linux-ubuntu-modules/linux-restricted-modules) and also remove all code which isn't strictly related to real-time preemption support (if any).

'''Q) What features will be included in Ubuntu rt kernel flavour?''' <<BR>>
A) CPU shielding, priority inheritance, sleeping spinlocks, interrupt threads and high-resolution timers and CFS optimizations.

'''Q) How to get the source code? Is there a Git repository?''' <<BR>>
A) Sure! You can find it at <nowiki>[[http://kernel.ubuntu.com/git|Ubuntu Kernel Team's Git Repositories]]</nowiki>.

'''Q) Why is SMP disabled''' <<BR>>
A) See bug report <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux-rt/+bug/290498|290498]]</nowiki> and its duplicates (Do you know more on this subject? Please write a note here!). 

=== BoF agenda and discussion ===

* Any suggestions/feedbacks/requests? <nowiki>[[AlessioIgorBogani|Alessio]]</nowiki> <<BR>><<BR>>
* Is it available for i386, amd64 and ppc ?
   Unfortunately only i386 and amd64 are available so no ppc rt kernel flavour at the moment due to lack of resources (mainly ppc systems!)

----
CategorySpec
