{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Support for overlaying the Ubuntu archive in trusty ===

As of Ubuntu 14.04, the Ubuntu installer includes support for dynamically replacing installer components. This functionality is designed to be used for unofficial or spin-off images that require support for the netboot installer (i.e. experimental development for MAAS, etc). Most users will not need this functionality, but it is useful for those who have wanted to do things that require a modified installer envirnment.

==== What the overlay archive is ====

An overlay archive is, simply put, an archive that allows a developer to replace components in both the installer and in the installed system. From an end-user perspective, a system that was installed with an overlay archive essentially appears as a system that had a PPA pre-installed and activated. From an installer perspective, it allows easy slipstreaming of new components such as base-installer/libdebian-installer/flash-kernel which are commonly edited for platform enablement.

Overlay archives follow all rules of normal archives; they can be superseded by the main archive, they must be signed with their own GPG key, etc.

Overlay archives are controlled by the following preseed arguments

{| class="wikitable"
|-
| Preseed Option
| Type
| Description
|-
| apt-setup/overlay
| boolean
| should d-i attempt to use an overlay archive?
|-
| apt-setup/overlay_host
| string
| hostname of the overlay archive location
|-
| apt-setup/overlay_directory
| string
| path to the overlay archive
|-
| apt-setup/overlay_components
| string
| what components should be addeded from the archive
|-
| apt-setup/overlay_early_apt_pkg_install
| string
| Packages to install immediately following  debootstrap/before GPG validation; this should be used to specify the package with the overlay archive public keys
|}

An example preseed file might look as follows:

<pre>
d-i apt-setup/overlay boolean true
d-i apt-setup/overlay_host string ppa.launchpad.net
d-i apt-setup/overlay_directory string /mcasadevall/overlay-archive-test/ubuntu 
d-i apt-setup/overlay_components string main
d-i apt-setup/overlay_early_apt_pkg_install ppa-keyring
</pre>
