{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

This spec is in pre-drafting. I'd expect it to be a long time in implementation with lots of blockers, but it probably needs to get done, and its got to start somewhere.

* '''Launchpad Entry''': UbuntuSpec:OnlineFsck
* '''Packages affected''': 

=== Summary ===

fsck will run invisibly in the background after boot.

=== Release Note ===

fsck now runs in the background after boot. 

=== Rationale ===

On-boot fscks suffer from the following problems:

* long boot times
*** increase server down time
*** agrivate users
* scares -desktop users "We will keep you away from the terminal"
* doesn't check enough in high-uptime environments

=== Use Cases ===

** John has a 4 TB RAID and would like to fsck weekly, but is operating in a high-availability enviornment and can't take the system offline.
** Jane has an 30 minute lunchbreak and needs to drive home, print something out, and get back to the office on time. She won't have time for fsck to finish if it runs at boot, but since it runs in the background, she gets back just in time with document in hand.
** Jim has a small number of minor errors in his file system, fsck quietly fixes them for him.

=== Assumptions ===

=== Design ===

We should creates an on-line snapshot of the filesystem and then fsck the snapshot instead of holding up the boot process.

=== Implementation ===

==== UI Changes ====

Desktop users should receive a notification bubble with a human readible result of the problem, a suggested course of action, and three options: Do It, Ask Me Later, Advanced.

Server users...get an email? 

==== Code Changes ====

==== Migration ====

=== Test/Demo Plan ===

=== Outstanding Issues ===

** What happens when a user tries to shut down during fsck? My vote is nix it and try again next boot. What about low priority fscks that aren't finished by the time the next fsck is cheduled?
** How much information is TMI for desktop users?

=== BoF agenda and discussion ===

None expected until after Gutsy

=== Related Reading ===

** http://www.usenix.org/publications/library/proceedings/bsdcon02/mckusick/mckusick_html/index.html
** http://www.sun.com/blueprints/0900/vxvmfac.pdf
** https://wiki.ubuntu.com/AutoFsckspec
** http://arstechnica.com/articles/columns/linux/linux-20041013.ars

---- /!\ '''End of edit conflict''' ----

=== Comments ===

----
CategorySpec
