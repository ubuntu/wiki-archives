{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Adventures with .debs and PPAs ===

On the Landscape project, we need some customized backports for the Dedicated Server Edition, and the easiest way to support these is by putting them in a project PPA. Some issues had cropped up with the packages that were in place and our .deb guru was away, so I had to dive in.

==== Setting Up dput ====

The first thing that I discovered was an inconsistency between what the project page said to do:
<pre>
dput ppa:landscape/landscape-standalone <source.changes>
</pre>

And what the PPA help page said to do:
<pre>
$ vi ~/.dput.cf
[my-ppa]
fqdn = ppa.launchpad.net
method = ftp
incoming = ~<your_team>/<ppa_name>/ubuntu/
login = anonymous
allow_unsigned_uploads = 0
</pre>

With <code>dput ppa:somename</code>, dput will expect that your config file will have a section <code>[ppa:somename]</code>.

As such, here's what I used for my dput config:
<pre>
[teamname/ppaname]
fqdn = ppa.launchpad.net
method = ftp
incoming = ~teamname/ppaname/
login = anonymous
allow_unsigned_uploads = 1
</pre>

Note that when uploading with dput, I needed to keep the same name:
<pre>
dput teamname/ppaname packagename_source.changes
</pre>

==== A Smidgen of .deb ====

With dput configured, I had to learn a tiny bit about creating dep packages. Thanks to my team members with experience here, this was not a problem. I needed to update the version checks in the dependencies.

Here were the key things I needed to know:
* The version checks are in the <code>debian/control</code> file in the <code>Depends</code> directive.
* In order to increment a version for a .deb, you need to update the <code>changelog</code>; this file is used for auto-generating versioned package names.
* The <code>debian/changelog</code> is best edited by executing the command <code>dch -i</code>.
* With the files tweaked, you can build with <code>debuild -S</code> (since we only needed the source build in this case).

==== Uploading ====

Well, the command has already been given for this in the first section. Note that currently, the only transfer protocol supported is ftp. With the deb files created (put in the directory above the source code, where <code>debuild -S</code> was executed), I was ready to upload:
<pre>
cd ../
dput teamname/ppaname packagename_source.changes
</pre>

You should get an email alert once your package is uploaded. Within a few minutes, you should see your package at its PPA URL:
  https://edge.launchpad.net/~teamname/+archive/ppaname
