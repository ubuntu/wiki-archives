{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


=== Summary ===

The 15.04 OpenStack Charm release includes updates for the following charms:

* ceilometer
* ceilometer-agent
* ceph
* ceph-radosgw
* cinder
* cinder-ceph
* glance
* hacluster
* heat
* keystone
* neutron-api
* neutron-openvswitch
* nova-cloud-controller
* nova-compute
* openstack-dashboard
* quantum-gateway
* rabbitmq-server
* swift-proxy
* swift-storage
* percona-cluster

These release notes complement the <nowiki>[[ServerTeam-OpenStackCharms-ReleaseNotes1501|15.01]]</nowiki> charm release notes in terms of charm features delivered since the last Ubuntu release.

=== New Charm Features ===

==== OpenStack Kilo support for 14.04 and 15.04 ====

All !OpenStack charms now support deployment of !OpenStack 2015.1 (Kilo) on Ubuntu 14.04 LTS and Ubuntu 15.04; this support includes the following charms:
 
* keystone
* cinder
* cinder-ceph
* glance
* nova-cloud-controller
* nova-compute
* quantum-gateway
* swift-proxy
* swift-storage
* ceilometer
* ceilometer-agent
* heat
* neutron-api
* neutron-openvswitch
* openstack-dashboard

To deploy !OpenStack Kilo on Ubuntu 14.04, use the 'openstack-origin' configuration option, for example:

<pre>
cat > config.yaml << EOF
nova-cloud-controller:
  openstack-origin: cloud:trusty-kilo
EOF
juju deploy --config config.yaml nova-cloud-controller
</pre>

!OpenStack Kilo is provided as the default !OpenStack release on Ubuntu 15.04 so no additional configuration is required in 15.04 deployments.

'''NOTE''': In order to use Juju with Ubuntu 15.04, you'll have to use the 1.23 release which is currently in pre-release testing.

==== Neutron - Distributed Virtual Router ====

The neutron-api charm now has a enable-dvr option to turn on Distributed Virtual Routing. When this is enabled each Compute Node will provide North/South DNAT (floating IP traffic) as well as East/West L3 forwarding (traffic between VM in the same tenant), North/South SNAT still goes through the neutron gateway.

Prerequisites:
* Compute having external connectivity
* l2-population is enabled
* !OpenStack release >= Juno
* enable-l3ha is disabled
* Overlay network type is vxlan

More details of DVR can be found <nowiki>[[https://wiki.openstack.org/wiki/Neutron/DVR|here]]</nowiki>

'''NOTE''': This feature was considered experimental in !OpenStack Juno so is only recommended for use with !OpenStack Kilo.

==== Neutron - Router High Availability ====

The neutron-api charm now has a enable-l3ha option. If this option is enabled then subsequent routers are created with the 'ha' flag set. This will enable automatic failover of a router should the gateway unit that it resides on fail.

Prerequisites:
* More than 1 neutron gateway node
* l2-population is disabled
* !OpenStack release >= Juno
* enable-dvr is disabled
* Overlay network type is vlan, gre or vxlan

More details on L3 HA can be found <nowiki>[[https://wiki.openstack.org/wiki/Neutron/L3_High_Availability_VRRP|Here]]</nowiki>

'''NOTE''': This feature was considered experimental in !OpenStack Juno so is only recommended for use with !OpenStack Kilo.

==== Percona Cluster - Improved HA failure detection ====

The percona-cluster charm now ensures that the access Virtual IP is always co-located with an active, up-to-date instance of Percona XtraDB Cluster.

==== ZeroMQ ====

The Nova and Neutron charms now provide initial support use of ZeroMQ as an alternative to RabbitMQ for messaging; this is only supported with OpenStack Kilo or later.

To deploy Nova and Neutron with ZeroMQ, make use of the new openstack-zeromq charm (sample subset of juju commands):

<pre>
juju deploy redis-server
juju deploy openstack-zeromq
juju add-relation redis-server openstack-zeromq
for svc in nova-cloud-controller nova-compute neutron-api neutron-openvswitch quantum-gateway; do
   juju deploy $svc
   juju add-relation $svc openstack-zeromq
done
</pre>

At this point in time ZeroMQ should be considered for testing only.  Further work is expected both upstream in !OpenStack and across the !OpenStack charm set during the next development cycle.

==== Deployment from source ====

'''EXPERIMENTAL FEATURE'''

The following charms now have support for deploying OpenStack directly from git repositories:

* cinder
* keystone
* glance
* nova-cloud-controller
* nova-compute
* neutron-api
* quantum-gateway
* neutron-openvswitch

This feature is enabled by using the new 'openstack-origin-git' configuration option; this can be used to configure a minimal or expanded list of repositories to collate and install - see the README in each charm for specific details.

Further deploy from source enablement is expected during the 15.07 charm development cycle.

'''NOTE''': Current support extends to deployment of Icehouse and Juno from source repositories; Kilo support is not yet complete but will be delivered as a stable update between now and the 15.07 charm release.

==== Monitoring ====

The Openstack charms can now be related to the nrpe charm to provide basic Nagios monitoring. To allow alert thresholds to be tweaked per service deploy each a nrpe subordinate charm per Openstack Service. e.g.

<pre>
juju deploy nrpe nrpe-glance
juju deploy nrpe nrpe-cinder
juju deploy nagios
juju deploy glance
juju deploy cinder
juju add-relation nrpe-glance glance
juju add-relation nrpe-glance nagios
juju add-relation nrpe-cinder cinder
juju add-relation nrpe-cinder nagios
</pre>

The thresholds can then tweaked:

<pre>
juju set nrpe_glance "load=-w 2,2,2 -c 4,4,4"
juju set nrpe_cinder "load=-w 4,4,4 -c 10,10,10"
</pre>

==== SSL/HTTPS/PKI ====

All service endpoints can now be configured as https either by having the Keystone charm act as a certificate authority and auto-generate cert/key for each endpoint or by injecting cert/key/ca to be able to use an existing CA. Endpoints can also now choose to use PKI tokens in keystone although the default remains UUID.

To enable https endpoints (using keystone as CA):

<pre>
juju set keystone https-service-endpoints='true'
</pre>

To enable PKI tokens:

<pre>
juju set keystone enable-pki='true'
</pre>

For more ssl options see config.yaml

=== Deprecation Notices ===

==== quantum-gateway ====

15.04 is the last release of the 'quantum-gateway' charm; for 15.07 it will be renamed 'neutron-gateway'. Migration instructions will be provided for 15.07 release.

==== MySQL HA with Ceph ====

The original HA implementation of OpenStack used the MySQL charm in-conjunction with Ceph to provide a traditional active/passive shared block device HA mysql option.

Percona XtraDB Cluster, as provided by the percona-cluster charm, provides an active/active MySQL configuration with no requirement for a shared block device.

Users of the original MySQL HA option should migrate to a Percona XtraDB Cluster deployment between now and the 15.10 charm release, where support for MySQL with Ceph will be removed.

==== hacluster - default transport ====

For the 15.04 charm release, the hacluster charm will continue to use multicast as its default transport option for cluster communications.

Unicast is generally more universally usable across all Juju providers - we'll be switching the default for 15.07 including automatic migration and re-configuration of existing multicast clusters.  Instructions will also be provided for users who wish to continue to use the multicast transport option.

==== nova-cloud-controller and neutron-api charms ====

Management of neutron configuration and services will be removed from any nova-* charms for the 15.10 charm release.

This means that the neutron-api principle charm needs to be deployed to run the neutron-server service and if openvswitch is being used then neutron-openvswitch subordinate charm needs to deployed and attached to the nova-compute charm.   This is a fully supported migration path for existing deployments not using these charms.

The nova-compute charm now has an option called 'manage-neutron-plugin-legacy-mode'. The default value for this option is True but as of 15.07 this will switch to False which will disable the management of neutron services by default. 

=== Bugs Fixed ===

For the full list of bugs resolved for the 15.04 release please refer to https://launchpad.net/charms/+milestone/15.04
