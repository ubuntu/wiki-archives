{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

== Example of writing new IPMI tests via checkbox ==

This example was created for an Open Compute ipmi test.

 A. Creating an ipmi test job
  1. Download checkbox source via lp:opencompute/checkbox
  2. Create a job file name ipmi.txt.in in the jobs directory.
  3. Add the following job definition for your IPMI test (script or command line). 
  {{{
  plugin: shell
  name: ipmi/admin/dcmi_info
  requires: package.name == 'ipmiutil'
  user: root
  environ: OC_IPMI_TARGET OC_IPMI_ADMIN OC_IPMI_ADMIN_PASSWORD
  command: ipmiutil dcmi -N $OC_IPMI_TARGET $OC_IPMI_ADMIN $OC_IPMI_ADMIN_PASSWORD
  _description:
   Get DCMI capabilities with Admin User
  }}}
  4. Add the ipmi.txt.in job file to local.txt.in.
  5. Make a copy of the default whitelist in data/whitelist and name it opencompute.whitelist.
  6. Edit the whitelist including the new job and test with the following syntax:
  {{{
  __ipmi__
  ipmi/admin/dcmi_info
  }}}
  7. Build the package and add it to your ppa

 B. Executing the test
  1. Install your ppa and install ipmituil, checkbox, and checkbox-cli
  {{{
  sudo add-apt-repository ppa:<your-launchpad-id>/opencompute
  sudo apt-get update
  sudo apt-get install checkbox checkbox-cli
  wget "http://ipmiutil.sourceforge.net/FILES/ipmiutil_2.9.0_ubuntu12_amd64.deb"
  sudo dpkg -i ipmiutil_2.9.0_ubuntu12_amd64.deb
  }}}
  2. Run checkbox in "headless" mode while using the whitelist you created.
  {{{
  checkbox-cli -W /usr/share/checkbox/data/whitelists/opencompute.whitelist
  }}}
