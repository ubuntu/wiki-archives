{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

In order to test FAI in hardy, I'm using qemu.

* Download the installer

<pre>
wget http://archive.ubuntu.com/ubuntu/dists/hardy/main/installer-i386/current/images/netboot/386/ubuntu-installer/i386/linux
wget http://archive.ubuntu.com/ubuntu/dists/hardy/main/installer-i386/current/images/netboot/386/ubuntu-installer/i386/initrd.gz
</pre>

* create an disk image
<pre>
qemu-img create -f qcow2 fai-server.img 4G
</pre>

* Boot the installer

<pre>
qemu -hda fai-server.img -kernel linux -initrd initrd.gz -append console=ttyS0
</pre>

* install ubuntu server with openssh-server

* setup networking
<pre>
brctl addbr br0
tunctl -u siretart -t tap0
tunctl -u siretart -t tap1
chgrp admin /dev/net/tun
ifconfig tap0 up
ifconfig tap1 up
ifconfig br0 up
brctl addif br0 tap0
brctl addif br0 tap1
brctl show br0
</pre>

* boot into the system, have to nics
<pre>
qemu -hda fai-server \
   -net nic,macaddr=52:54:00:12:34:56
        -net user \
    -redir tcp:2222::22 \
    -net nic,vlan=1,macaddr=52:54:00:12:34:57 \
        -net tap,vlan=1,ifname=tap0,script=no
</pre>

* ssh into your system, the following entry in '''~/.ssh/config''' is useful

<pre>
Host fai-server
     HostKeyAlias       fai-server
     HostName           localhost
     Port               2222
     User               siretart
     ForwardAgent       yes
</pre>

* install the following packages: 
** ipmasq
** dnsmasq
** fai-quickstart
** ...

* setup fai:
<pre>
fai-setup -v
</pre>

* bootup another qemu instance for testing the installation:
<pre>
qemu -hda install.img \
    -net nic,macaddr=52:54:00:12:34:58 -net tap,ifname=tap1,script=no \
    -boot n
</pre>
