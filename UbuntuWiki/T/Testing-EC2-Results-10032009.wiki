{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


=== Objective ===
Run through the test cases at https://wiki.ubuntu.com/Testing/EC2/TestCases and report any issues or omitted info.

=== Date and Time ===

3 Oct 2009, from about 2pm EDT to 9pm EDT.

=== AMI used ===

ami-52be5d3b, the 32-bit US image from http://uec-images.ubuntu.com/releases/karmic/beta/

=== Tester ===

Adam Lincoln

=== Formal testing ===

Note that I didn't have any EC2 experience before starting this, so I leaned on the info in https://help.ubuntu.com/community/EC2StartersGuide, especially the sections titled "Installing the API tools" and "Using the Ubuntu Images".

Also, I will look into getting user-data files ready for some of the test cases, but I haven't done so yet.

{| class="wikitable"
|-
| Testcase
| Passed/Failed/NotRun
| Bug number
| Comments
|-
| ec2-001
| Passed
| 
| After doing "ec2-run-instances ..." this reports the running instance.
|-
| ec2-002
| Passed
| 
| About 15 seconds after the message displays, the connection is dropped.
|-
| ec2-003
| Passed
| 
| Output from $ sudo -l is '''[1]''' below.
|-
| ec2-004
| Unknown
| 
| See '''[2]''' below.
|-
| ec2-005
| !NotRun
| 
| Instructions in the link seem to require S3, so Jorge said "skip it".
|-
| ec2-006
| !NotRun
| 
| Skipped because test case 5 was skipped.
|-
| ec2-007
| Passed (mostly)
| 
| See '''[3]''' below.
|-
| ec2-008
| !NotRun
| 
| No user-data file ready
|-
| ec2-009
| !NotRun
| 
| No user-data file ready
|-
| ec2-010
| !NotRun
| 
| No user-data file ready
|-
| ec2-011
| !NotRun
| 
| No test case by this number (perhaps it was omitted?  or just a numbering error and there are really only 14 so far?)
|-
| ec2-012
| !NotRun
| 
| No user-data file ready
|-
| ec2-013
| !NotRun
| 
| No user-data file ready
|-
| ec2-014
| !NotRun
| 
| No user-data file ready
|-
| ec2-015
| !NotRun
| 
| No user-data file ready
|}

=== Test notes ===

Footnotes from test cases table above:

'''[1]''' Output from ''$ sudo -l''

<pre>
Matching Defaults entries for ubuntu on this host:
    env_reset

User ubuntu may run the following commands on this host:
    (ALL) ALL
    (ALL) NOPASSWD: ALL
</pre>

Doesn't match the sample output exactly, but seems right.

'''[2]''' Output from ''$ ec2-describe-availability-zones''

<pre>
AVAILABILITYZONE        us-east-1a      available       us-east-1
AVAILABILITYZONE        us-east-1b      available       us-east-1
AVAILABILITYZONE        us-east-1c      available       us-east-1
AVAILABILITYZONE        us-east-1d      available       us-east-1
</pre>

I had one instance going that wasn't started with the -z option, so was using a "default" zone that I didn't pick.  After starting a second with the "-z us-east-1d" option, here's the output from ''$ ec2-describe-instances''

<pre>
RESERVATION     r-88a2bce1      XXXXXXXXXXXX    default
INSTANCE        i-1d52f575      ami-52be5d3b    ec2-174-129-119-133.compute-1.amazonaws.com     domU-12-31-39-06-
B2-06.compute-1.internal        running ec2-keypair-netbook     0               m1.small        2009-10-03T18:29:
19+0000 us-east-1c      aki-76be5d1f    ari-4cbe5d25
RESERVATION     r-02564f6b      XXXXXXXXXXXX    default
INSTANCE        i-152d8a7d      ami-52be5d3b    ec2-67-202-49-18.compute-1.amazonaws.com        ip-10-245-118-70.
ec2.internal    running ec2-keypair-netbook     0               m1.small        2009-10-03T20:00:50+0000        u
s-east-1d       aki-76be5d1f    ari-4cbe5d25
</pre>

After sshing into each instance, I checked the contents of /etc/apt/sources.list; they were identical with these contents:

<pre>
deb http://us.ec2.archive.ubuntu.com/ubuntu/ karmic main universe
deb-src http://us.ec2.archive.ubuntu.com/ubuntu/ karmic main universe
deb http://us.ec2.archive.ubuntu.com/ubuntu/ karmic-updates main universe
deb-src http://us.ec2.archive.ubuntu.com/ubuntu/ karmic-updates main universe
deb http://security.ubuntu.com/ubuntu karmic-security main restricted
deb-src http://security.ubuntu.com/ubuntu karmic-security main restricted
</pre>

I ''think'' that these results are what's expected, but from the language on the test cases page it's possible different mirrors should be shown.  If someone confirms that these sources.list contents are expected, please let me know or fix the text here and the results table above.

'''[3]''' While it might be obvious, the directions at https://wiki.ubuntu.com/Testing/EC2/TestCases are a bit confusing.  You want user-data.sh to have the contents

<pre>
echo ========= HELLO ========= | tee /tmp/user-data.out
</pre>

whereas the stuff in the code box on the wiki page is the full command that will create user-data.sh for you.

I can confirm that the ========= HELLO ========= string appears in /tmp/user-data.out and in /var/log/syslog (where all of the user-data output ends up, according to http://alestic.com/2009/06/ec2-user-data-scripts, for example).

Also, upon rebooting with ec2-reboot-instances, the file /tmp/user-data.out and the syslog entry were not recreated.  So this part passed.  Strangely, telling the instance to reboot via the AMS web console didn't make the instance reboot, but the command line thing works.

=== Issues found ===
Other than the image not responding to reboot commands from the web interface, there were no issues from any test I ran.  All peripheral issues are noted above in the footnotes.

=== Bugs summary ===
No bugs reported yet.
