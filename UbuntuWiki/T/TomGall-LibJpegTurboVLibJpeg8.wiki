{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

== Libjpeg-Turbo vs Libjpeg8c ==

* What is the difference in performance as measured with tjbench and standardized images
** qualities 75 and 95
** architectures x86_64, x86, armel
** libjpeg8c vs libjpeg-turbo-1.1.90-r722 built with libjpeg8 compat on 
** Test images from : http://www.imagecompression.info/test_images/
** gcc version  build with -O3 gcc version 4.6.1
** oneiric 11.11
** one fix was made to libjpeg8c to jdmaster.c jpeg_calc_output_dimensions to fix a floating point exception.

=== Source Repos ===
* lp:libjpeg-turbo
* lp:ubuntu/libjpeg8

=== Pretty graphs ===

=== Raw Performance measurements ===

'''libturbo-jpeg Versions of Notes'''

==== Intel i5-2500 3.3 Gz ====
* libjpeg8c

<pre>
tgall@mars:~/libjpeg8/libjpeg8/tjbench$ ./tjbench ../../testimages/nightshot_iso_100.ppm 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	3136  2352	63.58	18.87	171.0
RGB	TD	4:2:0	95	3136  2352	39.20	15.45	88.17
RGB	TD	4:2:2	95	3136  2352	33.18	13.44	85.51
RGB	TD	4:4:4	95	3136  2352	26.10	10.84	73.27

tgall@mars:~/libjpeg8/libjpeg8/tjbench$ ./tjbench ../../testimages/nightshot_iso_100.ppm 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	3136  2352	87.81	58.51	262.9
RGB	TD	4:2:0	75	3136  2352	49.68	47.97	111.2
RGB	TD	4:2:2	75	3136  2352	42.05	41.80	114.5
RGB	TD	4:4:4	75	3136  2352	33.12	34.09	110.6

tgall@mars:~/libjpeg8/libjpeg8/tjbench$ ./tjbench ../../media/nightshot_iso_100-640x480.bmp 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	640   480 	54.63	12.30	147.1
RGB	TD	4:2:0	95	640   480 	34.88	10.15	79.85
RGB	TD	4:2:2	95	640   480 	29.56	8.835	75.88
RGB	TD	4:4:4	95	640   480 	23.50	7.338	66.14

tgall@mars:~/libjpeg8/libjpeg8/tjbench$ ./tjbench ../../media/nightshot_iso_100-640x480.bmp 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	640   480 	73.89	30.16	213.7
RGB	TD	4:2:0	75	640   480 	44.93	25.92	100.6
RGB	TD	4:2:2	75	640   480 	38.20	23.20	101.9
RGB	TD	4:4:4	75	640   480 	30.25	19.56	95.93

</pre>

==== Intel i5-2500 3.3 Gz ====
* libjpeg-turbo8

<pre>
tgall@mars:~/libjpeg8/test$ tjbench ../testimages/nightshot_iso_100.ppm 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	3136  2352	250.5	18.87	244.5
RGB	TD	4:2:0	95	3136  2352	180.6	15.53	202.5
RGB	TD	4:2:2	95	3136  2352	149.0	13.48	170.5
RGB	TD	4:4:4	95	3136  2352	112.2	10.84	133.5

tgall@mars:~/libjpeg8/test$ tjbench ../testimages/nightshot_iso_100.ppm 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	3136  2352	368.0	58.51	365.3
RGB	TD	4:2:0	75	3136  2352	257.2	48.08	308.8
RGB	TD	4:2:2	75	3136  2352	210.9	41.85	258.3
RGB	TD	4:4:4	75	3136  2352	156.6	34.09	211.1

tgall@mars:~/libjpeg8/test$ tjbench ../media/nightshot_iso_100-640x480.bmp 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	640   480 	210.1	12.30	205.6
RGB	TD	4:2:0	95	640   480 	152.3	10.20	167.4
RGB	TD	4:2:2	95	640   480 	125.8	8.874	142.9
RGB	TD	4:4:4	95	640   480 	96.67	7.338	114.6

tgall@mars:~/libjpeg8/test$ tjbench ../media/nightshot_iso_100-640x480.bmp 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	640   480 	302.7	30.16	299.1
RGB	TD	4:2:0	75	640   480 	217.7	25.99	249.4
RGB	TD	4:2:2	75	640   480 	179.2	23.27	216.1
RGB	TD	4:4:4	75	640   480 	135.8	19.56	176.7

</pre>

==== Intel Core 2 Duo 2.4 Gz ====
* libjpeg8c

<pre>
tgall@neptune:~/libjpeg8/libjpeg8/tjbench$ ./tjbench ../../testimages/nightshot_iso_100.ppm 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	3136  2352	41.29	18.87	94.34
RGB	TD	4:2:0	95	3136  2352	24.08	15.45	48.50
RGB	TD	4:2:2	95	3136  2352	20.84	13.44	47.35
RGB	TD	4:4:4	95	3136  2352	16.61	10.84	40.19

tgall@neptune:~/libjpeg8/libjpeg8/tjbench$ ./tjbench ../../testimages/nightshot_iso_100.ppm 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	3136  2352	54.32	58.51	144.1
RGB	TD	4:2:0	75	3136  2352	29.38	47.97	60.87
RGB	TD	4:2:2	75	3136  2352	25.52	41.80	63.46
RGB	TD	4:4:4	75	3136  2352	20.49	34.09	63.07

And with image scaled to 640x480

tgall@neptune:~/libjpeg8/libjpeg8/tjbench$ ./tjbench ./nightshot_iso_100-640x480.bmp 95 -rgb -quiet

All performance values in Mpixels/sec
Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	640   480 	36.32	12.30	85.57
RGB	TD	4:2:0	95	640   480 	21.95	10.15	41.52
RGB	TD	4:2:2	95	640   480 	19.00	8.835	40.47
RGB	TD	4:4:4	95	640   480 	15.20	7.338	35.30

tgall@neptune:~/libjpeg8/libjpeg8/tjbench$ ./tjbench ./nightshot_iso_100-640x480.bmp 75 -rgb -quiet

All performance values in Mpixels/sec
Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	640   480 	47.23	30.16	121.9
RGB	TD	4:2:0	75	640   480 	26.94	25.92	50.01
RGB	TD	4:2:2	75	640   480 	23.50	23.20	51.73
RGB	TD	4:4:4	75	640   480 	18.90	19.56	49.64

</pre>

==== Intel Core 2 Due 2.4 Gz ====
* libjpeg-turbo 
<pre>
tgall@neptune:~/libjpeg8/libjpeg-turbo$ tjbench ../testimages/nightshot_iso_100.ppm 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	3136  2352	153.5	18.87	156.1
RGB	TD	4:2:0	95	3136  2352	113.3	15.53	133.4
RGB	TD	4:2:2	95	3136  2352	93.16	13.48	112.0
RGB	TD	4:4:4	95	3136  2352	70.73	10.84	87.03

tgall@neptune:~/libjpeg8/libjpeg-turbo$ tjbench ../testimages/nightshot_iso_100.ppm 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	3136  2352	201.2	58.51	217.1
RGB	TD	4:2:0	75	3136  2352	151.5	48.08	193.0
RGB	TD	4:2:2	75	3136  2352	124.9	41.85	159.5
RGB	TD	4:4:4	75	3136  2352	93.13	34.09	128.7

tgall@neptune:~/libjpeg8/libjpeg-turbo$ tjbench ../libjpeg-turbo/nightshot_iso_100-640x480.bmp 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	640   480 	133.9	12.30	137.0
RGB	TD	4:2:0	95	640   480 	98.85	10.20	112.8
RGB	TD	4:2:2	95	640   480 	81.35	8.874	92.72
RGB	TD	4:4:4	95	640   480 	63.27	7.338	75.58

tgall@neptune:~/libjpeg8/libjpeg-turbo$ tjbench ../libjpeg-turbo/nightshot_iso_100-640x480.bmp 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	640   480 	179.2	30.16	189.5
RGB	TD	4:2:0	75	640   480 	132.7	25.99	160.1
RGB	TD	4:2:2	75	640   480 	110.3	23.27	133.5
RGB	TD	4:4:4	75	640   480 	84.08	19.56	109.9

</pre>

==== imx53 quickstart board 1 Gz ====
* libjpeg-turbo (current r710)

<pre>
./tjbench ./nightshot_iso_100.ppm 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	3136  2352	20.42	18.87	39.16
RGB	TD	4:2:0	95	3136  2352	19.78	15.53	23.29
RGB	TD	4:2:2	95	3136  2352	16.15	13.48	19.89
RGB	TD	4:4:4	95	3136  2352	11.57	10.84	21.15

tgall@despina:~/libjpeg8/libjpeg-turbo$ ./tjbench ./nightshot_iso_100.ppm 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	3136  2352	23.53	58.51	56.45
RGB	TD	4:2:0	75	3136  2352	23.67	48.08	30.85
RGB	TD	4:2:2	75	3136  2352	19.06	41.85	25.88
RGB	TD	4:4:4	75	3136  2352	15.25	34.09	28.93

and with the smaller 640x480 image

tgall@despina:~/libjpeg8/libjpeg-turbo$ ./tjbench ./nightshot_iso_100-640x480.bmp 95 -rgb -quiet

All performance values in Mpixels/sec
Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	640   480 	18.62	12.30	34.12
RGB	TD	4:2:0	95	640   480 	19.10	10.20	21.83
RGB	TD	4:2:2	95	640   480 	14.96	8.874	17.92
RGB	TD	4:4:4	95	640   480 	12.68	7.338	18.94

tgall@despina:~/libjpeg8/libjpeg-turbo$ ./tjbench ./nightshot_iso_100-640x480.bmp 75 -rgb -quiet

All performance values in Mpixels/sec
Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	640   480 	21.88	30.16	47.88
RGB	TD	4:2:0	75	640   480 	23.77	25.99	28.49
RGB	TD	4:2:2	75	640   480 	18.25	23.27	23.17
RGB	TD	4:4:4	75	640   480 	15.68	19.56	25.83
</pre>

==== imx53 quickstart board 1 Gz ====
* libjpeg8c
<pre>
tgall@despina:~/libjpeg8/libjpeg8/tjbench2$ ./tjbench ./nightshot_iso_100.ppm 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	3136  2352	9.961	18.87	19.89
RGB	TD	4:2:0	95	3136  2352	4.927	15.45	7.040
RGB	TD	4:2:2	95	3136  2352	4.761	13.44	7.756
RGB	TD	4:4:4	95	3136  2352	4.114	10.84	6.834

tgall@despina:~/libjpeg8/libjpeg8/tjbench2$ ./tjbench ./nightshot_iso_100.ppm 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	3136  2352	12.15	58.51	29.67
RGB	TD	4:2:0	75	3136  2352	5.424	47.97	8.113
RGB	TD	4:2:2	75	3136  2352	5.330	41.80	9.377
RGB	TD	4:4:4	75	3136  2352	4.662	34.09	9.544

tgall@despina:~/libjpeg8/libjpeg8/tjbench2$ ./tjbench ./nightshot_iso_100-640x480.bmp 95 -rgb -quiet

All performance values in Mpixels/sec
Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	640   480 	9.026	12.30	18.10
RGB	TD	4:2:0	95	640   480 	5.007	10.15	7.219
RGB	TD	4:2:2	95	640   480 	4.540	8.835	7.351
RGB	TD	4:4:4	95	640   480 	3.908	7.338	6.601

tgall@despina:~/libjpeg8/libjpeg8/tjbench2$ ./tjbench ./nightshot_iso_100-640x480.bmp 75 -rgb -quiet

All performance values in Mpixels/sec
Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	640   480 	11.14	30.16	25.53
RGB	TD	4:2:0	75	640   480 	5.783	25.92	7.283
RGB	TD	4:2:2	75	640   480 	5.284	23.20	7.828
RGB	TD	4:4:4	75	640   480 	4.589	19.56	7.311
</pre>

==== imx53 quickstart board 1 Gz ====
* libjpeg-turbo (with libjpeg8 compat and env var to not use neon)

<pre>
tgall@despina:~/libjpeg-noneon/libjpeg-turbo$ JSIMD_FORCE_NO_SIMD=1 ./tjbench ../../../testimages/nightshot_iso_100.ppm 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	3136  2352	11.66	18.87	19.73
RGB	TD	4:2:0	95	3136  2352	6.079	15.53	9.169
RGB	TD	4:2:2	95	3136  2352	5.174	13.48	7.828
RGB	TD	4:4:4	95	3136  2352	4.125	10.84	6.828

tgall@despina:~/libjpeg-noneon/libjpeg-turbo/.libs$ JSIMD_FORCE_NO_SIMD=1 ./tjbench ../../../testimages/nightshot_iso_100.ppm 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	3136  2352	12.61	58.51	29.38
RGB	TD	4:2:0	75	3136  2352	6.317	48.08	11.60
RGB	TD	4:2:2	75	3136  2352	5.345	41.85	10.09
RGB	TD	4:4:4	75	3136  2352	4.270	34.09	9.501

tgall@despina:~/libjpeg-noneon/libjpeg-turbo/.libs$ JSIMD_FORCE_NO_SIMD=1 ./tjbench ../../../libjpeg8/libjpeg-turbo/nightshot_iso_100-640x480.bmp 95 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	95	640   480 	11.15	12.30	17.99
RGB	TD	4:2:0	95	640   480 	6.025	10.20	8.800
RGB	TD	4:2:2	95	640   480 	5.067	8.874	7.505
RGB	TD	4:4:4	95	640   480 	4.080	7.338	6.623

tgall@despina:~/libjpeg-noneon/libjpeg-turbo/.libs$ JSIMD_FORCE_NO_SIMD=1 ./tjbench ../../../libjpeg8/libjpeg-turbo/nightshot_iso_100-640x480.bmp 75 -rgb -quiet

All performance values in Mpixels/sec

Bitmap	Bitmap	JPEG	JPEG	Image Image 	Comp	Comp	Decomp
Format	Order	Subsamp	Qual	Width Height	Perf 	Ratio	Perf
RGB	TD	GRAY	75	640   480 	12.25	30.16	25.21
RGB	TD	4:2:0	75	640   480 	6.429	25.99	10.81
RGB	TD	4:2:2	75	640   480 	5.405	23.27	9.388
RGB	TD	4:4:4	75	640   480 	4.346	19.56	8.727
</pre>
