{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

{| class="wikitable"
|-
| <tablebgcolor="#F1F1ED" tablewidth="40%" tablestyle="float:right;font-size:0.9em;margin:0 0 1em 1em;"style="padding:0.25em;"><<BR>>
|}

== Why? ==
You want users of a specific device to be able to very easily flash their devices and benefit from the work you put into the image? Great!

We will hook up your images with `phablet-flash` for you if you just follow the instructions below.

== Prerequisites ==

# Follow our <nowiki>[[Touch-Porting|porting guide]]</nowiki> to produce an image for the device class you're working on.
# Set up a page under `Touch/Devices/<vendor>` using the `Touch/Devices/PortTemplate` page as a template.
# Fill it out as good as you can.
# Add it to <nowiki>[[Touch-Devices|our list of ports]]</nowiki>.

== Storing the image meta-information ==

# Create a Launchpad team for the port maintainers. Use `<vendor>-image-dev` (ie. `i9100-image-dev`) as the name of the team. (Note: ''if `<vendor>` includes a `_` (underscore), please use a `-` (dash) instead''.)
# Make the `phablet-ports-admins` team owner of your team. You can do that easily at `https://launchpad.net/~<vendor>-image-dev/+reassign`. We require this, so that we can easily add more port maintainers in case team members get inactive.
# Set up Bazaar with Launchpad. (Some will have done this already.)
## Register your SSH key in Launchpad: https://launchpad.net/~/+editsshkeys
## Run `bzr launchpad-login <your LP ID>`
# Create a bzr branch with all the necessary information.
## `bzr init <vendor>`
## `cd <vendor>`
## create `manifest.json` and put the URL of your image in there. The notation is in JSON formatand it has the following values:
** Image URLs: You will need to provide URLs to images, which don't require any user interaction for downloading. Just pointing `wget` or `curl` at the URL should do the trick. (`goo.im` or `ubuntuone.com` for example.)
*** '''`device`''' (mandatory): it points to the image you're providing.
*** `ubuntu` (optional): the Ubuntu image, by default it's the latest official Ubuntu image.
** `hash` (optional): hash sum of the current image.
** `hash_func` (optional): either `md5` or `sha256`.
** `revision` (optional): provide a revision for the current image. The easiest is to just use an incrementing number.
** `storage` (optional): specify where the contents of the .zip are pushed. (The i9100 port makes use of this <nowiki>[[http://bazaar.launchpad.net/~i9100-image-dev/phablet-image-info/i9100/view/head:/manifest.json|for example|]]</nowiki>.)
  Something like this could work: <pre>
{
   "device": {
      "uri": "http://goo.im/devs/MaxWallstedt/ubuntu-touch-i9100/current/saucy-preinstalled-armel-i9100.zip",
      "hash": "fdbcaff8c559883497d8598ea077b98b",
      "hash_func": "md5"
   },
   "ubuntu": {
      "uri": "http://cdimage.ubuntu.com/ubuntu-touch-preview/daily-preinstalled/current/saucy-preinstalled-phablet-armhf.zip",
      "hash": "12345678",
      "hash_func": "md5"
   },
   "revision": "42"
}
</pre> or <pre>
{
    "device": "http://goo.im/devs/MaxWallstedt/ubuntu-touch-i9100/current/saucy-preinstalled-armel-i9100.zip"
    "revision": "42"
}
</pre>

<<BR>> Save the file.
## `vi license` and put as much licensing information in there as possible. It's important that users know which blobs/firmware are available under which license.
## `bzr add license manifest.json`
## `bzr commit -m "initial commit"`
## `bzr push --remember lp:~<vendor>-image-dev/phablet-image-info/<vendor>` (ie: `lp:~i9100-image-dev/phablet-image-info/i9100`, note: ''if `<vendor>` includes a `_` (underscore), please use a `-` (dash) instead.'')
# Run saucy and have `phablet-tools` installed, now you can check if it actually works.
## `sudo apt-get install phablet-tools`
## `phablet-flash community --device <vendor>`
# Ask the Phablet Port Admins to enable your device images in `phablet-tools`. Simply use this contact form: https://launchpad.net/~phablet-ports-admins/+contactuser

== Updating the image ==
Once you updated the image, you will want to update the manifest again. Perhaps somebody is going to write a script for this in the future, but in general, you will want to do something like below for your image:

# Change into your local image meta-data branch.
# Run `bzr pull` to make sure you incorporate changes a team member may have done.
# Edit `manifest.json` and update
** the `device` key if the image URL changed,
** the `hash` key if you use it,
** the `revision` key if you use it.
# Run `bzr commit -m "update manifest for new image"`.
# Run `bzr push`.

== Debugging issues ==

Should anything go wrong with the `manifest.json` file, you're going to find out about it very early on. `phablet-flash` should let you know about malformed JSON notation and about unknown, missing or broken keys.

If anything during the download or verification steps should fail, you'll find out about it too.

If there's anything wrong after the download and in the process of flashing you might want to 
* get the copy of `/cache/recovery/last_log` and `/cache/recovery/log` right after flashing.
* try to re-run with `phablet-flash --debug community --device <vendor>` and save the output.

No matter which issue you run into, feel free to talk to us 
* on IRC: <nowiki>[[http://webchat.freenode.net/?channels=ubuntu-touch|#ubuntu-touch on irc.freenode.net]]</nowiki>
* on the mailing list of the <nowiki>[[https://launchpad.net/~ubuntu-phone/+join|ubuntu-phone]]</nowiki> team
Please provide as much info as you can.
