{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

{| class="wikitable"
|-
| <tablebgcolor="#F1F1ED" tablewidth="40%" tablestyle="float:right;font-size:0.9em;margin:0 0 1em 1em;"style="padding:0.25em;"><<BR>>
|}

== General ==

{| class="wikitable"
|-
| Device name
| Huawei Ascend P1
|-
| Code name
| u9200
|-
| Image maintainer(s)
| https://launchpad.net/~jani
|}

== State of things ==

{| class="wikitable"
|-
| <-2> '''Legend'''
|-
| '''State'''
| '''Explanation'''
|-
| <bgcolor="#00FF99"> Perfect
| Everything works, all patches included in Ubuntu proper
|-
| <bgcolor="#FFFFCC"> Working
| Works, minor issues only, some patches pending
|-
| <bgcolor="#FF9999"> W-I-P
| Work in progress
|-
| <bgcolor="#CC3300"> Blocked/Broken
| Severely broken, unusable or progress is blocked
|-
| <bgcolor="#C8C8C8"> Unknown
| Unknown
|}

{| class="wikitable"
|-
| '''What'''
| '''Status/Comments'''
|-
| <bgcolor="#FFFFCC"> Graphics
| Unaccelerated
|-
| <bgcolor="#00FF99"> Boot process
| 
|-
| <bgcolor="#C8C8C8"> Rotation
| 
|-
| <bgcolor="#FF9999"> Cellular Radio
| 
|-
| <bgcolor="#FF9999"> Wireless network
| Wi-Fi not working
|-
| <bgcolor="#FF9999"> Sound
| 
|-
| <bgcolor="#00FF99"> Touch
| 
|-
| <bgcolor="#FF9999"> Camera
| 
|-
| <bgcolor="#C8C8C8"> Video Decode
| 
|-
| <bgcolor="#CC3300"> Suspend/Resume
| 
|-
| <bgcolor="#C8C8C8"> Other
| 
|}

=== Unlocking instructions ===
My device came with unlocked bootloader, so fastboot flash just works.

== Known issues ==

Almost nothing works except booting up into the Ubuntu Touch shell.

== Trying the image ==
<pre>
bzr branch lp:phablet-tools
cd phablet-tools
./phablet-flash community --device u9200
</pre>

=== How to build it yourself ===

Check out the full phablet tree as described in

https://wiki.ubuntu.com/Touch/Building

!! Use the phablet-saucy branch !!

Apply these patches

In frameworks/native
<pre>
diff --git a/services/surfaceflinger/EventThread.cpp b/services/surfaceflinger/EventThread.cpp
index edb9fa5..1f0eb16 100644
--- a/services/surfaceflinger/EventThread.cpp
+++ b/services/surfaceflinger/EventThread.cpp
@@ -277,6 +277,7 @@ Vector< sp<EventThread::Connection> > EventThread::waitForEvent(
                 // use a (long) timeout when waiting for h/w vsync, and
                 // generate fake events when necessary.
                 bool softwareSync = mUseSoftwareVSync;
+                softwareSync = true;
                 nsecs_t timeout = softwareSync ? ms2ns(16) : ms2ns(1000);
                 if (mCondition.waitRelative(mLock, timeout) == TIMED_OUT) {
                     if (!softwareSync) {
</pre>
In system/core 
<pre>
diff --git a/rootdir/init.rc b/rootdir/init.rc
index af04616..b51b6d4 100644
--- a/rootdir/init.rc
+++ b/rootdir/init.rc
@@ -541,7 +541,7 @@ service mdnsd /system/bin/mdnsd
     oneshot
 
 service sensorservice /system/bin/sensorservice
-    class late_start
+    class main
     user system
     group graphics audio camera inet net_bt net_bt_admin net_bw_acct drmrpc input

</pre>

Grab the manifest file from here, put it in .repo/local_manifests/huawei_u9200.xml then run repo sync

https://gist.github.com/janimo/5412625

repo sync will grab the device/ and kernel/ trees for this device from the below URLs

https://github.com/janimo/android_device_huawei_u9200
https://github.com/janimo/android_kernel_huawei_u9200

Now you need to get the proprietary vendor bits without which the image is not working at all.
There are a few ways to do this, 1 being the recommended one if you have a working Android device.

1)Have a device plugged into USB and accessible via adb, then 
<pre>
cd device/huawei/u9200
./extract-files.sh
</pre>

2) Download the updater .zip file from Huawei
http://www.huaweidevice.com/worldwide/downloadCenter.do?method=toDownloadFile&flay=software&softid=NDY4ODc=
unzip it
unpack the resulting UPDATE.APP using this perl script
https://gist.github.com/janimo/5412727
This will results in over a dozen files, blobs corresponding to each partition in the device, unknown_file.12
being the system partition in a fastboot sparse format that needs to be converted in a properly mountable ext4
filesystem image

<pre>
apt-get install android-tools-fsutils
simg2img unknown_file.12 image
mkdir system
sudo mount -o loop image system
</pre>
Now you have the original Android rootfs under system/
In the source tree under device/huawei/u9200, you can call the same extract script telling it to copy from an existing local path instead of adb pulling from a connected device

VENDOR_DIR=/path/to/this/loopmounted/system ./extract_files.sh

3) Get hold of an existing vendor/ dir and just drop it/clone it into under vendor/huawei/u9200

Now on to actually building it:

<pre>
. build/envsetup.sh
brunch u9200
</pre>
The result should be under out/target/product/u9200

You can fastboot flash the boot.img recovery.img system.img and userdata.img partitions,
then boot into recovery and pick sideload in the device.
On your machine
<pre>
adb sideload saucy-preinstalled-touch-armhf.zip
</pre>

That zip being whatever Ubuntu image you download from
http://cdimage.ubuntu.com/ubuntu-touch/daily-preinstalled/

=== Redistributability ===

The proprietary blobs are probably not redistributable.
