{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Firmware Test Suite - dmar test ===

The dmar test is an experimental test (and hence is not yet guaranteed to give reliable results across all platforms because of lack of exhaustive testing).  The test attempts to sanity check the ACPI DMA Remapping (DMAR) table, see <nowiki>[[http://download.intel.com/technology/computing/vptech/Intel(r)_VT_for_Direct_IO.pdf|Intel(r)_VT_for_Direct_IO.pdf]]</nowiki> for mmore information about the DMAR table.

The test will:

* Try to load the DMAR table
* Check the DMAR table size
* Check each DMAR entry.
* Sanity check Reserved Memory Region Reporting (RMRR) Range addresses
* Sanity check DMA Remapping Hardware Unit Definition (DRHD) register addresses, DRHR include_all flags and device scoping.

==== Examples: ====

<pre>
sudo fwts dmar - 
</pre>

..runs the test on your machine and dumps the output to stdout.

<pre>
sudo fwts dmar
</pre>

..runs the test on your machine and appends the output to the default log file results.log

=== Explanation of test results ===

Certain test results may require a little more explanation. This section will try and give some context to specific test failures.

{| class="wikitable"
|-
| Error ID
| Explanation
|-
| Invalid``Dev``Scope
| Device scope entry is too short. See section 8.3.1. of the <nowiki>[[http://download.intel.com/technology/computing/vptech/Intel(r)_VT_for_Direct_IO.pdf|VT for Direct IO reference guide]]</nowiki>.
|-
| Dev``Scope``Type``No``Match
| Device scope type not match expected type.
|-
| Invalid``DRHD`Reg``Addr
| Invalid DRHD register address. It nees to be 4K aligned.
|-
| Multiple``DRHDS``Flag
| Multiple DRHDs have the INCLUDE_PCI_ALL flag set, apparently this is not allowed.
|-
| Invalid``RMRR``Range``Addr
| Invalid RMRR register address. It nees to be 4K aligned.
|-
| Invalid``DMAR
| Invalid DMAR table - shorter than the expected header size.
|-
| DMAR``Error
| Kernel has found a DMAR error and reported so in the kernel log.
|}
