{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* Launchpad Entry: [WWW] https://launchpad.net/distros/ubuntu/+spec/flash-install
* Created: 2006-12-20 by MattMossholder
* Contributors: MattMossholder
* Packages affected:

== Summary ==

This is a first pass at running Edgy off of a 256MB Compact Flash module, attached via an CF->IDE adapter. Most of the removals were based on this small amount of disk space, and the minimal requirements of the system (a digital picture frame, pulling images off of an NFS server). The directory structure was created in a chroot on an ext3 FS on my desktop system, and then copied to the flash.

== Rationale ==
The concepts here should allow for a fast booting, reliable OS, with fewer moving parts. It is somewhat similar to what MS is doing in Vista, but rather than caching an image of the common OS files to flash, this just runs the whole OS off of flash.

Given that CF->IDE adapters can be had for $9.99 on NewEgg and various other sites, this might make a great way to run a full fledged Ubuntu system. Hard drives would have more opportunity to spin down. Important files could be mirrored to the flash for a quick, portable backup.

== Use cases ==

Candice wants a to reduce boot times on her system. Installing Ubuntu onto the flash allows Candice's system to boot in ''X'' seconds.

== Scope ==

== Design ==

== Implementation ==

apt-get install debootstrap<<BR>>
mkdir ''<install target dir>''<<BR>>
debootstrap edgy ''<install target dir>''<<BR>>
mount -o bind /proc ''<install target dir>''/proc<<BR>>
mount -o bind /dev ''<install target dir>''/dev<<BR>>
chroot ''<install target dir>''<<BR>>
vi /etc/apt/sources.list  ''(add universe for feh)''<<BR>>
apt-get update<<BR>>
apt-get install linux-image-generic ''(Answer no to aborting)''<<BR>>
apt-get install xserver-xorg-core xinit feh language-pack-en<<BR>>
apt-get install lilo ''(say "OK" to the message that you need to run liloconfig)''<<BR>>
apt-get remove ubuntu-minimal netcat xserver-xorg-input-all xserver-xorg-input-elographics xserver-xorg-input-synaptics xserver-xorg-input-wacom xserver-xorg-video-all xserver-xorg-video-apm xserver-xorg-video-ark xserver-xorg-video-ati xserver-xorg-video-chips xserver-xorg-video-cirrus xserver xorg-video-cyrix xserver-xorg-video-dummy xserver-xorg-video-glint xserver-xorg-video-i128 xserver-xorg-video-i740 xserver-xorg-video-i810 xserver xorg video-imstt xserver-xorg-video-mga xserver-xorg-video-neomagic xserver-xorg-video-newport xserver-xorg-video-nsc xserver-xorg-video-nv xserver-xorg video-rendition xserver-xorg-video-s3virge xserver-xorg-video-savage xserver-xorg-video-siliconmotion xserver-xorg-video-sis xserver-xorg-video-sisusb xserver-xorg-video-tdfx xserver-xorg-video-tga xserver-xorg-video-trident xserver-xorg-video-tseng xserver-xorg-video-v4l xserver-xorg-video-via xserver-xorg-video-vmware xserver-xorg-video-voodoo<<BR>>
rm -rf /etc/cron.*<<BR>>
rm -rf /usr/share/doc<<BR>>
rm /var/cache/apt/archives/*<<BR>>
rm -rf /usr/share/sounds ''(unless you want the test tones for determining sound channels)''<<BR>>
rm -rf /usr/share/man ''(unless you want man pages and have the space)''<<BR>>
rm /etc/mtab <<BR>>
ln -s /proc/mount /etc/mtab<<BR>>

''update /etc/fstab to ensure root fs is mounted with noatime option''<<BR>>
''update /etc/init.d/mountkernfs <<BR>>
These lines ensure that these directories are mounted in a tmpfs rather than letting the system write them to flash. As a result, the system can run with the rootfs mounted as readonly<<BR>>
	Add these lines after /var/lock gets mounted:''<<BR>>

        domount tmpfs /var/lib/nfs "-o mode=0755"<<BR>>
        domount tmpfs /var/lib/dhcp3 "-o mode=0755"<<BR>>
        domount tmpfs /tmp "-o mode=1777"<<BR>>
        domount tmpfs /var/log "-o mode=1777"<<BR>>
        domount tmpfs /var/lib/urandom "-o mode=0755"<<BR>>
# only needed if you are running nfs...<<BR>>
        mkdir /var/lib/nfs/rpc_pipefs/<<BR>>
        mkdir /var/lib/nfs/sm<<BR>>
        mkdir /var/lib/nfs/sm.bak<<BR>>
<<BR>>
setup network interfaces in /etc/network/interfaces<<BR>>
/usr/bin/Xorg --configure    - generate (or copy in) /etc/X11/xorg.conf<<BR>>
remove syslog from rc.d dirs. (or set to log remotely)<<BR>>
add following to /etc/inittab:<<BR>>
# 8:23:respawn:/usr/bin/xinit /usr/local/bin/slideshow<<BR>>
copy in /usr/local/bin/slideshow<<BR>>
change filesystem to mount with option ro in fstab<<BR>>
clear out /var/cache/apt/archive<<BR>>
install mbr for lilo
