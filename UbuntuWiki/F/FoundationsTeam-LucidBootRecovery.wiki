{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:foundations-lucid-boot-recovery
* '''Created''': 2009-11-19
* '''Contributors''': ScottJamesRemnant
* '''Packages affected''': mountall

=== Summary ===

Previous releases have provided a "friendly recovery" menu when booting into single-user mode, which provided options for checking filesystems and getting a root shell, intended to allow system recovery.  With the changes to event-based mounting, and system daemon starting, it's often not possible to use this.  This specification covers replacing this with more useful handling of filesystem check failure.

=== Release Note ===

Ubuntu 10.04 features improved handing of filesystem check failures and mount errors, with a more friendly recovery process than dropping straight to a maintenance shell.

=== Rationale ===

Filesystem checks and mount failures are an unfortunate problem that can bring a halt to the boot, and be difficult for novice users to recover from.

=== Implementation ===

==== mountall ====

When mountall is notified of a filesystem check failure (with the default "preen" option), instead of exiting it will use plymouth to inform the user that the check has failed and ask whether to try again to fix the options, ignore the filesystem (don't mount either) or to drop to a maintenance shell.

If the fix filesystem check fails, the option will be to ignore the filesystem or to drop to a maintenance shell.

Should a filesystem fail to mount, the options will be to ignore the failure or to drop to a maintenance shell.  Ignoring will still allow mountall to try again later should other filesystems come up.

Mountall reaching a point where there are filesystems remaining to mount but no progress being made will result in an option to continue the boot without mounting or drop to the maintenance shell.

==== forced filesystem check ====

A boot loader option to force filesystem checks will replace the existing "recovery mode" option, this will cause mountall to pass -f to fsck (much as the old /forcefsck file would) if you believe there are problems with the filesystems.

==== maintenance shell ====

A boot option will permit going straight to a maintenance shell, consisting of a statically linked shell logged in as root.  This may not be a normally visible option.

----
CategorySpec
