{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:jaunty-apturl-add-repo
* '''Created''': MichaelVogt
* '''Contributors''': 
* '''Packages affected''': apturl

=== Summary ===

Apturl currently does not allow adding new repositories for security reasons. This limits its usefulness, there are certain repositories that show high quality and good QA. So we should add a whitelist feature to apturl so that we can add trusted repositories. The criteria/policy that such a repository must follow is discussed in the separate blueprint "partner-repositories".
<pre> comment/dotted
why can the user be warned about QA and security and install whatever repo they want?
--zerothis
</pre>
=== Release Note ===

TBD

=== Rationale ===

There are repositories with good QA and high standards (like the Canonical partner repository) that are useful to add via apturl.
<pre> comment/dotted
User should be allowed, after a warning, to install whatever repo they want.
--zerothis
</pre>

=== Use Cases ===

1. Jane wants to install the Adobe Flash plugin from the partner repository. She goes to the Adobe site and clicks on the "Install Flash" button that calls apturl with the right parameters. The partner repository is added and Flash is installed with a single click.
<pre> comment/dotted
Jain wants to install wine. She goes to the wine site and clicks on the "Install Wine" button that calls apturl with the right parameters. She is warned. If she accepts, the repository, and its key, is added and wine is installed with a single click.
--zerothis
</pre>

=== Assumptions ===

We only add repositories that are high quality and have a good QA record.
<pre> comment/dotted
We don't interferer with what informed users are allowed to install in this manor
--zerothis
</pre>

=== Design ===

Apturl will use the "channel" mechanism that gnome-app-install uses with the app-install-data-partner package. A new key is added to the apturl URL spec named "channel" that gets a "value" that denotes to the channel that should be added (if not already there). E.g. "apturl:adobe-flashplugin?channel=$distro-partner".

In addition two new substitutions will be added: $distro which will be expanded locally to the value of the currently installed distribution codename (lsb_release -c -s), and $kernel which will be expanded to "uname -r". This is useful because the distro codename is part of the partner repository name.
<pre> comment/dotted
and the key?
--zerothis
</pre>

=== Implementation ===

Steps to implement:
# add "channel=value" to apturl parser and GUI
# implement the substitution
# rename "app-install-data-commercial" to "app-install-data-partner" to reflect the status better
# put the trusted repo sources.list and signing keys into app-install-data-partner

==== UI Changes ====

None
<pre> comment/dotted
warning and and the key?
--zerothis
</pre>

=== Test/Demo Plan ===

Add the channel to http://people.ubuntu.com/~mvo/test/apturl.html and write unit tests for the substitutions and the channel adding.

=== Alternate/Additional features ===
<pre> comment/dotted
I apologize if I have placed this these comment in the wrong area or the wrong way. please inform me, z_e_r _o_t_h_i_s_._u_v_l_@_g_m_a_i_l_._c_o_m
</pre>
Instead of a whitelist, popup a warning and let the user decide.

{| class="wikitable"
|-
| <-6 style="border: none;">A website is attempting to add a software repository to your system. If you did not specifically intend for this to happen it may be an attack. Please review the information about the repository below before allowing it to be added:
|-
| <-3 style="border: none;">
|-
| <-3 style="border: none;">Origin: http://www.macroshystistrustworhty.com
|-
| <-3 style="border: none;">deb line: deb http://www.macroshyst.com jaunty main
|-
| <-3 style="border: none;">Repo info: Lots of trustworthy software
|-
| <-3 style="border: none;">Key info: Macroshyst, Inc (you can trust us) <info@macroshyst.com>
|-
| <-3 style="border: none;">Key: 1UFS4E5RAS2SCU5C5K5A8NFDFSAH9O4U5L6DBWCO8R8S7H2I3PFUFS
|-
| <-6 ) style="border: none;">[x]Do not import key
|-
| <-3 style="border: none;">
| deny
| <style="border: none;">
| allow
|}

----
CategorySpec
