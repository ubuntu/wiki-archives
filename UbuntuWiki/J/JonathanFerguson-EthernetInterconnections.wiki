{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

{| class="wikitable"
|-
| <#ee82ee>The following is solely authored by Jonathan Ferguson, and is henceforth referred to as Congruent Networks℠
|}
<<BR>>'''~+Ethernet Interconnections along with Private Interconnection+~'''
<<BR>>
<<BR>>'''The alternatives for Ethernet interface configuration are either __Repeater__ or __Link Aggregation Control Protocol__'''
<<BR>>
<<BR>><nowiki>[[File:Ethernets.svg]]</nowiki>
<<BR>>A pictorial representation of the interface hierarchy for both methodologies
<<BR>>
<<BR>>
<<BR>>__~+Repeater+~__
<<BR>>
<<BR>>Create the bonding interface and a bridge interface for each enslaved physical Ethernet interface:
<<BR>>`sudo nmcli connection add type bond con-name bond0 ifname bond0 mode broadcast ipv6.addr-gen-mode eui64 ipv6.ip6-privacy 0 ipv6.may-fail false autoconnect yes`
<<BR>>`sudo nmcli connection add type bridge con-name bridge0 ifname bridge0 bridge.multicast-querier yes bridge.stp yes stp yes multicast-snooping yes master bond0 autoconnect yes`
<<BR>>`sudo nmcli connection add type bridge con-name bridge1 ifname bridge1 bridge.multicast-querier yes bridge.stp yes stp yes multicast-snooping yes master bond0 autoconnect yes`
<<BR>>`sudo nmcli connection add type ethernet con-name `''eth__0__''` ifname `''eth__0__''` master bridge`__0__` autoconnect yes`
<<BR>>`sudo nmcli connection add type ethernet con-name `''eth__1__''` ifname `''eth__1__''` master bridge`__1__` autoconnect yes`
<<BR>>
<<BR>>Optional VLAN creation:
<<BR>>`sudo nmcli connection add type bridge con-name bond0.0 ifname bond0.0 bridge.multicast-querier yes bridge.stp yes stp yes multicast-snooping yes ipv6.addr-gen-mode eui64 ipv6.ip6-privacy 0 ipv6.may-fail false bridge.vlan-protocol 802.1ad bridge.vlan-stats-enabled true master bond0 slave-type bridge autoconnect yes`
<<BR>>`sudo nmcli connection add type bridge con-name bond0.0.0 ifname bond0.0.0 bridge.multicast-querier yes bridge.stp yes stp yes multicast-snooping yes ipv6.addr-gen-mode eui64 ipv6.ip6-privacy 0 ipv6.may-fail false bridge.vlan-protocol 802.1Q bridge.vlan-stats-enabled true master bond0.0 slave-type bridge autoconnect yes`
<<BR>>`sudo nano `<nowiki>[[attachment:bond0.0.netdev|-etc-systemd-network-bond0.0.netdev]]</nowiki>
<<BR>>`sudo nano `<nowiki>[[attachment:bond0.0.network|-etc-systemd-network-bond0.0.network]]</nowiki>
<<BR>>`sudo nano `<nowiki>[[attachment:bond0.0.0.netdev|-etc-systemd-network-bond0.0.0.netdev]]</nowiki>
<<BR>>`sudo nano `<nowiki>[[attachment:bond0.0.0.network|-etc-systemd-network-bond0.0.0.network]]</nowiki>
<<BR>>
<<BR>>
<<BR>>__~+Link Aggregation Control Protocol+~__
<<BR>>
<<BR>>Create the bridging and bonding interfaces and enslave the physical Ethernet interfaces:
<<BR>>`sudo nmcli connection add type bridge con-name bridge0 ifname bridge0 bridge.multicast-querier yes bridge.stp yes stp yes multicast-snooping yes ipv6.addr-gen-mode eui64 ipv6.ip6-privacy 0 ipv6.may-fail false autoconnect yes`
<<BR>>`sudo nmcli connection add type bond con-name bond0 ifname bond0 mode 802.3ad master bridge0 autoconnect yes`
<<BR>>`sudo nmcli connection add type ethernet con-name `''eth0''` ifname `''eth0''` master bond0 autoconnect yes`
<<BR>>`sudo nmcli connection add type ethernet con-name `''eth1''` ifname `''eth1''` master bond0 autoconnect yes`
<<BR>>
<<BR>>Optional VLAN creation:
<<BR>>`sudo nmcli connection add type bridge con-name bridge0.0 ifname bridge0.0 bridge.multicast-querier yes bridge.stp yes stp yes multicast-snooping yes ipv6.addr-gen-mode eui64 ipv6.ip6-privacy 0 ipv6.may-fail false bridge.vlan-protocol 802.1ad bridge.vlan-stats-enabled true master bridge0 autoconnect yes`
<<BR>>`sudo nmcli connection add type bridge con-name bridge0.0.0 ifname bridge0.0.0 bridge.multicast-querier yes bridge.stp yes stp yes multicast-snooping yes ipv6.addr-gen-mode eui64 ipv6.ip6-privacy 0 ipv6.may-fail false bridge.vlan-protocol 802.1Q bridge.vlan-stats-enabled true master bridge0.0 autoconnect yes`
<<BR>>`sudo nano `<nowiki>[[attachment:bridge0.0.netdev|-etc-systemd-network-bridge0.0.netdev]]</nowiki>
<<BR>>`sudo nano `<nowiki>[[attachment:bridge0.0.network|-etc-systemd-network-bridge0.0.network]]</nowiki>
<<BR>>`sudo nano `<nowiki>[[attachment:bridge0.0.0.netdev|-etc-systemd-network-bridge0.0.0.netdev]]</nowiki>
<<BR>>`sudo nano `<nowiki>[[attachment:bridge0.0.0.network|-etc-systemd-network-bridge0.0.0.network]]</nowiki>
<<BR>>
<<BR>>
<<BR>>__~+Private Interconnection+~__
<<BR>>
<<BR>>Pseudo Wire Emulation Edge-to-Edge configuration: — A work in progress
<<BR>>`sudo /sbin/modprobe -av nf_defrag_ipv4 nf_defrag_ipv6`
<<BR>>`sudo ip l2tp add tunnel encap udp name `''l2tp__eth2__''` tunnel_id `__1__` local `<This eth2 IP address>` udp_sport 1701 peer_tunnel_id `__1__` remote `<That eth2 IP address>` udp_dport 1701`
<<BR>>`sudo ip l2tp add session name `''l2tp__eth2__''` tunnel_id `__1__` session_id `__1__` peer_session_id `__1__
<<BR>>`sudo /sbin/tc qdisc replace dev `''l2tp__eth2__''` root pfifo`
<<BR>>`sudo ip link set `''l2tp__eth2__''` master `<bond0 || bridge0>` up`
<<BR>>`sudo nmcli connection reload`
<<BR>>Verify:
<<BR>>`lsmod | grep nf_defrag`
<<BR>>`lsmod | grep l2tp`
<<BR>>`sudo ip l2tp show tunnel`
<<BR>>`sudo ip l2tp show session`
<<BR>>`/sbin/bridge fdb show dev `''l2tp__eth2__''
<<BR>>If you wish to bring down the Ethernet tunnel:
<<BR>>`sudo ip l2tp del session tunnel_id `__1__` session_id `__1__
<<BR>>`sudo ip l2tp del tunnel tunnel_id `__1__
<<BR>>Verify:
<<BR>>`sudo ip l2tp show session`
<<BR>>`sudo ip l2tp show tunnel`
<<BR>>
<<BR>><nowiki>[[File:L2TPv3.svg]]</nowiki>
<<BR>>The number of physical interfaces in green should equal those in blue and orange - due to Ethernet being a non-multiplexed medium.  TRansparent Interconnection of Lots of Links supersedes  Spanning Tree Protocol and LACP.  Ideally the green interfaces would be grouped into a single RBridge which would then itself be a routing interface, rather than having separate routing interfaces to the same entity depicted in the cloud.
<<BR>>
<<BR>>
----
''<nowiki>[[http://Jonathan-Ferguson.au/|Jonathan Ferguson]]</nowiki>, <nowiki>[[https://wiki.edubuntu.org/JonathanFerguson|Ubuntu Wiki]]</nowiki>, <nowiki>[[https://wiki.edubuntu.org/JonathanFerguson/EthernetInterconnections|Ethernet Interconnections]]</nowiki>, <nowiki>[[https://wiki.edubuntu.org/JonathanFerguson/EthernetInterconnections]]</nowiki>''
----
