{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* '''Test plan for component''': Mir
* '''Trunk URL''': <nowiki>[[https://github.com/MirServer/mir/|github:MirServer/mir]]</nowiki>
* '''Ubuntu Package URL (LP)''': http://launchpad.net/ubuntu/+source/mir

=== Test Plan ===

'''This test plan is not supposed to be complete; use it to guide your manual testing so they don't miss big functional areas that are part in the component; also this should be used as guideline to inspire the exploratory testing which should be adapted smartly based on the real content of a release'''

* Successful run of automated CI testing
* Mir Test Plan (from ppa:mir-team/rc)
* Mir Snaps Test Plan

==== Mir Test Plan ====

===== Test Matrix =====
{| class="wikitable"
|-
| '''Platform'''
| 24.04LTS
| 22.04LTS
| 24.10
|-
| gbm-kms
| 
| 
| 
|-
| gbm-x11
| 
| 
| 
|-
| gbm-wayland
| 
| 
| 
|-
| eglstream-kms
| 
| 
| 
|-
| virtual
| 
| 
| 
|}

{| class="wikitable"
|-
| '''Console'''
| 24.04LTS
| 22.04LTS
| 24.10
|-
| minimal
| 
| 
| 
|-
| linux-VT
| 
| 
| 
|-
| logind
| 
| 
| 
|}

{| class="wikitable"
|-
| '''WM'''
| 24.04LTS
| 22.04LTS
| 24.10
|-
| floating
| 
| 
| 
|-
| tiling
| 
| 
| 
|-
| kiosk
| 
| 
| 
|}

* In addition update desktop from archive
** Install packages from the <nowiki>[[https://launchpad.net/~mir-team/+archive/ubuntu/rc|release candidate PPA]]</nowiki>:
** $ '''sudo add-apt-repository --update ppa:mir-team/rc'''
** $ '''sudo apt install mir-demos mir-platform-graphics-virtual mir-graphics-drivers-desktop mir-test-tools'''
** Install applications to test with:
** Qt Wayland support, qterminal and kate to test with:
*** $ '''sudo apt install qtwayland5 kate qterminal'''
** Install weston-terminal:
*** $ '''sudo apt install weston'''
** Install glmark2:
*** $ '''sudo apt install glmark2-wayland'''

* `miral-app` options for testing specific features:
** Console provider
** `--console-provider=vt --vt=4`
*** This requires running with root privileges
*** Need to ensure that `XDG_RUNTIME_DIR` is set in the environment. If using `sudo`, it might strip this out; running something like `sudo env XDG_RUNTIME_DIR=/run/user/1000 miral-shell â€¦` will ensure this is set.
** `--console-provider=logind`
*** Switch to VT4, sign in and `miral-app ...`
** `--console-provider=minimal`
*** Used when all others fail.
*** Does not provide VT switching capabilities (Ctrl-Alt-F1, etc)
*** Used for the gbm-x11, gbm-wayland & virtual platforms
** Window Manager
** `--window-manager=tiling`
** `--window-manager=floating`
** `-kiosk`
** Testing specific platforms
** `--platform-display-libs=mir:$NAME --platform-rendering-libs=mir:$NAME`
*** Platform
**** X11: Use an X11 supporting desktop
**** virtual: `--platform-display-lib=mir:virtual --virtual-output=1280x1024`
**** Also add wayvnc support: `--add-wayland-extension=zwp_virtual_keyboard_manager_v1:zwlr_virtual_pointer_manager_v1:zwlr_screencopy_manager_v1`
**** In a separate terminal run: `WAYLAND_DISPLAY=wayland-1 ubuntu-frame-vnc`
**** In a separate terminal run: `gvncviewer localhost`
**** wayland: `--platform-display-lib=mir:wayland --wayland-host=$WAYLAND_DISPLAY`
** Some tests
*** Run the "smoke tests" to ensure the example clients work
**** Start a terminal sessions to launch the tests.
**** $ '''mir-smoke-test-runner'''
**** Check the result is "I: Smoke testing complete with returncode 0"
*** try some apps
*** $ '''miral-app'''
*** [in the nested session] Try running, resizing, moving and switching between the following:
**** $ '''kate'''
**** $ '''gnome-terminal'''
**** $ '''weston-terminal'''
**** $ '''glmark2-es2-wayland'''

** Run a test "tiling desktop" session
*** $ '''miral-app --window-manager tiling'''
*** Try running, and switching between the following:
*** $ '''kate'''
*** $ '''gnome-terminal'''
*** $ '''weston-terminal'''
*** $ '''glmark2-es2-wayland'''

==== Mir Snaps Test Plan ====

There are several snaps to consider
* mir-test-tools
* ubuntu-frame
* confined-shell
* miriway

We give detailed instructions only for mir-test-tools as the pattern is obvious.

* Verify that the snaps works
These tests should work on all supported series of Classic and on Ubuntu Core. First check that the `beta` channel has been updated with the release candidate:

** $ '''snap info mir-test-tools'''

This should show something like:

** '''24/beta:          2.17.0~rc5-snap165    2024-05-08 (15097) 105MB -'''

Where the version (2.17.0~rc5-snap165) matches the release being tested.

** $ '''snap install --channel=24/beta mir-test-tools'''

There's a "handy script" to test the snap on the Wiki:

** https://github.com/MirServer/mir-test-tools/wiki/Notes

Copy this and run it.
