{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* '''Test plan for component''': sync-monitor
* '''Component Checklist''': https://wiki.ubuntu.com/Process/Merges/Checklists/system-apps
* '''Trunk URL''': lp:sync-monitor
* '''Ubuntu Package URL (LP)''': http://launchpad.net/ubuntu/+source/sync-monitor

=== Dependents/Clients ===

None

=== Test Account ===

You can use Uphablet account to run these tests, it is configured with multiple types of calendar:

user: uphablet@gmail.com
password: ubuntuphablet

=== Test Plan ===

'''This test plan is not supposed to be complete; use it to guide your manual testing so they dont miss big functional areas that are part in the component; also this should be used as guideline to inspire the exploratory testing which should be adapted smartly based on the real content of a MP'''

* Make sure that you have internet connection on phone
* Install latest image on phone
* Install freshly build MPs that are needed for landing
   - Reboot the device (or restart sync-monitor)

* Add a google on-line account (with calendar events)
** Test if the sync will start (a notify message will appear)
** Test if the sync will finished successful (a notify message will appear)
** Test if all calendar and events was imported from the google account
 
* Test Accounts
** test that when you create a Google account, Calendar does not show up unless Calendar app > 0.4.476 is installed
** test that when Calendar app > 0.4.476 is uninstalled that the Calendar option is removed from Accounts

* Test Network
** offline mode
** enable flight mode
** edit a remote event in ubuntu-calendar app
** tail -f ~/.cache/upstart/sync-monitor.log on device
** verify the sync does not occur while offline
** disable flight mode
** verify the sync happens 60 seconds after back online
** sync after boot
** enabled flight mode
** reboot device
** verify there are no sync errors popups on boot as sync should not be occurring
** offline during sync
** tail -f ~/.cache/upstart/sync-monitor.log on device
** edit a event in ubuntu-calendar app
** as soon as sync starts (as seen in log), enable flight mode
** verify that the sync gets aborted (as seen in log)
** wait a few minutes, then disable flight mode
** verify that sync will run again when back online
** after sync runs, edit another event and verify a sync will run
** Sync on 4g/3g/2g (create new account)
** turn off wifi
     - make sure that you have a mobile data connection working
** open ubuntu-calendar-app
** choose the option to create a new account
     - fill the necessary information
** After go back to the app check if the calendar sync started
** Sync on 4g/3g/2g (manual sync)
** turn off wifi
     - make sure that you have a mobile data connection working
** Edit any event
** wait for 3 min and make sure that the event did not sync automatically
** click on sync button wait for the sync finish and check if the events got update on google
** turn the wifi on
** check if the sync does not happen (you did the manual sync already)
** Sync on 4g/3g/2g (sync pending jobs over wifi)
** turn off wifi
     - make sure that you have a mobile data connection working
** Edit any event
** wait for 2 min and make sure that the event did not sync automatically
** turn on the wifi
** wait for 2 min and check if the event got synced with your google account
* Test calendar sync speed
** setup a Google online account for your canonical.com account
** enabled calendar sync
** verify that the sync completes in < 1-2 minutes. You can check the ~/.cache/upstart/sync-monitor.log by looking for 'Sync Done: Duration XXseconds'
* Test invalid account token (fail to sync)
** setup a Google online account
** sync calendar with this account from calendar-app
** go to http://myaccount.google.com/ click on "Account permissions" item
** select ubuntu from the list
** click on "revoke access" button on the top right
** Try to sync calendar again from calendar-app
** A notification should appear asking if you want to re-new your account toke
** Click on yes
** A sync-monitor helper app should appear asking to click on the account to re-authenticate
** After clicking on the account you need to approve the permissions again
** After approve the permissions the application should close
** Go to calendar and try to sync (it should works now)
* Test sync interval update (Calendar)
** Create your google account
** Do the first sync
** edit the files bellow adding a new line with the following value "syncInterval = 10":
** /home/phablet/.config/syncevolution/default/sources/<account_id><calendar_name>/config.ini
** /home/phablet/.config/syncevolution/<provider>-<account_id>/sources/<account_id><calendar_name>/config.ini
** Reboot the device (or kill sync-monitor and all syncevolution running process)
** Do a new sync and check if it still working
** Create a event 20 days in the past
** Do a sync and make sure that this event does not get uploaded

* Test multiple calendar sync:
** Open calendar app and select calendars list page:
*** click to add a new google account;
*** Enter the information for a google account with multiple calendars;
*** Make sure that a notification about calendar sync start appears;

** Go back to the week or day view and wait until the sync finish;
*** Make sure that a notification about calendar sync finished appears;
*** Make sure that the view is updated with events from all calendars;

** Go to calendar list;
*** Make sure that all the selected calendars on google side is listed in the app;
*** Make sure that the calendars colors match with google colors;

** Create/Edit/Delete any event:
*** Make sure that only affected calendar get sync after 5min. (you can monitor that on sync-monitor log: ~/.cache/upstart/sync-monitor.log)
 
** Test create a new calendar on your google account using the web browser:
*** Make sure that new calendar appear on the app after the next sync;
  
** Test remove/unselect/unsubscribe from any of the calendars using the web browser;
*** Make sure that the calendar get removed from the app;
**** OBS: Needs manual sync to remove a calendar

 
* Teste read-only calendars:
** Make sure that you google account has at least one read-only calendar;
** Sync this account;
** Wait until the sync finish;
** Make sure that you can not drag events from read-only calendars;
** Click on an event from this calendar;
*** Make sure that edit button is disabled;
** Go to new event page:
*** Make sure that the read-only calendar does not appear on calendars combo box;     
 
