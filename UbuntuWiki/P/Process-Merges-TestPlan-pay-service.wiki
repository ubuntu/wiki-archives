{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* Test plan for component pay-service

** Development branch URL lp:pay-service
** Ubuntu Package URL: https://launchpad.net/ubuntu/+source/pay-service

-------------------

== Test Plan ==

As pay-service is a system level service with no UI, there are no direct manual tests here. Instead, to verify pay-sevice merge proposals, you should run through the <nowiki>[[Process-Merges-TestPlan-pay-ui|pay-ui test plan]]</nowiki> to ensure nothing is broken by the changes to pay-service, in addition to the tests below.

This test plan is not supposed to be complete; use it to guide your manual testing so they don't miss big functional areas that are part in the component; also this should be used as guideline to inspire the exploratory testing which should be adapted smartly based on the real content of a MP

=== Test Setup ===
* Install latest (devel-proposed, rc-proposed) image on phone
* Install freshly built MPs from silo PPA
* Enable use of the staging server:
** Log in to the phone with "phablet-shell" and run /usr/lib/*/pay-service/setup-staging.sh
* Ensure you have a method to pay in USD, GBP, or EUR on https://pay.staging.ubuntu.com/
* Go to the "Ubuntu Store" scope.
** Search for "name:ubuntu-donations.canonical"
** Tap on the "Donate to Ubuntu" app icon
** Tap on the "Install" button
** Log in to a staging "Ubuntu One" account if necessary
** Wait for the app to finish installing, and return to the "Apps" scope
* Open the "Donate to Ubuntu" app from the Apps scope

=== Test Case: pay-service/iap-trust-allow ===
* Tap on one of the buttons showing a monetary value to donate
** A dialog should pop up asking to allow or deny the app to make purchases.
*** No dialog appears if previously denied. Go to System Settings to manage App permissions.
** Tap on the "Allow" button.
* Verify that the payments UI appears and shows the same price and name for the item.
* Tap on the "Cancel" button in the payments UI
* Verify the app is returned to the "Contribute" page

=== Test Case: pay-service/iap-trust-deny ===
* Tap on one of the buttons showing a monetary value to donate
** A dialog should pop up asking to allow or deny the app to make purchases.
*** No dialog appears if previously allowed. Go to System Settings to manage App permissions.
** Tap on the "Deny" button.
* Verify the app is returned to the "Contribute" page

=== Test Case: pay-service/purchase-consumable ===
* Tap on one of the buttons showing a monetary value to donate
** A dialog may pop up asking to allow or deny the app to make purchases.
*** No dialog appears if previously denied. Go to System Settings to manage App permissions.
*** Tap on the "Allow" button, if dialog pops up.
* Verify that the payments UI appears and shows the same price and name for the item.
* Complete the purchase.
* Verify the app is returned to the "Contribute" page

=== Test Case: pay-service/purchase-consumable-again ===
* Perform the "purchase-consumable" test case above.
* Perform the "purchase-consumable" test case a second time.
* Verify the item was able to be purchased twice.
