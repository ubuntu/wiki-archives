{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* '''Test plan for component''': android
* '''Trunk URL''': https://launchpad.net/ubuntu/+source/android
* '''Ubuntu Package URL (LP)''': https://launchpad.net/ubuntu/+source/android

=== Dependencies ===

* android-tools-fsutils
* <nowiki>[[https://code-review.phablet.ubuntu.com/gitweb?p=aosp/platform/build.git;a=blob_plain;f=tools/update-system-img.sh;h=6340875dc112fcd115822a08aded31c71a25f0ca;hb=refs/heads/phablet-4.4.2_r1|update-system-img.sh]]</nowiki>

=== Test Plan ===

Test target device: Nexus 4
Secondary/backup device: Nexus 7 2013 (flo)

Initial set up:
* Install latest image on phone
* Extract the device image from the android debian package:
  <pre>
$ wget https://launchpad.net/~ci-train-ppa-service/+archive/ubuntu/landing-040/+files/android_20150519-2220-0ubuntu5_all.deb
$ dpkg -X android_20150519-2220-0ubuntu5_all.deb .
  </pre>
* Reboot the phone to the bootloader and flash both the boot image and the android system image (make sure to use the files that are compatible with your device:
  <pre>
rsalveti@evasys:/tmp/android$ adb reboot bootloader

rsalveti@evasys:/tmp/android$ fastboot flash boot usr/share/android/product/ubuntu-preinstalled-boot-armhf+mako.img
sending 'boot' (10848 KB)...
OKAY [  0.343s]
writing 'boot'...
OKAY [  0.607s]
finished. total time: 0.950s

rsalveti@evasys:/tmp/android$ fastboot boot usr/share/android/product/ubuntu-preinstalled-recovery-armel+mako.img
downloading 'boot.img'...
OKAY [  0.321s]
booting...
OKAY [  0.050s]
finished. total time: 0.371s

rsalveti@evasys:/tmp/android$ ./tools_update-system-img.sh usr/share/android/product/ubuntu-preinstalled-system-armel+mako.img
Pushing android image available at usr/share/android/product/ubuntu-preinstalled-system-armel+mako.img
Mounting system and data partitions
Checking first for the ubuntu.img bind-mounted solution
Converting android system.img to a valid image format
resize2fs 1.42.12 (29-Aug-2014)
Copying usr/share/android/product/ubuntu-preinstalled-system-armel+mako.img.raw to the ubuntu system image
7713 KB/s (123162624 bytes in 15.593s)
umount: can't umount /data: Device or resource busy
Rebooting device
  </pre>

== Manual Tests ==

* Exploratory testing for all core functionalities, since the android system image is responsible for core pieces of the system:
** Video recording
** Video playback
** Phone calls, sms, data calls
** Audio
** Sensors
 
