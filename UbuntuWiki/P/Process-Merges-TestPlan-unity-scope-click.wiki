{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

* Test plan for component unity-scope-click

** Component checklist https://wiki.ubuntu.com/Process/Merges/Checklists/unity-scope-click  [not there yet]
** Development branch URL lp:unity-scope-click/devel
** Ubuntu Package URL: https://launchpad.net/ubuntu/+source/unity-scope-click

-------------------

== Test Plan ==

This test plan is not supposed to be complete; use it to guide your manual testing so they don't miss big functional areas that are part in the component; also this should be used as guideline to inspire the exploratory testing which should be adapted smartly based on the real content of a MP.

* NOTE: On 16.10 or 16.04+overlay, there may be no store scope available as we move to a snaps-only world, for some time. This is intentional. Please be pragmatic about testing, with this in mind.

* Install latest (devel-proposed) image on phone

* Install freshly built MPs from silo PPA

* Open dash, go to Apps scope
** Check that there are six core apps on top, in the following order: Phone, Messaging, Contacts, Camera, Browser, Clock
** Tap on one of the six core apps. It should launch the app.
** Long press on one of the six core apps. It should show the app preview.
** Check that there is content in the Apps category, alphabetically sorted, and not including any of the core apps mentioned above
** Check that the combo of departments gets filled, and sorted alphabetically
** Check that there are no empty departments (with no apps)
** Verify that all the appropriate apps are listed in the drop-down menu, for the default set of apps (Games for example).
** Check that the "Get more apps from the store" category holds a "Ubuntu Store" item takes you to the Store page.

* Do a search in the Apps scope
** Check result, open app preview by long pressing on the icon
** Verify the preview looks correct (shows app name and description, icon, offers option to Open, Uninstall)
** Check that the Info, Updates, What's new sections are present have have their respective fields.
** Repeat for one of the apps that's still not a click package (eg. browser), it should have Open but not Uninstall.
** Do a Search, and click on the orange card in the bottom under "Search for 'X' in the store", it should open the app store and repeat the search.

* Verify previews for installed apps when Offline
** Set the phone to "Airplane Mode"
** Long press on the "Calculator" application in the Apps scope
** Verify a minimal preview to uninstall/open the app is shown after a minimal amount of time.

* Go to the "Ubuntu Store" scope
** Check that there are a few categories like "Top Apps" and "Top Games" with a few highlighted apps in each.
** Check the category "App of the week", with one big card on top of all other categories
** Check the departments combo is filled with the store departments, and sorted alphabetically
** Select one department with items (currently: Games, Games/Sport and Developer Tools)
** Check that there's a category with highlighted items for the selected department.
** Check that there's a "Apps" category with every app in the department.
** Check that the "Scopes" category is on top of the "Apps" category. (look in some department with scopes, eg: the "Untappd scope" in the "Food & Drink" department) 

* Do a search in the "Ubuntu Store" scope
** Check that the number of results is shown in the category header
** Check result, open app preview
** Verify it offers option to install
** Install, verify progress works correctly
** Verify you can go back and forth in the dash and progress still works (use a larger app, like sleepytime)
** Repeat this whole step, installing a different app
** Verify installed app shows as "✔ INSTALLED" in the results.
** Open the app preview for the installed app, click on Uninstall and verify that the app gets uninstalled and the preview now shows the Install button again. Check on the Apps scope that the app is no longer there.

* Search for some scope (eg: the Instagram scope)
** Install it if you don't have it installed
** Wait it for the installation to finish in the scope preview
** Click on the "Search" button in the scope preview
** Check that the right scope is opened.

* Once installed a new app, go back to the app scope
** Verify that the app is listed in the installed apps list
** Open preview by long pressing, verify data, and Open option
** Open it, verify it runs correctly. If it doesn't, check a few more apps to discard specific app issues.
** Open the app preview by long pressing, click on Uninstall and verify that the scope results are shown again, and that the selected app was uninstalled.

* Test departments support:
** Re-flash your phone with --wipe, make sure internet is not enabled initially and verify that Apps scope displays a departments drop-down at the top, and that preinstalled applications can be found in departments (every application should have a department;  most of them reside in Accessories, Internet and Sound & Video).
** Go to Ubuntu Store. Install a new application, then go back to Apps and verify it appears in the same department as in the Store. Repeat a few times for apps from different departments.
** Reboot the phone. Verify that after reboot the non-standard applications installed in previous steps can still be found in their departments in Apps.
    ----
    To simulate first boot-experience without needing to wipe the device, do the following:
#### Disable networking
#### Make sure click scope is not running (ps aux|grep click).
#### Remove /home/phablet/.cache/click-departments.db*
#### Reboot the phone
    -----
* Test translations support:
** Open the System Settings app, go to Language & Text settings, and choose a Display Language that is not English, such as German or Spanish.
** Confirm the Language setting and reboot the phone.
** Check that the title of both scopes in the header at the top of the screen are translated.
** Check that the titles of categories ("Apps" in the apps scope; "Top Apps" and the other highlights in the store) are translated. (store translations blocked on server bug <nowiki>[[http://pad.lv/1302622|LP#1302622]]</nowiki>)
** Check that some of the apps are translated (System Settings, Contacts, and Media Player should currently work).
** Open preview, verify translated name and description (if available) (blocked on server bug <nowiki>[[http://pad.lv/1302622|LP#1302622]]</nowiki>).

* Check that searches decompose unicode characters: (bug <nowiki>[[http://pad.lv/1378490|LP#1378490]]</nowiki>)
** Set the language to spanish
** Go to the Apps scope
** Search for "Cam"
** Verify that the "Cámara" app is shown

* Test price formatting in ,-format languages:
** Open the System Settings app, go to Language & Text settings, and choose a Display Language of Spanish.
** Confirm the Language setting and reboot the phone.
** Enable use of the staging server:
*** Log in to the phone with "phablet-shell" and run /usr/lib/*/pay-service/setup-staging.sh
** Go to the Ubuntu Store scope and search for the "Delta" app.
** Verify the price is displayed as "2,99" and not "2,00".

* Test submission and viewing of reviews:
** Select an installed application and open the preview for it.
** In the preview, fill in the ratings stars and enter an honest, reasonable, and useful review for the app, pressing "Send" when ready.
** Verify the preview is refreshed, and the new review appears and has "pen" edit icon next to it. If it did not appear, exit and re-enter the preview to account for possible network slowness.
** For apps that have pre-existing reviews, verify that some reviews appear in their previews.
** Open the preview of an application you reviewed before. Verify that your review is at the top of the list of reviews and has "pen" edit icon next to it. Hit the "pen" icon and verify that you can edit your existing review, and after hitting 'Submit' it's updated with the new comment and star rating.

* Test login before installing apps
** Make sure you don't have a Ubuntu One account in System Settings. Delete it if needed.
** Try to install any free app
** Verify the login/register page is opened.

* Test invalid credentials
** Make sure you are logged into your Ubuntu One account in your device
** Invalidate the credentials for your device from https://login.staging.ubuntu.com/+applications
** Try to install any free app
** Verify the login error preview is show win the "Go to Accounts" button.
** Tap the "Go to Accounts" button.
** Verify the login/register page is opened.

* Test other currencies
  
   NOTE: Since the server is not yet returning different currencies based on your geoip (<nowiki>[[https://bugs.launchpad.net/click-package-index/+bug/1375281|LP#1375281]]</nowiki>), you can force other currencies via an interim shell script.

** Enable use of the staging server:
*** Log in to the phone with "phablet-shell" and run /usr/lib/*/pay-service/setup-staging.sh
** Put in the device the shell script shown here: http://pastebin.ubuntu.com/8485727/
** Run it like this: "./enable-purchases-in EUR"
** Search for "delta" in the Ubuntu Store
** Check that the result price is shown in Euros
** Open the preview
** Check that the preview price is shown in Euros
** Try some other supported currency in the script, eg: GBP
** Clean the search, repeat the search for "delta"
** Check that the price is shown in pounds 
** Try a non-supported currency, eg: ARS
** Clean the search, repeat the search for "delta"
** Check that the price is shown in the US dollars, the default currency

* Test purchase cancellation

** Enable use of the staging server:
*** Log in to the phone with "phablet-shell" and run /usr/lib/*/pay-service/setup-staging.sh
** Search for the "Delta" app, or switch to the "Travel & Local" department.
** Tap on the "Delta" app icon to open the preview.
** Tap the "$2.99" button.
** Wait for the payment UI to open.
*** Log in to a staging account if necessary.
*** Enter your staging payment details (fake CC# or PayPal testing credentials).
*** Purchase the app.
** The purchased app should begin installing.
** After installation, the preview should have "Cancel Purchase" and "Open" buttons visible.
** Tap the "Cancel Purchase" button.
*** Confirm the cancellation by tapping "Continue" on the resulting page.
** Upon successful cancellation, the preview should refresh and show the app as purchasable again.
** Leave the preview and return to search results.
*** Verify the results are refreshed, and the app is listed as available for purchase.

* Test private packages visibility
** Ensure you have access to a private package uploaded on the server.
*** You can upload a click to <nowiki>[[https://myapps.developer.staging.ubuntu.com/dev/click-apps/|myapps]]</nowiki> for testing, or have someone share an existing private package to you (how to build/upload click package not described here).
*** The package on myapps must be set to "private" and "Published" to be visible.
*** The package must be owned or shared with the account used in testing, to be visible.
** Enable use of the staging server:
*** Log in to the phone with "phablet-shell" and run /usr/lib/*/pay-service/setup-staging.sh
** Search for the private app on the phone
*** To avoid similarly named packages in results you can use the "name:" prefix to find a specific package (eg, "name:package.owner")
** Verify the private package appeared in the search results
