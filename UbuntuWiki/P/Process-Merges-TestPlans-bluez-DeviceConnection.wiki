{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

Establishing a connection between two profiles means connecting to a profile on the other end. A connection can be only made on profile-base. This part of the Bluetooth test plan will focus on the different profiles we support.

Profiles left out at the moment:

* OPP (object push)
* FTP (file transfer)

=== A2DP ===

The A2DP profile is used to distribute audio from one end to another one. Typical for this are headphone or speakers.

Preconditions:

* A speaker or headset which supports A2DP
* Speaker/headset already paried

Steps:

* Verify speaker/headset is correctly paired
<pre>
[bluetooth]# info BC:47:60:F5:4B:5C
Device BC:47:60:F5:4B:5C
	Name: HS3000
	Alias: HS3000
	Class: 0x240404
	Icon: audio-card
	Paired: yes
	Trusted: no
	Blocked: no
	Connected: no
	LegacyPairing: no
	UUID: Headset                   (00001108-0000-1000-8000-00805f9b34fb)
	UUID: Audio Sink                (0000110b-0000-1000-8000-00805f9b34fb)
	UUID: A/V Remote Control        (0000110e-0000-1000-8000-00805f9b34fb)
	UUID: Handsfree                 (0000111e-0000-1000-8000-00805f9b34fb)
	RSSI: -45
</pre>
'''NOTE:''' Look at the lines starting with ''UUID''. The profile we're looking for is "Audio Sink".
* Initiate the connection with the audio sink and verify the device gets connected
<pre>
[bluetooth]# connect BC:47:60:F5:4B:5C
Attempting to connect to BC:47:60:F5:4B:5C
[CHG] Device BC:47:60:F5:4B:5C Connected: yes
Connection successful
</pre>
* Verify by playing any audio on the device that the audio is routed correctly through the connected bluetooth audio sink
* Disconnect the bluetooth audio sink and verify audio is routed through the phone speakers again
<pre>
[HS3000]# disconnect BC:47:60:F5:4B:5C
Attempting to disconnect from BC:47:60:F5:4B:5C
Successful disconnected
[CHG] Device BC:47:60:F5:4B:5C Connected: no
</pre>

=== HFP ===

The HFP profile is used by headsets or carkits to stream call audio and have control over the phone like placing calls etc.

There are two roles:

* handfree (headset, carkit)
* audio gateway (phone)

Preconditions:

* A headset or carkit which supports HFP
* Carkit/headset already paried

Steps:

* Verify remote device supports HFP and is correctly paired
* Connect with handsfree device
* Call the DUT from another phone and accept the Call. Verify the audio is routed to the handsfree device.
** If the handsfree device allows to accept the call with a specific button for this do this test step twice and use the UI the first time and the button on the second time
* Drop the call
* Play any audio and verify it's routed through the phone speaker IF NOT the connected device supports A2DP and got connected on this profile too.
* Call another phone from the handset and verify call audio is routed through the handsfree device

=== HID ===

The HID profile is responsible to connect various input devices like mouse and keyboard.

Precondition:

* A HID device
* Device is already paired

Steps:

* Connect the HID device and verify it's working
** Mouse: Verify you can control UI elements with the mouse
** Keyboard: Verify you can enter text in UI text fields
* Power off the HID device
* Power on the HID device
* Verify the device automatically gets connected again once you start using it again

'''NOTE:''' The keyboard layout can't be changed currently and will default to the US one.

=== PBAP ===

The PBAP profile is responsible for address book synchronization between two devices over Bluetooth.

Precondition:
 
* The phone is paired and connected with a Ubuntu Desktop PC
* bluez-test-scripts package is installed on the Ubuntu Desktop PC
* The address book on the phone has atleast one contact

'''NOTE:''' If you want to pair the phone and a Ubuntu Desktop PC you have to initiate that from the Desktop. The phone doesn't allow you yet to pair with a PC device.
Steps:

* Run test script on your Ubuntu Desktop PC with
<pre>
$ zcat /usr/share/doc/bluez-test-scripts/examples/pbap-client.gz | python - 4C:74:03:64:82:1F
</pre>
* Verify the test script prints out all your contacts.
* The test script will fail with an exception at the end as it tries to access phonebooks our phone doesn't provide. That is ok and not a problem.
