{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* '''Test plan for component''': ofono
* '''Component Checklist''': https://wiki.ubuntu.com/Process/Merges/Checklists/Common
* '''Trunk URL''': https://github.com/rilmodem/ofono
* '''Ubuntu Package URL (LP)''': http://launchpad.net/ubuntu/+source/ofono

=== Description ===

This is a test plan for ofono as used by Ubuntu Touch.  It ''does not'' cover scenarios and/or test cases for ofono installed on the desktop.

=== Dependants/Clients ===

* connectivity-api
* network-manager
* powerd
* telepathy-ofono
* Dialer / Messaging Apps
* network-indicator
* urfkill
* here-location-service-provider/location connectivity API
 
=== SIM Requirements ===

Unless specified otherwise, these tests should all be run with a valid unlocked SIM, preferably a primary operator SIM, not a MVNO SIM.  The SIM should also be activated and proven to work for data, SMS, and voice before being used.

=== Dual SIM ===

This test plan was originally written to test a single SIM device.  As dual-SIM support has been added to Ubuntu, it should be noted that this is visible to the rest of the system as a second modem instance.  Where there's no difference with a single SIM device, the test cases have been left as is.  It should be noted however that when verifying the test cases, you may need to take into account which SIM is being utilized and thus verify the correct modem instance ( '''/ril0''' or '''/ril_1''' ).

Most of the ofono scripts have been modified to work with dual-SIM devices, however if problems are encountered, please file a bug against the ofono (Ubuntu) package.

==== Forcing Screen On ====

In general, it can be a good idea to force the display to stay on as ofono and the modem's behavior does change slightly when the screen blanks ( for power-saving ).  The screen can be forced to stay unlocked/on by running the following command as root on the device:

<code>powerd-cli display on</code>

=== Test Plan ===

Test target device: Nexus 4 with active SIM card
Secondary/backup device: TBD

Initial set up:

* Install latest image on phone
* Install ofono from the silo PPA
* Reboot the phone

== Manual Tests ==

Most of the tests below use one or more scripts from the ofono-scripts packages.  They're installed by default in the directory ''/usr/share/ofono/scripts''.

=== Basic Tests ===

These tests should be run for every upload, as they cover the basic functionality that ofono provides.

* Test that the device can make outgoing phone calls, and receive incoming phone calls
* Test that the device can send outgoing MMS messages, and receive incoming MMS messages
* Test that the device can send outgoing text messages, and receive incoming text messages
* Test that incoming phone calls and text messages wake the device when the screen is off
* Test that mobile data connection works by testing Internet connectivity ( launch the browser )
* Test that flight-mode can enabled/disabled and mobile data is properly restored 
* Verify that '''no new crash files of ofono clients are found''' in <code>/var/crash</code>!

=== Dialer / Messaging Autopilot ===

The Dialer and Message Apps are dependent on ofono, although they use the ''phonesim'' driver vs. the usual ''rilmodem'' or ''mtk*modem'' drivers used on actual Touch devices.  If significant changes have been made to the ofono core ( especially a new upstream release and/or changes involving DBus ), then these tests should be run. Otherwise, they can be considered optional.  The tests can be run as follows:

* make the device writable
* apt-get update
* apt-get install dialer-app-autopilot messaging-app-autopilot
* reboot the device, unlock the screen, and pin the screen on using: <code>sudo powerd-cli display on</code> ( on the device )
* On the desktop run the following command to run the tests:
** phablet-test-run dialer_app; '''reboot'''
** phablet-test-run messaging_app; '''reboot'''

When finished, run ''apt-get purge ofono-phonesim-autostart''.

'''Note''' - it's also a good idea to run these tests on one or more non-RIL devices such as manta or flow to ensure that core ofono changes have not caused any issues with the ofono-phonesim package.

=== DBus Changes ===

If '''any DBus''' API changes are made ( ie. adding new interfaces, properties, modifying methods, ... ) then sanity checking network indicator and system settings is recommended.

'''Note''' - running some of the test cases defined by the client test plans is also a good idea:

* <nowiki>[[https://wiki.ubuntu.com/Process/Merges/TestPlan/indicator-network|indicator-network]]</nowiki>
* <nowiki>[[https://wiki.ubuntu.com/Process/Merges/TestPlan/ubuntu-system-settings|system-settings]]</nowiki>
* <nowiki>[[https://wiki.ubuntu.com/Process/Merges/TestPlan/dialer-app|dialer-app]]</nowiki>
* <nowiki>[[https://wiki.ubuntu.com/Process/Merges/TestPlan/messaging-app|messaging-app]]</nowiki>

----

The following is the list of function-specific test plans:

* <nowiki>[[SIM|SIM]]</nowiki>
* Voicecall
** <nowiki>[[Basic Calling]]</nowiki>
** <nowiki>[[EmergencyCalling|Emergency Calling]]</nowiki>
** <nowiki>[[CallHoldSwap|Call Hold - Swap]]</nowiki>
** <nowiki>[[MultiParty]]</nowiki>
** <nowiki>[[CallBarring|Call Barring]]</nowiki>
** <nowiki>[[CallForwarding|Call Forwarding]]</nowiki>
** <nowiki>[[CallWaiting|Call Waiting]]</nowiki>
** <nowiki>[[SupplementaryServices|Supplementary Services (CLIR, CLIP)]]</nowiki>
* Network Registration
* <nowiki>[[Provisioning|GPRS-MMS Provisioning]]</nowiki>
* <nowiki>[[MMS Context manipulation]]</nowiki>
* <nowiki>[[GPRS|GPRS]]</nowiki>
* <nowiki>[[SMS|SMS]]</nowiki>
* <nowiki>[[RadioSettings|Radio Settings]]</nowiki>
* Call Settings
* <nowiki>[[USSD Tests|USSD Tests]]</nowiki>
* <nowiki>[[LowPowerMode|Low Power Mode]]</nowiki>
* <nowiki>[[Bluetooth|Bluetooth]]</nowiki>

=== Miscellaneous ===

Recent Intel-sponsored oFono Test Report ( documents test cases ): 
* http://lists.ofono.org/pipermail/ofono/attachments/20131004/aff2cf36/attachment-0001.xlsx
