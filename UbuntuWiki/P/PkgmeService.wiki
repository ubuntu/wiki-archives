{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


=== Introduction ===

* Part of AppDevelopers effort
* Is a backend behind <nowiki>[[http://myapps.developer.ubuntu.com|MyApps]]</nowiki>
* Takes stuff that people upload and packages them using <nowiki>[[http://pkgme.net|pkgme]]</nowiki>
* Uses the set of backends provided by <nowiki>[[https://launchpad.net/pkgme-binary|pkgme-binary]]</nowiki>

This document is aimed at developers and administrators of pkgme-service.

=== How it works ===

When an application is submitted for review on My``Apps, it is also sent for automatic packaging to an internal service that runs pkgme.

<nowiki>[[File:packaging-workflow.png]]</nowiki>

=== How to ===

==== Test the service ====

<nowiki>[[https://launchpad.net/pkgme-service|lp:pkgme-service]]</nowiki> comes with a script that will submit a file to pkgme-service for packaging.

With pkgme-service in the `PYTHONPATH`, and in a directory that's a `pkgme-service` checkout:

<pre>
$ ./bin/submit-for-packaging some-binary.tar.gz devportal-metadata.json http://pkgme-service.wherever/pkgme/api/1.0
</pre>

If the API url is not provided, it will default to http://localhost:8000/pkgme/api/1.0, which is where the dev service runs by default.

If the path to the metadata JSON file is not provided, it will look for devportal-metadata.json in the current working directory.

It will take a few seconds, usually. If it succeeds it will print a Python dict showing the response. e.g.

<pre>
{u'dependencies': [],
 u'packaged_app_url': u'packaged-tarballs/gtk.tar.gz',
 u'pkgme_distro_arch_series': [],
 u'pkgme_extra_data': {u'executable': u'', u'pkgme_id': 7}}
</pre>

If it fails it will print output to stderr.

You can try with the <nowiki>[[attachment:example-binary.tar.gz|example binary tarball]]</nowiki> and <nowiki>[[attachment:devportal-metadata.json]]</nowiki>.

There are more detailed notes for <nowiki>[[https://wiki.canonical.com/InformationInfrastructure/WebOps/CA/TestPkgmeService|testing the Canonical production instance of pkgme-service]]</nowiki> on the Canonical wiki.  These notes differ mostly by providing extra information to do with specific network & machine configuration.

=== See also ===

* <nowiki>[[AutomagicBinaryPackaging|the specification]]</nowiki>
* <nowiki>[[AutomagicBinaryPackaging-ImplementationPlan|the roadmap]]</nowiki>
