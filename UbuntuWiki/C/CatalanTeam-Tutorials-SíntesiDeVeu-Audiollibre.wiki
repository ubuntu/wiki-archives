{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


== Com fer un audiollibre en català, amb Ubuntu ==

'''Resum:''' Indiquem com fer, a partir d'un arxiu de text, un <nowiki>[[http://ca.wikipedia.org/wiki/Audiollibre|audiollibre]]</nowiki> en català, amb Ubuntu, Festival i les <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/SíntesiDeVeu/|veus catalanes]]</nowiki> del Festcat. Això amb una senzilla ordre (''bash audiollibre.sh arxiu.txt [autor]'') i que genera un arxiu mp3 (o bé ogg) per cada capítol, amb les etiquetes ID3 del títol, autor, àlbum, any, pista i gènere ben posades per al nostre reproductor de mp3.

{| class="wikitable"
|-
| <tablestyle="float:center; font-size: 0.9em; width:95%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em; ">'''Índex'''<<BR>>
|}

=== Instal·lació ===
'''Si feu servir Ubuntu Hardy 8.04, o posterior, <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/S%C3%ADntesiDeVeu#Tinc%20Ubuntu%20Hardy%208.04%20i%20Festival%20no%20em%20funciona|veieu això]]</nowiki>.'''

Primer cal instal·lar les <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/SíntesiDeVeu/|veus catalanes del Festcat com s'indica aquí]]</nowiki>.

Baixem aquests tres scripts i els desem en una carpeta:

<nowiki>[[attachment:audiollibre.sh]]</nowiki>  Que converteix un arxiu de text a mp3, separant els capítols i llegint-los amb Festival

<nowiki>[[attachment:divcapitols.sh]]</nowiki> Que separa un arxiu.txt en els seu capítols

<nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/S%c3%adntesiDeVeu/Scripts?action=AttachFile&do=get&target=text2mp3.sh|text2mp3.sh]]</nowiki> Que converteix un arxiu de text a mp3 llegint-lo amb Festival (veieu a les notes com fer-ho en ogg).

I els hi donem permisos d'execució fent, en un terminal:

<pre>
$ chmod 755 audiollibre.sh 
$ chmod 755 divcapitols.sh 
$ chmod 755 text2mp3.sh
</pre>

'''Notes:'''

* Els dos primers scripts només són necessaris per a dividir un llibre en capítols i transformar aquests capítols amb un arxiu (pista) d'àudio per a cada capítols. Si només volem fer un arxiu d'àudio, només cal el tercer script.

* Si volem fer l'audiollibre en el format lliure ogg, enlloc del mp3, podem fer servir aquest altre script: <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/S%c3%adntesiDeVeu/Scripts?action=AttachFile&do=get&target=text2ogg.sh|text2ogg.sh]]</nowiki> i n'hi haurà prou amb uns canvis a audiollibre.sh, per tal que cridi a ''text2ogg.sh'' en lloc de ''text2mp3.sh''

=== Ús ===
Suposant que els capítols del llibre comencin amb una línia del tipus "XX" (en números romans, com els llibres del Projecte Gutemberg), farem:

<pre>
$ bash audiollibre.sh arxiu.txt [autor] 
</pre>

Si conté espais, el nom de l'autor ha d'anar entre cometes.

Convé que el nom de l'arxiu.txt coincideixi amb el títol del llibre, amb caràcters de subratllat ("_") per al espais, ja que s'utilitzarà com a etiqueta del títol de tots els arxius (eliminant la extensió). Ha d'estar codificat amb latin-1.

I si tot es correcte, es crearan dos arxius per a cada capítol XX del llibre, que es diran:

<pre>
Titol_del_llibre_-_Capitol_XX.txt
Titol_del_llibre_-_Capitol_XX.mp3
</pre>

==== Exemple ====
Volem fer un audiollibre.sh amb l'obra Arran del Cingle de Josep Morató i Grau, del <nowiki>[[http://www.gutenberg.org/browse/languages/ca|Projecte Gutemberg]]</nowiki>:

Anem a <nowiki>[[http://manybooks.net/titles/grauj2544325443-8.html|Manybooks aquí]]</nowiki>, i ho baixem en format RTF. L'obrim i copiem tot el contingut (Ctrl-C) a l'editor de text (gedit) i ho desem amb el nom Arran_del_Cingle.txt en format txt, (veieu més endavant ''Problemes coneguts'')

Un cop seguides les instruccions anteriors (Instal·lació), fem:

<pre>
bash audiollibre.sh Arran_del_Cingle.txt "Josep Morató i Grau"
</pre>

esperem una bona estona i obtindrem 23 arxius de text i 23 arxius mp3, un per cada capítol, amb les etiquetes ID3 del títol, autor, àlbum, any, pista i gènere ben posades per al nostre reproductor de mp3. Al terminal anirem rebent informació del progrés i dels eventuals problemes.

Nota: Al Projecte Gutemberg hi ha una còpia del mateix llibre en format txt, i ens podriem estalviar un pas, però per alguna raó, els capítols llavors no es separen bé. Si ho descobriu, digueu-nos'ho.

=== Sobre els noms del capítols ===

Si els noms del capítols no venen en números romans, caldrà adaptar l'script ''divcapitols.sh''. Per exemple si són del tipus "Capítol 99", caldrà posar un caràcter "#" a línia que conté la ordre csplit (amb la qual cosa la convertim en un comentari):

<pre>
}}}
I treurem el primer caràcter ("#") de la línia següent, que quedarà així:

{{{
csplit -s -f "${1%.txt}_-_Capítol_" $1 "/Capítol /" "{*}"
</pre>
que era un comentari i ara sí que s'executarà.

Les opcions i paràmetres signifiquen:

<code>"-f ${1%.txt}_-_Capítol_"</code> que els noms del capítols començaran per arxiu sense extensió (1%.txt) seguit de _-_Capítol_ i el número del capítol.

<code>$1</code> El nom de l'arxiu que volem dividir

<code>"/^[IVX]*[IVX]*[IVX]$/"</code> L'expressió regular que es cerca per separar els capítols

<code>"{*}"</code> Indica que es separin tots els capítols que es trobin.

Espero que aquests dos exemples ens permetin adaptar-lo a les nostres necessitats. (Veieu les referències sobre expressions regulars).

=== On trobar llibres de text en català ===
Hi ha molts llocs, com ara:

===== Biblioteques =====

* <nowiki>[[http://www.bnc.cat/fons/coldigital.php|Biblioteca de Catalunya]]</nowiki>

* <nowiki>[[http://www.cbuc.es/cbuc/programes_i_serveis/bdc/|Biblioteca Digital de Catalunya]]</nowiki>

* <nowiki>[[http://bv2.gva.es/default.php|Biblioteca Valenciana Digital]]</nowiki>

* <nowiki>[[http://www.lluisvives.com/index.jsp|Biblioteca Virtual Joan Lluís Vives]]</nowiki>

* <nowiki>[[http://www.culturalliure.org/|Cultura Lliure]]</nowiki>

* <nowiki>[[http://www.cervantesvirtual.com/Buscar.html?titulo=&opTitulo=and&autor=&opAutor=and&materia=&opMateria=and&otrosCampos=catalan&opOtrosCampos=and&periodo=&enviar=Buscar|Biblioteca Miguel de Carvantes]]</nowiki>

===== Universitats =====

* <nowiki>[[http://www.uoc.edu/masters/cat/web/materials_lliures.html|La Universitat Oberta de Catalunya]]</nowiki> (Molts textos són en format pdf)

* <nowiki>[[http://www.uoc.edu/lletra/especials/folch/|Selecció de Poesia Catalana]]</nowiki>

* <nowiki>[[http://gclub.ourproject.org/tiki-list_file_gallery.php?galleryId=6|Grup de Coneixement lliure de la UB]]</nowiki>

* <nowiki>[[http://upcommons.upc.edu/|UPC Commons]]</nowiki>

* <nowiki>[[http://bibliotecnica.upc.es/gratuits/inici.asp?lletra=I|Llibres de lliure accés d'interès politècnic]]</nowiki>

* <nowiki>[[http://www.ub.edu/stitc/|UB Servei de tractament informatitzat de textos catalans]]</nowiki>

* <nowiki>[[http://www.rialc.unina.it/|RIALC]]</nowiki> Repertorio infomatizzato dell'antica letteratura catalana

===== Internacionals =====

* <nowiki>[[http://www.gutenberg.org/browse/languages/ca|El Projecte Gutemberg]]</nowiki> (conté obres en format txt)

* <nowiki>[[http://manybooks.net/language.php?code=ca|Manybooks]]</nowiki> Els mateixos llibres del Projecte Gutemberg, disponibles en molts formats

* <nowiki>[[http://ca.wikibooks.org/wiki/Portada|Viquillibres]]</nowiki>

* <nowiki>[[http://books.google.es/books?hl=ca|Google Llibres]]</nowiki>

Si en trobeu més, afegiu-los aquí.

=== Problemes coneguts ===
Degut a un problema de la versió actual de les veus Festcat (veu la pàgina corresponent) els caràcters "¡" i "¿" que per altra banda no són necessaris en el català actual, però que es troben en llibres antics com el proposat a l'exemple, fan que el motor de veu doni errors. La solució es eliminar-los del llibre abans de la seva conversió, la qual cosa es por fer en dos simples substitucions amb ''Reemplaça'' (Control+H).

* Veieu també l'apartat "Problemes coneguts del <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/SíntesiDeVeu/Scripts|scripts]]</nowiki>

=== Veieu també ===

* Com instal·lar instal·lar les <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/SíntesiDeVeu/|veus catalanes del Festcat a Ubuntu]]</nowiki>

* Scripts per a les <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/SíntesiDeVeu/Scripts|veus catalanes del Festcat a Ubuntu]]</nowiki>

* <nowiki>[[http://en.wikipedia.org/wiki/Pdftotext|Conversió de fitxers pdf a txt]]</nowiki> (en anglès)
<pre>
 $ sudo apt-get install pdftotext
 $ pdftotext -enc Latin1 arxiu.pdf arxiu.txt
</pre>
=== Registre de canvis ===
2008-6-9 A la <nowiki>[[attachment:SintesiDeVeuV0.1.tar.gz|primera versió]]</nowiki> l'etiqueta del número de la pista no sempre es desava bé. Solucionat en aquesta versió.

2008-6-10 Ara tots els arxius es desen en una carpeta.

=== Referències ===
Sobre l'ús d'expressions regulars:

http://www.ncsa.uiuc.edu/UserInfo/Resources/Hardware/IBMp690/IBM/usr/share/man/info/en_US/a_doc_lib/cmds/aixcmds1/csplit.htm (en anglès)

http://www.opengroup.org/onlinepubs/000095399/utilities/csplit.html (en anglès)

http://gnosis.cx/publish/programming/text_utils.html (en anglès)

Crèdits: PacoRivière http://pacoriviere.cat/ http://galindaines.blogspot.com/
----
CategoryTutorialsEnCatala
