{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


=== Install procedure for Ubuntu Server 9.10 ===

There has recently been a fair amount of work on performing installation of the 2.3 version of calendar server from source. They have been described in detail at this <nowiki>[[http://www.deanspot.org/content/installing-darwin-calendar-server-23-ubuntu-910|blog]]</nowiki>. This has been tested on a fresh install of 9.10 with only the ssh server installed on top.

=== Package based procedure for installing caldavd 1.2 on Ubuntu Server 9.10 ===

These instructions appear to install the calendar server 1.2 version from the packages. To do so, you can stick to the <nowiki>[[CalendarServerGutsyRecipe|procedure]]</nowiki> described for version 7.10. Only slight changes have to be done to the list of packages we want to install

 <code> apt-get install subversion libkrb5-dev attr curl build-essential libssl-dev python-pysqlite2 curl python-zodb  python-pyopenssl python-dateutil python-xattr python-pysqlite2 python-twisted python-vobject python-kerberos python-dev</code>

Sofar i checked the tutorial until this following steps:
* Our CalDAV server is almost ready for action. Let's copy the test configuration so we can get it up as quickly as possible. 
Real configuration can wait: <code> cp conf/caldavd-test.plist conf/caldavd-dev.plist </code>
* We do need to do a little configuration though: <code> vim conf/caldavd-dev.plist </code>
* First change the hostname for the server. Locate the line <code> <!-- Network host name --> </code> and change  <code> <string>localhost</string> </code> to <code> <string>your-real-hostname</string> </code> (That is, put the actual name of your server inside the string, it's used within URLs within the software.)
* To make the server available to connections from other computers. Locate this line: <code> <!-- List of IP addresses to bind to [empty = all] --> </code> and replace <code> 127.0.0.1 </code> in <code> <string>127.0.0.1</string> </code> with either nothing or a specific, public ip address for your server.

/!\ <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/evolution/+bug/160190|Bug #160190]]</nowiki>: As of 2007-11-05 there is a bug in Evolution that prevents us from using this set-up to authenticate to the caldavd server. The report has contributions which explain how to enable Evolution to connect. It's not included here, because it's important that you check out the bug yourself.

* Create a user and group to give our server an identity of its own, but we don't need a home directory for it; <code> adduser --system --group caldavd --no-create-home </code>

* Set permissions; <code> chown -R caldavd:caldavd /opt/caldavd </code>

* Run the server: <code> sudo -u caldavd -b /opt/caldavd/CalendarServer/run </code>

Let's test our Server using Thunderbird 3 RC2 with lightning addon.
But before we check that lets see if we can access it via Browser.
Type into your addressbar: http://IPADDRESS:8008/calendars/users/admin/calendar

And you should be prompted with a fild asking for your '''username''' and '''password''' which are '''admin''' and '''admin'''

Ok, now in Thunderbird:
- First create a "New Callendar - On the Network".
- Choose CalDAV and type http://ADDRESS:8008/calendars/users/admin/calendar

using http instead of caldav does not seem to right, but it works (?)
I need to check this out further.
In <nowiki>[[http://wiki.debian.org/HowTo/CalendarServer| this Debian CalendarServer tutorial]]</nowiki> it seems to be right.

Here is an example init script : <code>/etc/init.d/caldavd</code>
{{{#! /bin/sh

. /lib/lsb/init-functions

CALDAVD="/opt/caldavd/CalendarServer/run"
CALDAVD_USER="caldavd"
CALDAVD_OPTS="-d"
PIDFILE="/opt/caldavd/CalendarServer/logs/caldavd.pid"
NAME=caldavd

test -x $CALDAVD || exit 0

case "$1" in
  start)
        log_daemon_msg "Starting Darwin Calendar Server" "$NAME"
        if start-stop-daemon --start --quiet --oknodo --pidfile $PIDFILE --chuid $CALDAVD_USER --exec $CALDAVD -- $CALDAVD_OPTS; then
            log_end_msg 0
        else
            log_end_msg 1
        fi
        ;;
  stop)
        log_daemon_msg "Stopping Darwin Calendar Server" "$NAME"
        if start-stop-daemon --stop --quiet --oknodo --pidfile $PIDFILE; then
            log_end_msg 0
        else
            log_end_msg 1
        fi
        ;;
  restart)
        log_daemon_msg "Restarting Darwin Calendar Server" "$NAME"
        start-stop-daemon --stop --quiet --oknodo --retry 30 --pidfile $PIDFILE
        if start-stop-daemon --start --quiet --oknodo --pidfile $PIDFILE --chuid $CALDAVD_USER --exec $CALDAVD -- $CALDAVD_OPTS; then
            log_end_msg 0
        else
            log_end_msg 1
        fi
        ;;
  status)
        status_of_proc -p "$CALDAVD" "$NAME" && exit 0 || exit $?
        ;;
** )
        log_action_msg "Usage: /etc/init.d/caldavd {start|stop|restart|status}"
        exit 1
esac

exit 0
}}}

And to get it to load on boot and shutdown safely:
<pre>
update-rc.d caldavd defaults
</pre>

==== To Do: ====
We also need to set up users and permissions for the server itself, so people can connect to the server and share their calendars, which is what we've been aiming for.

We should also document where the server-data is stored, so the information that users have entrusted to the server can be backed up.

Ideally we should package this application so the installation is installable with a single command.
