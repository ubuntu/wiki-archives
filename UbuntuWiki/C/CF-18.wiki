{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

This page is about installing and using Ubuntu GNU/Linux on Panasonic Toughbook CF-18 with digitizer screen. 

The procedure described below was tested with vanilla Ubuntu 9.10. For older versions look below. If you know how to install Ubuntu on touchscreen CF-18 please add relevant information.      

Ubuntu 9.10 solved problems with digitizer screen and hotkeys. It is highly recommended that you upgrade to this version.

=== Works out-of-the-box ===

* Touchpad
* Digitizer screen
* Hotkeys
* SD Card reader
* USB
* Ethernet
* Screen closing sensor
* Wlan (wifi)
* Bluetooth
* PCMCIA adapter

=== Installing Ubuntu ===
The CF-18 does not have a CDROM built-in.  You have two options to install Ubuntu: Pen-drive and CDROM.

==== Pen Drive Option ====
If your CF-18 has a USB boot option in its BIOS, the easiest way to install Ubuntu is to prepare your own  bootable USB Ubuntu pendrive. If you do have Ubuntu already easy way is to download Ubuntu ISO file from Ubuntu.com (just click this big, orange "download ubuntu" button) and use System>Administration>Create USB. If you do not have Ubuntu yet you can use one of several different methods described here: http://www.pendrivelinux.com/?s=ubuntu . If you are not familiar with GNU/Linux follow those instructions literally.  

If you want to boot from pendrive make sure, that you have the USB boot option activated in CF-18 BIOS menu.

==== External CD ROM Option ====
You can boot to Ubuntu LiveCDs on your CF-18 by connecting an external USB optical drive and setting the CDROM as the highest boot priority in the BIOS.  

=== Which Version to Install? ===
There is a graphics driver problem that was introduced between versions 9.04 and 10.04 where Ubuntu boots to a blank screen.  To work around this problem you must pass a special parameter to the kernel using F6 as described <nowiki>[[http://ubuntuforums.org/showthread.php?p=9940776#post9940776|in this forum post]]</nowiki>.  Unfortunately, the workaround seems to result in extremely slow graphics performance.  Apparently this might be fixed by 10.10.  In the meantime, 9.04, possibly 9.10 seems to be the latest, working version of Ubuntu on the CF-18.

==== CF-18 and Ubuntu 9.04 ====

There are various different versions of CF-18.  See <nowiki>[[http://toughbookcentral.com/decoding-panasonic-cf-18-model-number/|this page]]</nowiki> to figure out which version you have.  

===== CF-18 Mk1 with Digitizer =====
If you have a CF-18 Mk1 with a digitizer, all the hardware seems to work out-of-the-box with Ubuntu 9.04.

===== CF-18 Mk2 with touchscreen =====
If you have a CF-18 Mk2 with a touchscreen, 9.04 does the following erroneous things out-of-the-box:
* loads the mouse driver for the touchpad
* loads the synaptics touchpad driver for the touchscreen

The touchscreen needs to load `evtouch` driver to work correctly.  This is a two step process:
# Install package `xserver-xorg-input-evtouch` using <nowiki>[[SynapticHowto|synaptic package manager]]</nowiki>.
# Change `synaptic` to `evtouch` in the file that loads the synaptics driver in `/usr/share/hal/fdi/policy/20thirdparty/`.  On one installation, this file was called `11-x11-synaptics.fdi`.

After making these two changes, a reboot should result in the touchscreen working correctly except that it may need to be calibrated.

=== Screen rotating ===
You may want to add ability of screen rotating between landscape and portrait mode to your CF-18. This is possible, but procedure described in this section needs to be updated for 9.10, do not use it if you cannot fix it!   

Important! Remember to turn off all compitz beautifiers (all the 3d effects - right click on your desktop, click wallpaper change, go to visual effects tab, and select no effects) first. 

There is no automated rotation after moving physical screen. However screen rotating functionality works great with the help of simple script (and sophisticated programmer who wrote it, thank you, Janek!). Open your text editor of choice as an admin (ie. "sudo gedit" in terminal), and copy/paste this text:

<pre>
if [ "`xrandr|grep 'current 1024'|wc -l`" -eq "1" ]
then
    echo "Rotate right"
    xsetwacom set stylus rotate 1
    xrandr -o right
else
    echo "Rotate normal"
    xsetwacom set stylus rotate 0
    xrandr -o normal
fi
</pre>

Save it with the name ''rotatescreen'' in folder /usr/bin/.

Execute ''sudo chmod +x /usr/bin/rotatescreen'' in terminal.

Now by executing "rotatescreen" command you will have your screen rotated between portrait and landscape mode. I created a simple activator with command ''rotatescreen'' in my panel - now all i have to do after changing position of physical screen is to tap an icon. 

=== Known issues ===

=== For older versions (7.10/8.04/8.10/9.04) ===

Please note: for touchscreen version of CF-18 you may need other instructions.
 
For proper configuration of Wacom tablet in 7.10 make sure, that appropriate portions of your xorg.conf file (to edit this execute ''sudo gedit /etc/X11/xorg.conf'' in terminal) look like this:

<pre>
Section "InputDevice"
	Driver		"wacom"
	Identifier	"stylus"
	Option		"Device"	"/dev/input/wacom"
	Option		"Type"	"stylus"
	Option		"ForceDevice"	"ISDV4"# Tablet PC ONLY
EndSection

Section "InputDevice"
	Driver		"wacom"
	Identifier	"eraser"
	Option		"Device"	"/dev/input/wacom"
	Option		"Type"	"eraser"
	Option		"ForceDevice"	"ISDV4"# Tablet PC ONLY
EndSection

Section "InputDevice"
	Driver		"wacom"
	Identifier	"cursor"
	Option		"Device"	"/dev/input/wacom"
	Option		"Type"	"cursor"
	Option		"ForceDevice"	"ISDV4"# Tablet PC ONLY
EndSection
</pre>

After that most of the laptop functionality works out of the box.  

Panasonic Hotkeys doesn't work out of the box. This include screen brightness and volume control hotkeys (FN + F keys) and external hotkeys: screen rotating, activating on-screen keyboard, activating/deactivating wifi etc. If you need to change your screen brightness settings or want to switch on/off wifi you may still do this - simply press F2 just after turning your computer on. This will take you to BIOS menu. On this stage you may still use hotkeys to select proper settings. After you leave BIOS menu they will get inactive.

Ubuntu 9.04 has new and faulty Intel graphics drivers. To avoid problems (such as hang-ups on connecting external monitors or programs crashing when attemptimg to play video files) use older drivers as described on this page:
https://wiki.ubuntu.com/ReinhardTartler/X/RevertingIntelDriverTo2.4 . This problem is widely known and should be corrected in the next Ubuntu version. 
