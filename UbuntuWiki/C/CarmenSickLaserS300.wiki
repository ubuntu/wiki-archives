{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== Connecting Carmen to the SICK Laser S300 ==

Back | https://wiki.ubuntu.com/carmen

----

=== FTDI Converter ===

==== BlackBox IC199A-R2 ====

This converter from BlackBox based on the FTDI chip works very well and allows 500kBaud.

{{{#!cplusplus
[18140.100000] usb 3-1: new full speed USB device using uhci_hcd and address 11
[18140.292000] usb 3-1: configuration #1 chosen from 1 choice
[18140.296000] ftdi_sio 3-1:1.0: FTDI USB Serial Device converter detected
[18140.296000] drivers/usb/serial/ftdi_sio.c: Detected FT232BM
[18140.296000] usb 3-1: FTDI USB Serial Device converter now attached to ttyUSB0
}}}

----

=== laser ===

{{{#!cplusplus
./laser
CARMEN - Carnegie Mellon Robot Navigation Toolkit - Version 0.6.1

This instance of laser will use the lasers with the ids: [1 2 3 4 5]

Laser id ........................... 1
Requested baud rate ................ 500000 kbps
Checking requested configuration ... see below
Requested laser configuration:
  type ............................. SICK_S300
  remission_mode ................... none
  resolution ....................... 0.50 deg
  max range ........................ 30.000 m
  fov .............................. 270 deg
  start angle ...................... -135.00 deg
  INFO: The current S300 driver requires the laser to be configured
        in the 500kbps continuous mode (using the SICK Windows tools).

Initialization device .............. done

Connecting device .................. connected
Connection to laser device succeded

Configuring laser device ........... see below
Configuration of laser device succeded

Initializing of laser with 0 successfully completed!

Info: Starting thread for laser 1
Info: The laser 2 is not used in this instance of laser
Info: The laser 3 is not used in this instance of laser
Info: The laser 4 is not used in this instance of laser
Info: The laser 5 is not used in this instance of laser

Timestamp calibration for laser 1, please wait a few seconds (100 scans)
.....................................................................................................Estimated frequency of laser 1 is 12.9220 Hz
status:   send-queue: 0 msg(s),   laser-msg freqency: 13.114 Hz (globally)
status:   send-queue: 0 msg(s),   laser-msg freqency: 12.780 Hz (globally)
status:   send-queue: 0 msg(s),   laser-msg freqency: 12.771 Hz (globally)
}}}

----

=== simulator ===

simulator warning is odd because 270 degrees is the default for S300

{{{#!cplusplus
$ ./simulator
CARMEN - Carnegie Mellon Robot Navigation Toolkit - Version 0.6.1

Warnung: You are not using a standard SICK configuration (fov=270.0000 deg)
}}}

----

=== laserview ===

laserview core dumps immediately:

{{{#!cplusplus
$ ./laserview 
CARMEN - Carnegie Mellon Robot Navigation Toolkit - Version 0.6.1

* ** stack smashing detected ***: ./laserview terminated
Aborted (core dumped)
}}}

----

=== handleDataMsgRecv : Connection reset by peer ===

central reports this error when laserview exits:

{{{#!cplusplus
$ ./central 
central running...
ERROR: handleDataMsgRecv : Connection reset by peer
}}}

----

=== laser ===

laser seems to initialize ok but then timeout (how long is it supposed to take for 100 scans?)

{{{#!cplusplus
$ time ./laser
CARMEN - Carnegie Mellon Robot Navigation Toolkit - Version 0.6.1

This instance of laser will use the lasers with the ids: [1 2 3 4 5]

Laser id ........................... 1
Requested baud rate ................ 500000 kbps
Checking requested configuration ... see below
Requested laser configuration:
  type ............................. SICK_S300
  remission_mode ................... none
  resolution ....................... 0.50 deg
  max range ........................ 30.000 m
  fov .............................. 270 deg
  start angle ...................... -135.00 deg
  INFO: The current S300 driver requires the laser to be configured
        in the 500kbps continuous mode (using the SICK Windows tools).

Initialization device .............. done

Connecting device .................. connected
Connection to laser device succeded

Configuring laser device ........... see below
Configuration of laser device succeded

Initializing of laser with 0 successfully completed!

Info: Starting thread for laser 1
Info: The laser 2 is not used in this instance of laser
Info: The laser 3 is not used in this instance of laser
Info: The laser 4 is not used in this instance of laser
Info: The laser 5 is not used in this instance of laser

Timestamp calibration for laser 1, please wait a few seconds (100 scans)
Cleaning up structures from laser 1 ...... done
}}}

==== real    3m24.322s ====
user    0m0.012s
sys     0m0.004s

----

=== sick_laser_test ===

sick_laser_test reports baudrate failed:

{{{#!cplusplus
/src/laser$ ./sick_laser_test  /dev/ttyUSB0
device is /dev/ttyUSB0
connected
  Querying baudrate ................ 9600 ........ failed
                                     19200 ........ failed
                                     38400 ........ failed
                                     500000 . checksum error ....... failed
                                     error
  sick_test_baudrate failed!
}}}

----

=== dmesg ===

dmesg reports unsupported baudrate request, so maybe this is a config problem on my machine's port?

{{{#!cplusplus
[ 2122.114178] usb 2-1: new full speed USB device using uhci_hcd and address 2
[ 2122.344907] usb 2-1: configuration #1 chosen from 1 choice
[ 2122.453176] usbcore: registered new interface driver usbserial
[ 2122.453201] drivers/usb/serial/usb-serial.c: USB Serial support registered for generic
[ 2122.453243] usbcore: registered new interface driver usbserial_generic
[ 2122.453248] drivers/usb/serial/usb-serial.c: USB Serial Driver core
[ 2122.463203] drivers/usb/serial/usb-serial.c: USB Serial support registered for MCT U232
[ 2122.463448] mct_u232 2-1:1.0: MCT U232 converter detected
[ 2122.463835] usb 2-1: MCT U232 converter now attached to ttyUSB0
[ 2122.464009] usbcore: registered new interface driver mct_u232
[ 2122.464018] drivers/usb/serial/mct_u232.c: Magic Control Technology USB-RS232 converter driver z2.0
[ 2357.624277] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 2390.342930] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 2414.435393] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 2744.393623] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 3817.471004] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 3925.556699] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 4412.285729] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 4426.415375] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 4723.902639] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
[ 4745.224869] drivers/usb/serial/mct_u232.c: MCT USB-RS232: unsupported baudrate request 0x1005, using default of B9600
}}}

----

== carmen ==

https://wiki.ubuntu.com/carmen
