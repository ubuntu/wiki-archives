{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



{| class="wikitable"
|-
| <tablestyle="text-align:center; font-weight: bold; font-size: 0.85em; border: none; width: 100%; -moz-border-radius:15px; background-color:#d9bb7a;" style="border: none;">'''Síntesi de veu, exemples d'ús'''<<BR>>
|}

== Exemples d'ús de la veu catalana del Festival ==

'''Resum:''' Indiquem alguns exemples de com fer servir les <nowiki>[[http://gps-tsc.upc.es/veu/festcat/|veus catalanes]]</nowiki>, com llegir l'hora en veu alta, fer-la servir amb OpenOffice i amb <nowiki>[[http://www.gnome.org/projects/orca/|Orca]]</nowiki> per llegir la pantalla, i com generar arxius de so. Per instal·lar i desinstal·lar les veus, veieu <nowiki>[[..-|Com instal·lar la veu catalana del Festival]]</nowiki>

{| class="wikitable"
|-
| <tablestyle="float:center; font-size: 0.9em; width:95%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em; ">'''Índex'''<<BR>>
|}

'''<nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/S%c3%adntesiDeVeu#Com%20convertir%20un%20arxiu%20de%20text%20a%20latin-1|Cal que els arxius de text a convertir tinguin codificació latin-1]]</nowiki>'''

Veieu altres exemples a: http://www.talp.cat/festcat/download/LLEGEIX-ME

Segons l'opció que hem triat al pas anterior, ara tenim dues opcions:

=== Requisits ===

Cal haver instal·lat les veus, veieu <nowiki>[[..-|Com instal·lar la veu catalana del Festival]]</nowiki>

==== Comprovació. ====
Per llegir en veu alta la frase ''hola mon'', copiem al terminal la línia següent:

<pre>
 $ echo hola mon | padsp festival --libdir /usr/share/festival --language catalan --tts
</pre>
=== Llegir l'hora en veu alta ===
Per llegir l'hora en veu alta al terminal hi ha prou amb escriure la següent línia (Atenció: les 'cometes' abans i després de <code>date...</code> són accents, no cometes!!!):
<pre>
echo "Són les `date +%k` hores, `date +%-M` minuts amb `date +%-S` segons." |padsp festival --tts --language catalan
</pre>

Si volem, per exemple que ens digui l'hora en veu alta a les hores en punt hem de preparar un arxiu de text amb dues línies (Atenció: no hem de deixar cap espai a la primera línia, són aquí només per limitacions d'aquest wiki!!!):
<pre>
echo "Són les `date +%k` hores, `date +%-M` minuts amb `date +%-S` segons." |padsp festival --tts --language catalan
</pre>

Al desar l'arxiu anterior, és molt important triar la codificació ISO-8859-1 o ISO-8859-15, ja que si triem UTF-8, que és l'opció per omissió, el Festival no podrà llegir-ho, i donarà l'error 'LTS_Ruleset catala_downcase: no rule matches:'.

posem que l'anomenem <code>digueshora.sh</code>

De nou al terminal fem:
<pre>
crontab -e
</pre>
i afegim a l'arxiu de programacions la línia:
<pre>
0 * * * * bash [ruta]/digueshora.sh
</pre>
on hem de substituir [ruta] per la ruta absoluta on hem desat l'arxiu <code>digueshora.sh</code>.

No oblidem desar fent Crl+O, abans de sortir amb Ctrl+X

Una altra opció sense els minuts és:
<pre>
echo "Són les `date +%k` hores, i `date +%-M` minuts." |padsp festival --tts --language catalan
</pre>

Per que digui les hores amb quarts, podríem fer alguna cosa així (us animem a millorar-ho):
<pre>
hora=`date +%-I`
hora_seg=$(echo "scale=0; $hora+1" | bc)
if [ "$hora_seg" -eq "13" ]; then hora_seg="una"; fi
minuts=`date +%-M`
case $hora in
        0 ) xe_hora="Són les dotze" ;;
        1 ) xe_hora="És la una" ;;
        2 ) xe_hora="Són les dues" ;;
***** ) xe_hora ="Són les $hora";;
esac
case $minuts in
	0 ) xe_minuts="" ;;
***** ) xe_minuts=", i $minuts minuts.";;
esac
case $minuts in 
        15 ) xerra="És un quart de $hora_seg." ;;
        30 ) xerra="Són dos quarts de $hora_seg." ;;
        45 ) xerra="Són tres quarts de $hora_seg." ;;
***** ) xerra="$xe_hora$xe_minuts" ;;
esac
echo $xerra |padsp festival --tts --language catalan
</pre>

Possibles millores:

* Que digui "d'una', en lloc de "de una", o "Són dos quarts i cinc", "Són dos quarts i 3 minuts",...

=== Extensió per a OpenOffice ===
<nowiki>[[http://extensions.services.openoffice.org/node/2649|Read Text]]</nowiki> és una extensió per a OpenOffice que permet llegir el text seleccionat. Un cop instal·lades les veus segons les instruccions anteriors, podem instal·lar Read Text com qualsevol altre extensió (al menú 'Eines' | 'Gestor d'extensions...' | 'Afegeix...' <nowiki>[[http://wiki.services.openoffice.org/wiki/Documentation/Administration_Guide/Using_Package_Manager|1]]</nowiki>) i funciona directament amb les veus catalanes.

=== Com llegir la pantalla amb Orca ===
Per instal·lar l'Orca, copiem al terminal la línia següent:

<pre>
 $ sudo apt-get install orca
</pre>
Amb el menú Aplicacions | Accés universal | Lector de pantalla i ampliador Orca

El primer cop caldrà triar les opcions de configuració, responen unes preguntes al terminal. Es pot canviar la configuració inicial fent <code>orca --text-setuporca --text-setup</code>. Un cop contestades les preguntes, que es llegeixen en veu alta, apareixerà aquesta finestra:

<nowiki>[[File:../imatges_OrcaCA.png]]</nowiki>

Anem a Preferències i a la pestanya Pronúncia triem:

<nowiki>[[File:../imatges_OrcaPreferenciesCA.png]]</nowiki>

Síntetitzador de pronunciació: Festival GNOME Speech Driver

Persona: triem una de les veus catalanes que heu instal·lat

=== Com fer arxius de so (wav) ===

Es pot aconseguir fent uns enllaços simbòlics així (si no ho hem fet al punt 1.4):

<pre>
$ cd /usr/lib/festival/
$ sudo ln -s /usr/share/festival/voices
$ sudo ln -s /usr/share/festival/dicts
$ sudo ln -s /usr/share/festival/upc_catalan
</pre>
Això també permet arrencar festival sense el paràmetre de la ruta de libdir.

Exemple d'ús:

(Cal que l'arxiu tingui codificació latin-1)

Per convertir un arxiu txt a wav, copiem al terminal:

<pre>
 $ text2wave -o arxiu.wav -eval '(language_catalan)' arxiu.txt
</pre>
=== Alternativa (sense text2wave) ===
Una altra forma per generar arxius wav, podem fer (<nowiki>[[http://www.math.ias.edu/doc/festival-1.4.2/festival_toc.html#TOC36|1]]</nowiki>):

<pre>
 $ festival
festival> (save_waves_during_tts)
(language_catalan)
(tts_file "arxiu.txt")
(exit)
</pre>
=== Per convertir a ogg (preferible) ===
Si no ho està caldrà instal·lar oggenc, copiant al terminal:

<pre>
 $ sudo apt-get install vorbis-tools
</pre>
Podem fer servir oggenc així, copiant al terminal:

<pre>
 $ oggenc arxiu.wav
</pre>
També podeu fer servir <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/S%c3%adntesiDeVeu/Scripts#head-626b367e4c7127c75287d4722d87651387e318ce|aquest script]]</nowiki>

=== Per convertir a mp3 ===
{| class="wikitable"
|-
| <rowbgcolor="#FF0000">'''Atenció: l'mp3 no és lliure!'''
|}
Si no ho està caldrà instal·lar lame, copiant al terminal:

<pre>
 $ sudo apt-get install lame
</pre>
Podem fer servir lame, copiant al terminal:

<pre>
 $ lame arxiu.wav arxiu.mp3
</pre>
També podeu fer servir <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/S%c3%adntesiDeVeu/Scripts#head-99e4d74c79445ad538adef40e012a1375d34b344|aquest script]]</nowiki>

=== Scripts per convertir un arxiu a ogg i a mp3 ===
Estan escrits suposant que tenim la veu catalana triada per omissió (veieu el punt 1.5, més amunt).

* '''text2ogg''': Converteix un arxiu de text a ogg llegint-lo amb Festival, afegint el nom de l'arxiu a l'etiqueta ogg del títol, i opcionalment l'autor
* '''text2mp3''': Converteix un arxiu de text a mp3 llegint-lo amb Festival, afegint el nom de l'arxiu a l'etiqueta ogg del títol, i opcionalment l'autor

Els podem trobar <nowiki>[[https://wiki.ubuntu.com/CatalanTeam/Tutorials/S%c3%adntesiDeVeu/Scripts|aquí]]</nowiki>

=== Com integrar les veus amb Python ===

Veieu <nowiki>[[..-VeuAPython|aquí un mòdul Python]]</nowiki> amb una funció especifica.

== Referències ==

ReadText: http://extensions.services.openoffice.org/node/2649 (en anglès

Gestor d'extensión de l'OpenOffice: http://wiki.services.openoffice.org/wiki/Documentation/Administration_Guide/Using_Package_Manager (en anglès

<nowiki>[[http://ubuntuforums.org/showthread.php?t=751169|HOWTO: Make festival TTS use better voices (MBROLA / CMU / HTS)]]</nowiki>

Crèdits <nowiki>[[http://gps-tsc.upc.es/veu/personal/antonio/index.php3|Antonio Bonafonte]]</nowiki>, <nowiki>[[https://launchpad.net/~zeehio|Sergi Oller]]</nowiki>, <nowiki>[[http://pacoriviere.cat/|PacoRivière]]</nowiki> http://galindaines.blogspot.com/
----
CategoryTutorialsEnCatala
