{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


This page is intended to be a pool of symptoms and tricks or links to places that help getting to the bottom of the problem.

=== Symptoms ===

* System pauses during boot and requires to hit a key several times to continue
** <nowiki>[[https://wiki.ubuntu.com/KernelTeam/DebuggingVoodoo#Incorrect%20IRQ0%20override|Timer interrupt is not correctly routed]]</nowiki>
  

=== Debugging Hints ===

==== Incorrect IRQ0 override ====

The BIOS claims that IRQ0 is routed to another IRQ on the IO-APIC, but this is not true. In some cases[1][2] it was possible to check the chipset configuration and ignore the wrong override. But the documentation for most chipsets are NDA.
With a tickless system we got the state where all CPU's go into a deeper C-state and require a timer interrupt to wake up. If the timer interrupt is not routed correctly this does not happen.

Possible boot options to try (with "debug lapic=debug"):

* acpi_skip_timer_override
* hpet=disabled / nohpet
* idle=poll (idle=halt might only work on systems without C1E)

With "debug lapic=debug" Linux will show the process of trying to get the interrupt right and also displays the interrupt routing in the IO-APIC.

[1] <nowiki>[[http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=33fb0e4eb53f16af312f9698f974e2e64af39c12|x86: SB450: skip IRQ0 override if it is not routed to INT2 of IOAPIC]]</nowiki>

[2] <nowiki>[[http://git.kernel.org/?p=linux/kernel/git/torvalds/linux-2.6.git;a=commitdiff;h=2bfef69d9e8cc056aa4dbc13f2136747340b4515|x86: SB600: skip IRQ0 override if it is not routed to INT2 of IOAPIC]]</nowiki>

=== IRQ0 not causing wake-up ===

This has been observed on some systems. Probably more likely on those which use HPET to emulate the timer (which is probably all the newer ones). In that case IRQ0 is usually incrementing, but still the system goes into sleep and does not wake up until a key is pressed or some other interrupt arrives.

Usually the graphics card, the disk or the network interface generate a lot of interrupts, which would wake up the system often enough to hide any problems. But it seems that using MSI/-X may change that. On one of my personal systems both disk controller and ethernet controller were using MSI and the graphics card was known to have the issue of not generating an interrupt on sync. And by that the system suffered badly from hangs.

Surprisingly there is a simple solution: "'''pci=nomsi'''" forces the pci system to not use MSI and suddenly those hangs were gone. This is a bit of a magic work-around because one should expect the timer interrupt, as it seems to arrive, to wake things.
