{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== Feedback on KubuntuPowerManagement ==

New applet in Kubuntu 6.10 (Edgy)

{{http://vizzzion.org/images/blog/powermanager.png}}

Add feedback here:
** Really nice, Is it possible to put something more like "When  battery remaining...... below ...xxx min "  add another radio  button for "Run this command" - Hint: kshutdown.sf.net . For example: I can run script for "mpg321 battery_low.mp3" (or somefile) and ask me to close applications accessing external drives, to unmount FUSE/sshfs filesystems/encrypted external drives using kdialog popups and hibernate suspend2 (Nigel's). Currently as it is available in suspend2/hibernate script suspending _fails_ if it cannot umount properly..... OK you might say suspend2/hibernate script guys must do this unmounting business but I would prefer this done by myself -user- (rather than root SUID) before running hibernate script as root suid. Further more, different distros handle suspend (using swsusp/suspend2) differently it would be easier to leave it to the end user (Makes sense to have an more customizations/flexibility). Sorry for the long message. Many thanks -- Karthik Shivaji - (Reply: Fine Sebas. You decide.)
** I don't think it's a valid use case, it can *and should* all be done from the hibernate script. In fact, I'm using suspend2 myself, I just popped it into HAL. If you do not want to use HAL, change it in powermanage.py at the top (it's self explanatory). Please email me if you want to discuss it further (sebas@kde.org), as for different distros, that is exactly the reason to use HAL for it.
* I loved it!  -- JonathanRiddell  
* I like its simplicity and these are my notes -- LukaRenko    * Key shortcuts for Suspend/Hibernate do not work yet - probably need Sleep/Hibernate/Power key configuration (as Lid close) as most laptops have only one (sleep or hibernate) key and users would like to decide what to do
*** see <nowiki>[[#Workarounds|Workarounds section]]</nowiki>

* Great start, needs tweaking -NickGee
** Lid close blanked screen but didn't send my system into suspend on a Dell 700M
*** HAL problem? Please confirm that HAL suspend works --sebas
** Is it possible to have the same functionality of the ubuntu power manager and only display the battery icon when charging or when running on battery? No tray icon needed if we have Suspend/Hibernate on the logout menu like Ubuntu.
*** not sure if I agree, as from usability perspective it is good if functions are always available from same place -- LukaRenko    * Suspend and hibernate worked great
** Icons: need to fit in with the rest of Kubuntu -ie probably a blue powerup bar (fixed by new icons from Ken --sebas)

* Pretty nice app, I liked kpowersave even better though... -- <nowiki>[[Hunger]]</nowiki>
** I need to turn of hibernation as that just does not work on my system and thus I do not want to offer that option to the user. How do I do turn it off?
*** HAL claims that your laptop has hibernate, this is why it is offered - submit bug in acpi-support and request that your laptop is removed from whitelist -- LukaRenko    * The icons could use some polish... the plug shown when on AC is half cut of here, etc. (Please confirm if this still exists in the current version, if yes, tell me your panel size and send me a screenshot -> sebas@kde.org)
** The mouse over window is HUGE for the little information it holds. (fixed --sebas)

* Looks good -- MachinShin    * Will it support battery status for wireless keyboard / mouse? (planned, not implemented right now, and it's also not in HAL yet --sebas)

* I don't get it...  Have I missed something? -- Marco Laverdière
** With all the respect, I don't understand why there's a need to reinvent the wheel.  Why not take Kpowersave (KP) and move it to HAL (I've read that the KP's devs are already working on this and want to collaborate) or at least, if realy there are majors technical obstacles, try to mimic (keep) the features of KP.  I've tried the "Guidance Power Manager" utility on Dapper and it appeared to me (maybe I've missed somethig?) that, at least, these 2 obvious (and interrelated) functions are missing:
***** Hibernate/Suspend actions are not only for critical battery status or lid closed situations.  They are for... power management/saving needs!  One of the main power management/saving need is to have a system hibernate/suspend when it has been left unused for a period of time, because the user had to leave his machine for wathever reason (and forgot/didn't have the time/didn't want to bother to manualy activate hibernate/suspend or to close the lid).  To be clear, we need at least an option to hibernate/suspend after a user's determined period of time (even Klaptop have this basic feature...).
****** If you want more developers working on KPowerSave, you should start yourself yesterday, rather than telling others what they should do. --sebas
                
***** If you introduce hibernate/suspend functions after a user's predetermined period of time, you need schemes, to make it easy to avoid hibernate/suspend in certain situations, i.e. when the system is left untouched but still used in the sense that the user has started Amarok to listen music, has started OO.o to make a slideshow presentation, etc.
***** Switching something on or off is a two-click action, I doubt introducing a scheme-based setup will make that easier --sebas
****** Thanks for your reply.  Let me point out however that schemes, as they are implemented in Kpowersave (see my other comment below regarding KP) and elsewhere, allow the user to determine that if a specific application is running (like OOo presenter, Amarok, CD Buner, Adept, Synaptic, etc.), hibernate/suspend should not occur.  This way of doing things suppose that once the list of these applications has been set, the user doesn't have to care anymore. So, schemes are not just a way to avoid a "two-click action".  They are also a way for the user to not have to bother continually with hibernate/suspend features and, more importantly, to not have bad surprises when he forgot "two-click action" before a presentation and that hibernate/suspend occurs right in the middle of it...
***** A lot of applications are working in support for the <nowiki>[[https://wiki.ubuntu.com/GnomePowerManagerInactiveSleep|Gnome-Power-Manager Inhibit Command]]</nowiki>. Given that this application is also DBus, why not get the applet to listen to that channel and interpret those Inhibit commands.  That would mean that application writers would only have to do the inhibit code for GPM and they would get KPM inhibiting for free.
** Please, make sure that this initiative will give Kubuntu the basic and modern power management functions that can be found in all other OSs...  Thanks anyway to all the contributors for their work.
*** If you want kpowersave, then just use it. A fundamental discussion whether power-manager should be there or not does simply not make any sense *at_all* at this point. It's not productive critique either, and is most likely ignored. If you want a well-working solution fast, start sending patches. If you don't think it's the right solution, come up with a working one that fits your need. Idletime detection is on the TODO list, though I'm not promising anything. Again, patches welcome. Nobody forces particular solution upon you. --sebas
*** Thanks again for your reply.  Here are some aditionnal considerations that I want to submit:
**** Kpowersave & Kubuntu's power management features:  You're right, I could use Kpowersave if I want.  However, the fact is that I wish that my favorite distro comes, out of the box, with all the basic power-management features that can be found in other distros and OSs, without having to install third-party application...  I don't really care if the solution is KP or not.  If for whatever reason (that are still not clear to me...) the Kubuntu devs team decides that KP should/could not be integrated, fine.  But I continue to think that if the choosen solution does not come with basic features (at leat idle time detection..), it would, at the end, appears to be a significative flaw with respect to Kubuntu's power-mangement features.  I also think that "more advanced" features, like schemes, (although they are not so new and are very useful for modern usages - see my other comment above) should be considered and eventually be included.  Also, on a sidenote, KP is not so well integrated in the Kubuntu distro, as for its installation, you have to be willing to deinstall some other packages, like kde metapackage (unless you compile KP I guess).
**** Submitting a (solution, patch, etc.) myself:  I thougt this page was meant to be a place to submit some feedback regarding Kubuntu power management?  Do I have to be a developper to submit feedback?  I'm a long time Linux user and contributor in various ways (bug reports, translation, financial, etc.), but I'm not a developper.  I do however try to take some time to submit ideas and suggestions, at appropriate places, in a respectful way, even when I disagree with an idea or an approach...  Again, I thank all the devs for their work on Kubuntu's power management's features.
**** It still makes no sense at all to question the existance of a solution hoping that it will just go away and replaced by something that works well for you -- even if that thing does not serve everybody well.

* I really like the new powermanagement applet in edgy, but I have one issue. I still own an laptop with a radeon 7500 graphicscard which requires switching to a text console before entering suspend, otherwise X wiil be totally screwed up until the next reboot. Using kpowersave/powersaved i could just edit the scripts under /usr/lib/powersave. Is there a similiar script vor the new powermanager and if yes where is it? Otherwise, since I think I am not the only one having this porblem would it not be possible to change to a text console by default? All users which arent affected by this grapics/driver bug wouldn´t mind i guess, and for others like me it would increase the "works out of the box" experience. Just my 2 cents. Keep up the good work ! -- Christian Funke
** This should be done by whichever script HAL calls to suspend  (in my customized setup, it's Bernard Blackham's hibernate script, which has switching to textmode enabled by default). Most likely, you want to report this problem to the acpi-support people. powermanager only calls HAL to initiate a suspend. --sebas

* I find the applet very useful on my Dell D600. Especially love how it's written in Python! Couple small suggestions to make UI a bit smaller:
** Since it can detect if there's a second battery or not, why not hide the second batter meter if there isn't a second battery. 
** It should be hidden indeed, Luka, could you take care of that one? --sebas
** For the laptop lid part, I tend to work in a docking station a lot, so my laptop lid starts out closed. Would it be possible to add a bit of logic to check for that, e.g. if the laptop lid was closed when the applet started up, don't do anything with lid events for that session.  --Paul Collins
* On Dell 700m, fresh Kubuntu 6.10 Beta and it looks great! Suspend works great (Fn key doesn't work), only it seems powermanagement always thinks the laptop lid is closed (it says so in a notification on login). I thought this was due to having all K/X/Ubuntu Edgy installed at once, hence the fresh Kubuntu install to verify. If I set suspend on lid close, the moment I login, the system will suspend (half of the time causing my ipw2200 wireless to be not detectable by knetworkmanager until a restart of NetworkManager). As an aside, Ubuntu Power Manager has no problems with suspend and properly detects my lid state and the Fn key. -- mrvw0169

Hi, really nice app. But on my pentium4 i get the message that cpu scalling is not supported --mmaric
* Do you have the cpufreq stuff in /sys? --sebas

Some Feedback and Issues I encountered (GrinGEO)
* 1. I liked the icon of the first version more than the black one with flash.
** Others like the new ones more :-) --sebas
* 2. It seems that Suspend works like 30seconds after aktivating it. First it shows you the login screen, than it makes the Suspend
** I don't understand that one --sebas
* 3. Suspend and Hibernate works well also on laptops with ACPI mistakes
* 4. After some suspend modis one of the CPU Cores does not has any more speedstep. One is at 1 GHz, the other at 1,8GHz. It looks there is a bug
** Most probably a driver problem, this is know to the cpufreq developers and they're working on it --sebas
* 5. Is there any way to implement the Work of this Powermanager and KPowersave (nice feature the different modi)
** KPowersave people are working on the one solution that fits them all, powermanager is only a temporary KISS replacement to serve the needs in the meantime   --sebas

Some things do not work quite right on my machine; in particular, software events work, but button events are not recognized (lid close, etc.). To someone else above with a lid-close issue you suggested 'please confirm that HAL suspend works". By that, do you just mean "does selecting suspend from the right-click on the guidance-power-management icon work?" If so, the answer is "Yes". If the question is more involved than that, could you provide some more detail about what exactly I need to do to confirm that HAL suspend works? Is there some command to test this? I know nothing about HAL, and looked for documentation, but nothing that would give me any clue as to what to do to confirm that HAL suspend works. 
Also, I couldn't figure out where the configuration files are for guidance power management. I had posted more details on the Kubuntu forums (which I figured made more sense than posting here), http://kubuntuforums.net/forums/index.php?topic=10464.0, but got no suggestions, whereas there are helpful (and knowledgable - thanks sebas) answers here. Good app, any thoughts on above greatly appreciated. -- bbb
* try lshal|grep lid --sebas
Here's what I get with the above (edited out some 'volume.unmount.valid_options =' entries)
  bbb@laptop:~$ lshal | grep lid

  button.type = 'lid'  (string)

  linux.acpi_path = '/proc/acpi/button/lid/LID'  (string)

  . . .

  bbb@laptop:~$
As noted, closing lid, or FN-F3 (suspend) key combination do nothing, but selecting 'Suspend' from log out menu works peachy -- bbb

My issues and remarks (TillBusch)
* brightness setting does not work on my sony vaio vgn-a115s. any hints? 
** What's "does not work"? Do the brightness sliders show up? If not, check lshal|grep brightness for support, it's probably not there in that case
* i think the battery icon looks strange when plugged in. --sebas
** A matter of taste? :-) --sebas

* I have disabled hibernate in /etc/default/acpi-support as it crashes on my laptop, but it is still an option in the power management applet and the shutdown dialog... would be nice if it disappeared (Ltmon)

It would be nice if the UI allowed one to change the cpu frequency, including by profiles. At the moment I've manually inserted the cpufreq modules into /etc/module (cpufreq_conservative, cpufreq_ondemand, cpufreq_powersave, cpufreq_stats, cpufreq_userspace, speedstep-centrino) and I'm using commands like this: "echo performance > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor" --tomchance

Big problem with KPM (Karolus  (masked.mail_AT_gmail.com))
* when KPM applet is running my keyboard seems to skip random keys - problem disappears after shutting KPM down.(my system is IBM T43p w. Kubuntu 6.10 stock) ((PS. should I use a bugtracker or sth ?))
** This sounds like bug <nowiki>[[https://launchpad.net/distros/ubuntu/+bug/50188|#50188]]</nowiki> - can you try workaround mentioned there?
*** Looks better but I need more time to say that this is right solution.
An Idea:
* what about dimming the screen after some time of inactivity ? (4 ex: dim the screen (by N units) every couple of minutes if inactive )
** I have plans to look into that, although it's got some technical problems to do it really nicely.
 
A little remark:
* button Ok and Apply both do the same, I think it's better to let Ok-button also minimize the screen again.
** This looks like a bug, try starting powermanager from the commandline, reproduce the problem and email me the output.
** after a reboot it works, so I don't know if it was a bug or not, but now I don't have this problem anymore.

Suspend/hibernate/shutdown when the system is more than n minutes:
This option doesn't seem to work for me. I'm running Kubuntu feisty with all the latest updates. The screen only blanks after some time, but doesn't hibernate or suspend. If I manually hibernate (from the rightclick dialog) everything works fine. Do I have to enable something to get this working? Could this be a bug? Please email me if you need more information (stivani_at_gmail.com)  --stivani

Hi, I like the app, but I have a few things that I think could be improved. Generally, it's good to have stuff configured with some sensible default values (one of the points I appreciate most about (k)ubuntu). But it would also be good to have a way to set one's own configs, and some documentation what the program exactly does and how to influence this. Examples:
* I like to have my laptop just to shut down, no questions asked, if I press the power button. Since feisty, it is asking for confirmation. Looks like a power manager feature, but I'm not sure: Is Guidance Power Manager responsible for this button at all? Maybe it's an acpi script? (I just found that the new /etc/acpi/powerbtn.sh has some not-too-well documented dcop calls.)
** This is a HAL / ACPI support issue, powermanager is really only a frontend using HAL. -- sebas  * My Laptop is a Sony Vaio PCG-Z1XMP. Setting display brightness used to work nicely until dapper, by telling the power management scripts to use the spicctrl tools. With Guidance Power Management, this broke, its settings have no effect on the display brightness. After repeated google searches, I have finally found that this may have to do with laptop_panel.access_method being set to "sony" instead of "sonypi" - at least in the lcd-brightness scripts under /usr/lib/hal/scripts/linux/ this makes an important difference. But do these scripts really have to do something with Power Manager?
** This also has to be done in HAL. -- sebas Please, please give some documentation. I would love to troubleshoot this kind of stuff, but at the moment this is more of a riddle than productive problem-solving. Let's not lose the good Linux way of having documented workings and interfaces and not just a GUI. -- Ysanne
** Well, as I said, powermanager really only is a GUI =) -- sebas     * Good, so how can I find out what commands/scripts it is a frontend to? Specifically, I'd be happy with finding out "How is it trying to make HAL set the display brightness?" :-) -- Ysanne
*** HAL has its support scripts in /usr/share/hal/scripts -- sebas = Workarounds =
==== Suspend/Hibernate/Battery laptop button support ====
You can add support for laptop keys with the following script:
<pre>
PM=`dcopfind -a 'power-manager-*'`
if [ $? != 0 ]
then
    exit 1
fi

case $0 in
** suspend*)
      dcop $PM power-manager suspend
      ;;
** hibernate*)
      dcop $PM power-manager hibernate
      ;;
** )
      dcop $PM power-manager showTip
      ;;
esac
</pre>

Save this script to some directory (for example `~/bin`) and give it some name (`pm-hotkey`), then create symbolic links for three actions:
<pre>
ln -s ~/bin/pm-hotkey ~/bin/pm-suspend
ln -s ~/bin/pm-hotkey ~/bin/pm-hibernate
</pre>

Now you can assign the keys with KHotkeys (System Settings -> Accessibility -> Input Actions):
# Select '''Add New Action'''
# Give it a name (like "Suspend", "Hibernate", "Battery")
# Set '''Action type''' to "Keyboard Shortcut -> Command/URL (simple)"
# Click on '''Keyboard Shortcut''' tab 
# Click on `None` button, press the key you want to assign action to (it will return one of the following: `XF86LaunchB`, `XF86Standby`, `XF86Sleep`)
# Click on '''Command/URL Settings'''
# Browse ans select one of the scripts (`~/bin/pm-hotkey`, `~/bin/pm-suspend`, `~/bin/pm-hibernate`)
