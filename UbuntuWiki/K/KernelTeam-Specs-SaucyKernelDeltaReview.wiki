{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



* '''Launchpad entry''': UbuntuSpec:foundations-1308-kernel
* '''Created''':
* '''Contributors''': 
* '''Packages affected''':
=== Summary ===
Review of the current Ubuntu Kernel patch delta from upstream. This session will look at the current delta comprised of both patches to the core and the ubuntu specific drivers. The aim is to record what we are carrying, review the reasons for that component(s) to be carried, and recommend replacements, updates, cleanups, upstreaming etc of those components.

=== Release Note ===

=== Rationale ===
Not every patch and/or driver carried in the Ubuntu delta is automatically sync'd with the upstream kernel for various reasons. This places a maintenance burden on the Ubuntu kernel team. These patches and/or drivers must be regularly reviewed to determine if they are still needed, if they need updating to a later version, or if they are now ready for upstream acceptance. The purpose of this blueprint is to facilitate and record this review for the 13.10 cycle.

=== Ubuntu Delta Summary 3.11.0-12.19 ===

3.11.0-12.19 (ie. recently rebased on v3.11.3) delta review summary is as follows:

{| class="wikitable"
|-
| # patches
| comment
|-
| 426
| patches on top of the v3.11.3
|-
| 189
| SAUCE patches
|-
| 192
| debian commits (configuration updates and build machinary)
|-
| 17
| ubuntu/ driver patches
|-
| 28
| patches added then reverted (ie 14 applied, 14 reverted)
|}

==== Ubuntu Drivers ====
# AUFS -- union mount support
## UBUNTU: ubuntu: (no-squash) AUFS3 -- aufs3-standalone.patch
## UBUNTU: ubuntu: (no-squash) AUFS3 -- aufs3-base.patch
## UBUNTU: ubuntu: AUFS -- fix remaining d_count references to use accessor
## UBUNTU: ubuntu: (no-squash) AUFS -- enable aufs
## UBUNTU: ubuntu: AUFS -- update to 5ac5fe26a90a818218310e208d17688fddb07622
## UBUNTU: ubuntu: AUFS -- base commit was 8e503d4142c189ed6c47a2177ad2cd058e8d340e before clean
## UBUNTU: ubuntu: AUFS (no-squash): basic framework and update machinary
# lttng - Linux Trace Toolkit Next Generation
## UBUNTU: ubuntu: lttng -- follow rename of pid_ns
# overlayfs
## UBUNTU: ubuntu: overlayfs v18 -- -- fs: limit filesystem stacking depth
## UBUNTU: ubuntu: overlayfs v18 -- -- overlay: overlay filesystem documentation
## UBUNTU: ubuntu: overlayfs v18 -- -- overlayfs: implement show_options
## UBUNTU: ubuntu: overlayfs v18 -- -- overlayfs: add statfs support
## UBUNTU: ubuntu: overlayfs v18 -- -- overlay filesystem
## UBUNTU: ubuntu: overlayfs v18 -- -- vfs: introduce clone_private_mount()
## UBUNTU: ubuntu: overlayfs v18 -- -- vfs: export __inode_permission() to modules
## UBUNTU: ubuntu: overlayfs v18 -- -- vfs: export do_splice_direct() to modules
## UBUNTU: ubuntu: overlayfs v18 -- -- vfs: add i_op->dentry_open()

==== Ubuntu Patches (not for upstream) ====
## UBUNTU: SAUCE: (no-up) net: calxedaxgmac: determine number of address filters at runtime
## UBUNTU: SAUCE: (no-up) net: calxedaxgmac: add uc and mc filter addresses in promiscuous mode
## UBUNTU: SAUCE: (no-up) net: calxedaxgmac: fix clearing of old filter addresses
## Revert "UBUNTU: SAUCE: (no-up) scsi: add scsi device flag to request VPD pages be used at SPC-2"
## Revert "UBUNTU: SAUCE: (no-up) scsi: add scsi device flag to request READ CAPACITY (16) be preferred"
## Revert "UBUNTU: SAUCE: (no-up) scsi: hyper-v storage -- mark as VPD capable at SPC-2"
## Revert "UBUNTU: SAUCE: (no-up) scsi: hyper-v storage -- mark as preferring READ CAPACITY (16) at SPC-2"
## UBUNTU: SAUCE: (no-up) ACPI: Disable Windows 8 compatibility for some Lenovo ThinkPads
## UBUNTU: SAUCE: (no-up) scsi: hyper-v storage -- mark as preferring READ CAPACITY (16) at SPC-2
## UBUNTU: SAUCE: (no-up) scsi: hyper-v storage -- mark as VPD capable at SPC-2
## UBUNTU: SAUCE: (no-up) scsi: add scsi device flag to request READ CAPACITY (16) be preferred
## UBUNTU: SAUCE: (no-up) scsi: add scsi device flag to request VPD pages be used at SPC-2
## UBUNTU: SAUCE: (no-up) Only let characters through when there are active readers.
## UBUNTU: SAUCE: (no-up) USB: input: cm109.c: Convert high volume dev_err() to dev_err_ratelimited()
## UBUNTU: SAUCE: (no-up) hv -- bodge hv_vss_daemon so it can use the local linux/hyperv.h
## UBUNTU: SAUCE: (no-up) hv_vss_daemon -- prevent self-daemonising to allow upstart to track
## UBUNTU: SAUCE: (no-up) apparmor: Sync to apparmor 3 - alpha 4 snapshot
## Revert "UBUNTU: SAUCE: (no-up) apparmor: fix apparmor module status for none root users"
## Revert "UBUNTU: SAUCE: (no-up) apparmor: Sync to apparmor 3 dev stable snapshot"
## UBUNTU: SAUCE: (no-up) intel_ips: blacklist ASUSTek G60JX laptops
## UBUNTU: SAUCE: (no-up) e1000e: enable support for new device IDs
## UBUNTU: SAUCE: (no-up) e1000e: fix I217/I218 PHY initialization flow
## UBUNTU: SAUCE: (no-up) apparmor: Sync to apparmor 3 dev stable snapshot
## UBUNTU: SAUCE: (no-up) Update bnx2x firmware to 7.8.17.0
## UBUNTU: SAUCE: (no-up) ipv6: Fix net.ipv6.conf.all.use_tempaddr sysctl
## UBUNTU: SAUCE: (no-up) apparmor: fix apparmor module status for none root users
## UBUNTU: SAUCE: (no-up) trace: add trace events for open(), exec() and uselib() (for v3.7+)
## UBUNTU: SAUCE: (no-up) x86: reboot: Make Dell Optiplex 390 use reboot=pci
## UBUNTU: SAUCE: (no-up) cpufreq: OMAP: instantiate omap-cpufreq as a platform_driver
## UBUNTU: SAUCE: (no-up) PCI: fix system hang issue of Marvell SATA host controller
## UBUNTU: SAUCE: (no-up) Convert bnx2x firmware files to ihex format
## UBUNTU: SAUCE: (no-up) Input: Cypress PS/2 Trackpad simulated multitouch
## UBUNTU: SAUCE: (no-up) hv: Supply vendor ID and package ABI
## UBUNTU: SAUCE: (no-up) hv_kvp_daemon -- prevent self-daemonising to allow upstart to track
## UBUNTU: SAUCE: (no-up) hv -- bodge hv_kvp_daemon so it can use the local linux/hyperv.h
## UBUNTU: SAUCE: (no-up) add eeprom_bad_csum_allow module parameter
## UBUNTU: SAUCE: (no-up) Revert "VFS: don't do protected {sym,hard}links by default"
## UBUNTU: SAUCE: (no-up) Remove vicam files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove dsp56k files used only by m68k
## UBUNTU: SAUCE: (no-up) Update bnx2x firmware to 7.8.2.0
## UBUNTU: SAUCE: (no-up) Remove radeon files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove sun files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove keyspan files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove acenic files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove r128 files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove cxgb3 files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove matrox files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove tehuti files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove yam files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) fix highbank include path
## UBUNTU: SAUCE: (no-up) Allow HID_BATTERY_STRENGTH to be modular
## UBUNTU: SAUCE: (no-up) Add 'used' to the video_cards structure attributes
## UBUNTU: SAUCE: (no-up) vxge: Declare MODULE_FIRMWARE usage
## UBUNTU: SAUCE: (no-up) rds_ib_send() -- prevent local pings triggering BUG_ON()
## UBUNTU: SAUCE: (no-up) firmware: Upgrade bnx2 to current versions
## UBUNTU: SAUCE: (no-up) firmware: Remove obsolete Myricom firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove cpia2 files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove av7110 files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove ambassador files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove advansys files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove adaptec files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove ti_usb_3410_5052 duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove edgeport files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove kaweth files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) firmware: Remove ess files duplicated in linux-firmware
## UBUNTU: SAUCE: (no-up) Remove redundant keyspan_pda firmware
## UBUNTU: SAUCE: (no-up) Remove redundant yamaha/ds1 firmware
## UBUNTU: SAUCE: (no-up) Remove redundant ositech/Xilinx7OD firmware
## UBUNTU: SAUCE: (no-up) Remove redundant ttusb-budget firmware
## UBUNTU: SAUCE: (no-up) Remove redundant cis firmware
## UBUNTU: SAUCE: (no-up) firmware: Update bnx2x to current firmware version 7.2.51
## UBUNTU: SAUCE: (no-up) kconfig: in debug mode some 0 length message prints occur
## UBUNTU: SAUCE: (no-up) Allow filtering of cpufreq drivers
## UBUNTU: SAUCE: (no-up) tools/hv: add basic manual pages
## UBUNTU: SAUCE: (no-up) tools/hv: add basic Makefile
## UBUNTU: SAUCE: (no-up) elide some ioctl warnings which are known benign
## UBUNTU: SAUCE: (no-up) Input: synapticss - Set buttonpad property for all clickpads
## UBUNTU: SAUCE: (no-up) Input: synaptics - add second variant of two-button clickpad
## UBUNTU: SAUCE: (no-up) ipv6: make the net.ipv6.conf.all.use_tempaddr sysctl propagate to interface settings
## UBUNTU: SAUCE: (no-up) dell-wmi: Demote unknown WMI event message to pr_debug
## UBUNTU: SAUCE: (no-up) x86: reboot: Make Dell Latitude E6220 use reboot=pci
## UBUNTU: SAUCE: (no-up) x86: reboot: Make Dell Optiplex 990 use reboot=pci
## UBUNTU: SAUCE: (no-up) x86: reboot: Make Dell Optiplex 790 use reboot=pci
## UBUNTU: SAUCE: (no-up) x86: reboot: Make Dell Latitude E6520 use reboot=pci
## UBUNTU: SAUCE: (no-up) vfs: Add a trace point in the mark_inode_dirty function
## UBUNTU: SAUCE: (no-up) add tracing for user initiated readahead requests
## UBUNTU: SAUCE: (no-up) add support for installed header files to ubuntu directory
## UBUNTU: SAUCE: (no-up) Added quirk to recognize GE0301 3G modem as an interface.
## UBUNTU: SAUCE: (no-up) drm -- stop early access to drm devices
## UBUNTU: SAUCE: (no-up) ARM: Resetting power_mode to its original value.
## UBUNTU: SAUCE: (no-up) fix build error with CONFIG_BLK_DEV_INITRD=n
## UBUNTU: SAUCE: (no-up) dma-mapping: Remove WARN_ON in dma_free_coherent
## UBUNTU: SAUCE: (no-up) cdrom -- default to not locking the tray when in use
## UBUNTU: SAUCE: (no-up) raise the default console 'quiet' level to 2
## UBUNTU: SAUCE: (no-up) Sony laptop: Some Sony Vaia laptops do not enable wwan power by default.
## UBUNTU: SAUCE: (no-up) nbd: Change default partitions per device to 15
## UBUNTU: SAUCE: (no-up) hostap: Change initial operation mode to managed (infra)
## UBUNTU: SAUCE: (no-up) version: Implement version_signature proc file.
## UBUNTU: SAUCE: (no-up) dm-raid45: Fix incompatible ptr assignments
## UBUNTU: SAUCE: (no-up) ubuntu: dm-raid45
## UBUNTU: SAUCE: (no-up) Modularize vesafb

==== Ubuntu Patches (for review) ====
# Adam Lee
## mfd: rtsx: Read vendor setting from config space
## UBUNTU: SAUCE: Bluetooth: Add support for 105b:e065
## UBUNTU: SAUCE: Bluetooth: Add support for 04ca:2007
# Andy Whitcroft
## UBUNTU: SAUCE: storvsc -- host takes MAINTENANCE_IN commands badly elide them
## Drivers: hv: util: Fix a bug in version negotiation code for util services
## Drivers: hv: balloon: Initialize the transaction ID just before sending the packet
## scsi: hyper-v storsvc switch up to SPC-3
## UBUNTU: SAUCE: disable stack-protector for ARM compressed bootloader
## UBUNTU: [Config] clean up ubuntu/Kconfig and ubuntu/Makefile
## UBUNTU: rebase to 04012e3076943f17c8cfc77a196701c8f0b8964f
## UBUNTU: SAUCE: intel_pstate -- toggle default to disable
## UBUNTU: SAUCE: isapnp_init: make isa PNP scans occur async
## UBUNTU: [debian] ensure debian/ is not excluded from git by default
# Chris J Arges
## Bluetooth: Purge the dlc->tx_queue to avoid circular dependency
## Bluetooth: Fix the reference counting of tty_port
## Bluetooth: Implement .activate, .shutdown and .carrier_raised methods
## Bluetooth: Move the tty initialization and cleanup out of open/close
## Bluetooth: Remove the device from the list in the destructor
## Bluetooth: Take proper tty_struct references
# Colin King
## NVMe: Remove "process_cq did something" message
# Gavin Guo
## UBUNTU: SAUCE: Bluetooth: Add support for Broadcom 413c:8143
# John Johansen
## UBUNTU: SAUCE: apparmor: fix bad lock balance when introspecting policy
## UBUNTU: SAUCE: apparmor: fix memleak of replacedby struct
## UBUNTU: SAUCE: apparmor: fix memleak of the profile hash
## UBUNTU: SAUCE: apparmor: allocate path lookup buffers during init
## UBUNTU: SAUCE: apparmor: fix unix domain sockets to be mediated on connection
# Joseph Salisbury
## Revert "HID: core: fix reporting of raw events"
## Input: cypress_ps2 - Return zero finger count if palm is detected.
## uvcvideo: quirk PROBE_DEF for Dell SP2008WFP monitor.
## UBUNTU: SAUCE: uvcvideo: quirk PROBE_DEF for Alienware X51 OmniVision webcam
## UBUNTU: SAUCE: dm-crypt: never use write same
# Leann Ogasawara
## igb: Update version number
## igb: Implementation to report advertised/supported link on i354 devices
## igb: Get speed and duplex for 1G non_copper devices
## igb: Support to get 2_5G link status for appropriate media type
## igb: No PHPM support in i354 devices
## igb: M88E1543 PHY downshift implementation
## igb: New PHY_ID for i354 device
## igb: Implementation of 1-sec delay for i210 devices
## igb: Don't look for a PBA in the iNVM when flashless
## igb: Expose RSS indirection table for ethtool
## igb: Add macro for size of RETA indirection table
## igb: Fix get_fw_version function for all parts
## igb: Add device support for flashless SKU of i210 device
## igb: Refactor NVM read functions to accommodate devices with no flash
## igb: Refactor of init_nvm_params
## igb: Update MTU so that it is always at least a standard frame size
## igb: don't allow SR-IOV without MSI-X
## igb: Added rcu_lock to avoid race
## igb: Read register for latch_on without return value
## igb: Reset the link when EEE setting changed
## UBUNTU: rebase to v3.10-rc4
## UBUNTU: [debian] Initial debian and ubuntu directories
## UBUNTU: [Debian] Prep for Ubuntu build infrastructure
# Luis Henriques
## cpqarray: fix info leak in ida_locked_ioctl()
## cciss: fix info leak in cciss_ioctl32_passthru()
# Paolo Pisati
## UBUNTU: SAUCE: ARM: dts: Fix muxing and regulator for wl12xx on the SDIO bus for pandaboard
## net: calxedaxgmac: fix xgmac_xmit DMA mapping error handling
## net: calxedaxgmac: fix rx DMA mapping API size mismatches
## net: calxedaxgmac: remove some unused statistic counters
## net: calxedaxgmac: fix various errors in xgmac_set_rx_mode
## net: calxedaxgmac: enable interrupts after napi_enable
## net: calxedaxgmac: fix race with tx queue stop/wake
## net: calxedaxgmac: update ring buffer tx_head after barriers
## net: calxedaxgmac: fix possible skb free before tx complete
## net: calxedaxgmac: fix race between xgmac_tx_complete and xgmac_tx_err
## net: calxedaxgmac: read correct field in xgmac_desc_get_buf_len
## net: calxedaxgmac: remove NETIF_F_FRAGLIST setting
## ARM: highbank: clean-up some unused includes
## ARM: highbank: avoid L2 cache smc calls when PL310 is not present
## ARM: move outer_cache declaration out of ifdef
## ARM: highbank: select ARCH_DMA_ADDR_T_64BIT for LPAE
## DMA: fix printk warning in AMBA PL08x DMA driver
## DMA: fix AMBA PL08x compilation issue with 64bit DMA address type
## ARM: highbank: select required errata work-arounds
## ARM: highbank: select ARCH_HAS_HOLES_MEMORYMODEL
## ARM: highbank: enable DMA zone for LPAE
## ARM: use phys_addr_t for DMA zone sizes
# Tim Gardner
## ALSA: hda - Add fixup for MacBook Air 6,1 and 6,2 with CS4208 codec
## ALSA: hda - Add CS4208 codec support for MacBook 6,1 and 6,2
## Reinstate "crypto: crct10dif - Wrap crc_t10dif function all to use crypto transform framework"
## modules: add support for soft module dependencies
## perf/x86/intel: Fix Silvermont offcore masks
## perf/x86: Add Silvermont (22nm Atom) support
## UBUNTU: Update lttng
## UBUNTU: Moved update-lttng.sh
## igb: Read flow control for i350 from correct EEPROM section
## igb: Add additional get_phy_id call for i354 devices
## Intel xhci: refactor EHCI/xHCI port switching
## UBUNTU: SAUCE: hv: Add vss daemon to Makefile
## UBUNTU: SAUCE: Fix lttng compile errors
## UBUNTU: [Config] Enable overlayfs
## UBUNTU: overlayfs: Update to v19
## UBUNTU: Disable overlayfs for FTBS
## UBUNTU: Disabled lttng
## UBUNTU: Added lttng
## UBUNTU: [debian] Moved scripts/fw-to-ihex.sh to debian/scripts/misc
# Tyler Hicks
## UBUNTU: SAUCE: apparmor: Use shash crypto API interface for profile hashes
# Wen-chien Jesse Sung
## UBUNTU: SAUCE: Bluetooth: Add support for 13d3:3388 and 13d3:3389
## UBUNTU: SAUCE: Bluetooth: Support for loading broadcom patchram firmware

