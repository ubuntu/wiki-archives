{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:kernel-maverick-config-review
* '''Created''':
* '''Contributors''': 
* '''Packages affected''':

=== Summary ===
Review of the kernel configuration for Maverick. This will concentrate on confirming the policy for various option type, as well as new options. For major new options, discussion and confirmation of the selection of each.

=== Release Note ===
TBC

=== Rationale ===
We need to review the Maverick kernel config to:

* Ensure sanity of options we have enabled/disabled
* Ensure that we have the best possible coverage for hardware
* Ensure we maintain our security options

=== Implementation ===
We need to review the default selection criteria for new options.  We need to review any new options to ensure they are sensibly set. Finally we need to review important options such as filesystem selections and security options to ensure they are set as expected.

==== Selection Criteria ====

The basic rules are:

# if the option may be selected as module then we will enable it as a module,
# if the option creates a new subsystem (or filesystem) we will enable it,
# if the option is unlikely to cause regressions to existing behaviour we will enable it,
# if the option is dependent on EXPERIMENTAL then our normal policy is to not enable it,
# else it will be disabled.

Additionally we have general policy of building in:

# subsystems associated with busses (as they will probe much earlier that way)
# boot essential subsystems
# default filesystems
# extremely common drivers
# usbhost interface drivers as they have huge ordering requirements
# cpufreq because it's hard to do in userspace
# non-discoverable drivers

===== Filesystems =====
{| class="wikitable"
|-
| Option
| UBUNTU
| PORTS
| Comments
|-
| CONFIG_9P_FS
| m
| m
| 
|-
| CONFIG_ADFS_FS
| m
| m
| 
|-
| CONFIG_AFFS_FS
| m
| m
| 
|-
| CONFIG_AFS_FS
| m
| m
| 
|-
| CONFIG_AUFS_FS
| m
| m
| 
|-
| CONFIG_AUTOFS4_FS
| m
| m
| 
|-
| CONFIG_AUTOFS_FS
| m
| m
| 
|-
| CONFIG_BEFS_FS
| m
| m
| 
|-
| CONFIG_BFS_FS
| m
| m
| 
|-
| CONFIG_BTRFS_FS
| m
| m
| 
|-
| CONFIG_CODA_FS
| m
| m
| 
|-
| CONFIG_CONFIGFS_FS
| m
| m
| 
|-
| CONFIG_DEBUG_FS
| y
| y
| 
|-
| CONFIG_ECRYPT_FS
| y
| m
| 
|-
| CONFIG_EFS_FS
| m
| m
| 
|-
| CONFIG_EXOFS_FS
| m
| m
| 
|-
| CONFIG_EXT2_FS
| y
| y
| 
|-
| CONFIG_EXT3_FS
| y
| y
| 
|-
| CONFIG_EXT4_FS
| y
| y
| 
|-
| CONFIG_FAT_FS
| m
| m
| 
|-
| CONFIG_FUSE_FS
| y
| y
| 
|-
| CONFIG_GFS2_FS
| m
| m
| 
|-
| CONFIG_HFSPLUS_FS
| m
| m
| 
|-
| CONFIG_HFS_FS
| m
| m
| 
|-
| CONFIG_HPFS_FS
| m
| m
| 
|-
| CONFIG_IDE_PROC_FS
| -
| y
| Same as Lucid
|-
| CONFIG_ISO9660_FS
| m
| m
| 
|-
| CONFIG_JFFS2_FS
| m
| m
| 
|-
| CONFIG_JFS_FS
| m
| m
| 
|-
| CONFIG_MINIX_FS
| m
| m
| 
|-
| CONFIG_MSDOS_FS
| m
| m
| 
|-
| CONFIG_NCP_FS
| m
| m
| 
|-
| CONFIG_NFS_FS
| m
| m
| 
|-
| CONFIG_NILFS2_FS
| m
| m
| 
|-
| CONFIG_NTFS_FS
| m
| m
| 
|-
| CONFIG_OCFS2_FS
| m
| m
| 
|-
| CONFIG_OMFS_FS
| m
| m
| 
|-
| CONFIG_PNPBIOS_PROC_FS
| y
| -
| Same as Lucid
|-
| CONFIG_PROC_FS
| y
| y
| 
|-
| CONFIG_QNX4FS_FS
| m
| m
| 
|-
| CONFIG_REISERFS_FS
| m
| m
| 
|-
| CONFIG_ROMFS_FS
| m
| m
| 
|-
| CONFIG_SCSI_PROC_FS
| y
| y
| 
|-
| CONFIG_SMB_FS
| m
| m
| 
|-
| CONFIG_SPU_FS
| -
| m
| Same as Lucid
|-
| CONFIG_SYSV_FS
| m
| m
| 
|-
| CONFIG_UDF_FS
| m
| m
| 
|-
| CONFIG_VFAT_FS
| m
| m
| 
|-
| CONFIG_VXFS_FS
| m
| m
| 
|-
| CONFIG_XFS_FS
| m
| m
| 
|}

===== Security =====
{| class="wikitable"
|-
| Option
| UBUNTU
| PORTS
| Comments
|-
| CONFIG_CC_STACKPROTECTOR
| y
| -
| 
|-
| CONFIG_COMPAT_BRK
| n
| n
| 
|-
| CONFIG_COMPAT_VDSO
| n
| -
| 
|-
| CONFIG_DEBUG_RODATA
| y
| -
| 
|-
| CONFIG_DEFAULT_MMAP_MIN_ADDR
| 65536
| 32768/65536
| sparc=32768, all others=65536
|-
| CONFIG_DEVKMEM
| n
| n
| 
|-
| CONFIG_LSM_MMAP_MIN_ADDR
| 0
| 0
| 
|-
| CONFIG_SECCOMP
| y
| y
| 
|-
| CONFIG_SECURITY
| y
| y
| 
|-
| CONFIG_SECURITYFS
| y
| y
| 
|-
| CONFIG_SECURITY_NETWORK
| y
| y
| 
|-
| CONFIG_SECURITY_PATH
| y
| y
| 
|-
| CONFIG_STRICT_DEVMEM
| y
| -
| 
|-
| CONFIG_SYN_COOKIES
| y
| y
| 
|}

===== Subsystems =====
{| class="wikitable"
|-
| Option
| UBUNTU
| PORTS
| Comments
|-
| CONFIG_ACPI
| y
| y
| 
|-
| CONFIG_APM
| m
| -
| 
|-
| CONFIG_BT
| m
| -
| 
|-
| CONFIG_NET
| y
| y
| 
|-
| CONFIG_NETFILTER
| y
| y
| 
|-
| CONFIG_PCI
| y
| y
| 
|-
| CONFIG_SCSI
| y
| m/y
| ia64=m, powerpc=y, sparc=m
|-
| CONFIG_USB
| y
| m/y
| armel=m, ia64=y, lpia=y, powerpc=y, sparc=m
|}

===== Network Protocols =====
{| class="wikitable"
|-
| Option
| UBUNTU
| PORTS
| Comments
|-
| CONFIG_AF_RXRPC
| m
| m
| 
|-
| CONFIG_ATALK
| m
| m
| 
|-
| CONFIG_ATM
| m
| m
| 
|-
| CONFIG_AX25
| m
| m
| 
|-
| CONFIG_BRIDGE
| m
| m
| 
|-
| CONFIG_CAN
| m
| m
| 
|-
| CONFIG_CFG80211
| m
| m
| 
|-
| CONFIG_DCB
| y
| y
| 
|-
| CONFIG_DECNET
| m
| m
| 
|-
| CONFIG_ECONET
| m
| m
| 
|-
| CONFIG_IEEE802154
| m
| m
| 
|-
| CONFIG_INET
| y
| y
| 
|-
| CONFIG_IP_DCCP
| m
| m
| 
|-
| CONFIG_IP_SCTP
| m
| m
| 
|-
| CONFIG_IPV6
| y
| m
| '''INCONSISTENT'''
|-
| CONFIG_IPX
| m
| m
| 
|-
| CONFIG_IRDA
| m
| m
| 
|-
| CONFIG_LAPB
| m
| m
| 
|-
| CONFIG_LLC
| y
| y/m
| ports{ia64=y, powerpc=y, sparc=m}
|-
| CONFIG_MAC80211
| m
| m
| 
|-
| CONFIG_NET_9P
| m
| m
| 
|-
| CONFIG_NET_DSA
| y
| y
| 
|-
| CONFIG_NETFILTER_NETLINK
| m
| m
| 
|-
| CONFIG_NETLABEL
| y
| y
| 
|-
| CONFIG_NET_SCHED
| y
| y
| 
|-
| CONFIG_PACKET
| y
| y
| 
|-
| CONFIG_PHONET
| m
| m
| 
|-
| CONFIG_RDS
| m
| m
| 
|-
| CONFIG_RFKILL
| y
| m
| '''INCONSISTENT'''
|-
| CONFIG_STP
| m
| m
| 
|-
| CONFIG_SUNRPC
| m
| m
| 
|-
| CONFIG_TIPC
| m
| m
| 
|-
| CONFIG_UNIX
| y
| y
| 
|-
| CONFIG_VLAN_8021Q
| m
| m
| 
|-
| CONFIG_WAN_ROUTER
| m
| m
| 
|-
| CONFIG_WIMAX
| m
| m
| 
|-
| CONFIG_WIRELESS_EXT
| y
| y
| 
|-
| CONFIG_X25
| m
| m
| 
|-
| CONFIG_XFRM
| y
| y
| 
|}

===== New Options =====
{| class="wikitable"
|-
| Option
| Value
| Comments
|-
| CONFIG_AB3100_CORE
| y
| 
|-
| CONFIG_AB4500_CORE
| m
| 
|-
| CONFIG_ACPI_CMPC
| m
| 
|-
| CONFIG_AD525X_DPOT
| m
| 
|-
| CONFIG_ATH9K_DEBUGFS
| n
| 
|-
| CONFIG_ATH_DEBUG
| n
| 
|-
| CONFIG_BACKLIGHT_88PM860X
| m
| 
|-
| CONFIG_BACKLIGHT_ADP5520
| m
| 
|-
| CONFIG_BACKLIGHT_MAX8925
| m
| 
|-
| CONFIG_BATMAN_ADV_DEBUG
| n
| 
|-
| CONFIG_BATMAN_ADV
| m
| 
|-
| CONFIG_BATMAN_DEBUG
| n
| 
|-
| CONFIG_BLK_DEV_DRBD
| n
| 
|-
| CONFIG_BRIDGE_IGMP_SNOOPING
| y
| 
|-
| CONFIG_BT_ATH3K
| m
| 
|-
| CONFIG_CAN_MCP251X
| m
| 
|-
| CONFIG_CAN_PLX_PCI
| m
| 
|-
| CONFIG_CEPH_FS
| n
| 
|-
| CONFIG_CFG80211_WEXT
| y
| 
|-
| CONFIG_CFQ_GROUP_IOSCHED
| n
| 
|-
| CONFIG_CHELSIO_T4
| m
| 
|-
| CONFIG_CRYPTO_PCRYPT
| n
| 
|-
| CONFIG_CRYSTALHD
| m
| 
|-
| CONFIG_CS5535_MFGPT
| n
| 
|-
| CONFIG_DEBUG_STRICT_USER_COPY_CHECKS
| n
| 
|-
| CONFIG_DMADEVICES_DEBUG
| n
| 
|-
| CONFIG_DRM_VMWGFX
| m
| 
|-
| CONFIG_DT3155
| m
| 
|-
| CONFIG_DVB_HOPPER
| m
| 
|-
| CONFIG_DVB_MANTIS
| m
| 
|-
| CONFIG_DVB_NGENE
| m
| 
|-
| CONFIG_DVB_USB_AZ6027
| m
| 
|-
| CONFIG_DVB_USB_EC168
| n
| 
|-
| CONFIG_DVB_USB_EC168
| m
| 
|-
| CONFIG_EEEPC_WMI
| n
| 
|-
| CONFIG_FB_SM7XX_ACCEL
| n
| 
|-
| CONFIG_FB_SM7XX
| m
| 
|-
| CONFIG_GIGASET_CAPI
| n
| 
|-
| CONFIG_GPIO_ADP5520
| m
| 
|-
| CONFIG_GPIO_ADP5588
| m
| 
|-
| CONFIG_GPIO_CS5535
| m
| 
|-
| CONFIG_GPIO_IT8761E
| m
| 
|-
| CONFIG_GPIO_MAX7300
| m
| 
|-
| CONFIG_GPIO_SCH
| m
| 
|-
| CONFIG_GPIO_TIMBERDALE
| y
| 
|-
| CONFIG_GPIO_WM8350
| m
| 
|-
| CONFIG_GPIO_WM8994
| m
| 
|-
| CONFIG_HID_3M_PCT
| m
| 
|-
| CONFIG_HID_MAGICMOUSE
| m
| 
|-
| CONFIG_HID_MOSART
| m
| 
|-
| CONFIG_HID_QUANTA
| m
| 
|-
| CONFIG_HID_STANTUM
| m
| 
|-
| CONFIG_HTC_I2CPLD
| y
| 
|-
| CONFIG_I2C_SMBUS
| m
| 
|-
| CONFIG_I2C_XILINX
| m
| 
|-
| CONFIG_IIO_GPIO_TRIGGER
| m
| 
|-
| CONFIG_IIO_PERIODIC_RTC_TRIGGER
| m
| 
|-
| CONFIG_INPUT_88PM860X_ONKEY
| m
| 
|-
| CONFIG_INPUT_SPARSEKMAP
| m
| 
|-
| CONFIG_INPUT_TWL4030_VIBRA
| m
| 
|-
| CONFIG_IPV6_SIT_6RD
| n
| 
|-
| CONFIG_IP_VS_PROTO_SCTP
| y
| 
|-
| CONFIG_IWLWIFI_DEVICE_TRACING
| n
| 
|-
| CONFIG_IWMC3200TOP_DEBUGFS
| n
| 
|-
| CONFIG_IWMC3200TOP_DEBUG
| n
| 
|-
| CONFIG_IWMC3200TOP
| m
| 
|-
| CONFIG_IXGBEVF
| m
| 
|-
| CONFIG_KERNEL_GZIP
| y
| 
|-
| CONFIG_KEYBOARD_ADP5520
| m
| 
|-
| CONFIG_KPROBE_EVENT
| y
| 
|-
| CONFIG_KSYM_TRACER
| n
| 
|-
| CONFIG_KSZ884X_PCI
| m
| 
|-
| CONFIG_LCD_L4F00242T03
| m
| 
|-
| CONFIG_LEDS_88PM860X
| m
| 
|-
| CONFIG_LEDS_ADP5520
| m
| 
|-
| CONFIG_LEDS_INTEL_SS4200
| m
| 
|-
| CONFIG_LEDS_LT3593
| m
| 
|-
| CONFIG_LEDS_REGULATOR
| m
| 
|-
| CONFIG_LIBERTAS_MESH
| n
| 
|-
| CONFIG_LOGFS
| n
| 
|-
| CONFIG_LOGIG940_FF
| y
| 
|-
| CONFIG_LPC_SCH
| m
| 
|-
| CONFIG_MACVTAP
| n
| 
|-
| CONFIG_MANTIS_CORE
| m
| 
|-
| CONFIG_MAX1363_RING_BUFFER
| y
| 
|-
| CONFIG_MAX63XX_WATCHDOG
| m
| 
|-
| CONFIG_MAX8925_POWER
| m
| 
|-
| CONFIG_MFD_88PM8607
| y
| 
|-
| CONFIG_MFD_88PM860X
| y
| 
|-
| CONFIG_MFD_MAX8925
| y
| 
|-
| CONFIG_MFD_TIMBERDALE
| m
| 
|-
| CONFIG_MFD_WM831X
| y
| 
|-
| CONFIG_MFD_WM8350_I2C
| y
| 
|-
| CONFIG_MFD_WM8994
| y
| 
|-
| CONFIG_MMC_RICOH_MMC
| n
| 
|-
| CONFIG_MSI_WMI
| m
| 
|-
| CONFIG_NETFILTER_XT_TARGET_CT
| m
| 
|-
| CONFIG_NF_CONNTRACK_ZONES
| y
| 
|-
| CONFIG_NO_BOOTMEM
| y
| 
|-
| CONFIG_OPTPROBES
| n
| 
|-
| CONFIG_PATA_TOSHIBA
| n
| 
|-
| CONFIG_PM_ADVANCED_DEBUG
| n
| 
|-
| CONFIG_PMIC_ADP5520
| y
| 
|-
| CONFIG_PPS_CLIENT_KTIMER
| n
| 
|-
| CONFIG_PPS_CLIENT_LDISC
| m
| 
|-
| CONFIG_QLCNIC
| m
| 
|-
| CONFIG_R8187SE
| m
| 
|-
| CONFIG_RADIO_SAA7706H
| m
| 
|-
| CONFIG_RADIO_TEF6862
| m
| 
|-
| CONFIG_RADIO_TIMBERDALE
| m
| 
|-
| CONFIG_RAMZSWAP
| m
| 
|-
| CONFIG_RAMZSWAP_STATS
| y
| 
|-
| CONFIG_RCU_FAST_NO_HZ
| n
| 
|-
| CONFIG_REGULATOR_88PM8607
| y
| 
|-
| CONFIG_REGULATOR_DUMMY
| n
| 
|-
| CONFIG_REGULATOR_MAX8649
| m
| 
|-
| CONFIG_REGULATOR_MAX8660
| m
| 
|-
| CONFIG_REGULATOR_MAX8925
| m
| 
|-
| CONFIG_REGULATOR_WM8994
| m
| 
|-
| CONFIG_RT2800PCI
| n
| 
|-
| CONFIG_RT2800USB_RT30XX
| n
| 
|-
| CONFIG_RT2800USB_RT35XX
| n
| 
|-
| CONFIG_RT2800USB_UNKNOWN
| n
| 
|-
| CONFIG_RTC_DRV_BQ32K
| m
| 
|-
| CONFIG_RTC_DRV_MAX8925
| m
| 
|-
| CONFIG_RTC_DRV_MC13783
| m
| 
|-
| CONFIG_RTC_DRV_MSM6242
| m
| 
|-
| CONFIG_RTC_DRV_RP5C01
| m
| 
|-
| CONFIG_RTL8192U
| m
| 
|-
| CONFIG_SAMSUNG_LAPTOP
| m
| 
|-
| CONFIG_SCA3000
| m
| 
|-
| CONFIG_SCSI_3W_SAS
| m
| 
|-
| CONFIG_SCSI_HPSA
| n
| 
|-
| CONFIG_SCSI_PM8001
| m
| 
|-
| CONFIG_SENSORS_ADT7411
| m
| 
|-
| CONFIG_SENSORS_AMC6821
| m
| 
|-
| CONFIG_SENSORS_ASC7621
| m
| 
|-
| CONFIG_SENSORS_K10TEMP
| m
| 
|-
| CONFIG_SENSORS_LIS3_I2C
| m
| 
|-
| CONFIG_SENSORS_LM73
| m
| 
|-
| CONFIG_SENSORS_MC13783_ADC
| m
| 
|-
| CONFIG_SENSORS_TSL2563
| m
| 
|-
| CONFIG_SENSORS_VIA_CPUTEMP
| m
| 
|-
| CONFIG_SERIAL_TIMBERDALE
| m
| 
|-
| CONFIG_SERIAL_UARTLITE
| m
| 
|-
| CONFIG_SERIO_ALTERA_PS2
| m
| 
|-
| CONFIG_SND_HDA_INPUT_BEEP_MODE
| 1
| 
|-
| CONFIG_SND_USB_UA101
| n
| 
|-
| CONFIG_SOC_CAMERA_MT9T112
| m
| 
|-
| CONFIG_SOC_CAMERA_OV9640
| m
| 
|-
| CONFIG_SOC_CAMERA_RJ54N1
| m
| 
|-
| CONFIG_SPI_DESIGNWARE
| y
| 
|-
| CONFIG_SPI_DW_PCI
| m
| 
|-
| CONFIG_SPI_XILINX
| n
| 
|-
| CONFIG_THINKPAD_ACPI_ALSA_SUPPORT
| y
| 
|-
| CONFIG_TI_DAC7512
| m
| 
|-
| CONFIG_TOSHIBA_BT_RFKILL
| m
| 
|-
| CONFIG_TOUCHSCREEN_88PM860X
| m
| 
|-
| CONFIG_TOUCHSCREEN_DYNAPRO
| m
| 
|-
| CONFIG_TOUCHSCREEN_MC13783
| m
| 
|-
| CONFIG_UIO_NETX
| m
| 
|-
| CONFIG_USB_G_MULTI
| n
| 
|-
| CONFIG_USB_G_NOKIA
| m
| 
|-
| CONFIG_USB_GSPCA_BENQ
| m
| 
|-
| CONFIG_USB_GSPCA_CPIA1
| m
| 
|-
| CONFIG_USB_GSPCA_OV534_9
| m
| 
|-
| CONFIG_USB_GSPCA_PAC7302
| m
| 
|-
| CONFIG_USB_GSPCA_SN9C2028
| m
| 
|-
| CONFIG_USB_GSPCA_STV0680
| m
| 
|-
| CONFIG_USB_IP_DEBUG_ENABLE
| n
| 
|-
| CONFIG_USB_MASS_STORAGE
| m
| 
|-
| CONFIG_USB_NET_SMSC75XX
| m
| 
|-
| CONFIG_USB_SERIAL_QCAUX
| m
| 
|-
| CONFIG_USB_SERIAL_VIVOPAY_SERIAL
| m
| 
|-
| CONFIG_VGA_SWITCHEROO
| n
| 
|-
| CONFIG_VHOST_NET
| n
| 
|-
| CONFIG_VIDEO_CX18_ALSA
| m
| 
|-
| CONFIG_VIDEO_TLG2300
| m
| 
|-
| CONFIG_VMIVME_7805
| m
| 
|-
| CONFIG_WIMAX_IWMC3200_SDIO
| y
| 
|-
| CONFIG_WM831X_BACKUP
| m
| 
|-
| CONFIG_X86_DECODER_SELFTEST
| n
| 
|-
| CONFIG_X86_PCC_CPUFREQ
| m
| 
|}

=== Flavour review ===
* Do we really need a virtual flavouor?  Or can we drop it and just use the server flavour
* discuss 64bit kernel for 32bit userspace (apw)

=== Debian Abstraction ===
* discuss debian abstraction changes (apw)

=== BoF agenda and discussion ===
<pre>
Reviewed the rules, some discussion on whether we should enable EXPERIMENTAL

review backlog of experimental
* we will find that many new things are EXPERIMENTAL and end up disabled by policy, when they move non-EXPERIMENTAL we do not know to re-review them
* possibly have script to grep for the EXPERIMENTAL flag

Review of filesystems
---------------------
Seems that ECRYPT_FS is onconsistant and should be fixed

Review of security
------------------
These are now all enforces by the new config enforcer, and seem ok

Review of sub-systems
---------------------
LLC and RFKILL are inconsistant and should be sorted out

New Options
-----------
CONFIG_ATH9K_DEBUGFS needs to be on

changes required as below:
* CONFIG_ECRYPT_FS need to be made consistant
* CONFIG_USB make consistant
* CONFIG_SCSI make consistant
* CONFIG_LLC=y make consistent
** remains inconsistent for sparc.  CONFIG_LLC2 selects CONFIG_LLC.
* CONFIG_RFKILL=y make consistent

* CONFIG_ATH9K_DEBUGFS=y
* CONFIG_IWLWIFI_DEVICE_TRACING=y adds trace events
* CONFIG_IWMC3200TOP_DEBUGFS=y
* CONFIG_RCU_FAST_NO_HZ=y
* CONFIG_LIBERTAS_MESH=y
* CONFIG_KSYM_TRACER chase to investigate
* CONFIG_MMC_RICOH_MMC=y
* VGA_SWITCHEROO=y

* CONFIG_BLK_DEV_DRDB=m (if server has DKMS then it can replace)
** interlock with server
* CONFIG_CFQ_GROUP_SCHED=m ?  server team may need this

* CONFIG_CEPH_FS=m
* CONFIG_CRYPTO_PCRYPT=m if it can be M
* CONFIG_EEEPC_WMI=m
* RT2800*=m
* SCSI_HPSA=m
* VHOST_NET=m

* SND_HDA_INPUT_BEEP_MODE=0
* LP#579300 -- disable OSS thingy
 
ACTIONS:
* change options as above
* confirm no options from OEM side ??
* investigate memory stick options and produce proposal [manjo]

Flavour Review
==============  ==
proposal to actually build the -virtual flavour as a real flavour, wuld allow initramfs free boot
 
can we make a 64bit kernel for 32bit
 
is the preempt kernel in use, no real information currently
** preempt is currently recommended by studio

ACTIONS:
** split it out to a flavour
** investigate whether we even can make a 64 bit kernel for 32bit [apw]
** see if studio is using preempt
** Pasting the following discussion from #ubuntu-kernel regarding -preempt and Ubuntu Studio
[09:22:32] <abogani> apw, tgardner: Is there a chance to have -preempt kernel on i386 in Maverick? I would want use it a default kernel for Ubuntu Studio.
[09:23:07] * persia notes that many Studio users still use i386, for all they have been advised to use amd64 many times.  Some cite HW issues.
[09:25:41] <tgardner> persia, won't those folks having 64 bit compatibility issues get screwed anyway with the recent toolchain change to i686?
[09:26:11] <persia> No.  I can purchase a new computer in the shop today that runs i686 and not amd64.
[09:26:33] <tgardner> atom based I assume
[09:26:51] <persia> or VIA, but yeah, it only happens for special chips.
[09:27:11] * persia is kinda happy the C7M is now "old", as it didn't do all of i686
[09:28:19] <tgardner> abogani, I've been trying to limit the number of flavours (though I'm in the process of converting the virtual sub-flavour into a regular flavour)
[09:29:08] <tgardner> besides, I thought the studio folks were using the -rt kernel anyways
[09:31:18] <amitk> abogani: do you mean that with all the  -rt stuff that has gone into mainline, you won't need an -rt kernel anymore?
[09:31:31] <abogani> tgardner: Is the problem that you don't want offer more flavours? So could I put an universe package (like -preempt2) and it would be OK for you?
[09:31:41] <persia> Not since hardy, since -rt hasn't been able to match kernel versions well, and most folk don't really need -rt for their stuff.
[09:32:01] <persia> amitk: Not all of it is mainline yet, although it's getting close.
[09:32:03] <abogani> amitk: For almost all multimedia users HZ=1000 and PREEMPT =ycould be suffice.
[09:32:55] <amitk> persia: i didn't mean all of it went in, but all that did go in :)
[09:33:00] <tgardner> abogani, right. more flavours mean more build time and more maintenance.
[09:33:32] <tgardner> a universe package is fine with me
[09:34:05] * tgardner notes that ogasawara has been busy.
[09:34:16] <amitk> wasn't cnd_swap going to look into PREEMPT? Perhaps we should add HZ=1000 to his study list :)
[09:34:41] <persia> abogani: If you do a universe package, please make it from the same source tree so that we don't get out of sync.  I'd like to be able to use --preempt for the default installer, but would prefer to avoid i386/amd64 bug skew.
[09:36:19] <apw> 'for the default installer' ??? persia ?
[09:36:53] <persia> apw: For the Studio flavour, yes.  A significant majority of Studio users need lower latency, as opposed to Desktop users.
[09:37:20] * apw idly wonders what the heck they could need it for
[09:37:21] <persia> Similar to how Server users have a different kernel flavour, do to different usage.
[09:37:44] <persia> multiple audio generators being kept in sample-accurate sync, mostly.
[09:38:02] <abogani> persia: What is exactly the "i386/amd64 bug skew" which you would want avoid?
[09:38:25] * mirsal has quit (Ping timeout: 264 seconds)
[09:38:28] <persia> So if one is generating at e.g. 90kHz, one needs to run *each* tone generator and get the output each 10us.
[09:38:54] <apw> well only if you don't think gneerating ahead is a good idea, but hey
[09:38:57] * abogani sound odd to have an amd64 -preempt kernel in main and a similar kernel in universe....
[09:39:03] <persia> abogani: My worry is that if amd64 -preempt is build from one package, and i386 -preempt is build from a different package, we might end up with issues.
[09:44:29] <abogani> Can we move all -preempt stuff in universe adding i386 in the same time?
[09:44:59] <apw> abogani, the issue for us is just how long a build takes if we add loads of flavours
[09:45:06] <apw> it already takes nearly 6 hours to build
[09:45:24] <tgardner> abogani, you mean drop the preempt flavour in amd64 ?
[09:45:39] <tgardner> I mean, move it from main into your universe kernel?
[09:46:49] <abogani> tgardner: Move it to (not mine) universe for provide both i386/amd64 binary packages.
[09:48:06] <tgardner> abogani, I'm fine with that. I don't think --prempt is main is getting much use anyways.
[09:48:14] <tgardner> s/is/in/
[09:51:47] <abogani> So if I propose to you a new -preempt packaging (which reuse linux-source-2.6.xx for build for avoid to insert again linux kernel source code) that support i386 and amd64 you could stop to build yours?
[09:52:27] <abogani> tgardner, persia, apw ^
[09:52:41] * persia is happy with that model, as long as there are udebs
[09:52:46] <tgardner> abogani, I think I understand that. You want me to remove -preempt from the main pocket build?
[09:53:23] <apw> abogani, if you are going to do that we could give you some help making it like the other branches
[09:53:45] <apw> abogani, so that it can be easily rebased onto the current master as that progresses so you get the goodness for near no effort
[09:54:05] <abogani> tgardner: Yes.
[09:54:16] <tgardner> abogani, I'm fine with that.
[09:54:28] <tgardner> apw, agreed?
[09:54:29] <abogani> persia: Could you help me in that case (I never supported *udebs in my kernel packages)?
[09:54:49] * persia knows little about them, but expects that what apw describes can handle most of it.
[09:55:02] <apw> abogani, if we do it just as a derivative it should support udebs too
[09:55:06] <apw> as it should be the real packaging
[09:55:28] <apw> tgardner, i am good with pulling it out
[09:55:51] <apw> i could put together an example tree for it from whats in ours, and show you how to maintain it
[09:56:05] <tgardner> apw, ok, I'll take care of it as part of the -virtual flavour rework
[09:56:22] <apw> tgardner, ack, want to action me on that blueprint to mock this up for abogani 
[09:56:39] <apw> abogani, i think it makes sense for me to mock it up, as i've done a number already
[09:57:01] <tgardner> apw, eh? I can't even figure out where to mark up my task list, much less yours
[09:57:09] <persia> abogani: apw: tgardner: Thanks a lot!  This should give us a much better story to tell for Studio.
[09:57:13] <apw> tgardner, never mine, i'll do it
[09:57:18] <ogasawara> tgardner, apw: I'll get the blueprint work items added
[09:57:25] <apw> ogasawara, ok thanks
[09:57:29] <tgardner> see, if I whinge enough ....
[09:57:50] <apw> abogani, so i'll try somethign mocked up within the week, with a write up on how it works
[09:58:09] <abogani> apw: Ok Thanks.

Debian Abstraction
==================  ==

ACTIONS:
** pull back abstraction [apw]
** investigate debian 3.0 [apw]
  

ACTIONS:
* report on this to ubuntu-devel
</pre>

----
CategorySpec
