{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


=== Introduction ===
This wiki will help you switch from the older firewire stack to the newer one. For more information on impact of switching your firewire stack, please refer the 1394 wiki page on kernel.org. https://ieee1394.wiki.kernel.org/index.php/To_Do 

=== Modify blacklist config file ===
<pre>
vi /etc/modprobe.d/blacklist-firewire.conf
</pre>

current contents of this file is as follows: 

<pre>

blacklist firewire-core
blacklist firewire_ohci
blacklist firewire_sbp2
</pre>

Modify this file as follows:

<pre>
blacklist ohci1394
blacklist sbp2
blacklist eth1394
blacklist dv1394
blacklist raw1394
blacklist video1394

</pre>

=== Update initramfs ===
Stock initrd of Ubuntu  binds ohci1394 to FireWire controllers. For the new modules to be loaded, you need to rebuild initramsfs
<pre>
sudo update-initramfs -k all -u
</pre>

=== Reboot ===

After modifying the blacklists and updating your initramfs you will want to reboot for these changes to take effect.

=== Example ===
Here is an example dmesg of what you should see, in this case I used a mac in target disk mode, ie as a firewire HDD. 

<pre>
_OK
[ 1468.679260] firewire_sbp2: released fw2.0, target 5:0:0
[ 1468.692731] sd 6:0:0:0: [sdc] Stopping disk
[ 1468.693098] sd 6:0:0:0: [sdc] START_STOP FAILED
[ 1468.693101] sd 6:0:0:0: [sdc] Result: hostbyte=DID_BUS_BUSY
driverbyte=DRIVER_OK
[ 1468.693192] firewire_sbp2: released fw2.1, target 6:0:0
[ 1477.872141] scsi7 : SBP-2 IEEE-1394
[ 1477.872277] scsi8 : SBP-2 IEEE-1394
[ 1477.872349] firewire_core: created device fw1: GUID 000d93fffe46a414,
S400
[ 1477.872356] firewire_core: phy config: card 0, new root=ffc0, gap_count=5
[ 1478.070581] firewire_sbp2: fw1.0: logged in to LUN 0000 (0 retries)
[ 1478.071563] scsi 7:0:0:0: Direct-Access-RBC AAPL     FireWire Target
0000 PQ: 0 ANSI: 3
[ 1478.071869] sd 7:0:0:0: Attached scsi generic sg2 type 14
[ 1478.072326] firewire_sbp2: fw1.1: logged in to LUN 0000 (0 retries)
[ 1478.073134] scsi 8:0:0:0: Direct-Access-RBC AAPL     FireWire Target
0000 PQ: 0 ANSI: 3
[ 1478.073369] sd 8:0:0:0: Attached scsi generic sg3 type 14
[ 1478.079561] sd 8:0:0:0: [sdc] 58605120 512-byte logical blocks: (30.0
GB/27.9 GiB)
[ 1478.080800] sd 7:0:0:0: [sdb] Attached SCSI removable disk
[ 1478.080971] sd 8:0:0:0: [sdc] Write Protect is off
[ 1478.080976] sd 8:0:0:0: [sdc] Mode Sense: 10 00 00 00
[ 1478.082700] sd 8:0:0:0: [sdc] Write cache: disabled, read cache: enabled,
doesn't support DPO or FUA
[ 1478.088782]  sdc: [mac] sdc1 sdc2 sdc3 sdc4
[ 1478.340171] sd 8:0:0:0: [sdc] Attached SCSI disk
[ 1478.667709] hfs: Filesystem was not cleanly unmounted, running
fsck.hfsplus is recommended.  mounting read-only.
</pre>

You should not see any of the old modules in your lsmod output. It should list only the new ones.
<pre>
firewire_sbp2          15033  0 
firewire_ohci          24711  0
firewire_core          54327  2 firewire_sbp2,firewire_ohci
crc_itu_t               1739  1 firewire_core
</pre>
