{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:hardware-kernel-n-version-and-flavours
* '''Created''': AndyWhitcroft
* '''Contributors''': AndyWhitcroft
* '''Packages affected''': linux

=== Summary ===

Discuss the mainline baseline version for Natty.  Also discuss the current kernel flavours for each architecture.  We will also discuss the source branch for these flavours.  Finally we will touch on the ports architectures.

=== Release Note ===

None.

=== Kernel Version ===

Discussions on which mainline kernel base is appropriate for Natty.  As Natty is not an LTS we do not require a specific version for alignment upstream.  Therefore we will be using the latest version released at kernel freeze.

=== Flavours ===

Are we carrying the appropriate flavours?

==== Current Flavours ====

===== Distro =====
{| class="wikitable"
|-
| '''Architecture'''
| '''Flavour'''
| '''Description'''
|-
| i386
| generic
| kernel for desktop machines with less than 4GB of ram
|-
| i386
| generic-pae
| kernel for desktop machines with more than 4GB of ram
|-
| i386
| virtual
| kernel for virtual machine use (KVM/EC2)
|-
| amd64
| generic
| kernel for desktop machines
|-
| amd64
| server
| kernel for server machines
|-
| amd64
| virtual
| kernel for virtual machine use (KVM/EC2)
|-
| armel
| versatile
| kernel for ARM versatile (QEMU)
|-
| armel
| omap
| kernel for ARM OMAP-3 hardware
|}

===== Ports =====
{| class="wikitable"
|-
| '''Architecture'''
| '''Flavour'''
| '''Description'''
|-
| powerpc
| powerpc
| PowerPC
|-
| powerpc
| powerpc-smp
| PowerPC with SMP support
|-
| powerpc
| powerpc64-smp
| PowerPC64 with SMP support
|}

=== New Flavours ===

==== 64bit kernels on 32bit userspace (amd64 on i386) ====

We have had a number of requests for a 64 bit kernel (amd64) for 32 bit (i386) installs.  This gives the user the advantages of running 64 bit in terms of kernel memory handling improvements while maintaining the 32 bit userspace which remains more compatible with 3rd party applications.

rtg - I suspect there will be some caveats to this combination. For example, VmWare may not work, nor will other virtualization programs. 64 bit chroots will likely also not be possible because of packaging resaons, despite the 64 bit kernel.

==== Low-latency kernel ====

With nobody committed to maintain a kernel with Ingo's RT patches in, is a kernel with config changes to prefer low latency over e g power consumption the next best thing we can give e g ubuntu-studio users? Are Alessio's lowlatency suggestions a good base for such a flavour? Reference: https://lists.ubuntu.com/archives/kernel-team/2010-February/008713.html

=== Flavour Source Disposition ===

In Maverick the master branch produced two ARM flavours, versatile and OMAP3.  With Linaro also producing OMAP3 kernels it may be appropriate to switch the source of these kernels over to that kernel; even if we do not it may be appropriate to pull out this into its own branch.

rtg - Given how well the Linaro arm flavour is doing, I'm of the opinion that the only armel flavour that should be produced by the master branch is versatile (for qemu). There is currently a lot of unnecessary duplication between Maverick master(omap3)/ti-omap4/mvl-dove and the linux-linaro kernel package produced by John Rigby.

=== Ports Architectures ===

As ia64 and sparc are now officially dead we are only carrying powerpc as a ports architecute.  As the source is now carried primarily on the master branch is there any longer any value in treating this differently.  Specifically should we be pulling back the ports meta package into the main one to simplify maintenance.

=== BoF agenda and discussion ===

* Kernel Version
** Kernel selection criteria (LTS/non-LTS)
** Kernel release timings
*** 2.6.36 20-oct
*** 2.6.37 ~20-dec (merge window closed ~01-nov-2010, -rc8 ~20-dec-2010)
*** 2.6.38 ~07-mar (merge window closed ~10-jan-2011 (christmas), -rc8 ~07-mar-2011)
*** Kernel Freeze 14-apr-2011
* Flavours
** review of the current flavours distro and ports
* Proposed new Flavours
** 64bit kernel for 32bit userspace (amd64 kernel on i386)
** lowlatency
* Flavour source disposition
** OMAP3 should this be split out from the master branch
*** can we pull this from linaro instead
* PORTS architectures
** should we pull powerpc meta package back into the master repos

==== Discussion ====

===== Natty Kernel Version =====
Likely 2.6.38 (final decision to be made right around Christmas)
Advantage of 2.6.38 for linaro is an extra month to submit patches etc.

===== Natty Kernel Flavours =====
* omap3 has been dropped at the moment in Natty, follow up investigation needed (see action)
* possibility to have multiple ARM flavours
* Do we want to consider supporting a flavour for 64bit kernels on 32-bit userspace; seems there's no compelling reason so the answer is NO
* low-latency, is this also needed to be officially supported?; answer is NO and continue having this be a community supported flavour.

===== ACTIONS =====
See blueprint whiteboard for actions.

=== Resolutions ===

==== 64 bit flavour for 32 bit i386 installs ====

There seemed almost no support for such a thing and it would increase build times on our longest running architecture.  Therefore we are not proposing one for Natty.

==== PowerPC Flavours ====

As per the discussion on kernel-team@lists.ubuntu.com we could consider dropping the non-smp powerpc flavour, however there is about a 3.5% performance loss for dropping the powerpc (non-smp) flavour.  Overall there is not enough compelling reason to drop it.

----
CategorySpec
