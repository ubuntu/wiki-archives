{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


* '''Created''':
* '''Contributors''': 
* '''Packages affected''':

=== Summary ===

We use union filesystems to implement the live cd experience.  In Jaunty this was implemented using AUFS.  However this is not expected to ever make it upstream.  The currently favourite implementation of this style of functionality is VFS union-mount.  The purpose of this spec is to track both the progress upstream of the required functionality as well as enumerating the other options.

=== Release Note ===

None required as there should be no user visible change.

=== Rationale ===

The current AUFS support is buggy and not likely to make it upstream.  We should be trying to move to the upstream solution as it becomes available.  Any help and testing we can provide them can only help its integration.

=== Assumptions ===

VFS union-mount will be sufficiently stable, performant, and feature complete to allow it to replace the current AUFS implementation.

=== Implementation ===

The Karmic kernel already has dropped AUFS as it did not port forward without work.  This leaves us with no liveCD.

Evaluate the alternative options:

# DM COW snapshots
# fuse union mount
# VFS union mount
# AUFS
# UnionFS

Retool to use the selected solution.

==== DM COW snapshots ====

These work but the filesystems the create are not rsync friendly.  This limitation is very problematic for QA who use this feature to make ISO testing cheaper.

==== FUSE Union Mount ====

This was tested and does seem to work, but performance is poor.  This work will be retained for the 

==== VFS Union-Mount ====

This seems to be the communities preferred platform.

http://lkml.org/lkml/2009/5/18/289
http://people.ubuntu.com/~scott/vfs-union/
http://valerieaurora.org/union/

==== AUFS ====

==== UnionFS ====

=== Test/Demo Plan ===

TBD

=== Unresolved issues ===

It is unclear the VFS union-mount will be merged in time for 2.6.31 which would mean carrying it as a patch set much as we carry AUFS now.

----
CategorySpec
