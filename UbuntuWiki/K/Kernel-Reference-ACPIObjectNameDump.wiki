{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

== ACPI: Dumping ACPI Objects with SystemTap ==

This document is intended to explain to dump out ACPI Objects in the ACPI driver at run time using System``Tap. This can be useful to sanity check the ACPI objects in the kernel that are accessible by the ACPI driver.

=== Instructions ===

1. Clone the systemtap-scripts git repository:

git clone git://kernel.ubuntu.com/cking/systemtap-scripts

2. Install System``Tap and the appropriate kernel .ddebs

<pre>
sudo apt-get install systemtap
</pre>

2.1) Create an /etc/apt/sources.list.d/ddebs.list by running the following line at a terminal: 

<pre>
echo "deb http://ddebs.ubuntu.com $(lsb_release -cs) main restricted universe multiverse" |\
 sudo tee -a /etc/apt/sources.list.d/ddebs.list
</pre>

2.2) Import the debug symbol archive signing key: 

<pre>
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 428D7C01
</pre>

2.3) Then run:

<pre>
sudo apt-get update
</pre>

2.4) Download and install the debug kernel, e.g.

<pre>
sudo apt-get install linux-image-`uname -r`-dbgsym
</pre>

3. Run the script

sudo ./systemtap-scripts/acpi-dump/acpi-dump.stp

..this will take a few moments to build and then run.  You will then get a dump of the handle and name of the ACPI objects inside the kernel ACPI driver. For example:

<pre>
$ sudo ./systemtap-scripts/acpi-dump/acpi-dump.stp

Devices:
  ffff8800ba22e050 \_SB_
  ffff8800ba2339d8 \_SB_.AMW0
  ffff8800ba233b68 \_SB_.LID0
  ffff8800ba233be0 \_SB_.PWRB
  ffff8800ba233c30 \_SB_.PCI0
  ffff8800ba233cf8 \_SB_.PCI0.MCHC
  ffff8800ba231230 \_SB_.PCI0.PDRC
  ffff8800ba2312f8 \_SB_.PCI0.PEGP
  ffff8800ba231370 \_SB_.PCI0.PEGP.VGA_
  ffff8800ba2315f0 \_SB_.PCI0.PEGP.VGA_.CRT_
  ffff8800ba2316b8 \_SB_.PCI0.PEGP.VGA_.LCD_
  ffff8800ba2317f8 \_SB_.PCI0.PEGP.VGA_.TV__
...
Power:
  None.

Processors:
  ffff8800ba2338c0 \_PR_.CPU0
  ffff8800ba2338e8 \_PR_.CPU1

Thermal:
  None.
</pre>
