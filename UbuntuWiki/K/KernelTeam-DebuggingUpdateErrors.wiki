{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


=== Introduction ===

Users will sometimes run into errors performing updates on their system.  Apport will usually detect these failures and file a bug in Launchpad.  These bugs can be identified by the bug tag 'apport-package'.  Unfortunately these bugs sometimes get assigned to the "linux" kernel package in Launchpad when the issue is really a result of a non-kernel related problem.  It's best to examine the <nowiki>[[https://wiki.ubuntu.com/DebuggingUpdateManager|DpkgTerminalLog]]</nowiki> file that is usually attached to these bug reports as it contains descriptive error message output.  Documented below are a few commonly reported issues, the <nowiki>[[https://wiki.ubuntu.com/DebuggingUpdateManager|DpkgTerminalLog]]</nowiki> messages that point to the real issue and the bug number it should be marked a duplicate of.

==== Bug:105113 - No space left on device ====
* Bug Bug:105113
* The system ran out of disk space.  Bug 105113 was a request to detect this prior to performing any updates.  These bugs should be marked Invalid against the kernel.
<pre>
gzip: stdout: No space left on device
</pre>

==== Bug:252900 - Wubi Kernel Upgrade Fails ====
* Bug Bug:252900
<pre>
E: /var/cache/apt/archives/linux-image-2.6.24-19-generic_2.6.24-19.36_i386.deb: unable to make backup link of `./boot/vmlinuz-2.6.24-19-generic' before installing new version: Operation not permitted
</pre>

==== Bug:71979 - short read in buffer_copy ====
* Bug Bug:71979 
<pre>
short read in buffer_copy . . .
</pre>

==== Bug:292159 - Error exit status 17 ====
* Bug Bug:292159
* This was really a casper bug on USB devices which should be resolved as of casper 1.162
<pre>
update-initramfs is disabled since running on a live CD
Failed to symbolic-link /boot/initrd.img-2.6.27-7-generic to initrd.img.
dpkg: error processing linux-image-2.6.27-7-generic (--configure):
subprocess post-installation script returned error exit status 17
</pre>

==== Bug:193439 - exit status 2; update-grub fails when default is "saved" ====
* Bug Bug:193439
* specifically note the '''expr: non-numeric argument''' line.  Also, it's best to ask the reporter for the contents of /boot/grub/default to verify before marking it as a duplicate.
<pre>
Testing for an existing GRUB menu.lst file ... found:
/boot/grub/menu.lst
Searching for splash image ... none found, skipping ...
expr: non-numeric argument
User postinst hook script [/sbin/update-grub] exited with value 2
dpkg: error processing linux-image-2.6.27-8-generic (--configure):
subprocess post-installation script returned error exit status 2
</pre>

==== Bug:326881 - corrupt .deb ====
* Bug Bug:326881
<pre>
Preparing to replace linux-image-2.6.27-7-generic 2.6.27-7.14 (using .../linux-image-2.6.27-7-generic_2.6.27-7.16_amd64.deb) ...
Done.
Unpacking replacement linux-image-2.6.27-7-generic ...
dpkg-deb: subprocess paste killed by signal (Broken pipe)
dpkg: error processing /var/cache/apt/archives/linux-image-2.6.27-7-generic_2.6.27-7.16_amd64.deb (--unpack): subprocess dpkg-deb --fsys-tarfile returned error exit status 2
</pre>

==== Bug:322064 - files list file for package ... is missing final newline ====
* Bug Bug:322064
* Usually indicates a corrupted .deb - https://lists.ubuntu.com/archives/ubuntu-users/2007-January/104520.html
<pre>
Selecting previously deselected package linux-source-2.6.27.
(Reading database ... dpkg: error processing /var/cache/apt/archives/linux-source-2.6.27_2.6.27-9.19_all.deb (--unpack):
 files list file for package `libpoppler-glib3' is missing final newline
</pre>

==== Bug:311280 - dpkg: serious warning: files list file for package ====
* Bug Bug:311280
<pre>
dpkg: serious warning: files list file for package `xserver-xorg-input-vmmouse' missing, assuming package has no files currently installed.
dpkg: serious warning: files list file for package `libexempi3' missing, assuming package has no files currently installed.
dpkg: serious warning: files list file for package `libgtkspell0' missing, assuming package has no files currently installed.
dpkg: serious warning: files list file for package `python-pkg-resources' missing, assuming package has no files currently installed.
etc...
...
dpkg: error processing linux-image-2.6.27-9-generic (--configure):
subprocess post-installation script returned error exit status 10
</pre>

==== Bug:269539 - exited with value 3; grub 3-way merge menu.lst ====
* Bug Bug:269539
<pre>
Merging changes into the new version

Conflicts found! Please edit `/var/run/grub/menu.lst' and sort them out manually.
The file `/var/run/grub/menu.lst.ucf-new' has a record of the failed merge of the configuration file.

User postinst hook script [/sbin/update-grub] exited with value 3
</pre>

==== Bug:271246 - /var/cache/debconf/config.dat is locked by another process: Resource temporarily unavailable ====
* Bug Bug:271246
<pre>
debconf: DbDriver "config": /var/cache/debconf/config.dat is locked by another process: Resource temporarily unavailable
</pre>

==== Bug:261392 - exit status 2; grub removed or not installed ====
* Bug Bug:261392
<pre>
cp: cannot stat `/etc/udev/rules.d/65-mdadm.vol_id.rules': No such file or directory
The provided postinst hook script [/sbin/update-grub] could not be run.
dpkg: error processing linux-image-2.6.24-23-386 (--configure):
subprocess post-installation script returned error exit status 2
</pre>

==== Bug:303825 or Bug:331675 - nvidia-common exited with return code 10 ====
* Bug Bug:303825 or Bug Bug:331675
<pre>
run-parts: executing /etc/kernel/postinst.d/nvidia-common
run-parts: /etc/kernel/postinst.d/nvidia-common exited with return code 10
</pre>

==== Bug:13130 - debconf uninitialized variable ====
* Bug Bug:13130
<pre>
Use of uninitialized value in substitution (s///) at
/usr/share/perl5/Debconf/Format/822.pm line 57, <$__ANONIO__> line 1.
</pre>

==== Bug:386042 - /usr/share/debconf/confmodule: line 42: printf: write error: Broken pipe ====
* Bug Bug:386042
<pre>
/usr/share/debconf/confmodule: line 42: printf: write error: Broken pipe
User postinst hook script [/sbin/update-grub] exited with value 1
</pre>

==== Bug:78478 - Could not find postinst hook script [update-grub] ====
* Bug Bug:78478
<pre>
update-initramfs: Generating /boot/initrd.img-2.6.28-13-generic
Not updating initrd symbolic links since we are being updated/reinstalled
(2.6.28-13.44 was configured last, according to dpkg)
Not updating image symbolic links since we are being updated/reinstalled
(2.6.28-13.44 was configured last, according to dpkg)
Could not find postinst hook script [update-grub].
Looked in: '/bin', '/sbin', '/usr/bin', '/usr/sbin'
dpkg: error processing linux-image-2.6.28-13-generic (--configure):
 subprocess post-installation script returned error exit status 2
</pre>

or

<pre>
The provided postinst hook script [/sbin/update-grub] could not be run.
dpkg: error processing linux-image-2.6.20-5-generic (--configure):
 subprocess post-installation script returned error exit status 2
</pre>
==== Bug:99547 - Running depmod. Failed to run depmod. ====
* It seems the root cause for this issue is Bug Bug:99547
<pre>
Running depmod.
Failed to run depmod
dpkg: error processing linux-image-2.6.28-13-generic (--configure):
 subprocess post-installation script returned error exit status 1
</pre>

==== Bug:417222 - /boot/grub/menu.lst: Operation not supported ====
* Bug Bug:417222
<pre>
Updating /boot/grub/menu.lst ... /usr/sbin/update-grub: line 1484: /boot/grub/menu.lst: Operation not supported
User postinst hook script [/sbin/update-grub] exited with value 1
</pre>

==== Bug:533728 - No path or device is specified ====
* Bug Bug:533728

The user wants to activate a grub background image by setting use_bg=true in /etc/grub.d/05_debian_theme . That's not the way it works and /etc/default/grub must be modified instead. Bug 533728 is a request to document it and avoid such modification.

'''Note to triagers''': Note that the error 'No path or device is specified' appears 2 times in the error.

<pre>
Generating grub.cfg ...
No path or device is specified.
Try `/usr/sbin/grub-probe --help' for more information.
No path or device is specified.
Try `/usr/sbin/grub-probe --help' for more information.
User postinst hook script [/usr/sbin/update-grub] exited with value 1
dpkg: error processing linux-image-2.6.32-15-generic (--configure):
 subprocess installed post-installation script returned error exit status 1
</pre>

=== Other ressources ===

* <nowiki>[[DebuggingInstallationIssues|Common Installation Issues]]</nowiki>: More general installation issues that can affect a kernel upgrade/installation.
* <nowiki>[[DebuggingUpdateManager|Debugging Update manager]]</nowiki>

----
CategoryBugSquad
