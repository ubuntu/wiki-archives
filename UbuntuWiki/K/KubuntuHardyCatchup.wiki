{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad Entry''': UbuntuSpec:kubuntu-hardy-catchup
* '''Packages affected''': 

=== Summary ===

Ensure Kubuntu has the same functionality as Ubuntu, moving towards KDE 4 as the primary development platform.

=== Release Note ===

Much effort has been put into ensuring Kubuntu is feature equivalent to Ubuntu Desktop.  Compiz is now better supported, hard disks can be mounted, printing autodetection works, XDG home dirs are used and video codecs install.  We look forward to Ubuntu Desktop becoming feature equivalent with Kubuntu.

=== Rationale ===

Kubuntu should have the same great features as Ubuntu Desktop.

=== Use Cases ===

Krissy wants wobbly windows, she installs Compiz KDE from Add/Remove Applications, turns it on in the System Settings module and is amazed at wobblyness.

Bob wants to play an MPEG video, Kaffeine offers to install the codecs and Bob happily watches his video.

=== Printing Tools ===

Port system-config-printer to KDE.  It should be written in PyQt 4 and make the most use possible of existing code which can be refactored to be desktop independent.  As a PyQt 4 app, this should work with KDE 3 and 4.

The applet should use Qt's systray class and python-qt4-dbus bindings.  It will need to depend on hal-cups-utils.

The setup tool should be based on the UI design at http://weblog.obso1337.org/2007/kubuntu-printer-configuration-ui/

We will talk with the upstream system-config-printer developer to ensure the UI abstractions can go into the upstream codebase and if accepted the user interface too.

=== Compiz ===

Kubuntu should include good Compiz integration, but it should not be installed by default since it is not sufficiently stable and KDE 4 will include native compositing support.

Create a KControl module, kde-compiz-control, which implements equivalent functionality to that in Ubuntu's patched Appearance capplet.  It should also offer to install compiz-kde if the user does not have it installed currently.

This should be programmed in PyQt4 to work with KDE 3 and 4.

Compiz should include a script in /etc/X11/Xsession.d/ to set $KDEWM based on settings created by kde-compiz-control.

Add a compiz-kde files to app-install-data so it can be installed through add/remove programmes.

In /usr/bin/compiz $FALLBACKWM should be set to kwin if running under KDE or if metacity does not exist.

=== Codec Install ===

Kaffeine currently lacks automatic codec install.  Alter its "unable to play this file" error dialogue to include an option to install libxine1-ffmpeg using the same script as Amarok current uses.  Once installed it should re-try playing the video.

This will be done initially for the KDE 3 version of Kaffeine and ported to the KDE 4 version when it becomes viable.

=== Brightness Control ===

Brightness control moved to userspace in Gutsy.  KMilo needs patched to have keybindings for the BrightnessUp and BrightnessDown keys.  This should call brightnessDown() and brightnessUp() in guidance-power-manager through its DCOP interface.  It should display feedback on the screen based on power manager's getBrightness() method.

The keycodes are 
* brightness up: 212
* brightness down: 101

We also need to fix the eject key which is reported not to work currently.

We should also port our existing KMilo patches to KDE 4.

=== XDG Home Dirs ===

We should support the XDG Home Dirs spec in Kubuntu.  http://www.freedesktop.org/wiki/Software/xdg-user-dirs

Patches are available from Mandriva for kdelibs. xdg-dirs-document-path to set KDE's global Desktop and Documents directory.  speedbar-xdg-user-dirs to add the directories to the file open and save dialogues.

Add xdg-user-dirs to the desktop seed to create directories on first run.  Patch xdg-user-dirs to create .directory files in each directory to specify the relevant icon (the relevant icons should come from speedbar-xdg-user-dirs).

Alter applications to use the relevent directory by default.  Amarok to use Music, Kaffeine to use Video, Digikam to use Photos, KOffice to use Documents, Konqueror to Downloads.

We have decided not to add entries to the Kicker System Menu.

These patches should be ported to KDE 4.

=== User Hard Disk Mounting ===

The media ioslave needs to be patched to allow the user to mount hard disks which are not already mounted or in fstab.

Use kdesudo to call dbus-send to mount the disks through HAL.  The equivalent patch in Ubuntu is in gnome-mount.

Add support for mounting LUKS encrypted devices as described at http://strony.aster.pl/tanis/kde_luks/ by patching mediamanager and adding kryptomanager.

This is a KDE 3 enhancement as KDE 4 has an entirely different hardware abstraction platform.

=== Bulletproof X ===

When KDM fails to start X it should from StartServerFailed() in backend/server.c call the bullet proof X script.

The bulletproof X script /etc/gdm/failsafeXServer is currently part of GDM and should be moved to a desktop independent package.  It should be changed to run displayconfig if displayconfig-gtk is not available.

Since the backend has not changed much this will be doable for both KDE 3 and 4.

----
CategorySpec
