{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


==== Releasing Kernel Updates ====

The Kernel Team produces kernel packages every two weeks as part of the <nowiki>[[https://wiki.ubuntu.com/Kernel/StableReleaseCadence|Stable Release Cadence]]</nowiki>.
This document is intended to walk through how to pull together the source package for the start of the cadence.

For the purposes of this example we will be using the Lucid kernel git tree.

1. Clone a new copy of the master, Lucid git repo.
 <pre>
 git clone zinc.canonical.com:/srv/kernel.ubuntu.com/git/ubuntu/ubuntu-lucid
 </pre>

1. We will be working on two branches, the master branch and the master-next branch. Since we will be making changes to both branches setup our local repo appropriately.
 <pre>
 cd ubuntu-lucid
 git branch --track master-next origin/master-next
 </pre>

1. The master branch should be at the point we last left it after producing the last release. We need to prepare the master branch for the start of a new release.
 <pre>
 git checkout master
 maint-startnewrelease
 </pre>
   Note: For where to get the '''maint-startnewrelease''' script go to the See Also section of this wiki page.

# Look at the commits on the master-next branch and see if an ABI bump is necessary. If it is necessary you should be able to see a commit since the previous release release which bumps the ABI. If one is necessary, it's usually safest to do the ABI bump by hand rather than try to cherry-pick it from the master-next branch.
## Edit the changelog and increment the ABI number by one.
## Commit the changelog change.
   <pre>
   git add debian.master/changelog
   git commit -s -F debian/commit-templates/bumpabi
   </pre>

1. Apply all the commits from the master-next branch since the previous release to the master branch.

1. Do a test build. I recomend using the '''build-*''' scripts in the kteam-tools collection to do your test builds. 
 <pre>
 build-prep -d lucid tangerine-amd64
 build-start -d lucid tangerine-amd64
 build-monitor -d lucid tangerine-amd64
 </pre>

# Install and boot the kernel you just built.
## Copy the version of the linux-image appropriate for your installation, and install it.
   <pre>
   scp tangerine.buildd:/home/<username>/lucid-amd64/linux-image-2.6.32-<new-abi>-generic_2.6.32-<new-abi>.<new-buildno>_amd64.deb .
   sudo dpkg -i linux-image-2.6.32-<new-abi>-generic_2.6.32-<new-abi>.<new-buildno>_amd64.deb
   sudo reboot
   </pre>

# Finish up the release.
## Insert the changes into the changelog
   <pre>
   fdr clean
   fdr insertchanges
   </pre>

1. Create a release tracking bug and add the appropriate information to the changelog.
   <pre>
   create-release-tracker
   </pre>
   Note: For where to get the '''create-release-tracker''' script go to the See Also section of this wiki page.

1. Change the series and pocket information in the changelog.

1. Commit the changelog changes. Use the information on the first line of the debian.master/changelog.
   <pre>
   git add debian.master/changelog
   git ci -s -m "UBUNTU: Ubuntu-2.6.32-<new-abi>.<new-buildno>"
   </pre>

1. Tag the repo with the release version string.
   <pre>
   git tag -s -m Ubuntu-2.6.32-<new-abi>.<new-buildno> Ubuntu-2.6.32-<new-abi>.<new-buildno>
   </pre>

1. Verify that your local repository is in the proper shape.
   <pre>
   verify-release-ready
   </pre>

1. Update the master-next branch
   <pre>
   git checkout master-next
   git reset --hard master
   </pre>

1. Push the banches up to the master repository
   <pre>
   git push origin master Ubuntu-2.6.32-<new-abi>.<new-buildno>
   git push origin +master-next
   </pre>

1. Create the source package.
 <pre>
 dpkg-buildpackage -S -rfakeroot -I.git -I.gitignore -i'\.git.*' -uc -us -v<version-in-updates>
 </pre>

==== See Also ====
{| class="wikitable"
|-
| <nowiki>[[https://wiki.ubuntu.com/Kernel/kteam-tools | Kteam Tools]]</nowiki>
| <75%>A repository of useful tools. This is where maint-rebase-branch comes from.
|}
