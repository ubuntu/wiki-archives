{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


=== ASPM PCIe Bug ===

'''UPDATE: A fix has now been included in the Ubuntu Precise kernel and released'''.  The call for testing is now complete, so please do not add any more test results to this page. Thank you.

=== Details ===

As noted by <nowiki>[[http://www.phoronix.com/scan.php?page=article&item=linux_aspm_solution&num=1|Phoronix]]</nowiki> ASPM PCIe power saving has been problematic and a <nowiki>[[https://lkml.org/lkml/2011/11/10/467|recent patch by Matthew Garrett]]</nowiki> has re-worked this to clear the ASPM state on all devices on a successful handoff of PCIe control to the OS.

We therefore are providing patched kernels carrying Matthew's fix for testing purposes only to see how well this works across a broad range of machines.  Kernels can be found in:

* <nowiki>[[http://zinc.canonical.com/~cking/powermanagement/mjgaspmfix/oneiric|Ubuntu Oneiric 11.10 Kernels]]</nowiki>
* <nowiki>[[http://zinc.canonical.com/~cking/powermanagement/mjgaspmfix/precise|Ubuntu Precise 12.04 Kernels]]</nowiki>

For power measurement, we currently recommend using the older version of powertop 1.13 as this clearly displays the ACPI estimated power consumption.  A .deb for powertop-1 can be found <nowiki>[[https://launchpad.net/~lool/+archive/ppa/+sourcepub/2073115/+listing-archive-extra|here]]</nowiki>.   We recommend running powertop as follows:

* Boot the machine, start powertop-1
* Wait until you get an ACPI estimated power consumption value.
* Gather 15 measurements (it is updated regularly).
* Discard the first 5 results.
* Take average of the last 10 results (total/10)

Testing procedure:

* Ensure laptop is fully charged
* Unplug AC power 
* Run powertop-1 on an idle system and note power consumption
* Plug in AC power
* Install the new kernel containing the ASPM fix
* Restart laptop and choose the new kernel
* Ensure laptop is fully charged
* Unplug AC power
* Run powertop-1 on an idle system and note power consumption
* Gather the BIOS version using: sudo dmidecode -t 0 | grep "Version:"
* Add results to the table below:

Please try and keep table in sorted order on the machine name. Thanks!

{| class="wikitable"
|-
| Machine
| BIOS
| 32/64 bit kernel
| Original Kernel
| Original Kernel Power
| ASPM fix Kernel
| ASPM fix Power
| Notes
| Desktop
|-
| Acer Aspire AO722
| JE10BZ V1.04
| 64
| 3.0.0-12-generic
| 11.43W ± 0.39
| 3.0.0-13-generic
| 11.25W ± 0.26
| 3
|-
| Acer Aspire One 533
| V1.05
| 32
| 3.0.0-13-generic
| 7.58W
| 3.0.0-13-generic
| 7.7W
| 2
|-
| Acer Aspire One AOA110
| v0.3310
| 32
| 3.0.0-13-generic
| 11.23
| 3.0.0-13-generic
| 11.13
|-
| Apple MacBook Pro 4,1
| MBP41.88Z.00C1.B00.0802091544
| 64
| 3.0.0.12-generic
| 13.8
| 3.0.0-13-generic
| 13.66
| 9
| Gnome3
|-
| Apple MacBook Pro 4,1
| MBP41.88Z.00C1.B00.0802091544
| 64
| 3.0.0.12-generic
| 13.51
| 3.0.0-13-generic
| 13.77
| 10
| Gnome3
|-
| Apple MacBook Pro 7,1
| MBP81.88Z.0039.B0B.1006012305
| 64
| 3.0.0-13-generic
| 16.76
| 3.0.0-13-generic
| 15.84
| 7
| Unity 3D
|-
| Asus P31SD
| 
| 64
| 3.0.0-12-generic
| 6.6W
| 3.0.0-13-generic
| 5.7W
| 
| Gnome 3
|-
| Asus W5F
| 307
| 32
| 3.0.0-12-generic
| 12.69W
| 3.0.0-13-generic
| 12.47W
|-
| Dell Latitude D620
| OTD761 A02
| 32
| 3.0.0-12-generic
| 22.27W ± 1.13
| 3.0.0-13-generic
| 21.31W ± 0.20
| 3
|-
| Dell Latitude E6510
| A03
| 32
| 3.0.0-13-generic-pae
| 18.06 ± 1.13
| 3.0.0-13-generic-pae
| 16.92 ± 0.99
|-
| Dell Latitude E6510
| A10
| 64
| 3.0.0-13-generic #22
| 13,3W
| 3.0.0-13-generic #22+mjgaspmfix
| 12,2W
| 11
| Unity 3D
|-
| Dell XPS 1330M
| 
| 32
| 3.0.0-13-generic
| 19,1W
| 3.0.0-13-generic-pae
| 13,2W
| 
| Unity 3D
|-
| Dell Vostro 3450
| A07
| 32
| 3.0.0-12-generic-pae
| 20.45
| 3.0.0-13-generic-pae
| 19.55
|-
| Dell Inspiron 6400
| A13
| 64
| 3.1.0-2-generic
| 23.3W
| 3.1.0-2-generic
| 23.2W
| 
| Unity 3D
|-
| Dell Inspiron N4010
| A13
| 64
| 3.1.0-2-generic
| 1.21W
| 3.1.0-2-generic
| 0.95W
| 1
|-
| Dell Studio 1558
| A12
| 64
| 3.0.0-13-generic
| 2.22W
| 3.0.0-13-generic
| 1.8W
| 1
|-
| HP Compaq nw8240
| 68DTV Ver. F.18
| 32
| 3.0.0-13-generic
| 31,13 ± 0,51W
| 3.0.0-13-generic
| 27.68 ± 0,29W
| 
| Unity 2D
|-
| HP Mini 210
| F0.2
| 64
| 3.0.0-12-generic
| 14.3W
| 3.0.0-13-generic
| 8.7W
| 
| Unity 3D
|-
| HP Mini 210
| F0.4
| 32
| 3.1.0-2-generic
| 11.3W
| 3.1.0-2-generic
| 11.7W
|-
| HP Pro``Book 5420s
| 68AZZ Ver. F.0F
| 64
| 3.0.0-12-generic
| 25.06W
| 3.0.0-13-generic
| 25.66W
|-
| HP Tablet 2730p
| F.0B
| 64
| 3.1.0-2-generic
| 13.5W
| 3.1.0-2-generic
| 12.4W
| 
| Unity 3D
|-
| Lenovo 3000N200
| 68ET27WW
| 64
| 3.1.0-2-generic
| 24.3W
| 3.1.0-2-generic
| 25.4W
|-
| Lenovo !IdeaPad S12
| 19CN1AWW
| 32
| 3.0.0-13-generic
| 10.65W
| 3.0.0-13-generic
| 10.67W
| 2
|-
| Lenovo Thinkpad L520
| 8GET36WW(1.13)
| 64
| 3.0.0-12-generic
| 18,05W
| 3.0.0-13-generic
| 18,18W
|-
| Lenovo !ThinkPad T400
| 7UET92WW (3.22)
| 64
| 3.0.0-12-generic
| 18.07W
| 3.0.0-13-generic
| 18.10W
| 6
|-
| Lenovo !ThinkPad T410
| 6IET75WW (1.35)
| 64
| 3.0.0-12-generic
| 11.35W
| 3.0.0-13-generic
| 9.6W
| 
| Unity 3D
|-
| Lenovo !ThinkPad T420
| 83ET63WW (1.33)
| 64
| 3.0.0-12-generic
| 19.28W
| 3.0.0-13-generic
| 14.89W
|-
| Lenovo Thinkpad T420s (i915.i915_enable_rc6=1)
| 8CET46WW (1.26)
| 64
| 3.1.0-2-generic
| 12.29W
| 3.1.0-2-generic
| 9.14W
|-
| Lenovo Thinkpad T420s
| 8CET48WW (1.28 )
| 64
| 3.0.0-12-generic
| 22.56V
| 3.0.0-13-generic
| 19.54W
|-
| Lenovo Thinkpad T510
| 6MET84WW (1.44)
| 32
| 3.0.0-12-generic-pae
| 16.03W
| 3.0.0-13-generic-pae
| 14.01W
|-
| Lenovo Thinkpad T60
| `79ET62WW (1.07)`
| 32
| 3.0.0-13-generic
| 22.17W ± 0.38W
| 3.0.0-13-generic
| 22.19W ± 0.36W
| 4
| Unity 2D
|-
| Lenovo Thinkpad X200T
| 7WET68WW (3.18 )
| 64
| 3.0.0-13.generic
| 9.6
| 3.0.0-13.generic
| 9.6
| 
| Unity 3D
|-
| Lenovo Thinkpad X201
| 6QET52WW (1.22 )
| 64
| 3.0.0-13.generic
| 11.0
| 3.0.0-13.generic
| 10.0
|-
| Lenovo Thinkpad X220
| 8DET41WW (1.11)
| 64
| 3.0.0-13.generic
| 21.4
| 3.0.0-13.generic
| 19.9
|-
| Lenovo Thinkpad X220
| 8DET42WW (1.12)
| 64
| 3.0.0-13.generic
| 19.4
| 3.0.0-13.generic
| 15.7
| 
| Unity 3d
|-
| Lenovo Thinkpad X220T with SSD (i915.i915_enable_rc6=1 i915.i915_enable_fbc=1 i915.lvds_downclock=1)
| 8DET49WW (1.19 )
| 64
| 3.0.0-13.generic
| 9,08
| 3.0.0-13.generic
| 6,24
| 
| Unity 3D
|-
| Lenovo Thinkpad X301
| `6EET54WW (3.14 )`
| 64
| 3.1.0-2-generic
| 11.4W
| 3.1.0-2-generic
| 11.4W
|-
| Lenovo Thinkpad X301
| `6EET44WW (3.04)`
| 64
| 3.1.0-2-generic
| 10.4W
| 3.1.0-2-generic
| 10.4W
|-
| Lenovo Thinkpad X60s
| 7BETC7WW (2.08)
| 32
| 3.0.0-13.generic
| 13.76W
| 3.0.0-13.generic
| 13.81W
|-
| Samsung NF310
| 03MY.M029.20101228.JIP
| 64
| 3.0.0-13-generic
| 6.81W
| 3.0.0-13-generic
| 6.14W
|-
| Samsung RV720
| 01PQ
| 64
| 3.0.0-12-generic
| 18.5W
| 3.0.0-13-generic
| 17.2W
| 
| Unity 3D
|-
| Toshiba NB505
| V1.90
| 64
| 3.0.0-13-generic
| 7.98W
| 3.0.0-13-generic
| 7.92W
|-
| Toshiba Satellite P100 <nowiki>[[http://www.mytoshiba.com.au/support/computers/satellite/p100/pspa3a-05s00p/download|PSPA3A-05S00P]]</nowiki>
| V3.30
| 32
| 3.0.0-12-generic
| 26.49
| 3.0.0-13-generic+mjgaspmfix
| 26.64W
| 5
|-
| Toshiba Satellite Pro C660-21U
| v1.20
| 64
| 3.0.0-13-generic
| 8.17w
| 3.0.0-13-generic+mjgaspmfix
| 7.97w
| 12
| Unity 3D
|-
| Lenovo Thinkpad X121e (AMD E350, ATI gfx)
| V1.08
| 32
| 3.0.0-12-generic
| 12.01W
| 3.0.0-13-generic
| 11.43W
| 8
|-
| Lenovo Thinkpad X121e (Intel Core i3)
| 8QET25WW (1.09 )
| 64
| 3.0.0-12-generic
| 13.03W
| 3.0.0-13-generic
| 12.42W
| 
| Unity 3d
|-
| Lenovo Thinkpad E320 (Core i5, ATI gfx)
| V1.11
| 32
| 3.0.0-12-generic-pae
| 23.81W
| 3.0.0-13-generic-pae
| 25.13W
| 8
|-
| Lenovo Thinkpad E320 (Core i3, Intel gfx)
| V1.11
| 32
| 3.0.0-12-generic-pae
| 19.57W
| 3.0.0-13-generic-pae
| 19.70W
|-
| Lenovo Thinkpad E120 (Pentium(R) 957, Intel gfx)
| V1.10
| 32
| 3.0.0-12-generic-pae
| 13.55W
| 3.0.0-13-generic-pae
| 13.77W
|-
| Sony Vaio VPCF1 (Intel Core i7)
| R0190Y9
| 64
| 3.0.0-16-generic
| 20.85W
| 3.0.0-13-generic
| 19.12W
| 9
| KDE
|}

Notes:
1.#1 It is probable that these machines are incorrectly reporting power such that the value is reported as 1/10th of the actual.
1.#2 This variance (up) is likely within the accuracy of the figures for this machine.
1.#3 near-default power settings, no savings enabled
1.#4 With pcie_aspm=force and the original kernel this machine reports 18.84W ± 0.47W.
1.#5 This machine is from 2006 - not sure if this is still helpful
1.#6 With pcie_aspm=force on 3.0.0-12-generic the consumption was 17.78W. Combining this with <nowiki>[[https://github.com/linrunner/TLP/wiki/TLP-FAQ|tlp]]</nowiki> reduced the consumption to 14.42W.
1.#7 Using nouveau instead of nvidia binary driver.
1.#8 Using open source ATI gfx driver. Can't get BRCM wifi driver to work with patched kernel; wired network instead.
1.#9 With pcie_aspm=force
1.#10 Without pcie_aspm=force
1.#11 Without pcie_aspm=force, nvidia binary driver
1.#12 With Jupiter installed
