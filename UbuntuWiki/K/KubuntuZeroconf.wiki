{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

Kubuntu provides a zeroconf kio client : kdnssd, which can be very useful to publish services on the network and retrieve them from any client very easily.

=== What is zeroconf ? ===

See [HowToZeroconf]

=== Installing zeroconf ===

Kdnssd is installed by defaut in Kubuntu Dapper, but it misses some dependencies to work out of the box.  Therefore, you must install avahi-daemon and libnss-mdns before using it :

<pre>
sudo apt-get install avahi-daemon libnss-mdns
</pre>

<nowiki>[[File:IconsPage/IconWarning3.png]]</nowiki> The avahi-daemon package installs a daemon that opens a port on your machine. Be warned that this is a potential source of security failure.

=== Setting up avahi services ===

You can start services on the avahi server using the avahi-publish command. For example, if you have an ssh server running on port 22 and you want to announce it on your local network, you could use :

<pre>
avahi-publish -s "Remote login on my box" _ssh._tcp 22
</pre>

_ssh._tcp is the service type to be announced. It contains the name of the service, as described in nmap for example (run <code>nmap localhost</code> to see what services are open on your machine) and whether it uses tcp or udp. We'll look more into these services types later. 

Avahi services can also be launched automatically when the avahi server starts. The avahi-daemon package provides an example file for ssh, that can be found at : /usr/share/doc/avahi-daemon/examples/ssh.service . In order to be used by avahi-daemon, you should copy this file to /etc/avahi/services/ and restart the avahi daemon with <code>sudo /etc/init.d/avahi-daemon restart</code>. Your ssh service will then be published on the network and available to other machines through zeroconf.

You can tune the ssh.service file, or add new ones. You can gather services as a service group. For example, you might want to gather ssh, fish and sftp in one service group :

<pre>
<service-group>
        <name replace-wildcards="yes">SSH de %h</name>
        <service protocol="any">
                <type>_ssh._tcp</type>
                <port>22</port>
        </service>
        <service protocol="any">
                <type>_fish._tcp</type>
                <port>22</port>
        </service>
        <service protocol="any">
                <type>_sftp._tcp</type>
                <port>22</port>
        </service>
</service-group>
</pre>

=== Connecting to a service in Konqueror ===

Now that your server is running avahi with at least one published service, open konqueror and with zeroconf:/ in the url bar. This will give you a list of the services available on the network. You can browse this list and click on the service you want to access, which will launch the suitable program. In the case of ssh, this will launch Konsole, with an ssh login prompt.

=== Adding services to kdnssd ===

Kdnssd understands quite a few services, that are listed in /usr/share/apps/zeroconf/ . If you need to add a service, you can add more to it, by adding a file in this place. There is no need to restart the server after this is done.

----
CategoryKubuntu
