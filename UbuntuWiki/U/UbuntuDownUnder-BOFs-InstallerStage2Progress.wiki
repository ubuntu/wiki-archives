{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== Installer Stage 2 Progress Indication ==

=== Status ===

** Created:  by MattZimmerman<<BR>>
** Priority: MediumPriority<<BR>>
** People: ColinWatsonLead<<BR>>
** Contributors: MattZimmerman<<BR>>
** Interested: <<BR>>
** Status: ApprovedSpecification, BreezyGoal, DistroSpecification
** Packages: <<BR>>
** Depends: <<BR>>

=== Introduction ===

Currently, the stage 2 installation process dumps (highly technical) textual status information to the console, with no indication of overall progress.  Instead, a simple progress bar should be displayed.

=== Rationale ===

A progress bar is the standard way to deal with this, is less confusing to newbies and generally less likely to make users of all levels panic about something.

=== Scope and Use Cases ===

* In a default install, display a progress indicator for the second stage install
* If the user requests verbose information (switch VTs?), display it

=== Implementation Plan ===

A `progress` template type and the corresponding protocol commands will be added to `debconf`, matching the existing code and <nowiki>[[http://svn.debian.org/wsvn/d-i/trunk/packages/cdebconf/doc/progress.txt?op=file&rev=0&sc=0|protocol]]</nowiki> in `cdebconf`. Widgets for the various frontends should be written. (ColinWatson has already done most of this work.)

`base-config` will use `dpkg --status-fd` to monitor the progress of package installation and update the progress bar accordingly. Similar code already exists in `debootstrap`. As in the first stage, `dpkg` output will be dumped to a log file, and that log file will be monitored on a different virtual console.

The length of the progress bar will be computed by first marking all necessary packages for installation, and then asking `aptitude search` for the list of packages that are going to be installed.

==== Packages Affected ====

* `apt`
* `aptitude`
* `debconf`
* `base-config`
* `prebaseconfig`

==== User Interface Requirements ====

This is only required in the `dialog` frontend for now (since the graphical UbuntuExpress installer has entirely different installation processes to cover with progress indicators); the external programs used to implement this frontend already have suitable options to display progress bars.

=== Current Status ===

2005-05-19 ColinWatson: `debconf` progress bar support finished and checked in upstream as r1788. This will be part of `debconf` 1.4.50.

2005-07-29 ColinWatson: APT needed some extra support for status monitoring, which MichaelVogt has done. michael.vogt@ubuntu.com--2005/apt--progress-reporting--0 tested, works; accompanying aptitude patch tested, works; debconf passthrough approach for base-config tested in isolation, works. The base-config changes should now be feasible.

2005-07-30 ColinWatson: Added DATA support to debconf, so that it can act as a passthrough UI agent.

2005-08-04 ColinWatson: Further debconf changes made to fix various bugs; base-config changes complete. I'm just waiting for apt and aptitude uploads before uploading this now.

2005-08-05 ColinWatson: Uploaded. Verbose information is displayed on VT4.

2005-08-06 ColinWatson: Tested new CD images; applied a few bug fixes (prebaseconfig, archive-copier) and added a couple more progress bars.

2005-08-09 ColinWatson: One more base-config bug fix (2.67ubuntu8). Performed a complete fully-working install with this!
