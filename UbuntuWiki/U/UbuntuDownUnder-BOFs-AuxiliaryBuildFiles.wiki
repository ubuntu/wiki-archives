{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== AuxiliaryBuildFiles ==

=== Status ===

* Created: 2005-06-20 by MartinPitt
* Priority: NeedsPriority
* People: MartinPitt, NeedsSecond
* Contributors: JamesTroup, AdamConrad, DanielSilverstone
* Interested:
* Status: BrainDump, BreezyGoal, DistroSpecification, NewSpec
* Branch:
* Malone Bug:
* Packages:
* Depends:
* Dependents:
 
=== Introduction ===

When building a package on a buildd, a number of files are created from the source package build that are not suitable to go into the archive, but must be published on a separate location for further use. An existing example is the stripping of translation data as performed by `pkgstriptranslations`. In the future we also want to strip off debug symbols and possibly other things.

A gereric facility to handle these files is proposed.

=== Rationale ===

Right now, the handling of translation tarballs is hardcoded into sbuild, which is a bit ugly and not extensible. The exported tarballs are copied around with some custom scripts and eventually land in `http://people.ubuntu.com/~lamont/translations`, which is not highly official as well.

=== Scope and Use Cases ===

* Extract translation data from package builds, as done by pkgstriptranslations.
* Generate standalone debugging symbol files and export them to a public server, where they can be downloaded by e. g. the planned crash reporting agent.
* Other archive-scale transformations (extract documentation, etc.).

=== Implementation Plan ===

Our existing `.changes` files support auxiliary files if we use special sections/priorities for the auxiliary files. `pkgstriptranslations` registers the translation tarball with

  `dpkg-distaddfile sourcepackage_version_translations.tar.gz raw-lang extra`

(the priority is irrelevant and arbitrary). katie/Launchpad will then export the tarball to an internal server.

Similarly, a future `pkgstripdebug` builds a deb which contains all the debug symbols of the particular package and registers it with

  `dpkg-distaddfile package_version_debug.deb raw-debug extra`

katie/Launchpad exports these debs to `debug.ubuntu.com`. By using debs as containers, we can use the existing archive and mirror infrastructure for `debug.ubuntu.com` as well. However, the debs are not intended to be installed, the crash report agent just downloads and unpacks them and feeds the relevant files into `gdb`.

==== Packages Affected ====

* `pkgstriptranslations`: Use `dpkg-distaddfile` to register the tarball.
* `katie`: Export auxiliary files mentioned to a separate server.
* `apt`: Eventually we will need `apt-get download` to have better way of downloading debug debs than just `urllib.urlretrieve`.

==== User Interface Requirements ====

None.

=== Outstanding Issues ===

----
CategoryUdu
CategorySpec 
