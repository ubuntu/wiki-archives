{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad entry''': UbuntuSpec:ubuntu-small-business-server-blueprint
* '''Packages affected''':
* Depends:  NetworkAuthentication, XenInHardy

=== Summary ===
This spec describes Ubuntu's Small Business Server, a configuration utility aimed at making it easy for non-technical businesses set up an Ubuntu based server for basically company catalog and general fileserver.

Packages and tools to make configuring of a Small Business Server for Ubuntu as easy as possible. Packages for easy configuration of a directory server (OpenLDAP) and a file server and packages for joining clients (configure pam, change numeric userid etc).

Some goals:

* Files server protocol includes nfs, openafs, sshfs and other (not necessary Samba)
* Configuring in Gnome environment (LAT for LDAP)
* Easy configuration of a Xen-server with shorewall/LDAP/DHCP/DNS in Dom0 and DomU Fileserver, Internal/external web, e-mail, LTSP etc
* Easy configuration of clients and lap-top
* Strategies for backup and redundancy
* Strategies for security and maintenance (pamusb seems to be very interesting for authentication)

=== Rationale ===
The free software universe in general, and Ubuntu in particular, already provides most of the tools and infrastructure components needed to fulfill the needs of small businesses. What we need is good integration between these components and easy configuration.

=== Use Cases ===

* Jane is responsible primary for accounting,  and secondary, IT at a small business and want to create a server for basic needs and join a couple of Ubuntu workstations and laptops already at service. She wants to centralize user and rights management, the backup service, internet gateway and wants to add storage and security with minimum of distortion for her company fellows. She also want to make workstations at the office shareable so when John logges in as John at Roses workstation he finds his home catalouge, mail configuraton etc intact and can continue his tasks there.
* John wants to be able to work at home and on the train on his laptop and at his workstation at office using the same documents at home and at office. Sometimes he forgets his laptop at home and continues work at his office workstation. Jane has to deliver a solution that replicates Johns home catalog to his fileserver home catalog as automagic as possible.
* John finds out that he has done some major deletes by accident some days ago in one of the documents hes working with. He is then able to recover to an earlier version of his document using the file manager (Nautilus).
* Rose wants to share documents with a) her colleagues in management b) all of her colleagues at office.

=== Scope ===

User management and file server 

The following services will be included(in no particular order):
* LDAP
* DHCP/DNS/FireWall/IDS/Internet gateway/Xen-bundle
* nfs/sshfs
* Backup (duplicity, rdiff-backup)
* Mail and calendar 
** Postfix/Dovecot (?) - ldap-integration
** LDAP - DNS - administration 
** 
* Jabber or IRC server
* Asterisk / FreePBX
* SugarCRM / vTigerCRM  < -- > LDAP  < -- > Evolution
* Drupal for intranet  (LDAP-authentication)

=== Design ===

The single most important keyword is simplicity.

The interface will be debutils and Gnome-based for administration  

==== Mounts and synchronization ====

Standard mounts /srv/home/<users home directory> and /srv/global/<company / unit shared directories>

Local home direcories are located at /home as usual but are just a copy of the server home-directory only used when logging in by the local user. Only home-directories on laptops and workstations that have local users and local /home-directories are synchronized usually the owner of the machine.

Automount / pam-mount ?

Administration and distribution of mount-configurations LDAP ?  NIS ? 

==== Backups of home-directories ====

Home directories (original) are located at the server and mounted at login (or boot?). Backup 

duplicity - hidden (.) config-files in each catalog or root-catalog. Administer thru Nautilus in the same manner as just like nautilus-script-collection-svn

==== Backup of /var-direcories and configurations ====

* LDAP / MySQL are dumped in text-files to /var/backup
* Mail / IMAP ?
* /var/www /var/backup duplicity - config-files in . at each catalog

=== Implementation ===

Everything in this spec will likely be done as deb-packages that will fit in well with other Ubuntu distributed software.

==== sbs-standalone ====

Small Business Server standalone, one deb-package that installs ubuntu-xen-server, a dom0 with DHCP, DNS-cache/server, Shorewall, OpenLDAP and a DomU as fileserver (nfs and/or sshfs/openssh-server). This requirer a server with at least two nic. One nic for Internet one internal for DMZ (DomU with external services) and the third (second physical) as the local DHCP-driven network. 

==== sbs-ldap ====

Small Business Server LDAP-configuration. Configuration using debutils.

==== sbs-nfs, sbs-nfs-domu ====

==== sbs-client-join ====

* Dependent on NetworkAuthentication with a prober profile
* Ideally finds LDAP-server using avahi. At every boot or cache/configure permanent LDAP-server info?
* Change numeric user id for already locally configured users, change owner at home catalouge and files
** Optionaly check the whole disk and locally mounted devices 
* Install LAT for centralized administration
* Install Sabayon for rights management and desktop profiles
* Nautilus-script-collection-duplicity

===== Unresolved issues =====
* How to synchronize /home-catalouge with /srv/home/-catalouge? unison / rsync ? once an hour or when loggin in/out?
* How to distribute sabayon profiles?

==== nautilus-script-collection-duplucity ====

* Dublicity GUI when right-clicking in Nautilus
* Per directory config-files

=== BoF agenda and discussion ===

=== Comments ===

=== Related specifications and projects ===
* <nowiki>[[EasyLDAPServerHardy]]</nowiki>
* UbuntuEasyBusinessServer
* UbuntuEasyFilePrintServer
* UbuntuServerTasks
* <nowiki>[[https://wiki.ubuntu.com/UbuntuDownUnder/BOFs/UbuntuInstantServer]]</nowiki>
* <nowiki>[[https://wiki.ubuntu.com/UbuntuDownUnder/BOFs/SmallBusinessServer]]</nowiki>
* <nowiki>[[Obuntu]]</nowiki>
* edubuntu user management stuff

----
CategorySpec CategoryServerTeam
