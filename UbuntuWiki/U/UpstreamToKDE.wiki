{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

=== transfer-upstream-to-kde.sh ===

{{{#!highlight bash

translations="./ubuntu-natty-translations.tar.gz"
translations_update="./ubuntu-natty-translations-update.tar.gz"

lng="sq"

tar tvfz ubuntu-natty-translations.tar.gz | grep "/$lng/" | gawk '{print $6}' > extract-files.txt

tar --extract --gunzip --files-from=extract-files.txt --overwrite --file=$translations
tar --extract --gunzip --files-from=extract-files.txt --overwrite --file=$translations_update

find l10n-kde4/templates/messages/ -name '*.pot' | sed -e 's!^.*/!!' -e 's/t$//' > po-files.txt

check_dir="${lng}1/"
mkdir -p $check_dir
for file in $(cat po-files.txt)
do
  echo $file
  cp rosetta-natty/$lng/LC_MESSAGES/$file $check_dir
done

msgfmt --check $lng_dir/
scripts/msgfmt-test.sh $lng_dir/*.po
pofilter -i $check_dir -o ${check_dir}_err \
         --kde -t accelerators -t escapes -t nplurals -t tab -t xmltags

find l10n-kde4/templates/messages/ -name '*.pot' > pot-files.txt
for pot_file in $(cat pot-files.txt)
do
  dir=$(dirname $pot_file)
  dir=${dir##templates/messages/}  ## remove leading path: templates/messages/
  file=$(basename $pot_file)
  file=${file%%t}  ## remove the trailing 't' (so that extension becomes .po)

  if [ -f $check_dir/$file ]
  then
    mkdir -p l10n-kde4/$lng/messages/$dir
    cp $check_dir/$file l10n-kde4/$lng/messages/$dir/
### echo $file
  fi
done

cd l10n-kde4/$lng/messages/
svn status | grep '?' | gawk '{print $2}' | xargs svn add
svn commit -m 'importing upstream to kde PO files modified on launchpad'

}}}

----

=== msgfmt-test.sh ===

{{{#!highlight bash

files=$*

message=""
body=""
failures=0
successes=0

function failure
{
  pofile=$1
  body=$(echo $body; echo "\n"; echo "$message\n\n")
  message=""
  failures=$(($failures + 1))
}

function success
{
  pofile=$1
  body=$(echo $body; echo "\n")
  message=""
  successes=$(($successes + 1))
}

function run_msgfmt
{
  pofile=$1
  exit_status=$(msgfmt -cv -o /dev/null $pofile 2>/dev/null > /dev/null; echo $?)
  message=$(msgfmt -cv -o /dev/null $pofile 2>/dev/stdout | while read i; do echo "$i\n" ; done)
  return $exit_status
}

function print_header
{
  echo "<?xml version=\"1.0\" encoding=\"utf-8\"?>"
  echo ""
}

function print_body
{
  cat -
  echo -e $body
}

function print_footer
{
  cat -
  echo ""
}

for pofile in $files
do
  run_msgfmt $pofile && success $pofile || failure $pofile
done

print_header |
print_body |
print_footer

}}}
