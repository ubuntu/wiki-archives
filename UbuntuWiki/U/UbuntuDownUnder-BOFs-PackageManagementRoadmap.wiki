{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Status ===

** Created:  by MattZimmerman<<BR>>
** Priority: LowPriority<<BR>>
** People: MichaelVogtLead, ScottJamesRemnantSecond<<BR>>
** Contributors: MattZimmerman<<BR>>
** Interested: MichaelVogt, ScottJamesRemnant, MattZimmerman, TimMorris, CharlesMajola<<BR>>
** Status: EditedSpecification, ScottJamesRemnantQueue, MichaelVogtQueue, MattZimmermanQueue, UduBof, DistroSpecification<<BR>>
** Branch: <<BR>>
** Malone Bug: <<BR>>
** Packages: <<BR>>
** Depends: <<BR>>
** UduSessions: 1<<BR>>

=== Introduction ===

Define what road we want to take for our package management tools. 

=== Rationale ===

The package management tools need to be updated to work with the new requirements that the distro imposes on them. 

=== Scope and Use Cases ===

All of `apt`, `aptitude`, `dpkg` and `synaptic` need updates in various areas.

=== Implementation Plan ===

 0. dpkg should not depend on dselect any more (dpkg-1.13 no longer does)

 0. The package management tools should support logging so that the user gets a idea what's going on. 
** dpkg-1.13 supports logging for states now (needs to log answers for config file questions)
** Synaptic logs the high level operations of a single run already; it should also log the output of dpkg's maintainer scripts (logging inside `apt` is impossible because debconf questions will be asked on the same terminal)

 0. For "automated package suggestions": 
** mime-type of packages should be used: find a application to work with that mime type and install it (see also FindingPackages).

    Use case:
*** download a file with unknown mime-type and firefox tells us that it does not support it
*** have a non-supported file opened with nautilus and it should ask for software to be installed

 0. FeatureDependencies in dpkg may be evaluated. The idea is to replace the existing dependency handling based on version with dependency handling based on the actual features introduced by that version (for details see http://www.dpkg.org/FeatureDependencies)

 0. A new source package format might be considered. It will expand the current source package format so that it can include multiple patches (for details see http://www.dpkg.org/NewSourceFormat).
** Support for bz2 sources files will go in for Breezy

 0. Network sources should be enabled by default and the tools should behave sanely even if no network connection is available.
** Synaptic: ask Network``Manager if we are online or not
** `apt`, `aptitude` should test for network by forking a application that speaks dbus and tries to talk to Network``Manager

 0. The `apt`-library should be reviewed to make certain operations part of the library instead of part of the `apt-get.cc` application. "`apt-get update`" should be possible with a single library call.

 0. There are some similar but slightly different results when calling "`aptitude dist-upgrade`" and "`apt-get dist-upgrade`". A review is needed into why they have different results and if it is possible to unify them.

 0. There are various patches for `apt` available that need to be reviewed and added into `apt`:
** Limit the bandwidth of the download (Debian #146877, a prototype patch is in BTS)
** Package index diff support to make downloading of indexfile (`apt-get update`) faster (Debian #128818, prototype patch in BTS)
** Support i18n for the package descriptions (Debian #265009, prototype patch in BTS). This needs to be hooked into Rosetta
** The https patches from Progeny (Debian bug #213465)
** Support for a directory with `sources.list` entries (`/etc/apt/sources.list.d`)

 0. The `python-apt` bindings needs to be extended to support `apt`'s:
*** debcache
*** commit
*** update 
*** progress (callbacks)
*** a high-level interface written in python that wraps most of the low-level python interface
*** a high-level interface to manipulate the sources.list entries
    (part of that exists in `michael.vogt@ubuntu.com--2005/python-apt--mvo--0`) interface

 0. The ideas of the FindingPackages BOF that affect the PackageManager applications need review

 0. The extension for the DependencyManagement needs to be implemented (for details see PackageDependencyManagment)

 0. The '''smart''' application needs to be evaluated 

 0. The Debian bug #225947: "`apt-utils`: please support architecture-specific extra overrides" should be fixed (this is needed to better support debootstrap, see also PackageSelections)

 0. Some of the more experimental `apt` patches should go into a separate package with the codename "`apt`-woa" (working-overloaded-`apt`)  that will be published on http://people.ubuntu.com/~mvo/

==== Data Preservation and Migration ====

The packages tools must work as before, for the automatic handling of dependencies a script should be provided that converts the markings into the new format.

==== Packages Affected ====

* `apt`
* `aptitude`
* `dpkg`
* `synaptic`

==== User Interface Requirements ====

The automatic dependency feature needs updates to the `apt` and synaptic GUI.

=== Outstanding Issues ===

Most of the work is not done yet; some prototype patches exist.

==== UDU BOF Agenda ====

* Logging of package management activity
* Automated package suggestions
** Support packages for hardware devices
** Applications necessary to open file formats
* Supporting changes to enable network sources by default during installation (<nowiki>[[https://bugzilla.ubuntu.com/show_bug.cgi?id=6390|Bug#6390]]</nowiki>)
