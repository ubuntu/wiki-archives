{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Overview ===
Joey, NV0N on #ubuntu-hams, has a working configuration for USB Sound Modems like the Tigertronics SignalLink USB to be used for accessing packet BBSes.

Notes:
* APRS setup is a bit different in that it uses "kissattach" and "kissparms". This config is for pbbs use and not APRS.
* This is a known working configuration under Natty.
* The configuration for NETROM has been commented out but in fact does work under Natty so enable it if you want it.
* ROSE has been disabled.
* Feel free to edit this page if you have success or other comments.
* NV0N-8 is used below in the examples. Replace this with your callsign. The dash 8 iterator is not needed and you can simply use your callsign.
* You do not have to change any of the IP addresses in the configs below (e.g. 44.94.11.8)

=== Software ===

This setup requires these packages:
* libax25 - library for hamradio applications
* ax25-apps - AX25 ham radio applications
* ax25-tools - AX-25 tools
* ax25-xtools -  AX-25 tools (X versions) - optional
* ax25spyd  - AX.25 traffic analyzer, dumper and spy daemon - optional
* soundmodem  - Sound Card Amateur Packet Radio Modems
* rigctl - Rig Control programs
* node - ham radio node (digipeter) application

=== Configuration Files ===

==== Soundmodem config ====

From /etc/ax25/soundmodem.conf

Notes:
* the IP address can be arbitrary for your testing (in fact, you can just leave it as is)
* replace the NV0N callsign with yours
* replace the hamlib configuration with yours. (123 is a Yaesu FT-897)
* I've added hamlib_params below which you may need to change or delete.

<pre>
<?xml version="1.0"?>
<modem>

<configuration name="siglink"><channel name="Channel 0"><mod mode="afsk" bps="1200" f0="1200" f1="2200" diffenc="1" filter="df9ic/g3ruh" inlv="8" fec="3" tunelen="32" synclen="32"/><demod mode="afsk" bps="1200" f0="1200" f1="2200" diffdec="1" filter="df9ic/g3ruh"/><pkt mode="MKISS" ifname="sm0" hwaddr="NV0N-8" ip="44.94.11.8" netmask="255.255.255.0" broadcast="49.94.11.255" file="/dev/soundmodem0" unlink="1"/></channel><chaccess txdelay="300" slottime="100" ppersist="64" fulldup="0" txtail="30"/><audio type="alsa" device="plughw:2,0" halfdup="1" capturechannelmode="Mono"/><ptt file="/dev/ttyUSB0" hamlib_model="123" hamlib_params="serial_speed=4800,rts_state=OFF,dtr_state=OFF"/></configuration></modem></pre>

==== axports ====

The standard naming convention for soundmodems is sm0

<pre>
sm0	NV0N-8	1200	255	2	145.090 MHz (1200  bps)
</pre>

==== ax25d ====
<pre>
[NV0N-8 via sm0]
parameters 1    10  *  *  *   *   *
NOCALL * * * * * * L
default 1 10 3 300 10 5 -       root    /usr/sbin/node node %d %s

</pre>

==== Avahi ====
Avahi's publish command sends packets out over ax.25 which is something we don't want. Below is a copy of a working /etc/avahi/avahi-daemon.conf that you can use. The lines "#jjs changed" are the ports turned off.

<pre>

[server]
use-ipv4=yes
use-ipv6=no
ratelimit-interval-usec=1000000
ratelimit-burst=1000

[wide-area]
enable-wide-area=yes

[publish]
disable-publishing=yes
publish-addresses=no
publish-hinfo=no
publish-workstation=no
publish-domain=no

[reflector]

[rlimits]
rlimit-core=0
rlimit-data=4194304
rlimit-fsize=0
rlimit-nofile=768
rlimit-stack=4194304
rlimit-nproc=3
</pre>

==== node.conf ====

* set your callsign and related fields
* don't forget to set the local node to whatever you are using (e.g. 44.94.11.0/24)

<pre>

IdleTimeout	900

ConnTimeout	14400

HostName	nv0n.ampr.org

NodeId		#HAMLID:NV0N-8

ReConnect	on

LocalNet	44.94.11.0/24

ExtCmd		ECho	1	nobody	/bin/echo echo \%U\%u \%S\%s \%P\%p \%R\%r \%T\%t \%\% \%0 \%1 \%2 \%3 \%4 \%5 \%6 \%7 \%8 \%9
ExtCmd		TIme	1	nobody	/bin/echo echo %N Node session started at %I, current time is \%I.

NrPort		nr0

LogLevel	3

EscapeChar	^T

ResolveAddrs	off

NodePrompt	"\n"
</pre>

==== node.perms ====

Set your callsign and related fields

<pre>

nv0n      *      *       secret  255

* ax25	*	*	31
* netrom	*	*	31
* local	*	*	31
* ampr	*	*	31
* inet	*	*	0
* host	*	*	31
</pre>

==== nrports ====

<pre>
</pre>

==== rsports ====
ROSE is almost never used so just comment out the ports.

<pre>
</pre>

==== modprobe ====
If you want to enable netrom, create a file called /etc/modprobe.d/netrom.conf and put this in it
<pre>
alias nr0          netrom
</pre>

==== nrbroadcast ====

Uncomment sm0 to enable netrom

<pre>
</pre>

=== startup script ===
Note: make sure you reboot at least once after doing all the above.

This is the startup script (I call it packet.sh). Must be run as root/sudo. Advice is to run these manually the first few times until you get no errors. Keep in mind the route commands below need to match what you put into soundmodem.conf above.

<pre>
/usr/sbin/soundmodem /etc/ax25/soundmodem.conf -R -M >/dev/null 2>/dev/null&
sleep 1
/sbin/route add -host 44.94.11.8 dev sm0
/sbin/route add -net 44.94.11.0 netmask 255.255.255.0 gw 44.94.11.8 dev sm0
sleep 1
/usr/sbin/ax25d
sleep 1
/usr/sbin/mheardd
</pre>

At this point you should be at a command line and can run
<pre>
axcall sm0 callsign
</pre>
where callsign is your local BBS.

=== What to expect when you're done ===
<nowiki>[[File:axcall.png]]</nowiki>
