{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== NFSRoot ==

=== Status ===

** Created:  by MattZimmerman<<BR>>
** Priority: HighPriority<<BR>>
** People: JimMcQuillanLead, JeffBaileySecond<<BR>>
** Contributors: MattZimmerman, ScottBalneaves, EricHarrison<<BR>>
** Interested: LamontJones<<BR>>
** Status: BreezyGoal, DistroSpecification, ApprovedSpecification
** Packages: <<BR>>
** Depends: <<BR>>
** UduSessions: 1(0) <<BR>>

=== Introduction ===

NFS filesystems can be used to boot systems, either for use in thin client configurations, or in system recovery. The proposed solution is tied in with the replacement of `initrd-tools` with `initramfs-tools`. LTSP already uses a userspace NFS Root setup. 

=== Rationale ===

With the planned removal of kernel-level support for NFS root configurations, a userland solution is needed.  This solution depends on EarlyUserspace.

=== Scope and Use Cases ===

* When booting a thin client, some kind of initramfs needs to be there to query the DHCP server to find the appropriate NFS server to mount the root from, and actually run the appropriate user space tools to mount the filesystem.
* For lights-out facilities, a network bootable kernel with an initramfs is needed that has the appropriate tools required to begin recovery of a failed server.
* Diskless `distcc` or Mosix nodes are another example of a case where an initramfs is needed to bring up a node in the cluster.

=== Implementation Plan ===

* Implement EarlyUserspace

* Add ability to specify module loading from the kernel command line and additional module details (IRQ, IO Address, Port) to support older network cards.

* Tweak `dhcplient3` to deal correctly with NFS Root (to handle RENEW requests)

==== Data Preservation and Migration ====

* Because there are existing `initrd-tools` and LTSP setups, have to be careful of all the various platforms for the initramfs solution.

==== Packages Affected ====

* `initrd-tools`
* `initramfs-tools`
* `linux-image-*`

==== User Interface Requirements ====

N/A

=== Outstanding Issues ===

* Swap over NFS or NBD.

* To have a common Hoary & ltsp kernel + initramfs, we need to know how we were booted (net or cd or disk)
** We will have a kernel command line parameter, which selects which script to execute.

----
CategoryUdu
CategorySpec 
