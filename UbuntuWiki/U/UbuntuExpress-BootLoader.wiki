{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': https://launchpad.net/distros/ubuntu/+spec/ubuntu-express-bootloader
* '''Created''':  by Fabianx
* '''Contributors''': Fabianx, ColinWatson
* '''Packages affected''': ubuntu-express, grub-installer, yaboot-installer, os-prober, parted

=== Summary ===

Design an UbuntuExpress component to install the boot loader.

=== Rationale ===

The Ubuntu installer already has a substantial volume of code to handle boot loader installation (including a number of sanity checks) which we should reuse. This is currently part of udeb maintainer scripts.

LILO will not be supported; on i386/amd64, we will only support GRUB.  Expert users who wish to use LILO are likely to be able to install it manually from the comfort of the live environment.  We do not plan to address LVM or RAID for now; users requiring that can still use the traditional installer.

=== Scope ===

This specification considers only the boot loader installation component of UbuntuExpress. This is a required component of an installer and (in this case) will have no user interface, so no use cases are specified.

=== Design ===

We will modify several components of the installer to produce suitable ubuntu-express-* packages:

* grub-installer needs minor changes to avoid failing if mapdevfs is not present. These can probably go upstream. It needs to produce an ubuntu-express-grub.deb.
* yaboot-installer needs minor changes to avoid failing if archdetect or mapdevfs is not present. (For the first version, we can produce a simple archdetect shim that checks /proc/cpuinfo for New``World Power``Macs or PR``eP systems, which are all we care about for now.) At least the mapdevfs changes can go upstream. It needs to produce an ubuntu-express-yaboot.deb.
* os-prober needs minor changes to avoid failing if mapdevfs is not present. These can probably go upstream. It needs to produce an ubuntu-express-os-prober.deb.
* parted needs to be modified to optionally produce output in the style of `/usr/lib/partconf/find-partitions --flag`, for yaboot-installer. We hope that this can go upstream.

=== Implementation status ===

* 2005-12-07 ColinWatson: parted patch prepared and sent upstream (but in the meantime I've incorporated partconf-find-partitions into partman.deb, so this is not a blocker). os-prober modified upstream to work outside d-i.
* 2006-01-23 ColinWatson: espresso-grub uploaded; GRUB installation changes in espresso implemented and working.
* 2006-03-09 ColinWatson: espresso-yaboot uploaded; yaboot installation changes in espresso implemented, although need testing.
* 2006-04-12 ColinWatson: Small fixes to yaboot support. It's working fine now in espresso 0.99.46, completing this specification.

----
CategorySpec
