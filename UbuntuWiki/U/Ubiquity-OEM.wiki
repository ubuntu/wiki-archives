{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad Entry''': UbuntuSpec:ubiquity-oem
* '''Packages affected''': `ubiquity`, `oem-config`

=== Summary ===

Merge the OEM installation process into Ubiquity.

=== Release Note ===

OEMs can now install Ubuntu using the desktop CD.

=== Rationale ===

OEMs like to work with just the desktop CD, and by not having to bother with the alternate CD, they only have to worry about a single image.

=== Use Cases ===

* Comp-U Computers would like to use Ubuntu on their systems, but the use of the alternate installer and the inflexibility of the system makes preparing images difficult for them.
* Some OEMs cannot guarantee the video card or monitor on the end user's system, so need to reconfigure X at oem-config time. We do not want to do this across the board since some other OEMs may have carefully-crafted X configurations that they want preserved.

=== Design ===

The system will be brought into Ubiquity and several changes will be made to clarify and simplify the process for OEMs and users.

=== Implementation ===

==== Ubiquity ====

* Ubiquity will be taught to honour the same command-line argument used to enable `oem-config` in the alternate CD (now `oem-config/enable=true` in Gutsy). When this option is present, it will:
** adjust its title bar to indicate that it is running in OEM mode '''[done, ubiquity 1.5.5]''';
** hardcode the user's full name to "OEM Configuration (temporary user)", the username to "oem", and the UID to 29999 '''[done, ubiquity 1.5.5]''';
** install the appropriate `oem-config-FRONTEND` package on the target system '''[done, ubiquity 1.5.5]''';
** install an icon for `oem-config-prepare` on the `oem` user's desktop '''[done, ubiquity 1.5.5]'''.
* `oem-config-gtk` or `oem-config-kde` as appropriate will be added to the `ship-live` seed '''[done, ubuntu.gutsy r988]'''.
* Ubiquity will ask for an OEM ID which is saved as `/var/log/installer/oem-id` on the installed system. This could allow us to special-case around bugs in OEM images if necessary '''[done, ubiquity 1.5.5]'''.

==== General oem-config improvements ====

* A hooks directory will be added to allow OEMs to provide additional code to further configure the system while the end user is running `oem-config` '''[done, oem-config 1.17]'''.
** Hooks will run noninteractively, although they will have access to the debconf database as long as they do not try to use the `INPUT` or `GO` commands.
* The hardware database notification will be disabled for OEM installs '''[done, oem-config 1.17]'''.
* The oem user will be automatically logged in, removing the need to log in manually '''[done, oem-config 1.17]'''.

==== UI changes ====

* `oem-config`'s user configuration will be made to match the functionality in the user-setup page of Ubiquity.  That is, it will include proper inline error checking '''[done, oem-config 1.17]'''.
* An icon on the OEM desktop will replace the need to run `sudo oem-config-prepare` manually '''[done, oem-config 1.17]'''.
* An indication that the user is in OEM mode will be added to the alternate CD by adding an `oem-config-check` component to d-i's initrd (similarly to rescue mode) '''[done, oem-config 1.15]'''.

==== Documentation ====

* Additional documentation will be provided to the OEMs for common tasks such as reconfiguring GNOME settings.
* Note that reconfiguring X could replace some custom settings in xorg.conf created by the OEM.

=== Test/Demo Plan ===

'''[to be filled in during implementation]'''

----
CategorySpec
