{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

* '''Launchpad Entry''': <nowiki>[[https://blueprints.edge.launchpad.net/certify-web/+spec/karmic-qa-cert-install-from-live-cd-images|karmic-qa-cert-install-from-live-cd-images]]</nowiki>
* '''Created''':
* '''Contributors''':
* '''Packages affected''':

=== Summary ===

Enable the hardware certification framework to test desktop images via Ubiquity preseeding.

=== Rationale ===

Desktop images should be tested on a daily basis so that regressions can
be detected as early as possible. Desktop images are the most common use case by far for installing Ubuntu. They are the most downloaded, distributed by shipit and commonly used by vendors.

=== User stories ===

* Test preseed functionality in Ubiquity to get daily testing of desktop images
* Kubuntu images can also be tested via preseeding as this does not involve ATK

=== Assumptions ===

This specification assumes that it is actually possible to install
desktop images over the network. It is already known that there is NFS
support in capser to mount the image over the network. However, since
this code path doesn't get exercised much, this will need to be confirmed.

=== Design ===

There should be little design implications to add support for testing
desktop images. The hardware certification framework already supports
the concept of testing alternate images, so desktop images should map
quite closely to the existing design.

=== Implementation ===

Most of the work will consist of extending the current implementation
to support testing desktop images within the constraints of the current
design.

First, this will consist of extending the satellite servers to accept
messages requesting to specifically test desktop images. The services
on the server should then be configured so that the images can be
booted and installed over the network. The most significant difference
with the current implementation is that this will require configuring
NFS. The other services such as dhcp, tftp, and even rebooting the
systems should remain essentially the same.

Second, the image prober on the hardware certification website currently
only filters alternate and desktop images. This should be extended to
include desktop images which should be trivial. Then, another message
type will have to be created for the activity queue in order to support
testing desktop images.

==== UI Changes ====

The only noticeable user interface changes should be limited to the
hardware certification website where current images are displayed. Once
this specification is implemented, the desktop images should appear in
addition to the current images.

==== Code Changes ====

The most significant code changes will affect the satellite server. First,
a plugin should be created to accept message types from the activity queue
relating to testing desktop images. Second, another plugin should be created for configuring the NFS server to provide access to the desktop images.

As far as the hardware certification website, the changes should be rather
trivial. First, changing the image prober to include desktop images. Second, adding a new message type for desktop images.

There might be other changes necessary, most likely on the satellite server. More exploration will be needed in order to evaluate the complete set of requirements in order for the desktop images to be installed over the network.

=== Test/Demo Plan ===

Once the implementation is completed, we should see test results for desktop images automatically appear on the current /builds page from the hardware certification website.

=== Unresolved issues ===

As of writing this specification, it is still not clear how to preseed
casper when performing a network installation of desktop images. Ideally,
this should not require changing the image itself.

=== Future work ===

* Test interactive install interface
* Publish results to the open results tracker 

=== References ===

https://wiki.ubuntu.com/UbiquityAutomation

----
CategorySpec
