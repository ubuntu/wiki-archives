{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:qa-upstream-kernel-bugs
* '''Created''':
* '''Contributors''': 
* '''Packages affected''':

=== Summary ===

Improve the collaboration with kernel upstream around bug reports. We will make our bug reports more relevant to upstream by facilitating testing on stock upstream kernels and make them more useful by adding kerneloops information.

=== Rationale ===

We are in a position to connect end users with the upstream kernel developers.  We should focus on facilitating the communication between the two parties.  Currently, when a bug is reported against the Ubuntu kernel it is not necessarily tested and reported against the upstream kernel.  Testing the upstream kernel currently requires knowledge on how to build and install the upstream kernel from source.  This is not something every Ubuntu kernel bug reporter is comfortable doing.  As a result, bugs do not get tested and escalated upstream.  With the majority of Ubuntu kernel bug fixes originating from the upstream kernel, we've become a bottleneck to getting bugs resolved. A bug in the upstream kernel is a bug in the Ubuntu kernel.

Querying the upstream kernel bugzilla, there are currently <nowiki>[[http://bugzilla.kernel.org/buglist.cgi?query_format=advanced&short_desc_type=allwordssubstr&short_desc=&long_desc_type=substring&long_desc=&kernel_version_type=allwordssubstr&kernel_version=&bug_status=NEW&bug_status=ASSIGNED&bug_status=REOPENED&bug_status=VERIFIED&bug_status=DEFERRED&bug_status=NEEDINFO&emailassigned_to1=1&emailtype1=substring&email1=&emailassigned_to2=1&emailreporter2=1&emailcc2=1&emailtype2=substring&email2=&bugidtype=include&bug_id=&chfieldfrom=&chfieldto=Now&chfieldvalue=&regression=both&cmdtype=doit&order=Reuse+same+sort+as+last+time&field0-0-0=noop&type0-0-0=noop&value0-0-0=|1306 bugs]]</nowiki> in an open state ("New", "Assigned", "Reopened", "Verified", "Deferred", "Needinfo").  Compare that to the <nowiki>[[https://bugs.edge.launchpad.net/ubuntu/+source/linux/+bugs?search=Search&field.status=New&field.status=Incomplete&field.status=Confirmed&field.status=Triaged&field.status=In+Progress&field.status=Fix+Committed|4150 bugs]]</nowiki> in an open state ("New", "Incomplete", "Confirmed", "Triaged", "In Progress", "Fix Committed") against just the "linux" kernel package in Launchpad and it's easy to see why we need to improve in this area.

=== Use Cases ===
* Ubuntu user John experiences a kernel oops every time he boots his system.  John should also test the upstream kernel to verify if he is able to trigger this oops when booting the upstream kernel.  If the issue exists with the upstream kernel, John should notify the upstream kernel developers of the issue.
* Ubuntu user Sue has a new usb wifi dongle that is not working in Ubuntu.  Sue tests the upstream kernel and discovers the device works perfectly.  Sue should work with the Ubuntu kernel devs to narrow down the fix that should be pulled into the Ubuntu kernel.

=== Assumptions ===
* The kernel team will start providing an upstream vanilla kernel package for users to install and test with - '''DONE''' (<nowiki>[[https://blueprints.launchpad.net/ubuntu/+spec/jaunty-kernel-team-process|jaunty-kernel-team-process]]</nowiki>)

=== Implementation ===

1. Work with the Ubuntu kernel team to provide an upstream vanilla kernel package that our users can easily install and test.  
** Build a package for the latest upstream kernel -rc candidate or final release
** Build a package for the most recent upstream stable kernel

# Work on re-educating our bug reporters to test the upstream kernel and report their bugs upstream:
## Bug is triggered using the Ubuntu kernel
## Next step is to test the stable kernel package which the Ubuntu kernel was based on.  Use '''cat /proc/version_signature''' to determine which stable kernel package the Ubuntu kernel was based on.
** If the bug does not exist with the stable kernel package this indicates the issue is with an Ubuntu specific patch(es)
** If the bug exists with the stable kernel package, proceed to the next test
1. Test the latest upstream kernel -rc candidate or final release package (which ever is the most recent)
** If the bug does not exist in the upstream kernel, narrow down which patch to backport to the Ubuntu kernel
** If the bug exists in the upstream kernel, report the bug upstream (create docs to instruct user the proper was to report the bug upstream - may vary between reporting the bug to a mailing list or filing a bug report at kernel.bugzilla.org)

1. Enable kerneloops by default and enable apport to detect and report bugs from oopses on the next boot 
** Add extra version info to identify the kernel as an Ubuntu kernel so that oops reports are more useful to upstream - '''DONE'''
** Ensure that the hardware certification infrastructure takes proper advantage of the oops reports - this includes booting the system with a working kernel / in a working mode to let apport generate the bug report

1. Work with upstream kernel bugzilla maintainers to update to bugzilla 3.0 and install the Launchpad plugin
** https://lists.ubuntu.com/archives/kernel-team/2008-December/003837.html

=== BoF agenda and discussion ===

How can bug reports be forwarded better to the upstream developers and kernel bug tracker?
* automation of reporting a kernel bug report upstream - similar to apport
** or at least a tool for the QA team to forward them more easily
** focus on not saturating upstream with poor reports
* ubuntu qa team can not be a middle man for bug reporters
** education of Ubuntu users
** test upstream vanilla kernel and file upstream bug if necessary
** Ubuntu QA Team to work on direct communication of bugs with upstream mailing lists
* important to reproduce/confirm bugs if possible

flag bugs that are on "supported" hardware - a system that ships with Ubuntu
* these bugs should be identified in Launchpad and higher priority

check if kernel has debugging enabled by default:
<pre>
~/ubuntu-jaunty/debian/config$ grep -rn "CONFIG_DEBUG_KERNEL" *
amd64/config:539:CONFIG_DEBUG_KERNEL=y
armel/config:182:CONFIG_DEBUG_KERNEL=y
i386/config:569:CONFIG_DEBUG_KERNEL=y
</pre>
----
CategorySpec
