{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

~+'''OBSERVERA'''+~

'''Lösningen som beskrivs nedan förutsätter version 6.2.30 av BankID-appen för Android. <nowiki>[[https://www.bankid.com|Finansiell ID-Teknik]]</nowiki> har stängt av möjligheten att använda den versionen, samtidigt som högre versioner inte är kompatibla med ''Google Chrome''/''App Runtime for Chrome''. Därmed får instruktionen nedan betraktas som ett historiskt dokument, alternativt en beskrivning av hur det hade kunnat fungera om Finansiell ID-Teknik hade valt en annan väg.

Se <nowiki>[[SwedishTeam-Support-E-legitimation|E-legitimation]]</nowiki> för en aktuell beskrivning av tillgängliga möjligheter.

2016-08-15<<BR>>
Gunnar Hjalmarsson'''

----------

----
&#91; <nowiki>[[SwedishTeam-Support-E-legitimation|E-legitimation]]</nowiki> | <nowiki>[[http://ubuntu-se.org|Ubuntu Sverige portal]]</nowiki> | <nowiki>[[http://ubuntu-se.org/phpBB3/|Ubuntu Sverige forum]]</nowiki> &#93;
----
{| class="wikitable"
|-
| <tablestyle="float:right; font-size: 0.9em; width:40%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em;"><<BR>>
|}

== Inledning ==

Det går att använda Mobilt BankID på ett Linux-skrivbord genom att paketera Android-appen för Mobilt BankID för webbläsaren Google Chrome. Chrome behöver då vara installerad förstås, men man är fri att använda Firefox eller någon annan webbläsare för att surfa. Ett stort tack till Linux-användaren Paul Bergström som upptäckte möjligheten.

<nowiki>[[https://www.bankid.com|Finansiell ID-Teknik]]</nowiki>, som äger Mobilt BankID, har uttalat sig löftesrikt om det här sättet att använda Android-appen. De utvärderar metoden inklusive säkerhets- och förvaltningsaspekter.

Om du har frågor om den här metoden, eller observationer att dela med dig av, är du välkommen att använda tråden <nowiki>[[https://ubuntu-se.org/phpBB3/viewtopic.php?f=223&t=58852|BankID variant -Mobilt BankID i Linuxdator]]</nowiki> i Ubuntu Sveriges forum.

=== Systemkrav ===

Metoden möjliggörs av Chrome-tillägget <nowiki>[[https://en.wikipedia.org/wiki/Google_App_Runtime_for_Chrome|App Runtime for Chrome (ARC)]]</nowiki>. ARC använder en säkerhetsteknik (seccomp-bpf sandbox) som stöds av alla aktuella Ubuntu-versioner (12.04 och senare), och som för övriga Linux-distributioner kräver Linux 3.5 eller senare.

Google har slutat tillhandahålla ARC för 32-bitars Google Chrome, men om du har ett 32-bitars Linux-system, kan föregångaren <nowiki>[[https://archon-runtime.github.io/|ARChon Runtime for Chrome]]</nowiki> användas i stället.

== Installation av BankID-appen ==

Ubuntu Sverige tillhandahåller ett <nowiki>[[https://launchpad.net/~ubuntu-se/+archive/ubuntu/bankid-chrome|Launchpad PPA]]</nowiki> med paketet ''bankid-chrome''. Paketet installerar ett okomprimerat Chrome-tillägg, skapat med hjälp av <nowiki>[[https://chrome.google.com/webstore/detail/emfinbmielocnlhgmfkkmkngdoccbadn|ARC Welder]]</nowiki>, och som inkluderar version 6.2.30 av BankID-appen för Android.

Om din OS-version är 12.04, 14.04, 16.04 eller 16.10, kan du göra så här:

* Lägg till '''ppa:ubuntu-se/bankid-chrome''' genom att följa stegen på <nowiki>[[https://help.ubuntu.com/stable/ubuntu-help/addremove-ppa.html|den här sidan]]</nowiki>.

* Installera paketet ''bankid-chrome''.

Ett annat sätt, som fungerar generellt i Ubuntu/Debian för att installera från nämnda PPA, är att öppna ett terminalfönster och köra följande kommandon:

<pre>
sudo sh -c 'echo "deb http://ppa.launchpad.net/ubuntu-se/bankid-chrome/ubuntu trusty main" > /etc/apt/sources.list.d/bankid-chrome.list'
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv F0511E06
sudo apt-get update
sudo apt-get install bankid-chrome
</pre>

Du som använder ett Linux operativsystem, som inte är Debian-baserat, kan i stället använda filen <nowiki>[[attachment:bankid-chrome_6.2.30.1.zip]]</nowiki>. Den innehåller samma filer som installeras genom PPA-paketet.

Alternativt kan man själv installera ARC Welder, hämta BankID-appen och skapa Chrome-tillägget. Beskrivningen av det faller dock utanför ramen för den här instruktionen.

== Installation av Chrome m.m. ==

* <nowiki>[[https://www.google.com/chrome/browser/desktop/|Ladda ner och installera Google Chrome]]</nowiki>. (Chromium funkar inte.)

* Öppna Chrome och gör följande från Chrome:

** Installera tillägget ''App Runtime for Chrome'' genom att gå till sidan<<BR>><nowiki>[[https://chrome.google.com/webstore/detail/mfaihdlpglflfgpfjcifdjdjcckigekc|https://chrome.google.com/webstore/detail/mfaihdlpglflfgpfjcifdjdjcckigekc]]</nowiki><<BR>>och klicka på knappen "LÄGG TILL".

** Gå till Tillägg (<code>chrome://extensions</code>) och aktivera "Programmerarläge".

** Koppla BankID-appen till Chrome genom att klicka på "Hämta okomprimerat tillägg..." ("Load unpacked extension...") och välja katalogen <code>/usr/share/bankid-chrome</code> (eller, om du använde ZIP-filen ovan, den katalog du valde för tillägget).<<BR>><<BR>>Det bör resultera i att den här informationen visas:<<BR>><nowiki>[[File:extension-entry.png|Info i chrome://extensions]]</nowiki><<BR>>Varningen "Unrecognized manifest key 'arc_metadata'" kan du bortse från.

Efter detta så finns ''BankID säkerhetsapp'' som ett tillägg i din Chrome-installation. Webbläsaren Chrome kan vara stängd härefter om du vill; när BankID-appen startas körs Chrome i så fall i bakgrunden.

Du kan starta BankID-appen via BankID-ikonen, som du t.ex. hittar i Dash i Ubuntu eller i ''Startprogrammet för appar i Chrome'', se <nowiki>[[https://support.google.com/chrome_webstore/answer/3060053?hl=sv|Så öppnar du en app]]</nowiki>. Det kan vara praktiskt att fästa ikonen i Programstartaren.

=== Om det hakar upp sig ===

Om du, när du försöker hämta in BankID-appen till Chrome, får beskedet att det inte gick att läsa in tillägget, då WebGL inte stöds, pröva då följande:

* Ange adressen <code>chrome://flags</code> i adressfältet.

* Aktivera funktionen ”Åsidosätt lista för programrendering” (”Override software rendering list”).

* Starta om Chrome, gå till Tillägg (<code>chrome://extensions</code>), och hämta BankID-tillägget igen.

I några situationer är det tillrådligt att i stället för ''App Runtime for Chrome (ARC)'' installera dess föregångare <nowiki>[[https://archon-runtime.github.io/|ARChon Runtime for Chrome]]</nowiki>. Exempel på sådana situationer:

* Du har en 32-bitars Linux-installation (Google's officiella ARC stöder numera bara 64-bitars Chrome).

* BankID-appen kraschar och visar "en ledsen pusselbit" när du försöker starta den.

== Användning ==

Innan du kan logga in säkert till någon webbtjänst, behöver du förstås hämta ett Mobilt BankID via din bank. I internetbanken finner du detaljerade anvisningar om hur det går till.

Funktionen kan testas på <nowiki>[[https://test.bankid.com/Mobile/OtherDevice|test.bankid.com]]</nowiki>.

Det är '''Mobilt BankID''' du skall välja vid inloggning - inte BankID. Om du tillfrågas om du vill legitimera dig på "denna enhet" eller "annan enhet", skall du välja '''"annan enhet"'''. Det senare är visserligen inte sant, men då inloggningsinstruktionerna utgår från att Mobilt BankID inte finns installerat på en vanlig dator, behöver vi svara så för att det skall fungera. När du blir ombedd att ange personnummer, kan du se det som ett tecken på att du gjort rätt. Sedan återstår att ange säkerhetskoden i BankID-appen.

=== Flera användare ===

Om en dator används av flera personer, till exempel flera personer i ett hushåll, behöver varje person ha ett eget användarkonto för att kunna installera och använda sitt egna mobila BankID enligt den här metoden. För ett <nowiki>[[https://help.ubuntu.com/stable/ubuntu-help/user-add.html|tillkommande användarkonto]]</nowiki> (som inte behöver vara ett administratörskonto) finns såväl Google Chrome som paketet ''bankid-chrome'' tillgängliga från början, och instruktionen ovan är tillämplig från och med punkten "Öppna Chrome och gör följande från Chrome".

----
&#91; <nowiki>[[SwedishTeam-Support-E-legitimation|E-legitimation]]</nowiki> | <nowiki>[[http://ubuntu-se.org|Ubuntu Sverige portal]]</nowiki> | <nowiki>[[http://ubuntu-se.org/phpBB3/|Ubuntu Sverige forum]]</nowiki> &#93;
