{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:mobile-lucid-arm-debian-cd-cleanup
* '''Created''': November 4th, 2009
* '''Contributors''':  Michael Casadevall
* '''Packages affected''': debian-cd

=== Summary ===

debian-cd currently generates VFAT images for all armel subarchitectures, but the general implementation of this mechanism is fairly messy, causing heavy code duplication between the various boot and post-boot scripts in the backend. This code exists to create images with proper partition tables and backends, and should be refactored to earlier into the image creation processor, and be re-factored to a point we don't need to duplicate the code across all SoCs.

=== Release Note ===

The debian-cd backend code has been overhauled for easier handling of arm image creation.

=== Rationale ===

As we add more and more SoCs with different necessities of booting solutions, the code duplication across SoCs will become exponentially more difficult to maintain. Ideally, the boot and post-boot scripts can be rewritten in a way to make it possible that these scripts will only contain the bare amount of logic to customize the output files; for instance, only containing the logic to create the boot.scr file required by the bootloader.

=== Design ===

=== Implementation ===

==== UI Changes ====

No UI changes planned

==== Code Changes ====

* Moving partition table creation and management earlier in the image creation process, and allow non-ARM vfat images to take advantage of having a proper partition map
* Partition table creation script requirements
** Must be able to handle multiple types of partition layouts. (i.e., one giant vfat/ext2 partition for dove, or two partitions for imx51)
** Specify specific actions for partman to implement
** Must work on a sub-architecture basis
* Refactor any common code inbetween armel+dove and armel+imx51 into a single library that can be referenced by both scripts

=== Test/Demo Plan ===

Normal ISO and image testing will be used to test the resulting images to check for any regressions

=== Unresolved issues ===

This should highlight any issues that should be addressed in further specifications, and not problems with the specification itself; since any specification with problems cannot be approved.

=== BoF agenda and discussion ===

No UDS session for this spec.

----
CategorySpec
