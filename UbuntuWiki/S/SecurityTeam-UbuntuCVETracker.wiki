{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

=== Setup ===
Much of this can be found in <nowiki>[[https://git.launchpad.net/ubuntu-cve-tracker/tree/README|ubuntu-cve-tracker/README]]</nowiki>.

 0. Install the necessary software:<pre>
$ sudo apt-get install python3-configobj python3-yaml python3-genshi python3-progressbar python3-macaroonbakery subversion
</pre>

 0. Download the ubuntu-cve-tracker branch:<pre>
$ mkdir ~/git-pulls
$ cd ~/git-pulls
$ git clone git+ssh://<user>@git.launchpad.net/ubuntu-cve-tracker (replace <user> with your launchpad user).
</pre>

 0. Add the UCT environment variable to your startup scripts (eg ~/.bashrc) and have it point to the ubuntu-cve-tracker branch:<pre>
export UCT="$HOME/git-pulls/ubuntu-cve-tracker"
</pre>

 0. Create $HOME/.ubuntu-cve-tracker.conf to have something like:<pre>
plb_authentication="/home/<username>/snap/firefox/common/.mozilla/firefox/<work.profile>/cookies.sqlite"
 
secure_testing_path='/home/<username>/git-pulls/security-tracker'
 
packages_mirror='<path>/ubuntu-archive-metadata'

debian_mirror='<path>/debian-testing-archive-metadata'

partner_mirror='<path>/partner-archive-metadata'

usn_tool='/home/<username>/git-pulls/usn-tool-trunk'

usn_db_copy='/home/<username>/git-pulls/ubuntu-cve-tracker/database.pickle'

usn_storage='/tmp/pending-usn'

usn_website='/home/<username>/git-pulls/usn.ubuntu.com'

mitre_loc="people.canonical.com:/home/ubuntu-security/cache"
nvd_loc="people.canonical.com:/home/ubuntu-security/cache"
nvd2_loc="people.canonical.com:/home/ubuntu-security/nvd-database"
</pre>

 0. Populate the required data into the packages_mirror and partner_mirror directories:<pre>
cd $UCT;./scripts/packages-mirror
</pre>

 0. Populate the required data into the secure_testing directory:<pre>
$ cd ~/git-pulls
$ git clone https://salsa.debian.org/security-tracker-team/security-tracker.git
</pre>

 0. Pull down an initial copy of the database.pickle database:<pre>
cd $UCT; ./scripts/fetch-db database.pickle.bz2
</pre>

=== Usage ===
==== check-cves ====
`check-cves` is the tool to update the CVE database with new entries. 

===== Prequisites =====
`check-cves` needs the archive layout mirrors to contain up-to-date information; the `${UCT}/scripts/packages-mirror` script will do this for you.

===== Usage =====
To use manually, run like this:<pre>
$ cd $UCT ; git pull --ff-only
$ ./scripts/check-cves
$ ./scripts/check-cves http://cve.mitre.org/data/downloads/allitems.xml
$ ./scripts/check-cves <file>
</pre>

Eg:<pre>
$ wget -N http://cve.mitre.org/data/downloads/allitems.xml
$ git pull --ff-only
$ ./scripts/check-cves ./allitems.xml
$ for i in $(seq 2004 $(date +%Y)) recent; do wget --quiet -N http://nvd.nist.gov/download/nvdcve-$i.xml; done
$ ./scripts/check-cves ./nvdcve-2*.xml
</pre>

The Ubuntu Security team does certain triage actions depending on the day of
the week, and the `process_cves` script will guide you through these and call
check-cves with appropriate arguments. Eg:<pre>
$ git pull --ff-only
$ ./scripts/process_cves
$ ./scripts/process_cves Mon
$ ./scripts/process_cves Tue
</pre>

Please see the TRIAGING section in <nowiki>[[https://git.launchpad.net/ubuntu-cve-tracker/tree/README|ubuntu-cve-tracker/README]]</nowiki> for more information.

===== Embargoed Items =====
Embargoed items are supported in the following scripts in all the scripts
except sync-from-usns.py.  If no CVE has been assigned yet, an embargoed item
should be prefixed with 'EMB-', followed by any combination of alphanumerics
and dashes.  Eg:
EMB-xorg-2007-0001
EMB-foo

To include embargoed items simply create a symlink from 'embargoed' to
the directory holding embargoed items. ubuntu-cve-tracker will not
use 'embargoed' unless it is a symlink.

===== Pre-commit Syntax Checking =====
To perform pre-commit syntax checking, this little hack should allow for it:<pre>
$ make dev_setup
</pre>
This will install a git pre-commit hook that will run $UCT/scripts/check-syntax on your modified CVE files. 

With the above, check-syntax is always run before a commmit, or to avoid
check-syntax, you can run:
UCT_IGNORE_CHECK_SYNTAX=1 git commit 

==== Other commands ====
Below are various tools to help maintain and manipulate UCT. All commands assume you are in the top-level directory of UCT (ie `cd $UCT`).

* Verify syntax of CVE-* files:<pre>
$ ./scripts/check-syntax
</pre>
* To commit, use this command:<pre>
$ ./scripts/check-syntax && git commit
</pre>
 NOTE: if you are unable to push to the launchpad master tree due to other's commits, use `git pull --rebase` to fetch the outstanding commits and rebase your commits on top.
* Listings of active CVEs:<pre>
$ ./scripts/ubuntu-table
$ ./scripts/ubuntu-table --supported 2>/dev/null | grep SUPPORTED   # main only
$ ./scripts/ubuntu-table --supported 2>/dev/null | grep PARTNER     # partner only
$ ./scripts/ubuntu-table --untriaged                                # only untriaged
$ ./scripts/ubuntu-table --supported | egrep -v '<nowiki>[[:space:]]</nowiki>+(untriaged|negligible|low)$' # medium and higher
</pre>
* Package status:<pre>
$ ./scripts/pkg_status pkgname1 pkgname2
$ ./scripts/pkg_status -f pkgname1 pkgname 2 ...                    # full listing
$ ./scripts/ubuntu-table -p linux -P linux -S | cut -c1-14,36-95    # kernel report
</pre>
* CVE status:<pre>
$ ./scripts/cve_status CVE-2006-4519 CVE-2007-2949 CVE-2007-3741
$ ./scripts/cve_status -s CVE-2006-4519 CVE-2007-2949 CVE-2007-3741 # short listing
</pre>
* Create/edit a CVE without check-cves:<pre>
$ ./scripts/active_edit -p package -c CVE-YYYY-XXXX
$ ./scripts/active_edit -e -p package -c CVE-YYYY-XXXX              # embargoed (private)
$ ./scripts/active_edit -p package -c CVE-2010-NNN1                 # new CVE without a CVE identifier
</pre>
* Mass editing of CVEs:<pre>
$ ./scripts/mass-cve-edit -p <package> -r <release> -v <version> -s <state> CVE...
</pre>
 Eg:<pre>
$ ./scripts/mass-cve-edit -p seamonkey -r karmic -s released -v 1.1.17+nobinonly-0ubuntu1 CVE-2009-1841 CVE-2009-1838 CVE-2009-1836 CVE-2009-1835 CVE-2009-1392 CVE-2009-1832 CVE-2009-1833 CVE-2009-1311 CVE-2009-1307
</pre>
* Listing of packages with number of CVEs attached to them, weighted by CVE priority:<pre>
$ ./scripts/cve_packages
$ ./scripts/cve_packages -m                                         # main, restricted and partner
$ ./scripts/cve_packages -u                                         # universe and multiverse
$ ./scripts/cve_packages -t                                         # just totals
$ ./scripts/cve_packages -m | grep '^[0-9]' | sort -n               # sorted by weight
$ ./scripts/cve_packages -m -S | grep '^[0-9]' | sort -n            # sorted by weight without devel
</pre>
* CVEs needing retiring:<pre>
$ ./scripts/cve_need_retire
$ ./scripts/cve_need_retire -uc                                     # move needed to retired and perform git commit
</pre>
* Marking CVEs as 'released':<pre>
$ cd $UCT
$ rsync -v --progress -e ssh people.canonical.com:~ubuntu-security/public_html/usn/database.pickle ./database.pickle
$ ./scripts/sync-from-usns.py database.pickle -u
</pre>

Please see the UBUNTU-CVE Commands section in <nowiki>[[https://git.launchpad.net/ubuntu-cve-tracker/tree/README|ubuntu-cve-tracker/README]]</nowiki> for more information.

==== Reports ====
* By date, sorted by priority:<pre>
$ ./scripts/report-date.py -S -m
</pre>
* TODO list:<pre>
$ ./scripts/report-todo
$ ./scripts/report-todo [-S]
</pre>
* SUmmary list:<pre>
$ ./scripts/report-todo-numbers                                     # summary report
$ ./scripts/report-todo-numbers [-S]
</pre>
* Monthly report:<pre>
$ ./scripts/monthly-report
</pre>
* HTML reports:<pre>
$ ./scripts/html-report [-S]
</pre>
