{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

== PHP 8.4 transition plan ==

For plucky the server team will be transitioning PHP to 8.4

Since version 7.0, upstream PHP has adopted a <nowiki>[[https://www.php.net/supported-versions.php|regular release cadence]]</nowiki>, with one release per year.  Each release is supported for 2 years, plus a third year of security critical fixes.

the php8.4 transition in Debian is complete. This should simplify things in our end.

=== Create entry in the transition tracker ===

Create an entry in the <nowiki>[[https://bazaar.launchpad.net/~ubuntu-transition-trackers/ubuntu-transition-tracker/configs|transition tracker]]</nowiki>.

We can follow the examples for <nowiki>[[https://bazaar.launchpad.net/~ubuntu-transition-trackers/ubuntu-transition-tracker/configs/revision/975#monitor/ongoing/php8.2.ben|php8.2]]</nowiki> which was imported from Debian, and the <nowiki>[[https://bazaar.launchpad.net/~ubuntu-transition-trackers/ubuntu-transition-tracker/configs/revision/1028/monitor/ongoing/php8.2.ben#monitor/ongoing/php8.2.ben|Ubuntu adjustments]]</nowiki>.

* <nowiki>[[https://people.canonical.com/~ubuntu-archive/transitions/html/html/php8.4.html|php8.4 transition tracker entry]]</nowiki>

=== Import php8.4 Language Runtime ===

Then we can proceed to import php8.4 from Debian and let it migrate to plucky's release pocket.

=== Update PHP Default Version ===

The next step will be to patch php-defaults to set php8.4 as the default php version for plucky, thus starting the actual transition.

Most or all of the PHP stack will need to be rebuilt at this point.  This is phased due to package dependencies - for the php8.3 transition we started with php-apcu;php-msgpack;php-pinba; and then the rest of the stack.  We anticipate php8.4's transition will proceed similarly (for PHP 8.2, php-pear was also needed).

==== Phase 0 ====
* √ Transition tracker entry ready
* √ php8.4 in universe archive for -proposed, at least
* √ php-defaults to 8.4 in -proposed

==== Phase 1 ====
* √ php-apcu
* √ php-msgpack
* php-pinba (this is no longer in debian and should probably be removed)
* php-pear 

==== Phase 2 ====

placeholder

==== Phase 3 ====
* Add php8.4 to the server-team subscriptions.
* Add php8.4 to the server packageset.
* Request i386 php8.4 builds as described in <nowiki>[[https://wiki.ubuntu.com/i386|the i386 wiki]]</nowiki> at "How to transition src:foo1 to src:foo2"
* Ensure there are no NBS removals pending, resulting from this transition.
* Request the following britney hints:
** a badtest for php8.3, so its failing autopkgtest results stop blocking php-defaults
** a force and force-hint entry for the new version of php-defaults, so it is allowed to break php8.3-common and it (php-defaults) can finally migrate.

=== Removals ===

==== php8.3 removal request ====

See LP: #1927264 as example. (php-defaults may not migrate while php8.3 is still in the archive, but we first need to resolve all the other issues.) At this point, php-defaults should have migrated to the release pocket and no packages not originated from the php8.3 sources should depend on php8.3. Now, it is finally safe to request php8.3 removal.
