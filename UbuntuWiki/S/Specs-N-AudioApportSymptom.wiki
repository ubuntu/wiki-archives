{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:multimedia-desktop-n-audio-apport-symptom
* '''Created''': Yes :-)
* '''Contributors''': diwic
* '''Packages affected''': apport-symptoms

=== Summary ===

The audio symptom seems to be used enough to validate spending time on it.

Purpose:
* To verify that it is actually a bug
* To assign the bug to the right package
* To get the proper logs attached, to aid further triaging

=== Release Note ===

 This section should include a paragraph describing the end-user impact of this change.  It is meant to be included in the release notes of the first release in which it is implemented.  (Not all of these will actually be included in the release notes, at the release manager's discretion; but writing them is a useful exercise.)

It is mandatory.

=== Rationale ===

=== User stories ===

=== Assumptions ===

=== Design ===

Three questions will be asked initially:
* Sound card selection
* Playback / recording / both
* Symptom

'''Discuss order of these on UDS-N'''

==== Sound card selection ====

Current behaviour: 
* One item for each soundcard (soundcard naming? Alsa name, PA name, or both)
* Another one not listed here
* "I don't know" (selects the first one)

==== Playback/recording question ====

Current behaviour:
* Playback 
* Recording 
* Surround Playback

...perhaps this should be reduced to "Playback or both", and "Recording"?

==== Symptom question ====

* No playback/recording at all 
* Some inputs/outputs are not working, but others are
* No auto-mute / no auto-switch
* Sound has bad quality - probably needs sub-question:
** Digital clipping/distortion, or "overdriven" sound
** Underruns, dropouts, "crackling" sound
** High background noise, or volume too low
* Volume range anomalies
* Fast-user-switching problems 
* Works for a while, then breaks

'''A difficulty here is to name these appropriately so that the user will select the right one. Discuss on UDS-N'''

==== Alsa-driver vs linux controversy ====

* Most bugs are driver bugs, and so they should be in linux
* In practice, we file them against alsa-driver
* We can't auto-subscribe ubuntu-audio team
* Audio bug triagers know to look for them there

Review this decision?

==== Symptom: Card not detected ====

Current behaviour asks if it is a Firewire card. Otherwise file a bug against alsa-driver. 

* Note whether PA detects card or not.
* Subquestion? 
** PCI/Internal - list pci-multimedia?
** USB - list lsusb?
** Firewire - check if FFADO/Jackd are installed
* Ask the user to include information about what card it is

==== Symptom: No auto-mute / no auto-switch ====

* Should we ask users to try Audio/InstallingLinuxAlsaDriverModules ?
* (HDA) Should we ask users to try different models?
* (HDA) Check pin config?

==== Symptom: Some inputs/outputs are not working, but others are ====

Perhaps subquestion about what input/output it is that is not working?
* HDMI / DisplayPort 
* Digital in/out 
* Internal mic/speaker
* HP/Ext mic/line out/line in

Check PA profile for the top two. 
Check input/output alsamixer volumes.
Then continue to "no auto-mute".

==== Symptom: Distorted sound ====

Check if any volume is above 0 dB. 
Continue to "Volume range anomalies".

==== Symptom: High background noise, or volume too low ====

Check for low/muted volumes.
Continue to "Volume range anomalies".

==== Symptom: Underruns ====

* Start PulseAudio verbose logging
* Play sound test
* if user reports the sound test as ok, ask user to play his own sound test to reproduce.
* Stop PulseAudio verbose logging and attach to bug.

==== Symptom: Volume range anomalies ====

Cause (HDA): Probably bad dB data / control names in driver

* Should we ask users to try Audio/InstallingLinuxAlsaDriverModules ?
* (HDA) Should we ask users to try different models?
* Should we ask users to try alsamixertest
** or just to put the volume in the area that is problematic?

Or just file a bug against alsa-driver? 

==== Symptom: Fast-user-switching problems ====

* Warn user if anything else than "pulse" is currently in the "audio" group
* Try to run "sudo fuser -v"?

==== Symptom: No audio ====

* check PA output consistent with sound card answer (already implemented)
* check low/muted volumes (already implemented)
* Play audio test through alsa directly. 
* If alsa test succeeds according to user, play sound test through PA with PA verbose logging on.
* If alsa test fails with error, attach error to bug.
* If alsa test fails according to user:
** should we ask users to try Audio/InstallingLinuxAlsaDriverModules ?

==== Symptom: Works for a while ====

* Try to get user to reproduce bug with PA logs on, attach PA logs to bug. 

=== Implementation ===

==== UI Changes ====

Should cover changes required to the UI, or specific UI that is required to implement this

==== Code Changes ====

Code changes should include an overview of what needs to change, and in some cases even the specific details.

==== Migration ====

Include:
* data migration, if any
* redirects from old URLs to new ones, if any
* how users will be pointed to the new way of doing things, if necessary.

=== Test/Demo Plan ===

By reading this, you have automatically volunteered for testing this symptom. ;-)

It's important that we are able to test new features, and demonstrate them to users.  Use this section to describe a short plan that anybody can follow that demonstrates the feature is working.  This can then be used during testing, and to show off after release. Please add an entry to http://testcases.qa.ubuntu.com/Coverage/NewFeatures for tracking test coverage.

This need not be added or completed until the specification is nearing beta.

=== Unresolved issues ===

This should highlight any issues that should be addressed in further specifications, and not problems with the specification itself; since any specification with problems cannot be approved.

=== BoF agenda and discussion ===

Use this section to take notes during the BoF; if you keep it in the approved spec, use it for summarising what was discussed and note any options that were rejected.

----
CategorySpec
