{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


=== Retbleed and related return predictor microarchitectural flaws (CVE-2022-29901, CVE-2022-28693, CVE-2022-29900, CVE-2022-23825) ===

Johannes Wikner and Kaveh Razavi of ETH Zürich <nowiki>[[ https:--comsec.ethz.ch-research-microarch-retbleed- | discovered ]]</nowiki>
multiple issues with speculative branch prediction of return
calls.

On Skylake-generation Intel processors that do not support eIBRS
(enhanced indirect branch restricted speculation), when the Return
Stack Buffer underflowed, alternate predictors would be used, and
retpoline is used as a mitigation in the Linux kernel to protect
against this situation, but the researchers demonstrated that this
was insufficient (CVE-2022-29901). The mitigation for this issue is
to enable IBRS on these platforms.

The researchers also discovered that on some Skylake-generation with eIBRS,
RSB underflow could result in alternate prediction targets within the
current predictor domain, resulting in a way to perform Intra-mode Branch
Target Injection (BTI) attacks. (CVE-2022-28693)

On AMD ZEN 1 and ZEN 2 processor families, the researchers found they
were able to find branch-target collisions with return addresses.
(CVE-2022-29900)

AMD internally discovered that on some processors, the branch predictor
is used to predict the type and target of branch instructions,
and later determines if the prediction was accurate, resulting in a
small window of speculation at the predicted branch target even if
the branch type does not match. This is a result of aliasing in the
branch predictor, and could result in the predictor predicting an
indirect branch at a specific location while the actual instruction
is not a branch at all. (CVE-2022-23825)

Due to the complex nature and the variety of mitigations needed for
these issues, Ubuntu kernel updates are currently in progress.

===== CVES =====
* <nowiki>[[ https:--ubuntu.com-security-CVE-2022-29901 | CVE-2022-29901 ]]</nowiki>:
 Return Stack Buffer (RSB) underflow on non-eIBRS Skylake-generation Intel processors
* <nowiki>[[ https:--ubuntu.com-security-CVE-2022-28693 | CVE-2022-28693 ]]</nowiki>:
 Restricted alternate predictors RSB underflow on Skylake-generation Intel processors with eIBRS
* <nowiki>[[ https:--ubuntu.com-security-CVE-2022-29900 | CVE-2022-29900 ]]</nowiki>:
 Branch predictor return mis-predictions through colliding branch targets on some AMD processors
* <nowiki>[[ https:--ubuntu.com-security-CVE-2022-23825 | CVE-2022-23825 ]]</nowiki>:
 Branch predictor type confusion due to aliasing on some AMD processors

===== References =====

* ETH Zürich COMSEC advisory
   https://comsec.ethz.ch/research/microarch/retbleed/
* ETH Zürich COMSEC USENIX Security Paper
   https://comsec.ethz.ch/wp-content/files/retbleed_sec22.pdf
* Intel advisory for CVE-2022-29901
   https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00702.html
* Intel advisory for CVE-2022-28693:
   https://www.intel.com/content/www/us/en/security-center/advisory/intel-sa-00707.html
* AMD advisory:
   https://www.amd.com/en/corporate/product-security/bulletin/amd-sb-1037
* Intel Return Stack Buffer Underflow technical guidance (new):
   https://www.intel.com/content/www/us/en/developer/articles/technical/software-security-guidance/advisory-guidance/return-stack-buffer-underflow.html
* Intel Retpoline technical guidance (updated with Empty RSB Mitigation on Skylake-generation discussion):
   https://www.intel.com/content/www/us/en/developer/articles/technical/software-security-guidance/technical-documentation/retpoline-branch-target-injection-mitigation.html#inpage-nav-4-2
* Intel table of affected processors:
   https://www.intel.com/content/www/us/en/developer/topic-technology/software-security-guidance/processors-affected-consolidated-product-cpu-model.html
* Intel blog post:
   https://community.intel.com/t5/Blogs/Products-and-Solutions/Security/Chips-Salsa-Episode-21-July-2022-Security-Advisories-Retbleed/post/1399055
* AMD Technical Guidance for Mitigating Branch Type Confusion
   https://www.amd.com/system/files/documents/technical-guidance-for-mitigating-branch-type-confusion_v7_20220712.pdf

===== Timeline =====
* 2022 July 12: Public disclosure

===== Public Cloud Image updates =====
* Amazon AWS: <IN PROGRESS>
* Windows Azure: <IN PROGRESS>
* Google Compute Engine:  <IN PROGRESS>
* Ubuntu Core Images: <IN PROGRESS>

Cloud Images dailies will start appearing within 4 hours of the USN announcement. At the direction of the security team, the Cloud Image Team will start manually releasing new images to the public cloud. 
