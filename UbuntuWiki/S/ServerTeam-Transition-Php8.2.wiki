{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== PHP 8.2 transition plan ==

For mantic the server team will be transitioning PHP to 8.2

Transition Tracker:  https://people.canonical.com/~ubuntu-archive/transitions/html/html/php8.2.html

Since version 7.0, upstream PHP has adopted a <nowiki>[[https://www.php.net/supported-versions.php|regular release cadence]]</nowiki>, with one release per year.  Each release is supported for 2 years, plus a third year of security critical fixes.

=== Import php8.2 Language Runtime ===

php8.2 has been <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/php-defaults/+bug/2018465|imported]]</nowiki> from debian's php git repository and has migrated to mantic's release pocket.

=== Update PHP Default Version ===

The next step will be to import php-defaults 93 in place of our current php-defaults 92ubuntu1.  This will
set php8.2 as the default php version for mantic, thus starting the actual transition. This is being tracked in <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/php-defaults/+bug/2018100|LP: #2018100]]</nowiki>. We wanted to maintain part of the ubuntu delta in 92ubuntu1 due to the php-facedetect issues discussed in <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/php-defaults/+bug/2018100|LP: #2018100]]</nowiki>.

Most or all of the PHP stack will need rebuilt at this point.  This is phased due to package dependencies - for the php8.1 transition we started with php-pear, php-propro, php-apcu, and php-msgpack; followed by php-apcu-bc, php-memcache, and php-igbinary; and then the rest of the stack.  I anticipate php8.2's transition will proceed similarly.

==== Phase 0 ====
* √php8.2 in universe archive for -proposed, at least
* √php-defaults to 8.2 in -proposed

==== Phase 1 ====
* √php-apcu
* √php-pear
* √php-msgpack
* √php-pinba

==== Phase 2 ====
Here we rebuilt all the dependency level one packages listed in the tracker at https://ubuntu-archive-team.ubuntu.com/transitions/html/php8.2.html

The only special cases here were sassphp and php-facedetect, which needed to be converted into modern PECL packages to support dh-php >= 4. This included adding a d/control.in file for those packages and having them generate new versioned phpx.y-* packages.

==== Phase 3 ====
* Add php8.2 to the server-team subscriptions.
* Add php8.2 to the server packageset.
* Request i386 php8.2 builds as described in <nowiki>[[https://wiki.ubuntu.com/i386|the i386 wiki]]</nowiki> at "How to transition src:foo1 to src:foo2"
* Ensure there are no NBS removals pending, resulting from this transition.
* Request the following britney hints:
** a badtest for php8.1, so its failing autopkgtest results stop blocking php-defaults
** a force and force-hint entry for php-defaults/93ubuntu1 (new version), so it is allowed to break php8.1-common and it (php-defaults) can finally migrate.

=== Removals ===

==== php8.1 removal request ====

See LP: #1927264 as example.  --(php-defaults may not migrate while php8.1 is still in the archive, but we first need to resolve all the other issues.)-- At this point, php-defaults should have migrated to the release pocket and no packages not originated from the php8.1 sources should depend on php8.1. Now, it is finally safe to request php8.1 removal.

* Removal request filed in LP: #2020815
