{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

This documents the procedure we used to setup a Grok virtual environment for working on the
Viejo content management system.  It assumes you have already run the two sudo commands on the
UbuntuGrok parent page.

** <code>mkdir viejo_virtualenv</code>
** <code>cd viejo_virtualenv</code>
** <code>virtualenv --no-site-packages virtualgrok</code>
** <code>source virtualgrok/bin/activate</code>
** <code>easy_install grokproject</code>
** <code>grokproject Viejo</code>
** <code>cd Viejo</code>
** <code>rm -rf setup.py buildout.cfg src</code>
** <code>bzr checkout</code> <nowiki>[[https://launchpad.net/~viejo-team/viejo-code/yagni|lp:~viejo-team/viejo-code/yagni]]</nowiki> <code>.</code> (''Note:'' don't miss the dot at the end of this command.)
** <code>./bin/buildout</code>
** <code>./bin/test</code>

Now, we're good to go TDD. The main files and directories of our project are:

** setup.py -> Mostly to include packages required for our project to work
** buildout.cfg -> Configuration for our instance
** src/viejo/models.py -> Stores the '''models''' of our application. See the <nowiki>[[http://en.wikipedia.org/wiki/Model-view-controller|Model-view-controller]]</nowiki> for more
** src/viejo/tests -> Directory to store our unit doctests (Doctests are usually written in <nowiki>[[http://docutils.sourceforge.net/docs/user/rst/quickref.html|reStructuredText]]</nowiki>)
** src/viejo/tests/models.txt -> Unit doctests for our models.py module
** src/viejo/ftests -> Directory to store our functional doctests
** src/viejo/ftests/viejo.txt -> Functional doctests for our application

For every change we do to the application we always have to run <code>Viejo/bin/test</code> to check we don't break anything. We could access bin/test from anywhere in our path. For example, if we're inside our project's ftests directory we could call ../../../bin/test and it will run all our unit and functional tests. If we only want to run a kind of tests we could call it like this:

** bin/test -u -> It will run only unit doctests inside the src/viejo/tests directory
** bin/test -f -> It will run only functional doctests inside the src/viejo/ftests directory

Some useful bzr commands we will need:

** bzr co lp:~viejo-team/viejo-code/yagni . -> It will check out our yagni branch inside the current directory. Why are we not using branches? Well, check out the '''When would I want a checkout?''' section of <nowiki>[[http://bazaar-vcs.org/CheckoutTutorial]]</nowiki>. Right now, I think it's OK working like this. Remember the name of our branch? ;)
** bzr status -> It will tell us which files have been changed or deleted, which ones are about to be added to our branch and which ones are still unknown to bzr. '''Always''' use <code>bzr status</code> before doing a check in. Maybe our local setup works, but we have to make sure launchpad get all the files we want
** bzr add <filename> -> Makes bzr to know about our new file
** bzr remove <filename> -> Deletes a file from our project
** bzr revert <filename> -> Restore <filename> to be the one we checked out
** bzr ci -m "Some descriptive message" -> Checks changes back into launchpad (''note'': if you get an error when trying to commit that contains <code>Transport operation not possible: http does not support mkdir()</code>, you must first: <code>bzr switch lp:~viejo-team/viejo-code/yagni</code>)

Some useful documentation urls we will need:
** http://apidoc.zope.org -> This is the Zope 3 API Documentation

Whenever we want to start the zope server to check the functionality you do:
** bin/zopectrl fg -> this starts the server and leaves the process on foreground
