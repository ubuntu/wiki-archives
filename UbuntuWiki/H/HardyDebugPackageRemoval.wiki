{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad Entry''': UbuntuSpec:debug-package-removal
* '''Packages affected''': pkg-create-dbgsym

=== Summary ===

With the ddeb archive on peple.ubuntu.com the need for -dbg packages
is greatly diminished. We should remove those packages that only
contain debug symbols and that are already available via ddebs in
people.ubuntu.com. 

=== Release Note ===

TBD

=== Rationale ===

With the automatic generation of debug packages in ubuntu explicit
building of debug packages is no longer needed (unless there are
special circumstances). We can remove them from the archive.

=== Design ===

The package pkg-create-dbgsym is modified so that it automatically
removes -dbg packages on build. There needs to be a whitelist for
cases where we want -dbg packages (like python) and also some
heuristics to check debian/rules if the build is done with some
special options (like -O0). Initially we check if the only content is
/usr/lib/debug and /usr/share/doc. If this is the case, the -dbg
package can probably be removed.

The pkg-create-dbgsym is run during the ubuntu builds. This approach
has the advantage that we do not need to modify the source packages
because all happens during build time.

All -dbg packages should have strict versionized dependencies. On
upgrade they will get removed automatically because those dependencies
can be no longer satisfied. No special code is required here.

=== Test cases ===

The following cases needs to be tested for the modfied pkg-create-dbgsym
* -dbg package with no other content than /usr/lib/debug, /u/s/doc
* -dbg package with special build options and other content

During the upgrade tests we need to check if the -dbg packages get
removed and if not, we need to add them to update-managers
"ForceObsoletes" field.

----
CategorySpec
