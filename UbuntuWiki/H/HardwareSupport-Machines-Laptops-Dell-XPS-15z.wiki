{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


=== Introduction ===

This page should give you all the information you need about running Ubuntu on a '''Dell XPS 15z''' laptop. XPS 15z works fine with Ubuntu, read this whole guide before start installation.

=== Installation gotcha's ===

* Boot installer as described on the boot options section (to access boot options press any key when the purple screen with human=keyboard appears.)

* USB installation: booting with an USB 2.0 storage on the USB 3 slot works to direct installation.

=== Hardware Support Matrix ===

{| class="wikitable"
|-
| 
| '''Precise 12.04'''
| '''Quantal 12.10'''
| '''Raring 13.04'''
| '''Trusty 14.04'''
|-
| '''Keyboard'''
| <#b6d884>  Works
| <#b6d884>  Works
| <#b6d884>  Works
| <#b6d884>  Works
|-
| '''Screen'''
| <#b6d884>  Works
| <#b6d884>  Works
| <#b6d884>  Works
| <#b6d884>  Works
|-
| '''Ext. Screen (HDMI)'''
| <#f497a9> Broken*
| <#f497a9> Broken*
| TBD
| TBD
|-
| '''Ext. Screen (Mini Displayport)'''
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884> Works
|-
| '''Wired ethernet'''
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884>  Works
| <#b6d884>  Works
|-
| '''Wireless ethernet'''
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884> Works
|-
| '''Trackpad'''
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884> Works
|-
| '''Sound'''
| <#b6d884> Works
| <#b6d884>  Works
| <#b6d884> Works
| <#b6d884> Works
|-
| '''Optimus'''
| <#fff68f> Works with manual changes
| <#fff68f> Works with manual changes
| TBD
| TBD
|-
| '''9-in-1 card reader'''
| <#b6d884> Works
| <#b6d884> Works
| TBD
| TBD
|-
| '''Webcam'''
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884> Works
| <#b6d884> Works
|}

* The HDMI is physically connected to the nVidia card -- by manually changing the xorg.conf, it is possible to start X on the nVidia card only, getting the HDMI video (at the cost of inactive main laptop screen and the Mini Displayport output).

=== Hardware ===
==== Boot options ====

Depending on your kernel version one of the two following fixes are needed (before 3.2.0-33 or on and later). 

Add to the grub boot line the following options by pressing [e] when on the grub loading page, and add the following just before ''quiet splash'' :

For 3.2.33 or later and 3.5 or later

{| class="wikitable"
|-
| '''acpi_backlight=vendor dell_laptop.backlight=0'''
|}

For 3.2.32 or before

{| class="wikitable"
|-
| '''acpi=noirq'''
|}

To keep these option edit the grub command. Execute this in a terminal :

{| class="wikitable"
|-
| $ sudo gedit /etc/default/grub
|}

And modify the line :

{| class="wikitable"
|-
| GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"
|}

It to obtain this line :

{| class="wikitable"
|-
| GRUB_CMDLINE_LINUX_DEFAULT="acpi=noirq quiet splash"
|}

Then, save, close, and back in the terminal, execute :

{| class="wikitable"
|-
| $ sudo update-grub
|}

Now, when you will restart, it should be great.

==== Optimus / Graphics cards ====

'''Bumblebee and nvidia-current driver'''

With ''2GB NVIDIA GeForce GT 525M Graphics Card with Optimus'' installing nvidia-current drivers from ''restricted drivers'' causes the loss of compositing. Moreover running nvidia-xconfig crashes X on the next reboot (fix it with <code>sudo rm /etc/X11/xorg.conf</code> and reboot). This happens because '''you need Bumblebee to make it work''', more explanations follow the suggested procedure.

The Bumblebee stable PPA and more information about this subject can be found in <nowiki>[[https://launchpad.net/~bumblebee/+archive/stable|Bumblebee]]</nowiki>.

As an example, using Bumblebee, it changes battery rate from 1900+ to around 1600 for me (verwilst). The current rate (with disconnected charger) can be tested using: <pre>
grep rate /proc/acpi/battery/BAT0/state
</pre>

====== Installation on 12.04 ======
Add bumblebee ppa, reload, check your update and install bumblebee. Finally add your $USER (replace by your username) to the group ''bumblebee'' :

{| class="wikitable"
|-
| $ sudo add-apt-repository ppa:bumblebee/stable
|-
| $ sudo apt-get update && sudo apt-get upgrade
|-
| $ sudo apt-get install bumblebee bumblebee-nvidia
|-
| $ sudo usermod -a -G bumblebee $USER
|}

Now restart, and check your configuration :

{| class="wikitable"
|-
| $ glxspheres
|-
| $ optirun glxspheres
|}

And compare the fps... If you need to use the nvidia video card, launch your application with ''optirun'' at the begin of the command line.

'''Black screen with mouse pointer after boot'''

If you get a black screen with only the mouse pointer displayed, you might be having a race condition with lightdm. This seems to happen more frequently when booting from an SSD drive. You can find the resolution of this error <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/lightdm/+bug/1066410|here]]</nowiki>.

==== 9 in 1 card reader ====
Download the drivers at post #10
http://ubuntuforums.org/showthread.php?t=1718934
uncompress the file, open a terminal and cd to the uncompressed directory and type

and then

reboot

The above procedure doesn't seem to work on 12.04, a workaround I found is to run the following script

{| class="wikitable"
|-
| #!/bin/sh
|-
| echo Insert the card
|-
| TEMP_FILE=`mktemp`
|-
| echo 1 > $TEMP_FILE
|-
| sudo cp $TEMP_FILE /sys/bus/pci/rescan
|-
| rm -f $TEMP_FILE
|}

and then insert the card in the card reader.

The abose workaround doesn't seems to work for all configurations. The following works fine:

{| class="wikitable"
|-
| Insert your card in the card reader
|-
| Reboot
|-
| Your card is automatically detected
|}

==== Trackpad ====

Full multi-gesture trackpad usage does not work at this moment.

A kernel update provided by <nowiki>[[http://content.dell.com/us/en/enterprise/d/campaigns/sputnik|Project Sputnik]]</nowiki> seems to bring basic functionality out of the box, therefore the "basic mouse" procedure described below won't be necessary.

Information about the recently released kernel can be found <nowiki>[[http://bartongeorge.net/2012/06/20/sputnik-update-touchpad-driver-now-available|here]]</nowiki> and the kernel PPA is <nowiki>[[https://launchpad.net/~canonical-hwe-team/+archive/sputnik-kernel|here]]</nowiki>.

Hopefully the drivers included with the Project Sputnik kernel will be included in the mainstream kernel soon.

If you don't feel confortable installing a non-standard kernel, it is possible to get basic mouse functionality with the following command:
{| class="wikitable"
|-
| # sudo rmmod psmouse; sudo modprobe psmouse proto=imps
|}
( Or use proto=bare or proto=exps ).

To make this persistent, add the following line to a file in /etc/modprobe.d/ (/etc/modprobe.d/options.conf could be an option, but modprobe parses all the files in that directory):

{| class="wikitable"
|-
| options psmouse proto=imps
|}

With 12.04, works fine since the kernel update 3.2.0-31.

=== Wireless connection ===

Wireless connection can be seldom hard to bound or discontinue, it depends on power management settings.

A script named ''wireless'' and located in ''/usr/lib/pm-utils/power.d'' fires PSP when the pc is running on battery. If you want to override this setting create an '''empty file''' named '''wireless''' into the folder '''/etc/pm/power.d/'''.

In some cases PSP can be triggered also by other events like stand-by. If this is your case add the following lines to ''/etc/pm/power.d/wireless''

{| class="wikitable"
|-
| #!/bin/sh
|-
| /sbin/iwconfig eth1 power off
|}

Anyway power management can be always manually turned on or off by giving the following command on terminal

'''sudo iwconfig''' ''your lan name'' '''power off''' or '''power on'''

With 12.04, if your wireless connection is very slow, do the following:

{| class="wikitable"
|-
| $ sudo gedit /etc/modprobe.d/iwlwifi.conf
|-
| Add the following content to that new file:
|-
| options iwlwifi 11n_disable=1
|-
| Save this file
|-
| $ sudo modprobe -r iwlwifi
|-
| $ sudo modprobe iwlwifi
|}
=== USB 3 mass storage ===

If your USB 3.0 mass storage device is not recognized, even for fdisk or lsusb, you can try blacklisting the USB Attached SCSI module. Add the following line to ''/etc/modprobe.d/blacklist.conf''

{| class="wikitable"
|-
| blacklist uas
|}

=== Hibernate ===

To hibernate, on ubuntu 12.04, laptop should be certified, but it is working fine with this type of laptop, so if you like to activate hibernate function, you have just to create this file :

{| class="wikitable"
|-
| $ sudo gedit /etc/polkit-1/localauthority/50-local.d/com.ubuntu.desktop.pkla
|}

And add this content inside :

{| class="wikitable"
|-
| [Re-active lhibernation]
|-
| Identity=unix-user:*
|-
| Action=org.freedesktop.upower.hibernate
|-
| ResultActive=yes
|}

It's all done, just reboot !

=== External Links ===
<nowiki>[[https://help.ubuntu.com/community/HybridGraphics]]</nowiki>

===== Boot options for kernel 3.2.0-33 or later =====

<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1072891]]</nowiki>

===== Trackpad =====
<nowiki>[[http://comments.gmane.org/gmane.linux.kernel/1108661]]</nowiki>
===== Information on Bumblebee (for graphics card Optimus support) =====

* <nowiki>[[https://launchpad.net/~bumblebee/+archive/stable|Bumblebee project and PPA]]</nowiki>
* <nowiki>[[https://launchpad.net/~bumblebee]]</nowiki>
* <nowiki>[[http://Bumblebee-Project.org/|Bumblebee homepage]]</nowiki>

===== Wireless =====

<nowiki>[[http://en.community.dell.com/support-forums/laptop/f/3518/t/19382502.aspx|Power saving polling issues on Official Dell Forum]]</nowiki>

<nowiki>[[http://uselessuseofcat.com/?p=67|How to disable PSP on Ubuntu]]</nowiki>
