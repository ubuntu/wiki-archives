{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== Ubuntu on Dell Poweredge Servers ==

=== Update (2015-09) ===

Note, the information below is from 2009. Dell now has a ubuntu repository that may help and/or supersede some of the bits below: http://linux.dell.com/repo/community/ubuntu/

=== Hardware monitoring ===

You can monitor the hardware using the IPMI tools - the dell OMSA drivers are not needed. All you need to do is install ipmitool and load the ipmi modules:
<pre>
sudo apt-get install ipmitool
sudo modprobe ipmi_msghandler
sudo modprobe ipmi_devintf 
sudo modprobe ipmi_si
</pre>

After installing the tool and activating the modules, you can query the server status via ipmi. Issuing
<pre>
sudo ipmitool sel elist
</pre>
will print out the event log, and
<pre>
sudo ipmitool -I open sensor list
</pre>
will output all the devices and their current status.

If you would like the ipmi modules to load at boot, just add them to /etc/modules.

=== Dell RAC ===

The Dell Remote Access Card (DRAC) is an optional component that can allow you to reboot and access the system's BIOS remotely.

==== DRAC3 ====

===== Installing racadm =====

Dell only provides RPMs for the racadm tool, but it's easy enough to extract the portions we need:
<pre>
sudo mkdir /tmp/dell
cd /tmp/dell
sudo wget http://linux.dell.com/repo/hardware/OMSA_5.5/pe2650/rh50/srvadmin/srvadmin-racser-devel-5.5.0-364.i386.rpm
sudo apt-get install rpm
rpm2cpio srvadmin-racser-devel-5.5.0-364.i386.rpm | sudo cpio -idmv
sudo mkdir /usr/lib/dell
sudo cp opt/dell/srvadmin/rac3/libs/* /usr/lib/dell/
sudo cp opt/dell/srvadmin/rac3/bin/racadm /usr/sbin/racadm
sudo touch /etc/ld.so.conf.d/dell
sudo chmod 777 /etc/ld.so.conf.d/dell
echo "/usr/lib/dell" > /etc/ld.so.conf.d/dell
sudo chmod 644 /etc/ld.so.conf.d/dell
sudo ldconfig
</pre>

Once installed, you can use the racadm tool to access cards by ip address. If you want local access (ie, access not by ip address), you'll need to perform extra steps.

You could also use the racadm deb package from http://www.akk.org/~calvin/dell/racadm_2.0-2_i386.deb, but it is not as up to date.

===== Configuring local access =====
To configure local access to the card, you need to start a ppp connection to the card on its internal serial port. To find the serial port, look for a 16550A serial port in the dmesg output:
<pre>
user@host:~$ dmesg | grep 16550
[    2.427327] Serial: 8250/16550 driver4 ports, IRQ sharing enabled
[    2.427498] serial8250: ttyS0 at I/O 0x3f8 (irq = 4) is a NS16550A
[    2.428642] 00:05: ttyS0 at I/O 0x3f8 (irq = 4) is a NS16550A
[    2.429371] 0000:01:04.1: ttyS1 at I/O 0xdc80 (irq = 21) is a 16550A
</pre>
In this case, it is ttyS1.

Next, start up PPP using the serial port:
<pre>
sudo pppd /dev/ttyS1 1382400 crtscts noipdefault noauth lock persist connect 'chat -v "" CLIENT CLIENTSERVER "\\c"'
</pre>

Now you can use racadm to connect locally to the RAC card. This is quite useful if you want to set the RAC external NIC ip address so that you can get into the web management page.
----
CategoryHardware
