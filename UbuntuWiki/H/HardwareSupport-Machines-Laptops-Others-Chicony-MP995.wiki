{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== installing ubuntu linux on a mp-995 laptop ==

=== hardware ===

<nowiki>[[http://www.orphanlaptops.com/mp995.htm|chicony mp-995]]</nowiki> (labelled highscreen advanced x2).

* 400mhz celeron cpu
* intel 440mx chipset
* 128mb ram
* 4gb hd

=== objective ===

to set up the laptop for dial-up internet use only (browser and mail client).

=== optional requirements ===

acceptable system and application response time

* minimal resource usage
* decent boot time

=== operating system ===

ubuntu 5.10 breezy badger (see bottom for update on 7.10)

=== installing the base system ===

==== at the boot cd prompt ====

<code>server acpi=off reserve=0x4000,0x1001 apm=on vga=771</code>

i chose '''server''' because the default installation uses far too many system resources resulting in a massive slow-down. the minimal graphical environment will be installed <nowiki>[[#graph|later]]</nowiki>.

'''acpi=off''' will disable the kernel's thermal management. without this option the cpu will overheat and die during the installation, since the cooling fan will never run (blocker 1). we're trying to re-activate acpi after the installation.

without '''reserve=0x4000,0x1001''' the system will hang after the message <code>Running /etc/hotplug/usb.rc</code> (blocker 2). assumption: there's a conflict with some (system message bus?) device.

'''apm=on''' enables minimal power management in absence of acpi (e. g. power-off). optional.

'''vga=771''' increases readability by using the native screen resolution. on the other hand it de-activates the boot splash screen. optional.

==== answering the installation questions ====

i chose german locale settings and did a manual harddisk partitioning (2gb reiser for ubuntu). all other questions were answered with the defaults. duration: 30 minutes. (boot time is now 85 s)

=== enabling the modem ===

the modem driver is not loaded by default, because it is blacklisted by the hotplug system (blocker 3). the line <code>snd_intel8x0m</code> in <code>/etc/modules</code> solves the problem at the next boot.

the <code>sl-modem-daemon</code> package is not part of the ubuntu installation, so we have to find a way of transferring those 180kb to our system (e. g. using a floppy disk). then we do: <code>sudo dpkg --install sl-modem-daemon_ *ubuntu *.deb</code> and <code>sudo dpkg-reconfigure sl-modem-daemon</code>.

after re-booting and setting up ppp (<code>sudo pppconfig</code>) the modem is ready and working (with <code>pon</code>).

=== installing the graphical system ===

<code>sudo aptitude install x-window-system-core gdm</code>

for improved touchpad usability, password input and localization, i also add: <code>xorg-driver-synaptics ttf-opensymbol language-pack-gnome-de</code>, plus optional software such as <code>firefox synaptic</code>.

select only '''800x600''' for the x-server video resolution.

duration: 25 minutes. current boot time: 133s.

=== necessary fine-tuning ===

there's no welcome sound ''after'' logging in. at the login screen sound works. reason: unknown. solution: <code>sudo aptitude esound</code>.

getting the synaptics driver to work needed some re-configuration. (first added it manually, later configured the xserver-xorg package from within the desktop.)

the modem lights applet needed some other package (maybe <code>gnome-system-tools</code>) to run (<nowiki>[[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=316744|debian bug #316744]]</nowiki>).

=== optional fine-tuning ===

at this point the system is basically running as expected. however, some features are known to be disabled, and the system performance is known to be sub-optimal. (boot duration, from leaving the boot loader menu to being able to click-open a menu after auto-login, is 133 seconds. the modem consumes 27% cpu when running.)

==== enabling acpi ====

one possible way of getting acpi back is compiling a customized kernel. this is also expected to result in some speed improvements.

after a lot of experiments i came up with a kernel able to run with acpi enabled. i had to eliminate cpu throttling features and override the default 70°C trip point by a lower value at boot time (the bios value seems to be around 50°, but still the fan state changes less frequently under bios control than with acpi). the <code>reserve</code> option remains crucial, without it the cpu temperature is reported as 0°, and the fan will stay off. (variant of <nowiki>[[#blocker2|blocker 2]]</nowiki>). additionally the option <code>pci=noacpi</code> should be added, otherwise all kinds of problems arise (e. g. the touchpad going mad).

after all of this i decided that acpi is nice to play with, but i'm going to stick with apm as the default.

other effects of the new kernel: boot time reduced to 90 seconds, modem cpu usage (unfortunately) not affected.

==== increasing boot speed ====

by small optimizations of the init process (skipping unnecessary steps, parallelizing others) i ended up with a boot time of 74 seconds. (in comparison: win98 takes 45s on the same machine.)

=== conclusion ===

installing ubuntu 5.10 on a mp-995 is not a straightforward process. (in fact it <nowiki>[[#blocker1|may damage your hardware]]</nowiki>)

however, with some administrative knowledge, it is possible get around the three major blockers <nowiki>[[[#blocker1|1]]</nowiki>, <nowiki>[[#blocker2|2]]</nowiki>, <nowiki>[[#blocker3|3]]</nowiki>] (left aside some minor issues not documented here). machine specific optimizations are possible and recommended.

the result is a running and stable system with decent performance and good usability.

dmd/msc 2005

=== Update for Xubuntu 7.10 (Gutsy Gibbon) ===

Just a few notes gathered doing a standard Xubuntu installation:
* recommended kernel options: <code>acpi=noirq pci=noacpi</code> (otherwise mouse lag and kernel warnings)
* https://bugs.launchpad.net/bugs/138335
* something was causing high iowait and disk access on the hd for hours on the fresh system. it disappeared after a recovery (single mode) boot, but this may just have been an incident. removed <code>slocate</code> as precaution.
* wrong splash resolution cured with <code>usplash.conf</code>
* sound problems (e. g. gnobots crash) are cured by gstreamer plugins (these aren't on the cd)
* the xvimagesink crashes a lot, use ximagesink instead
* resulting boot time (not optimized): 100s

dmd/msc 2008

----
CategoryLaptop
