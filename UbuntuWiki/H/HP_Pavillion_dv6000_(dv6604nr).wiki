{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== Introduction ==

This page is intended to help anyone who wants to install Ubuntu Linux 7.10 (Gutsy Gibbon) on an HP Pavillion dv6604nr or a notebook with similar specifications. It is recommended that you read each section completely before attempting to perform the steps on your computer.

<nowiki>[[http://h10025.www1.hp.com/ewfrf/wc/genericDocument?docname=c01161146&cc=us&dlc=en&lc=en&jumpid=reg_R1002_USEN|HP Pavillion dv6604nr specifications]]</nowiki>:
* Microprocessor: 1.8 GHz AMD Athlon 64 X2 Dual-Core Mobile Technology TK-55
* Video Graphics: NVIDIA GeForce Go 7150M (UMA)
* Display: 15.4" WXGA High-Definition BrightView Widescreen (1280 x 800)
* Wireless Connectivity: Broadcom 802.11b/g WLAN
* Keyboard : 101-key compatible & 2 Quick Launch Buttons- HP Quick Play Menu and DVD

== Installation ==
The installation was a fresh one (not an upgrade) using a CD. When downloading the ISO file, make sure it is the 64bit AMD and Intel computers ISO. The computer comes with Windows Vista installed. To keep Vista and have a dual boot machine read: <nowiki>[[http://apcmag.com/5046/how_to_dual_boot_vista_with_linux_vista_installed_first|How to dual-boot Vista with Linux (Vista installed first)]]</nowiki>.

To begin the installation, insert the Ubuntu CD in the CD drive and boot from it. When presented with the Ubuntu menu, select the option to start Ubuntu in safe graphics mode (the graphics will be fixed later).

When Ubuntu starts, double click the Install icon on the desktop to start the installation. Once the installation window comes up, you will notice that the window occupies an area larger than the screen. Since resizing the window is not an option, one way to get around this problem is to right click on the lower panel and select 'Delete This Panel'. Then drag the panel on in the upper part of the screen to the bottom and change its properties to 'Autohide', this way you can see  lower part of the installation window when you move the mouse away from the panel.

Complete the installation steps until you reach the 'Prepare disk space' screen. Which option you select depends on what type of configuration you want. In the case of a Vista-Ubuntu dual boot configuration, you have to manually configure your disk.  When manually configuring your  partitions, you need two partitions: a swap partition and a root partition (any other partitions are optional).

After you have configured the partitions and confirmed your configuration, Ubuntu will begin installing itself on your machine. When finished, you will be prompted to reboot your machine.

== Display ==

When you reboot your machine and start Ubuntu, the first things you want to do is to fix the display. To do this, go to System > Administration > Screen and Graphics. The model that worked for me is LCD Panel 1280x800. You can also change the resolution to what you find appropriate, for me this is 1024x768. 

The computer also comes with a NVIDIA GeForce Go 7150M (UMA) graphics card. To install it, you first need enable new software sources. To do this go to System > Software Sources check all the boxes under Ubuntu Software (you only the 'restricted' component for this step, but its a good idea to have them all enabled). When prompted, reload the repository information. Next, go to System > Restricted Drivers Manager and enable the driver that corresponds to the NVIDIA card (do not enable the Broadcom firmware at this point).
 

== Wireless ==

This section will explain how to get the built-in wireless card to work. 

=== Installation ===

The computer comes with a Broadcom BCM94311MCG chip. You can find which chip your computer is using by issuing:

<pre>
lspci | grep Broadcom
</pre>

The chip did not work out of the box in Ubuntu, nor did it work using the Restricted Drivers Manager that comes with Ubuntu. To get it to work, you need to use NDISwrapper. 

'''NOTE:''' If you have the official NDISwrapper package or bcm43xx drivers installed, you ''MUST'' remove/disable them for the following steps to work. Please to the next subsection for more on how to remove them.

Next, download the latest stable version of NDISwrapper (I used version 1.48) from http://sourceforge.net/project/showfiles.php?group_id=93482 and unpack it. In the directory where you unpacked it, issue:

<pre>
sudo make uninstall
make
sudo make install
</pre>

'''NOTE: '''you might need to install some dependencies to be able to compile NDISwrapper.

Once NDISwrapper is successfully installed, you can proceed to installing the driver.

'''NOTE: '''Installing the Vista-64bit driver from hp (<nowiki>[[http://h10025.www1.hp.com/ewfrf/wc/softwareDownloadIndex?softwareitem=ob-52996-1&lc=en&cc=us&dlc=en&product=3548343&os=2100|here]]</nowiki>), which contains two files called bcmwl6.inf and bcmwl6.inf, in NDISwrapper did not work.

I used <nowiki>[[http://h10025.www1.hp.com/ewfrf/wc/genericSoftwareDownloadIndex?cc=us&dlc=en&lc=en&softwareitem=ob-45290-1&jumpid=reg_R1002_USEN|sp34152.exe]]</nowiki>, which is an XP Broadcom WIFI driver. After downloading sp34152.exe, you need to extract it using cabextract which you can install by issuing:

<pre>
sudo apt-get install cabextract
</pre>

Once cabextract is installed, extract sp34152.exe the  by issuing:

<pre>
cabextract sp34152.exe
</pre>

Among the files you get are the two main driver files called bcmwl5.inf and bcmwl5.sys.

Finally, from the directory in which the files were extracted, issue the following:
<pre>
sudo ndiswrapper -i bcmwl5.inf
sudo ndiswrapper -l
sudo ndiswrapper -m
sudo modprobe ndiswrapper
</pre>

You should now be able to use your wireless card.
=== Note for Hardy Users ===
Hardy users may find that wireless does not work or that it stops other things from working, for example, wireless mouse.  Modify the following files to fix this and start ndiswrapper at boot, do this after following the steps above:

Add the following line to /etc/modules:
<pre>
ndiswrapper
</pre>
To rephrase that, add the line "ndiswrapper" to your /etc/modules file.

Add the following lines to /etc/rc.local:

<pre>
rmmod ohci_hcd
rmmod ssb
rmmod ndiswrapper
modprobe ohci_hcd
modprobe ndiswrapper
</pre>

Make sure that these lines are added before the "exit 0" line.

Your wireless should now be working properly.

=== Removing NDISwrapper / bcm43xx ===

==== NDISwrapper ====

If you already have the official NDISwrapper package installed, make sure you remove it:
<pre>
sudo apt-get remove ndiswrapper-common
</pre>

For more on how to remove NDISwrapper, consult the <nowiki>[[http://ndiswrapper.sourceforge.net/joomla/index.php?/component/option,com_openwiki/Itemid,33/id,uninstall/|uninstall]]</nowiki> entry on the NDISwrapper wiki.

==== bcm43xx ====
To disable bcm43xx and remove it, you first need to add bcm43xx to modprobe's blacklist:

<pre>
sudo gedit /etc/modprobe.d/blacklist
</pre>

Add the following line to the end of the file and save it:

<pre>
blacklist bcm43xx
</pre>

Next, issue:

<pre>
sudo modprobe -r bcm43xx
</pre>

Finally, issue:
<pre>
sudo apt-get remove bcm43xx-fwcutter
</pre>

== Sound ==

The built-in speaker and microphones worked out of the box.  The notebook also comes with multimedia touch buttons to control the sound and playback, they all worked without the need for any special configuration.

The only problem with the sound system was that the built-in speaker would not mute when a headphone was plugged into the headphone jack. To solve this issue:

<pre>
sudo apt-get install alsa-base alsa-tools alsa-oss alsa-utils alsa-firmware-loaders
</pre>

then open the file /etc/modprobe.d/alsa-base by issuing:

<pre>
sudo gedit /etc/modprobe.d/alsa-base
</pre>

and add the following line (or modify the option if it already exists):
<pre>
options snd-hda-intel model=laptop
</pre>

The sound should work properly after a restart.

== Program Installation ==
Since this is a 64-bit machine, you might run into some dependency issues when attempting to install 32-bit applications, such as Skype, on it. The program getlibs can help resolve many of these dependencies. See <nowiki>[[http://ubuntuforums.org/showthread.php?t=474790|this Ubuntu forums entry]]</nowiki> for more.
----
CategoryLookMergeDelete
