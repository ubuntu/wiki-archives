{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


* '''Launchpad entry''': UbuntuSpec:core-1403-hwe-stack-eol-notifications
* '''Created''':
* '''Contributors''': 
* '''Packages affected''':

=== Summary ===
During vUDS for the Trusty 14.04 cycle, a <nowiki>[[http://summit.ubuntu.com/uds-1403/meeting/22161/core-1403-hwe-stack-eol-notifications/|session]]</nowiki> was held to discuss EOL notifications for HWE stack users in Precise.  The following outlines the schedule and mechanism for when and how these notifications will be delivered for the Precise LTS release.

=== Release note ===
Upon the release of 12.04.5, the previous 12.04.[2|3|4] HWE enablements stacks will have reached their end of life for support.  We encourage all HWE stack users to upgrade to either the 12.04.5 HWE stack or the 14.04 LTS release.

=== Rationale ===
We should do our due diligence to ensure our HWE stack users are properly notified of impending termination of support.  Advanced warning and notification will allow users to successfully plan and migrate to a supported stack/release.

=== User stories ===
# Jane purchased a Dell laptop pre-installed with Ubuntu 12.04.2.  12.04.2 shipped with the 12.10 HWE stack that enabled newer hardware components on this platform.  Jane will only be notified of a pending upgrade being available once Ubuntu Custom Engineering team has verified the platform passes all certification test suites upon upgrade.
# Joe manages a cluster of new HP servers which required installation with the 12.04.4 image containing the 13.10 HWE stack that provides support for newer Intel chipsets found in these servers.  Joe will receive advanced notification that the 13.10 HWE stack in Precise is nearing it’s end of life.  This early notification will allow Joe to decide how he wants to upgrade these system to remain under the umbrella of support (ie security updates and bug fixes).  

=== Design ===
The basic plan is that a "core script" will be written to detect if a user is on a HWE stack that will be nearing it’s EOL.  If on a HWE stack that with EOL, the script should provide the message needing to be delivered in the HWE stack EOL notification (perhaps the output would be the text to present).  The “core script” does need to honor a “hold” flag, eg /var/lib/update-notifier/disable-hwe-eol-messages, such that when the flag is present, no EOL messages are delivered.  All other tools and utilities should leverage this “core script” to do the detection of the HWE stack and the message to be delivered.

=== Implementation ===
* /var/lib/update-notifier/disable-hwe-eol-messages will be the defined “hold” flag
* All other tools/utilities needing to emit a HWE stack eol notification message should use the “core script” (see next bullet).
* “core script” (name TBD)
<pre>
        if /var/lib/update-notifier/disable-hwe-eol-messages exists then return 1
        elif on HWE stack == True then
                if <hwe-eol-message file> exists then
                        print hwe-eol-message file containing text for HWE stack eol notification
                return 0
        fi
</pre>
** === Comments ===
## Can we have an exit status of 0 to mean "yes, you will be EOL soon, alert with the notice I printed just to stdout", and 1 to mean "no need to act now"? Then it'll be trivial for other components to try to call the script, and a non-existent script will not alert in advance and without any extra checking. Or if this seems reversed to you, do it the other way round? Either way an exit status would make it easier for others to call out to it from C (eg. nagios-plugins), with no messing with wrappers.
## Should we separate the appearance of the script with the existence of the notification, for future EOL notifications to work correctly? Then the script would need to check for another sentinel file, and it is that sentinel file that we will SRU when we want the notifications to begin. Then the script can be SRU'd in advance, we can test it more easily (by dropping in and removing the "you are EOL soon" sentinel file, rather than the whole script itself, and the same script can remain in the future for the Trusty LTS cycle HWE EOL without needing to renew it again.
## We don't intend to bikeshed this. Whoever does the script can just make a decision and we'll happily just go with that.
** === Notes ===
** Detection of a user on a HWE stack should be determined by the kernel component of the HWE stack (since the Xorg HWE stack will not be present on server installations).
** The linux-generic-lts-<quantal|raring|saucy> meta package delivers the HWE kernels for the 12.04 LTS release.  An example kernel version for the linux-generic-lts-saucy HWE kernel is: 3.11.0-20.34~precise1

=== Schedule ===
{| class="wikitable"
|-
| Deadline (Date)
| Task
| Owner(s)
| Status
|-
| 16 May 2014
| linux-generic-lts-trusty available in Precise
| kernel team, infinity
| DONE
|-
| 16 May 2014
| xserver-xorg-lts-trusty available in Precise
| mlankhorst, infinity
| DONE
|-
| 23 May 2014
| “core script” written and available for widespread use
| mvo
| DONE
|-
| 31 May 2014
| HWE stack EOL announcement(s) drafted, reviewed, and ready for dissemination
| ogasawara
| DONE
|-
| 31 May 2014
| /var/lib/update-notifier/disable-hwe-eol-messages flag pushed to required pre-installed systems
| smagoun/Commercial Engineering
| DONE
|-
| 13 June 2014
| update-manager modifications implemented to message and perform HWE stack EOL notifications and updates; package in precise-proposed by deadline
| mvo
| DONE
|-
| 13 June 2014
| update-notifier modifications implemented for HWE stack EOL notifications; package in precise-proposed by deadline
| mvo
| DONE
|-
| 13 June 2014
| landscape integration for HWE stack EOL notifications and HWE stack updates available notifications
| dhenrich
| POSTPONED
|-
| 13 June 2014
| nagios may want to have some kind of updates ready notification (via apt-check); package in precise-proposed by deadline
| racb
| POSTPONED
|-
| 13-27 June 2014
| Testing
| mvo, smagoun, jibel
| done
|-
| 27 June 2014 (6 weeks prior to release)
| Packages promoted to precise-updates, HWE stack users begin seeing EOL notifications
| mvo, infinity
| DONE
|-
| 07 Jul 2014
| Security Team send 1mo advanced warning of HWE stacks EOL
| mdeslaur
| INPROGRESS
|-
| 07 Aug 2014
| 12.04.5 release
| All
| TODO
|-
| 07 Aug 2014
| Security Team USN announcement of HWE stacks EOL
| mdeslaur
| TODO
|-
| 07 Aug 2014
| Should “core script” messaging change in tone? (ie you’re HWE stack is now unsupported!)
| mvo
| TODO
|}

----
CategorySpec
