{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== Ubuntu TriplePlay ==

This is PaulSladen's idea for a single, bootable ISO image (CD or DVD) that will automatically boot on:

** i386 (x86, PCs)
** amd64 (Hammer)
** ppc (Apple iBook/[PowerBook G4 1.5 MHz 17"]/G4/G5)
** ia64 (Itanium)

Now that's something Mad, Rad and Bad that you haven't seen before.  '''Skip to the bottom for the Executive Conclusions and Technical Details.'''

=== Formats ===

Given the three formats presented:

** LiveCD
** Full DVD Install
** NetInstall CD

It appears to make most sense where the Media will be mass produced by pressing, in this case the DVD and LiveCD.  A disadvantage is that people may not want to download the extra 200MB of image size just to have a CD that can also boot/install on other types (architectures) of computer they don't necessarily have.

As for a NetInstall CD it would be most useful to have a multiple-arch boot CD.  This CD tends to be small anyway (200MB-300MB) and would have very little impact in adding the extra support.

=== Optimisation ===

The CD/DVD image will not necessarily be three times the size;  a large part of a typical install is cross-platform.  Examples are documentation, program theme/image files and programs written in languages such as Python, Perl or Shell.  There is a standard definition that cross-platform files suitable for more than one processor type live in separate directories, with the intention that this can be cross-mounted over a network in a safe manner.

A quick and dirty test on my laptop reveals the following:

<pre>
paul@emeritus:~$ du -sch /usr/share/
571M    /usr/share  <<<

paul@emeritus:~$ du -sch /usr/bin/ /usr/lib/ /lib/ /bin/ /sbin/ /usr/sbin/
163M    /usr/bin
698M    /usr/lib
7.9M    /usr/sbin
2.3M    /bin
59M     /lib
3.5M    /sbin
933M    total       <<<
</pre>

It would appear from first glance, that it should be possible to combine 30%-50%.  For a simplistic 600MB CD, it should be possible to have 150MB of cross-platform install (/usr/share), and 150MB for each of the three architectures.  On a NetInst (Network Install) CD or 8GB DVD, this is no issue.  It may mean that a LiveCD is less practical.

=== Technicalities ===

Whilst it is normally technically impossible to have one CD that boots on more than one machine type, some research reveals that it should be possible for this combination (x86, amd64, ppc).  Normally most systems boot by examining the start of the device (Sector 0), looking for some meta-data, then acting upon that.

Off-Topic, ignore: ''It seems very unlikely, but it might (0.001% chance) be possible to produce a Sparc/PPC dual-boot CD by abusing the fact both boot using cross-platform OpenFirmware derivatives.  Two factors that work against this are (a) Sun Sparc wants to boot with 512byte sectors instead of the normal 2048byte sectors CD used by everything else; and (b) The Mac wants to boot from a special HFS partition.  It might be possible to use a multi-session CD and hope that the Sparc won't see the latter session---This was(?) a technique used to produce Classic Mac (m68k) and PowerMac (ppc) dual-bootable CDs.''

==== x86 PC Boot ====

IBM PCs come up with a BIOS;  this is responsible for initialising hardware to a sane state, as well as board-specific chips, this includes ISA PnP and PCI devices in case a legacy OS is booted.  In addition the BIOS provided an interface for handy tasks, one of which is reading sectors off the device that you got booted from---this is utilised by LILO/Grub for loading their second-stage boot-loaders and for booting the system from Strange RAID devices that even the kernel barely knows how to talk to!

PC's weren't really natively designed to boot from CD, so in the old days, lots of time was normally spent with a bootable _floppy_ containing minimal drivers to be able to talk to the CD.

Then came along...  '''El Torito'''

El Torito is the standard for Bootable CD's on PC's.  Instead of starting at Sector 0 like a hard-disk image, or an image for another platform, the standard starts at sector 17, meaning the first 32kB of a ISO image is normally zeros.

==== amd64 Hammer ====

Ah ha!  Whilst the distribution should probably be native 64-bit code (seems more "Pure"), the bootloader can know about both amd64 and x86.  Since the Machine is coming up just like any other PC, detecting the 64-bit extensions and forking to load the correct kernel and setup options is going to be one of the easiest parts!

==== ppc Apple Power Foo ====

Apple NewWorld Machines (recent hardware, everything since the second-generation iMacs) boot using OpenFirmware which is a nice, open standard for bringing up hardware in a cross-platform manner.  What we are interested in, is that when the Option-C key combination is held down on startup, the Mac looks for a special HFS (non-ISO9660) filesystem.

Normally the next step would be to load MacOS, or on older machines, a driver to see the rest of the CD image.  In the case of booting Ubuntu, Yaboot is placed in this special small (~1MB) partition.

==== ia64 Itanium ====

IA-64 machines use EFI to provide a 'better' BIOS/PROM environment.  It appears to work by looking for a file called 'boot.img' on the root of an iso9660 filesystem---and that when loop mounted is a FAT16 partition created with mkdosfs.  elilo/egrub reside within that.

=== Conclusion ===

  1.  Because: OpenFirmware (ppc) uses sector 0 '''and''' x86 uses sectors 16-17 '''and''' amd64 is 32-bit x86 machine on startup, this combination should work.  This is really handy since this is what Ubuntu ships for.  It also covered 99% of all the installs out there as far as Debian goes.
  2.  Optimisations can be made to share platform-independent files and code, therefore reducing the size needs for each addition architecture.
  3.  This should simplify distribution as "One Size fits all".  For mass-produced pressed media, this will actually be ''cheaper''.

=== Notes ===

Researched at the Debian-UK BBQ 2004-08-28 and then a few further conversations with Sledge.

Basic Writeup here, 2004-09-16.

People may be skeptical that x86 and amd64 on one CD is really just an x86 install.  Adding PPC to the mix should persuade them that really is a ''universal'' install.

I guess the original idea came from a crazy idea of a LiveCD running x86 userland on PPC with QEMU!  >;-)  I am ''so'' evil...

From [Steve McIntyre] Tue Nov 23 16:59:46 +0000 2004
From: Steve McIntyre
Date: Tue, 23 Nov 2004 16:59:46 +0000
Subject: 
Message-ID: <20041123165946+0000@www.ubuntulinux.org>

It's definitely feasible, and would be a cute party trick. In fact, it might be a worthwhile thing to do for official pressed mailshots - press a single DVD that works for all supported architectures. DVDs should not cost anything more to make or distribute, and people get More Free Software (TM)!

2005-01-15 PaulSladen looked into EFI and reckons it might be possible to add IA-64 aswell.
