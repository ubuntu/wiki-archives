{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad Entry''': UbuntuSpec:hardy-recommends-handling
* '''Packages affected''': apt-get, synaptic, adept

=== Summary ===

Debian switched to installing recommends by default (the debian policy
says they should be installed in all but the most unusual
situations). We want to do the same for hardy.

=== Release Note ===

All package tools like apt, aptitude, synaptic will install packages
marked as Recommends now (in addition to the ones marked as
Depends). 

This gives the user a more flexible package managmanet experience. 

=== Rationale ===

Recommends are a powerful way of declaring that a dependency is
strongly encouraged but not absolutely essential for the package to
run. This makes our packaging more flexible.

=== Use Cases ===
* Bob has limited vision. He installed gnopernicus and is supsrised that gnome-mag does not get installed (it is "only" recommended gnome-mag)

=== Design ===

The recommends code is part of libapt now, the design of apt does not
need to be modified.

=== Implementation ===

Apt needs to be changed so that it installs
recommends-by-default. This is only a configuration change, no code
changes are required. The code that allow installing recommends only
for selected sections should go away as it is no longer required.

Synaptic should get a better user interface for recommends support,
new filters "installed/not installed recommmends" should be added to
the UI.

Gnome-app-install will install recommended packages by default because
it follows apt here.

The adept code needs to be checked, its likely that it needs to be
changed as well because it is quite different from the original apt
code and reimplements a lot of interfaces.

==== UI Changes ====

The "mark changes" dialog in synpatic should get support for recommends.

==== Migration ====

If we enable recommends by default, we get ~20 new packages in the
default ubuntu-desktop. The list can be checked via: 

<pre>
apt-get install --fix-policy --install-recommends -o Debug::pkgDepCache::AutoInstall=1
</pre>

Colin will modify germinate so that it can generate a list of
changes if we install recommends-by-default. The list needs to be
reviewed and the packages fixed before the upload with
recommends-by-default of apt is done.

A list of all packages with recommends will be generated for main,
universe so that the MOTU team can have a look what makes sense 
and what does not. The list will looks like this:
<pre>
gnopernicus: gnome-mag
...
</pre>

We should consider making it easy for the user to get the missing
recommends. A synaptic filter for "not installed recommends" should be
added. 

=== Test/Demo Plan ===

TBD

=== Opt-Out ===

Make sure it is possible and easy enough to opt out or ubuntu is likely to see more bugs like   <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/aptitude/+bug/128681|this one]]</nowiki>

=== Discussion ===

Q: Hardy has been released and this has not been implemented. Was there any further discussion of this at UDS Prague? Any plans for Intrepid? A package that I am interested will probably have to carry a Ubuntu specific change only due this issue.  --<nowiki>[[Andrewsomething]]</nowiki>

----
CategorySpec
