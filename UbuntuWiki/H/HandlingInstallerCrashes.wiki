{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:handling-installer-crashes
* '''Created''': 2009/01/22
* '''Contributors''': EvanDandrea
* '''Packages affected''': ubiquity

=== Summary ===

We need to look into the various problems that lie in installer crashes.  This should cover, among other topics, copying the log files earlier in the install and marking partitions with a special flag to note that the install is incomplete on them, to allow ubiquity to detect broken installs and offer to delete the partitions in question before continuing.

=== Release Note ===

=== Rationale ===

=== Use Cases ===

=== Assumptions ===

=== Design ===

=== Implementation ===

=== Test/Demo Plan ===

=== Unresolved issues ===

=== BoF agenda and discussion ===

From IRC:
<pre>
<evand> I was speaking with someone at UDS who ran into the problem whereby the install failed partway through and left a ghost system on their computer.  Ideally they wanted ubiquity to detect on a follow up run that it had already tried to install previous and failed, and that it should offer to wipe out the failed install attempt.
 I thought we could easily accomplish this by ubiquity writing a hint file to the system at the start of the install containing the partitions it's added. It would then delete this file as its last step in the install.  Alternatively, we could set the status flag of each partition to an undefined (but understood by ubiquity) value.
 Either way, if ubiquity detects the presence of this file or flag at the partitioner screen, it offers to delete the partitions in question, then reload partman.
 ^ cjwatson, does that sound like a worthwhile effort for a future release?
<cjwatson> where would it write it (to which partition)?
<evand> any one created by ubiquity
 in the 0 bit for each partition that it creates
 err byte
<cjwatson> which means it would have to mount all partitions, which potentially means replaying journals (we have an os-prober bug about this)
 it's an interesting and worthwhile idea, I think, and we certainly have some bugs that it would help with
 but I think it has some hidden assumptions we need to examine carefully
 a related suggestion would be making sure that log files end up on the target system earlier, to make it easier to diagnose bugs after a user reboots following an installer crash
 so maybe we should have a general look at the handling of installer crashes, including your suggestion?
</pre>
----
CategorySpec
