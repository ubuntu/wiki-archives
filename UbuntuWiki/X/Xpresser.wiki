{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


=== What is Xpresser? ===

Xpresser is a Python module which enables trivial automation of Graphic User Interfaces (GUIs) via image matching algorithms.

=== Requirements ===

Xpresser depends on the following libraries to do its work:

** python-opencv
** python-numpy
** python-pyatspi2
** python-cairo
** python-gi-cairo

Xpresser was developed in Ubuntu Lucid (released in April of 2010), but is currently fully updated and available for the most recent Ubuntu releases. The project has an active team providing new features and updates on a regular basis.

=== License and copyright ===

Xpresser is licensed under the <nowiki>[[http://www.gnu.org/licenses/lgpl.html|GNU LGPL]]</nowiki>

=== Getting started ===

==== Downloading ====

Both source and binary downloads are available through the project's PPA on Launchpad: https://launchpad.net/xpresser

==== Installing ====
Installable deb packages can be found in the team PPA: https://launchpad.net/~xpresser-team/+archive/ppa
Installation from here is just an apt-get install away.

But you can also compile your own from the active code branch: https://code.launchpad.net/~xpresser-team/xpresser/trunk

From source you will need to navigate the xpresser trunk directory to the setup.py script in its root. Run it.

Next step will be to import the function. From inside your branched directory run:
<pre>
>>> from xpresser import Xpresser
</pre>

==== Fire it up ====

Starting to use Xpresser is quite easy.  All it needs to operate is a directory containing screen excerpts (images containing relevant crops taken out of one or more screenshots).  These might be buttons, edit areas, image buttons, or anything else which could be relevant to perform an action on, or maybe simply to wait for its presence.

With this in place, an instance of the <code>Xpresser</code> class can be created:

<pre>
>>> xp = Xpresser()
>>> xp.load_images("/path/to/images")
</pre>

==== Clicking somewhere ====

If you want to press a button in the screen, for instance, you can take a screenshot of the button itself and maybe a bit of margin around it, and put the screenshot excerpt in a directory.

Then, assuming you've named the image <code>my-button.png</code>, you might simply do something like this:

<pre>
>>> xp.click("my-button")
</pre>

If you want to right-click instead, use the respective method:

<pre>
>>> xp.right_click("my-button")
</pre>

Besides using an image name as the argument, you can also use an image match instance as returned by find(), or an (x, y) pair.

==== Hovering over something ====

Instead of clicking, sometimes you may simply want to put the mouse cursor over something so that the interface reacts to this event.  This can be done in a similar way to clicking.

Again, assuming you've named the image <code>my-button.png</code>, you might to do this:

<pre>
>>> xp.hover("my-button")
</pre>

Besides using an image name as the argument, you can also use an image match instance as returned by find(), or an (x, y) pair.

==== Waiting for things to show up ====

You may not want to do any action on the image itself, but simply to wait until something is shown in the screen before doing an additional action.  This can easily be done as such:

<pre>
>>> xp.wait("connection-established-indicator")
</pre>

Besides using an image name as the argument, you can also use an image match instance as returned by find(), or an (x, y) pair.

==== Emulating the keyboard ====

If you want to use the keyboard to type some value in an edit box, for example, you can use the following method:

<pre>
>>> xp.click("name")
>>> xp.type("John Doe")
>>> xp.type(["<F1>","I pressed the F1 key"])
</pre>

==== Customizing the behavior on specific images ====

Sometimes, you may want to match an image even though it's slightly less similar to the original image you have taken the screenshot from, or you may want to click on a spot which is not quite the middle of the image you're matching.

Xpresser offers a convenient way to achieve these goals: just drop a file named <code>xpresser.ini</code> inside the images directory, and include sections in it resembling the following one:

<pre>
[image edit]
filename = edit-text-box.png
similarity = 0.8
focus_delta = +50 +0
</pre>

* The example above has caused a lot of confusion [image edit], will have xp.click('edit') use the edit-text-box.png. You probably want to change the 'edit' part of [image edit] to match the name of your .png file.

Each of these sections will customize the behavior for one image.  The example above, for instance, will determine that the "edit" image will match even if it's only 80% similar to the original image, and if some action is performed on it (e.g. click), it will actually happen 50 pixels to the right side of the middle of the image matched.

==== Screencast ====
* http://www.youtube.com/watch?v=b-xxBBPU9kU&feature=youtu.be

=== Sample Test Case ===
==== Image Match ====
<pre>
from xpresser.imagematch import ImageMatch, ImageMatchError
from xpresser.image import Image

from xpresser.lib.testing import TestCase

class ImageMatchTest(TestCase):

    def test_constructor(self):
        image = Image(width=40, height=50, focus_delta=(4, 5))
        match = ImageMatch(image, 100, 200, 0.5)
        self.assertEquals(match.image, image)
        self.assertEquals(match.x, 100)
        self.assertEquals(match.y, 200)
        self.assertEquals(match.similarity, 0.5)
        self.assertEquals(match.focus_point, (100+40//2+4, 200+50//2+5))

    def test_error_on_lack_of_height(self):
        image = Image(width=1)
        self.assertRaises(ImageMatchError, ImageMatch, image, 0, 0, 0)

    def test_error_on_lack_of_width(self):
        image = Image(height=1)
        self.assertRaises(ImageMatchError, ImageMatch, image, 0, 0, 0)
</pre>

=== Get Involved ===
==== Hit List ====
# '''Documentation''': Updating our wiki with new features and commands.
# '''Unit Tests''': We need unit <nowiki>[[https://code.launchpad.net/~xpresser-team/xpresser/trunk|tests]]</nowiki> for the existing features.
# '''New Features''': Check out our existing <nowiki>[[https://blueprints.launchpad.net/xpresser|Blueprints]]</nowiki> or create some yourself...then code!
# '''Test and Fix''': No project is perfect, log some <nowiki>[[https://bugs.launchpad.net/xpresser|bugs]]</nowiki>, or fix <nowiki>[[https://code.launchpad.net/xpresser|some]]</nowiki>.
