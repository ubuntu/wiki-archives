{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

'''As of end of February 2010 we have better tools in Lucid to troubleshoot freezes. The best you can do to help fix GPU hangs in Lucid is to grab the newest intel-drm-next mainline kernel, reproduce the freeze and file a bug report which includes: i915_error_state, dmesg output, and Xorg.0.log. From xserver-xorg-video-intel 2.9.1-1ubuntu8 this may even work semi-automatically through apport. See <nowiki>[[https://wiki.ubuntu.com/X/Troubleshooting/Freeze#How%20to%20Get%20a%20Batchbuffer%20Dump%20(-intel%20only)|X/Troubleshooting/Freezes]]</nowiki> for details.'''

This page is to collect information about the freezes on 945G, 945GM, and 945GME that appear in Karmic, in order to find a fix in time for Lucid.

* <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-video-intel/+bugs?field.tag=945g%20freeze&field.tags_combinator=ALL|Open bugs with tags 945g and freeze]]</nowiki>
* <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-video-intel/+bugs?field.tag=945gm%20freeze&field.tags_combinator=ALL|Open bugs with tags 945gm and freeze]]</nowiki>
* <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-video-intel/+bugs?field.tag=945gme%20freeze&field.tags_combinator=ALL|Open bugs with tags 945gme and freeze]]</nowiki>

Common feature seems to be:
* Only activated with Gnome, not KDE
* Only activated with Deskop Effects enabled, not without
* Unlike many other freeze bugs, also the mouse pointer freezes

Things that we should find out:
* Are there any kernel parameters that will stop the freezes? (`nomodeset` and `apci=off` are good candidates)
* Are the problems still present in Lucid?
* Are the problems still present for Karmic with <nowiki>[[https://launchpad.net/~xorg-edgers/+archive/ppa|xorg-edgers]]</nowiki>?
* Are the problems still present for Lucid with <nowiki>[[https://launchpad.net/~xorg-edgers/+archive/ppa|xorg-edgers]]</nowiki>?
* Does it help to use a recent drm-intel-next kernel from <nowiki>[[http://kernel.ubuntu.com/~kernel-ppa/mainline/drm-intel-next/|this archive]]</nowiki>? (more info at KernelTeam/MainlineBuilds)
* Does it help to use an older kernel from the <nowiki>[[http://kernel.ubuntu.com/~kernel-ppa/mainline/|mainline build archive]]</nowiki>? ''Finding the newest kernel that does not have this problem is probably the most important test at this point''. The mainline kernel corresponding to the Karmic one is 2.6.31.4. The newest kernel will be older than this. 2.6.30 may be a good first try. Two other candidates are the freezetest8 kernel from http://www.kvante.info/845Gfreeze/ and the 599 kernel from http://www.kvante.info/855GMfreeze/ .
* When not using desktop effects, is the bug still triggered when using 3D applications?
 
Links of interst:
* https://wiki.ubuntu.com/X/Troubleshooting/Freeze

=== Findings ===
{| class="wikitable"
|-
| '''User'''
| '''Bug # (if present)'''
| '''Gnome/KDE'''
| '''Desktop effects'''
| '''Mouse pointer freezes'''
| '''Kernel options that works'''
| '''Lucid'''
| '''Karmic + xorg-edgers'''
| '''Lucid + xorg-edgers'''
| '''drm-intel-next kernel'''
| <#FFFF00> '''no-freeze kernel'''
| '''3D app with freeze'''
|-
| Example 1
| none
| Gnome
| With and without
| Yes
| 
| Freeze
| Freeze
| No freeze
| Freeze
| 
| Google Earth
|-
| Example 2
| 12345
| Gnome
| Only with
| Yes
| acpi=off
| 
| Freeze
| 
| No freeze
| 2.6.30-rc3
| 
|-
| Dirk
| Bug:493111
| Gnome
| Without
| Often
| --
| --
| Freeze
| --
| Freeze (2.6.32-997)
| --
| --
|-
| Marcelo Lotif
| Bug:492271
| Gnome
| Only with
| Yes
| --
| --
| --
| --
| --
| --
| --
|-
| Adrian Popa
| Bug:451518
| Gnome/XFCE
| with and without
| N/A
| acpi=off
| --
| --
| --
| --
| --
| xscreensaver with GL screensavers
|-
| takashi torigoe
| Bug:475429
| Gnome
| With and without
| Yes
| acpi=off
| --
| Freeze
| --
| Freeze
| --
| compiz, 3d screensavers (euphoria is most often)
|-
| Herv√© Fache
| 
| KDE
| With
| Yes
| 
| 
| 
| 
| 
| 
| 3d and 2d screensavers (Euphoria, Jigsaw)
|-
| Gero Mudersbach
| 
| KDE
| With
| No
| 
| 
| Freeze
| 
| 
| 
| Random, fast scrolling in konqueror (e.g. wikipedia page with lots of pictures), intel_gpu_dump says "Buffer size too small in MI_STORE_DATA_INDEX (2 < 3)"
|-
| Pablo Almeida
| Bug:400934
| Gnome
| Only With
| Yes
| acpi=off (but then I can't activate desktop effects)
| Freeze
| Freeze
| --
| --
| --
| Blender (both in Gnome and KDE)
|-
| George Fragos
| none
| Gnome
| Without
| Yes
| ?
| Freeze
| No Freeze
| --
| ?
| ?
| "Machinarium"
|}

=== Free form findings ===

Report any useful information that you feel doesn't fit in a table here (if any).

'''Example 2:''' Booting with kernel parameter `acpi=off` stops the freezes. I also tried `nomodeset` in Karmic, but that didn't change anything.

'''Dirk:''' Freeze typically observed when using Gnome terminal and sometimes Firefox.

'''Marcelo Lotif:''' The mouse pointer freezes some seconds after enabling desktop effects. 
I can't make some of the tests right now. I will do them and fill the results here as soon as I can.

'''Adrian Popa:''' Monitor goes off when running some GL screensavers. Bug happens on a default Xubuntu Karmic, with kernel 2.6.31-16. Booting with `acpi=off` stops the freezes. Update: I've been upgraded to kernel 2.6.31-17 and the freezes have stopped (acpi=on).

'''takashi torigoe''': drm-intel-next and Karmic + xorg-edgers take a little longer to freeze than standard Karmic. A few seconds instead of immediately.

'''Pablo Almeida''': I have yet to test xorg-edgers on Lucid, but, for now, Lucid Alpha 3 takes a much longer time to freeze than Karmic without xorg-edgers (minutes insted of seconds). Karmic with xorg-edgers DOESN'T freeze if it is booted without effects, then the effects are activated (tested for 20 minutes), but if I start Blender, it freezes anyway. If it is booted with the effects already activated, it takes less than a minute to freeze.

=== Questions and answers ===
