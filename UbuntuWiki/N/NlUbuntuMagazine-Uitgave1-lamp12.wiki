{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

'''Een webserver installeren: installatie en configuratie

Auteur: Sander Thijsen'''

<inleiding>Het grootste gedeelte van de webservers draait op Linux. Geen wonder, want Linux is stabieler en flexibeler dan de meeste andere besturingssystemen. Ook thuis kun je een eigen webserver draaien, om bijvoorbeeld je eigen website te hosten. Maar hoe installeer je zo'n LAMP-server?</inleiding>

<titel1>Een beetje achtergrondinformatie</titel1>

<titel2>LAMP?</titel2>

LAMP staat voor <b>Linux</b>, <b>Apache</b>, <b>MySQL</b> en <b>PHP</b>, en is de afkorting voor een vaak voorkomende combinatie van pakketten die vooral gebruikt wordt voor het hosten van websites, maar ook voor het testen van bijvoorbeeld PHP programma's.

<titel2>Over Apache</titel2>

Apache is de webserver van het viertal, en zorgt er dus voor dat alle informatie verzameld wordt, en doorgestuurd wordt naar de bezoeker. 

<titel2>Over MySQL</titel2>

MySQL is de database waar informatie in opgeslagen kan worden. Denk hierbij bijvoorbeeld aan een blog: alle posts die je maakt worden in een MySQL database opgeslagen.

<titel2>Over PHP</titel2>

PHP staat voor <b>PHP: Hypertext Preprocessor</b>. PHP is een scriptingtaal en is eigenlijk de schakel tussen Apache en MySQL: het verwerkt de informatie in de databases en stuurt deze informatie door naar Apache, zodat de informatie uiteindelijk als een mooie webpagina op het beeldscherm van de bezoeker terechtkomt.

<titel2>Waarom een eigen server?</titel2>

Een eigen server kan handig zijn als je altijd bij je bestanden wilt kunnen, je eigen scripts wilt testen of een website wilt hosten.

<!><b>Let op:</b> als je het belangrijk vindt dat je website snel is en een hoge uptime heeft, dan is het niet altijd een goed idee om je website te hosten op je eigen computer. Dit komt doordat ADSL- en kabelverbindingen over het algemeen niet snel genoeg zijn, en niet ingesteld zijn op het gebruik met een webserver. Als je voor kwaliteit gaat, doe je er meestal beter aan om een goede hostingprovider te zoeken.</!>

<titel1>Aan de slag!</titel1>

Er zijn over het algemeen twee mogelijkheden te noemen om je eigen server te installeren. De eerste mogelijkheid is het installeren van de server naast je bestaande desktopomgeving. Apache, MySQL en PHP draaien dan op de achtergrond en je zult er niets van merken. Dit is in de meeste gevallen de beste optie. Daarnaast kun je een server installeren zonder desktopomgeving. Ook deze methode wordt besproken.

<titel2>Installatie onder Ubuntu 6.06 LTS (Dapper Drake)</titel2>

Onder Dapper Drake is de installatie niet erg moeilijk als je gebruik maakt van de Seveas pakketbron.
Deze pakketbron beschikt over een pakket dat netjes alle onderdelen van de server installeert. Je zult eerst deze pakketbron toe moeten voegen aan <b>/etc/apt/sources.list</b>, zodat je systeem weet waar hij de pakketten kan vinden. Je kan dit doen door /etc/apt/sources.list te openen met het volgende commando:

<code>sudo nano /etc/apt/sources.list</code>

Daarna voeg je de volgende regel toe aan het bestand:

<txt>deb http://mirror.ubuntulinux.nl/ dapper-seveas all</txt>

Nu ben je klaar om de LAMP server te gaan installeren. Start eerst Synaptic pakketbeheer op:
<b>Systeem -> Beheer -> Synaptic pakketbeheer</b>
Klik eerst op <b>Herladen</b>, bovenaan in de menubalk. Deze knop vernieuwt de beschikbare inhoud van alle pakketbronnen.
Daarna kun je de server installeren door het pakket <b>ubuntu-lamp</b> op te zoeken en te installeren. Natuurlijk kan je dit pakket desgewenst ook via het terminalvenster installeren:

<code>sudo apt-get install ubuntu-lamp</code>

<titel2>Installatie onder 6.10 (Edgy Eft) en 7.04 (Feisty Fawn)</titel2>

Het installeren van Apache, MySQL en PHP is onder Ubuntu 6.10 (Edgy Eft) en 7.04 (Feisty Fawn) heel eenvoudig. 
Start eerst Synaptic pakketbeheer op:
<b>Systeem -> Beheer -> Synaptic pakketbeheer</b>
Kies dan het volgende item in het menu:
<b>Bewerken -> Pakketten markeren via taken</b>
Er verschijnt een schermpje waarin je kunt kiezen voor het installeren van verschillende combinaties van pakketten, waaronder <b>Lamp Server</b>. Die vink je aan, en met een klik op <b>OK</b> start je vervolgens de installatie.

<screenshot>{{http://debianbox.be/magazine/lamp1.png}}</screenshot>
<afbonderschrift>Afb. 1: Feisty maakt het installeren van een LAMP server wel Ã©rg gemakkelijk!</afbonderschrift>

<titel2>LAMP met de server cd</titel2>

Als je gaat voor performance en snelheid, dan heb je ook nog de mogelijkheid om een server te installeren zonder een desktopomgeving zoals GNOME of KDE. Zo'n desktopomgeving vreet alleen maar geheugen, en als je deze toch niet gebruikt is dat natuurlijk zonde.

<!><b>Let op:</b> Op deze manier installeer je Ubuntu zonder desktopomgeving, wat voor beginnende gebruikers niet aan te raden is. Wil je niet verdwalen in een oerwoud van commando's, kies er dan voor om LAMP naast je desktop te installeren.</!>

Er is voor Ubuntu een speciale server cd beschikbaar die automatisch een hele LAMP server kan installeren. Deze cd kan je downloaden op <b>http://nl.releases.ubuntu.com/6.06/</b>.
Als het om een server gaat is het altijd het beste om te kiezen voor Ubuntu 6.06 LTS, omdat deze versie gericht is op stabiliteit en betrouwbaarheid. Ook ben je verzekerd van 5 jaar lang veiligheidsupdates.

Nadat je de cd gebrand hebt, doe je hem in je cd-rom drive en start je de computer opnieuw op. Als alles goed gaat, dan start de cd op en krijg je een mooi menuutje voorgeschoteld (afb. 2).

<tip>Als de cd niet automatisch wordt opgestart kan het zijn dat je BIOS niet ingesteld staat om op te starten vanaf cd-rom. Probeer in dat geval de BIOS setup binnen te gaan. Meestal zie je bij het opstarten van je computer welke toets je moet indrukken om naar het BIOS setup scherm te gaan.</tip>

<screenshot>{{http://debianbox.be/magazine/lamp2.png}}</screenshot>
<afbonderschrift>Afb. 2: Opstartmenu van de Ubuntu server cd</afbonderschrift>

Kies in het menu voor de tweede optie: "Install a LAMP server". Volg hierna gewoon de aanwijzingen op, en na de installatie heb je meteen je eigen LAMP server draaiende!

<tip>Voordat je aan de installatie begint kan het wel handig zijn om de taal en toetsenbordindeling aan te passen door middel van de F2 en F3 toetsen.</tip>

<titel1>Na de installatie</titel1>

Om je nieuwe server te testen, open je jouw favoriete browser (bijvoorbeeld Firefox) en typ je <b>localhost</b> in de adresbalk. Hiermee kun je altijd op je computer de server testen. Als het goed is krijg je nu een saaie, witte pagina van Apache voorgeschoteld.

<tip>Als je een server hebt zonder desktopomgeving, en je hebt geen beschikking tot een browser, dan kan je de server testen via een andere pc in je lokale netwerk. Typ in de browser van deze pc gewoon het interne IP-adres van je server.</tip> 

Je kunt je websitebestanden kwijt in de map <b>/var/www</b>. Het kan echter heel handig zijn om een gebruiker rechten tot deze map te geven, zodat je niet steeds met rootrechten hoeft te knoeien. Het volgende commando maakt de huidige gebruiker de eigenaar van de map:
<code>sudo chown -R $USER:$USER /var/www</code>

Nu moeten we PHP nog testen. Dit kun je doen door een PHP-bestand aan te maken met de volgende inhoud:
<txt>
<?php
	phpinfo();
?>
</txt>

Sla het bestand op. Als voorbeeld gebruiken we de bestandsnaam <b>phpinfo.php</b>. Dit script wordt gebruikt om de instellingen en status van PHP te controleren. Je plaatst het bestand vervolgens in de map <b>/var/www</b>, waarna je het script gewoon kan bekijken in je browser door naar <b>http://localhost/phpinfo.php</b> te surfen. Als alles goed gaat krijg je dan een pagina voorgeschoteld zoals op afb. 3.

<screenshot>{{http://debianbox.be/magazine/lamp3.png}}</screenshot>
<afbonderschrift>Afb. 3: Een phpinfo() pagina</afbonderschrift>

Nu MySQL nog. Allereerst zal je het wachtwoord van de MySQL gebruikter <b>root</b> moeten wijzigen. Dat kun je doen met het onderstaande commando:

<code>sudo mysqladmin -u root password "wachtwoord"</code>

Vergeet niet om wachtwoord te vervangen door het gewenste wachtwoord.

<!><b>Let op:</b> De MySQL gebruiker <b>root</b> is <b>niet dezelfde gebruiker</b> als de gebruiker root van het Ubuntusysteem.</!>

Je kunt het PHP-script <b>phpmyadmin</b> gebruiken om hierna de MySQL server te testen. Op de volgende pagina bevindt zich een uitleg voor het gebruik van phpmyadmin.

<titel1>Poort 80 forwarden</titel1>

Om ook gebruikers buiten je eigen lokale netwerk toegang te geven tot je nieuwe server, moet je vaak poort 80 forwarden. Webservers zijn altijd bereikbaar op poort 80. De meeste routers en modems zijn echter ingesteld om verkeer van en naar poort 80 te blokkeren, zodat jouw server niet van het internet af zichtbaar zal zijn. Je zal dus je modem of router duidelijk moeten maken dat al het verkeer naar poort 80 doorgestuurd moet worden naar het interne IP-adres van jouw webserver. Om dit interne IP-adres te weten te komen, kun je het onderstaande commando gebruiken.
<code>ifconfig | grep 'inet addr' | grep -v 127.0.0.1</code>
Achter <b>inet addr</b> zul je dan je interne IP-adres vinden.

Omdat er heel veel verschillende soorten routers en modems zijn, is het niet mogelijk om hier te bespreken hoe je poort 80 kunt forwarden. Dit hangt af van het merk router of modem dat je hebt. Gelukkig is er een website beschikbaar waar dit voor heel veel verschillende types wordt uitgelegd: <b>http://portforward.com/</b>.

<!><b>Let op:</b> Sommige internetproviders blokkeren uitgaande gegevens op poort 80 over het internet. In dat geval volstaat het meestal om gewoon een hogere poort te kiezen (poort 1234 bijvoorbeeld).</!>
