{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* Spec by: -
* Contributions: JackWasey

* '''Launchpad entry''': https://blueprints.launchpad.net/distros/ubuntu/+spec/image-mounting
* '''Packages affected''': nautilus

=== Summary ===
The desktop user should be able to mount an ISO image. Furthermore, if the ISO image is a DVD, it should be straightforward or transparent to play the media using the supported video applications.

=== Rationale ===
ISO files are commonly manipulated and this requires the command line.

=== Use cases ===
* Jack backs up a DVD using the Copy Disk command. He now has an ISO, but can't do anything with it.
* Jill has copied all her DVDs onto her huge hard disk, but must manually mount images AND reconfigure video packages to play the DVDs.

=== Scope ===
This can be implemented by including Nautilus actions for mount and unmount, and might also include other disk image formats, such as NRG.

=== Design ===
* Just as 'Copy Disk' is available when write clicking on a mounted DVD icon, 'Burn' and 'Mount' (maybe called 'View' esp. for a video DVD) should be available when right-clicking an ISO icon.

=== Implementation ===

==== Code ====

This code for nautilus actions came from a forum post. It requires sudo, leaves directories in /media, and doesn't prevent deletion or movement of the data files.

===== Mount =====

EXT=`echo $1 | sed -e 's/.*\.//'`
EXT_LOW=`echo $EXT | tr 'A-Z' 'a-z'`

BASE="`echo "$1" | sed 's/\.[^.]*$//'`" 

if [ $EXT_LOW == "iso" ]; then
foo=`gksudo -u root -k -m "enter your password for root terminal access" /bin/echo "got r00t?"`
sudo mkdir /media/"$BASE" &&
sudo mount -o loop,ro,nodev,noexec,nosuid "$1" /media/"$BASE" &&
gnome-open "/media/${BASE}" 
fi

if [ $EXT_LOW == "nrg" ]; then
foo=`gksudo -u root -k -m "enter your password for root terminal access" /bin/echo "got r00t?"`
sudo mkdir /media/"$BASE" &&
sudo mount -o loop,ro,nodev,noexec,nosuid,307200 "$1" /media/"$BASE" &&
gnome-open "/media/${BASE}" 
fi

if [ $EXT_LOW == "cue" ]; then

NODE=$((`cdemu -s | cut -f 8 -d " " | grep 0 -n -m 1 | cut -c 1`-2))

  if [ $NODE -lt "0" ]; then
  zenity --info --text "You can not mount any more BIN/CUE files."
  fi

## Node needs to be between 0 and 7
  if [ $NODE -ge "0" -a $NODE -le 7 ]; then
  foo=`gksudo -u root -k -m "enter your password for root terminal access" /bin/echo "got r00t?"` 
  sudo mkdir -p "/media/${BASE}" &&
  cdemu $NODE "$1" &&
  sudo mount -t iso9660 /dev/cdemu/${NODE} "/media/${BASE}" &&
  ln -s "/media/${BASE}" "/home/$USER/Desktop/${BASE}" &&
  gnome-open "/media/${BASE}" 
  fi

if [ "$(ls -A /media/${BASE})" ]; then
echo
else
cdemu -u $NODE
fi

fi

if [ "$(ls -A /media/${BASE})" ]; thenhttp://www.ubuntu.com/
echo
else
sudo rmdir /media/"${BASE}"
fi

===== Unmount =====

BASE="$1"

EXT=`echo $1 | sed -e 's/.*\.//'`
EXT_LOW=`echo $EXT | tr 'A-Z' 'a-z'`

if [ $EXT_LOW == "iso" -o $EXT_LOW == "nrg" -o $EXT_LOW == "cue" -o $EXT_LOW == "volume" ]; then
BASE="`echo "$1" | sed 's/\.[^.]*$//'`"
fi

foo=`gksudo -u root -k -m "enter your password for root terminal access" /bin/echo "got r00t?"`
DEV="`mount | grep "$BASE" | cut -f1 -d " "`"

if [ ${DEV##/dev/cdemu/} -ge 0 -a ${DEV##/dev/cdemu/} -le 7 ]; then
cdemu -u ${DEV##/dev/cdemu/}
fi

if [ ${DEV##/dev/cdemu} -ge 0 -a ${DEV##/dev/cdemu} -le 7 ]; then
cdemu -u ${DEV##/dev/cdemu}
fi

foo=`gksudo -u root -k -m "enter your password for root terminal access" /bin/echo "got r00t?"`
sudo umount /media/"${BASE}"
sudo rmdir /media/"${BASE}"
sudo rm /home/$USER/Desktop/"${BASE}"

==== Data preservation and migration ====

=== Unresolved issues ===

=== BoF agenda and discussion ===

----
CategorySpec
