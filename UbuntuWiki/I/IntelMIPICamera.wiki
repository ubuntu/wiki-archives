{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

{| class="wikitable"
|-
| <tablebgcolor="#F1F1ED" tablewidth="40%" tablestyle="float:right;font-size:0.9em;margin:0 0 1em 1em; "style="padding:0.25em;"><<BR>>
|}

== For Ubuntu certified PCs ==

'''Please use Additional Drivers to get the Intel MIPI camera support if your laptop PC is already Ubuntu certified!'''

If your laptop PC is Ubuntu certified, you will see the OEM metapackage on Additional Drivers to get Ubuntu certified support.

<nowiki>[[File:meta.jpg]]</nowiki>

After you install the OEM metapackage and reboot the system, you will see the Intel MIPI camera stack/plugin (libcamhal*) on Additional Drivers. After you install the Intel MIPI camera stack and reboot the system, Intel MIPI camera should just work on your laptop PC.

<nowiki>[[File:stack.jpg]]</nowiki>

=== Ubuntu LTS 20.04 ===

 ''It only supports Intel MIPI camera on some Ubuntu certified Tiger Lake and Alder Lake platforms via <nowiki>[[https://wiki.ubuntu.com/DeveloperMembershipBoard/KnowledgeBase#Canonical_OEM_metapackage_packageset|OEM metapackages]]</nowiki>.''

=== Ubuntu LTS 22.04 ===

 ''It supports Intel MIPI camera on some Ubuntu certified Tiger Lake, Alder Lake, Raptor Lake, and Meteor Lake platforms via <nowiki>[[https://wiki.ubuntu.com/DeveloperMembershipBoard/KnowledgeBase#Canonical_OEM_metapackage_packageset|OEM metapackages]]</nowiki>.''

=== Ubuntu LTS 24.04 ===

 ''It supports Intel MIPI camera on some Ubuntu certified Tiger Lake, Alder Lake, Raptor Lake, and Meteor Lake platforms via <nowiki>[[https://wiki.ubuntu.com/DeveloperMembershipBoard/KnowledgeBase#Canonical_OEM_metapackage_packageset|OEM metapackages]]</nowiki>.''

* TGL/ADL/RPL/MTL
 <pre>
$ sudo apt-get install --no-install-recommends --yes \
    linux-generic-hwe-24.04 \
    linux-modules-ipu6-generic-hwe-24.04 \
    linux-modules-usbio-generic-hwe-24.04
</pre>

 '''''Work In Progress'''''

* LNL/ARL

 <pre>
$ sudo apt-get install --no-install-recommends --yes \
    linux-oem-24.04b \
    linux-modules-ipu6-oem-24.04b \
    linux-modules-ipu7-oem-24.04b \
    linux-modules-vision-oem-24.04b \
    linux-modules-usbio-oem-24.04b
</pre>

== For development only ==

<nowiki>[[https://launchpad.net/~oem-solutions-group/+archive/ubuntu/intel-ipu6|ppa:oem-solutions-group/intel-ipu6]]</nowiki> and <nowiki>[[https://launchpad.net/~oem-solutions-group/+archive/ubuntu/intel-ipu7|ppa:oem-solutions-group/intel-ipu7]]</nowiki> are development PPAs for Intel MIPI camera.

'''Please don't use it in your daily work because it may often break your MIPI camera when under development. Use at your own risk.'''

''You can use the individual OEM archive for your own PCs instead to get the stable Intel MIPI camera support.''

=== Required components ===

* The correct MIPI camera port settings in UEFI BIOS
** It is not controlled by OS but is required for OS.
* ipu6, ipu7, ivsc, icvs or usbio kernel modules, and the related kernel firmwares
* The userspace stack
** ipu6-camera-bins / ipu7-camera-bins
** ipu6-camera-hal / ipu7-camera-hal
** gst-plugins-icamera
* v4l2loopback workaround
** v4l2loopback kernel module
** v4l2-relayd

=== Install the userspace stack manually from the development PPA ===

* Please remove all existing IPU6/IPU7 packages first.

* Basically it just needs to follow the output from `ubuntu-drivers list`. Ex. libcamhal-ipu6, libcamhal-ipu6ep, libcamhal-ipu6epmtl, libcamhal-ipu7x or libcamhal-ipu75xa

 <pre>
$ sudo add-apt-repository ppa:oem-solutions-group/intel-ipu6
$ sudo add-apt-repository ppa:oem-solutions-group/intel-ipu7
$ ubuntu-drivers list
...
libcamhal-ipu6
...
$ sudo apt install libcamhal-ipu6
</pre>

''P.S. You still need the corresponding kernel modules such as v4l2loopback, usbio, ivsc, icvs, ipu6, ipu7, ... What kernel modules it really needs depends on the laptop itself.''

=== Install the userspace stack manually from individual OEM archive ===

* Please remove the usage of ppa:oem-solutions-group/intel-ipu6 and ppa:oem-solutions-group/intel-ipu7 and all existing IPU6/IPU7 packages first.
* Dell on noble
 <pre>
$ sudo apt install ubuntu-oem-keyring
$ sudo add-apt-repository "deb http://dell.archive.canonical.com/ noble somerville"
$ ubuntu-drivers list
...
libcamhal0
...
$ sudo apt install libcamhal0
</pre>
* Lenovo on noble
 <pre>
$ sudo apt install ubuntu-oem-keyring
$ sudo add-apt-repository "deb http://lenovo.archive.canonical.com/ noble sutton"
$ ubuntu-drivers list
...
libcamhal0
...
$ sudo apt install libcamhal0
</pre>

''P.S. You still need the corresponding kernel modules such as v4l2loopback, usbio, ivsc, icvs, ipu6, ipu7, ... What kernel modules it really needs depends on the laptop itself.''

=== Troubleshooting ===

* Remove the usage of ppa:oem-solutions-group/intel-ipu6
  <code>$ sudo add-apt-repository --remove ppa:oem-solutions-group/intel-ipu6</code>
* Remove the usage of ppa:oem-solutions-group/intel-ipu7
  <code>$ sudo add-apt-repository --remove ppa:oem-solutions-group/intel-ipu7</code>
* Remove all MIPI camera userspace components and OEM metapackages
  <pre>
$ sudo apt autopurge oem-*-meta libia-* libgcss* libipu* libcamhal*
$ sudo apt autopurge lib*ipu6*
$ sudo apt autopurge lib*ipu7*
</pre>

== Test the Intel MIPI camera ==

* Use the latest Mozilla Firefox  or Google Chrome to visit <nowiki>[[https://mozilla.github.io/webrtc-landing/gum_test.html|gUM Test Page]]</nowiki>
* Execute this command.
  <pre>
$ sudo gst-launch-1.0 icamerasrc ! autovideosink
  (This command has been proved to fail on many platforms. Please use the browsers to check it instead.)
</pre>

== References ==

* <nowiki>[[Dell]]</nowiki>
* <nowiki>[[Lenovo]]</nowiki>

=== Known Issues ===

* [Bug:1978757] Cheese can't playback the preview on Intel IPU6 camera platform
* [Bug:2076315] Snapshot failed to work with v4l2-relayd/v4l2loopback

=== Supported Sensors ===

 Find the sensor name.

 <code>cat /sys/class/video4linux/*/name</code> 

* hm11b1
* ov01a1s
* ov01a10
* ov02c10
* ov2740
* hm2170
* hm2172
* hi556
* ov02e10

''P.S. If you can not see any sensor name like above, that means your kernel driver is not ready yet. It could be caused by the UEFI BIOS firmware or the kernel driver itself.''

 You can see more sensors under the upstream folders.

* https://github.com/intel/ipu6-camera-hal/tree/main/config/linux/ipu6/sensors TGL
* https://github.com/intel/ipu6-camera-hal/tree/main/config/linux/ipu6ep/sensors ADL/RPL
* https://github.com/intel/ipu6-camera-hal/tree/main/config/linux/ipu6epmtl/sensors MTL/ARL
* https://github.com/intel/ipu7-camera-hal/tree/main/config/linux/ipu7x/sensors LNL
* https://github.com/intel/ipu7-camera-hal/tree/main/config/linux/ipu75xa/sensors
