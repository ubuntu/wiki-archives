{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



== Introduction ==
Image building will be performed with <nowiki>[[apt:--ubuntu-defaults-builder|ubuntu-defaults-builder]]</nowiki> tools. The Italian team developed some side tools for simplifying the debugging and test procedures, since the '''ubuntu-defaults-image''' command builds the image every time from scratch and takes about one hour. 

== Image building ==
Install <nowiki>[[apt:--ubuntu-defaults-builder|ubuntu-defaults-builder]]</nowiki> and <nowiki>[[apt:--dpkg-dev|dpkg-dev]]</nowiki> packages. Italian image will be create using defaults from <nowiki>[[https://launchpad.net/ubuntu-defaults-it|ubuntu-defaults-it]]</nowiki> package available through a <nowiki>[[https://launchpad.net/~ubuntu-defaults-it-team/+archive/ubuntu-defaults-it|PPA]]</nowiki>.

For creating a i386 image run the following command:
<pre>
 $ ubuntu-defaults-image --ppa  ubuntu-defaults-it-team/ubuntu-defaults-it  --locale it --components main,restricted,universe --release precise --keep-apt-components main,restricted --arch i386
</pre>

For sharing the image you will need also to use the '''md5sum''' command for calculating md5 and the <nowiki>[[apt:--zsync||zsync]]</nowiki> package for allowing people to download only the changes in you image with <nowiki>[[https://help.ubuntu.com/community/ZsyncCdImage|zsync]]</nowiki>.

== Additional tools ==
All the additional tools are available through <nowiki>[[https://code.launchpad.net/~ubuntu-defaults-it-team/ubuntu-defaults-it/additional-tools|bazaar]]</nowiki>. If you want to test manual changes in the chroot before applying it to the packages you can follow steps in order. For installing those tools in an ubuntu box you can placing it in the ~/bin directory since it is in the default path. Don't forget to add execution permission to them. ;)

=== ubuntu-defaults-binary ===
Builds the image starting from a chroot created with a previous '''ubuntu-defaults-image''' step. It needs a cleaning step before, that can be performed manually with the '''ubuntu-defaults-binary-clean''' command or automatically by ubuntu-defaults-binary itself.

=== ubuntu-defaults-binary-clean ===
Cleans the directory where ubuntu-defaults-image created the ISO image allowing to work manually inside the chroot for troubleshooting and creating a new image with '''ubuntu-defaults-binary''' step.

=== ubuntu-defaults-chroot ===
It sets up a proper chroot enviroment, start it and clean it after the operations.

== HOWTO: Manual chroot operations ==
Following the steps for manual operating in the chroot for experimenting/debugging purpose.
=== Image building ===
First step is about building the image with the original tool:
<pre>
 $ ubuntu-defaults-image --ppa  ubuntu-defaults-it-team/ubuntu-defaults-it  --locale it --components main,restricted,universe --release precise --keep-apt-components main,restricted --arch i386
</pre>

=== Cleaning binary step ===
The '''ubuntu-defaults-image''' is made with the live-build command. Internally it's based on three steps: bootstrap, chroot and binary. For changing something inside the chroot and create the image again you need to clean the binary step already performed first:
<pre>
 $ ubuntu-defaults-binary-clean
</pre>

=== Operating the chroot ===

For jumping inside the chroot and working on the image tree you can launch the following command:
<pre>
 $ ubuntu-defaults-chroot
</pre>

It will automatically keep clean your enviroment. While inside the chrooted enviroment you can perform changes like install/remove/upgrade packages. When you're done type '''exit''' for going back host enviroment.

=== Creating binary image ===
For creating the ISO image again, based on the existing chroot you can use the '''ubuntu-defaults-binary''' command:
<pre>
 $ ubuntu-defaults-binary
</pre>

----
CategoryLoCoTeams
