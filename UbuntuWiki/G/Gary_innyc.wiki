{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

How To: Share NTFS-3g mounted partition to Windows Boxes in a LAN with Minimal Configuration

Situation: You have a dual boot setup with an NTFS data partition made in WinXP (which you have been using for quite some time and as such have accumulated a lot of data), and it is mounted by the ntfs-3g driver in Ubuntu.  You're not at all concerned with which machines in your LAN can access your data, and are not interested in setting up user accounts authentication through samba.  You just want to share an ntfs partition that holds your data files, and forget the rest...  

Problem: When trying to access the share, symptoms include; repeated prompt for username and password, a message that tells the machine they have no permission to access the share, and so on and so forth. The official documentation way works, but at the expense of your personal time it will take figuring out individual usernames and passwords for each computer that will access your data, and editing and configuring as suggested by the official documentation... per user, as well as your relative learning curve whatever that may be.

The gist:  I just want to share files, and I trust all my computers at home because they are my computers that I manage individually anyway, and I limit my shares to (read-only) access so friends in my LAN can copy some files whenever he/she chooses, but at the same time, can't muck up my files.  If I wanted files from other computers in my LAN, I'll copy it myself.

If the above fits your scenario, the following may be of interest to you (offered in verbose and mini bullet list solutions):
-------------------------------------------------------------------------
Verbose Solution:

1) Although ntfs-3g is installed by default in Gutsy Ubuntu, you need to install ntfs-config from the repository.  Post installation, run ntfs-config @ Applications / System Tools / NTFS Configuration Tool.  Check that you want to be able to write in your internal drives.  Enabling this will force a remounting of your ntfs partition(s) with (full) read-write capability.

2) Make a share, make sure you are in the same workgroup as the computers that access your files.  A problem occurs after you created the share.  Even after you create the share, other users still cannot access it, though they can probably see it as they browse your network.  They get rejected through the authentication process irregardless of whether they entered your local username & password, or even get a complete no permission to access prompt.  Note: I made my share by going to /media/whatever_your_share_partition is, right clicked it, and shared it with the SMB protocol).  Whichever way you create a share; whether it be by the way I just described it, or by setting it in System / Administration / Shared Folders, the end product is an entry in smb.conf at the very bottom of the file.  smb.conf is located in /etc/samba/  

3)  you have to edit smb.conf  (edit both, the entry made after creating the share, and some default settings that need to be changed to allow simplified sharing)
just Alt+f2 and enter:   gksudo gedit /etc/samba/smb.conf
NOTE: make sure you make backups before editing smb.conf
NOTE: you can always type:  testparm in the terminal just to test for syntax errors if there are any, after saved changes.

3A)  Changing the default security authentication from user to share
3a1)  scroll down until you see the entry ; security = user  
3a2)  remove the semicolon to enable this line, and replace user with share 

3B)  Enabling the guest = nobody line by removing the semicolon commenting convention 
3b1)  scroll until you see the entry ; guest = nobody
3b2)  just remove the semicolon in front of guest = nobody to enable the line

3C)  Allowing guest access to your share without need for username and password
3c1)  scroll to the very bottom of smb.conf , you'll find a few lines that represent your share that you created earlier.  Note the name in the brackets is what you put in the Comment section of the share you made.  
3c2)  at the very bottom, make sure you have the line "guest ok = yes"  but without quotations.  If you don't, then add it to the very bottom yourself.  
Also, make sure Writable = no if you want to to share with read-only access.

that's it... save the changes, go to a terminal and run testparm.  if all is okay, then restart samba in the terminal by entering:
sudo /etc/init.d/samba reload

Test your share on a Windows box.  Browse your network.  If all is good, you should be able to see your share, open it, and be able to read the data, no fuss about permissions or accounts.  

----------------------------------------------------
Non-Verbose Solution:

1) install ntfs-config from the repository, run it and enable write for internal drives
2) make a share, name it whatever you want in the comment section (make sure you're in the same workgroup as the computers you are sharing with)
3) press alt+f2, type in:   gksudo gedit /etc/samba/smb.conf
4) in smb.conf, remove semicolons in the following 2 lines:
; security = user   to   security = share
; guest = nobody  to   guest = nobody

5) in smb.conf, make sure your share has guest access... 
scroll down to the very bottom, make sure that:
guest ok = yes       is present, if not, then add the line yourself.
if you want read-only access, make sure writable = no 
6) save, and to restart samba in terminal:  sudo /etc/init.d/samba reload

----------------------->> hope this helps <<---------------------------

I'm no guru, you could even call me noobish, but I am lazy but driven, which is why I must find an easier way...

- gary_inNYC
----
CategoryForum CategoryDocumentation CategoryHomepage
