{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


=== What is it? ===

The gozk project enables <nowiki>[[http://golang.org|Go]]</nowiki> programs to communicate with a
<nowiki>[[http://hadoop.apache.org/zookeeper/|ZooKeeper]]</nowiki> cluster.

It was developed within Canonical as part of an experiment related to using
the Go language with the <nowiki>[[https://juju.ubuntu.com|juju]]</nowiki> project.

=== API documentation ===

The API documentation is currently available at:

    http://go.pkgdoc.org/launchpad.net/gozk/zookeeper

=== Example ===

Here is a simple example which connects to !ZooKeeper, waits for the session to
be established, and attempts to create a node:
<pre>
package main

import (
    "launchpad.net/gozk"
)

func main() {
    zk, session, err := gozk.Init("localhost:2181", 5000)
    if err != nil {
        println("Couldn't connect: " + err.String())
        return
    }

    defer zk.Close()

    // Wait for connection.
    event := <-session
    if event.State != gozk.STATE_CONNECTED {
        println("Couldn't connect")
        return
    }

    _, err = zk.Create("/counter", "0", 0, gozk.WorldACL(gozk.PERM_ALL))
    if err != nil {
        println(err.String())
    } else {
        println("Created!")
    }
}
</pre>

=== Installing ===

Assuming you have the !ZooKeeper library and headers installed in
your system (tested with Ubuntu), you can use goinstall:
<pre>
$ sudo apt-get install libzookeeper-dev
$ goinstall launchpad.net/gozk
</pre>

=== Source code ===

To obtain the source code, use <nowiki>[[http://bazaar.canonical.com|Bazaar]]</nowiki> to download it from Launchpad:
<pre>
$ bzr branch lp:gozk
</pre>

=== Reporting bugs ===

Please report bugs at:

    https://launchpad.net/gozk

=== Running tests ===

To run tests, you'll have to define at least the `$ZKROOT` environment variable,
and point it to the root of your !ZooKeeper source build (`$ZKROOT/bin/zkServer.sh`
should exist).

Then, install gocheck:
<pre>
$ goinstall launchpad.net/gocheck
</pre>

Once that's in place, and any other necessary environment variables are defined
(see above), run tests with `gotest` as usual:
<pre>
$ gotest
</pre>

Note that a !ZooKeeper server will be dynamically started and stopped by the
test suite.

=== License ===

gozk is licensed under the LGPL.

=== Contact ===

This project is being developed under the <nowiki>[[https://launchpad.net/ensemble|Ensemble]]</nowiki> project at <nowiki>[[http://www.canonical.com|Canonical]]</nowiki>.

To get in touch, send a message to the Ensemble mailing list at: <ensemble@lists.ubuntu.com>
