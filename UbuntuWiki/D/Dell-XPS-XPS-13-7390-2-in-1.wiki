{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== Introduction ==

This page should give some information you need about running Ubuntu on a <nowiki>[[https://www.dell.com/en-us/shop/cty/pdp/spd/xps-13-7390-2-in-1-laptop/x27390dnkws|Dell XPS 13 7390 2-in-1]]</nowiki> laptop.

Dell XPS 13 7390 2-in-1 is not the same model with <nowiki>[[https://certification.ubuntu.com/desktop/models?query=7390&category=Desktop&category=Laptop&level=|XPS 13 7390]]</nowiki>. Dell XPS 13 7390 2-in-1 IS NOT certified with Ubuntu.

== Installation gotcha's ==

* Dell does not preload Ubuntu with the machine, this model is not certified by Canonical.
* The system firmware is not published on LVFS, the user need to download the exec files from Dell support website.
* XPS 13 7390 2-in-1 is using Intel Ice Lake processor, Ice Lake is first supported by <nowiki>[[https://packages.ubuntu.com/eoan/linux-generic|5.3 Ubuntu generic kernel]]</nowiki> with 19.10 or <nowiki>[[https://packages.ubuntu.com/bionic/linux-oem-osp1|linux-oem-osp1]]</nowiki> kernel with 18.04 LTS.
* The default BIOS setting is designed for Windows, SATA mode needs to be set to AHCI for Linux
** To do this while keeping dual boot: run msconfig, edit the default Windows 10 boot profile in the second tab, "Boot", select "Safe boot" in the "Boot options" box
** Reboot into BIOS settings (F2), set boot mode to AHCI instead of RAID
** Reboot into Windows, run msconfig, and disable "Safe boot" in Boot > Boot options
   
== Hardware Support Matrix ==

{| class="wikitable"
|-
| '''HARDWARE'''
| '''Eoan 19.10'''
|-
| '''Generic Ubuntu kernel'''
| {OK}
|-
| '''Display'''
| {OK}
|-
| '''Keyboard and Hotkeys'''
| {OK}
|-
| '''Trackpad'''
| {OK}
|-
| '''Wireless ethernet'''
| {OK}
|-
| '''Wired ethernet '''
| {i} Not built-in ethernet
|-
| '''Audio Playback'''
| {OK}
|-
| '''Microphone'''
| {OK}
|-
| '''Camera'''
| {X}
|-
| '''Multitouch screen'''
| {OK}
|-
| '''HDMI'''
| {OK}
|-
| '''USB 3'''
| {OK}
|-
| '''Thunderbolt'''
| {OK}
|-
| '''Fingerprint Reader'''
| {X}
|-
| '''Suspend'''
| {i} has issue to resume.
|}

Legend :

{OK} = OK ; {X} Unsupported ; {i} = Configuration Required; X-( = Only works with extra software componetns from 3rd party

=== Issue has been fixed ===
* The BIOS version 1.0.6, 1.0.9, 1.0.13 (or newer) is not compatible with Linux. intel-lpss driver conflicts with write-combining MTRR region - https://bugs.launchpad.net/bugs/1845584
* Intel 1650s/Wi-Fi 6 AX201 cannot connect to 802.11AX networks https://bugs.launchpad.net/hwe-next/+bug/1845138
* BT advertising packet wakes up the system from S3 and suspend-to-idle - https://bugs.launchpad.net/bugs/1844247
* It takes long time to wake up from s2idle on Dell XPS 7390 2-in-1 - https://bugzilla.kernel.org/show_bug.cgi?id=205119

=== Known issues ===

* Doesn't wake up from suspend on BIOS 1.0.13 with up-to-date 19.10 (2019-12-01) – https://askubuntu.com/questions/1183716/ubuntu-19-10-on-dell-xps-13-2-in-1-7390-suspend-problem
** Workaround: add `pcie_aspm=off` to kernel cmdline (add to GRUB_CMDLINE_LINUX in /etc/default/grub, and run update-grub) – this will negatively impact power consumption
* Icelake IPU4 webcam doesn't work (see below)
* Brightness auto-adjust is too aggressive; workaround: disable auto-adjust and adjust manually
* While regular suspend/resume works, deep sleep comes back from suspend but doesn't restore display
** https://bugs.freedesktop.org/show_bug.cgi?id=112143
** https://bugzilla.kernel.org/show_bug.cgi?id=205205
** Seems to be a known issue with Dell BIOSes https://gitlab.com/emrose/xps13-7390_debian/merge_requests/4#note_242414579
* Log is spammed by sensor hub messages on up-to-date 19.10 (2019-12-01) – https://bugzilla.kernel.org/show_bug.cgi?id=204837 https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1818547
** Workaround: silence these messages with a /etc/rsyslog.d/10-hidsensor.conf with contents below and restart rsyslog (sudo systemctl restart rsyslog)
<pre>
:msg, contains, "hid-sensor-hub 001F:8087:0AC2.0003: hid_field_extract() called with n (192) > 32!" stop
</pre>

==== Camera ====
Intel Icelake integrated the IPU 4th Generation Gen IPU with on-die MIPI interface, which is not supported by Linux.

The current linux mainline 5.3 supports only Intel Image Processing Unit 3, tested on Kaby Lake platforms (U/Y processor lines). Since the IPU4 contains both scalar processor and vector processors, the lowest layer of the software stack is the firmware that runs on those cores. The IPU4 is a single PCI device but logically it is comprised of two independent systems: the input system (ISYS) and the processing system (PSYS). As such, each has its own driver.

The Linux camera stack is heavily reusing Android and keeps IPU FW, Kernel drivers, libiacss, and advanced 3A libraries exactly same as Android. An alternate Linux camera HAL has been introduced into the stack to provide a unique interface for upper-layer software. Specific in Yocto Linux, GStreamer is required as the multimedia framework where a camera source plugin for IPU4 will be needed.

=== HiDpi issues ===

* Boot menu uses a tiny font (GRUB menu)
** Best way to address this would be to have GRUB automatically select the right font, but GRUB is kept small on purpose, or to install a larger GRUB font when installing Ubuntu
** Workaround: let the default GRUB terminal driver, gfxterm, switch to a supported mode such as 1600x1200 (NB to list video modes, disable secure mode in the BIOS and run the videoinfo command in the GRUB shell accessed by pressing "c" from the GRUB menu):
*** Set `GRUB_GFXMODE=1600x1200` in `/etc/default/grub` and run `update-grub`

* Splash screen uses too small logo and somewhat too small fonts (Plymouth)
** Plymouth has logic to detect the proper scaling to apply, but it's still too small; workaround by forcing the scale on the kernel cmdline:
*** Add `plymouth.force-scale=3` to `GRUB_CMDLINE_LINUX=` in `/etc/default/grub` and run `update-grub`

* Console terminal uses too small fonts
** Note that the package shipping the Ubuntu Monospace font for the terminal, `fonts-ubuntu-console`, is not installed by default and only ships 8x16 fonts
** Change the font by running `dpkg-reconfigure console-setup`, select a font face that supports a larger font size, for instance the `Terminus` font, and select a large font size such as `16x32`; you need to reboot for the new font to be set

=== External Links ===

* <nowiki>[[https://wiki.archlinux.org/index.php/Dell_XPS_13_2-in-1_(7390)|Dell XPS 13 2-in-1 (7390) - ArchWiki]]</nowiki>
* <nowiki>[[https://www.reddit.com/r/Dell/comments/cx0fkc/xps_13_2_in_1_7390_linux_boot_attempt/|XPS 13 2 in 1 (7390) - Linux boot attempt]]</nowiki>
* <nowiki>[[https://www.phoronix.com/scan.php?page=article&item=dell-xps7390-ubuntu1910&num=1|Ubuntu 19.10 Provides Good Out-Of-The-Box Support For The Dell XPS 7390 Icelake Laptop - Phoronix]]</nowiki>
* <nowiki>[[https://github.com/intel/intel-camera-drivers/tree/master/drivers/media|Joule IPU4 drivers]]</nowiki> - these drivers are the only public IPU4 drivers as of 2019-12-01, but they need non-trivial porting to build against 5.3
