{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



=== Status ===

* Priority: HighPriority
* People: ColinWatsonLead, MartinPittSecond
* Contributors:
* Interested: MarkShuttleworth, MattZimmerman, JuanjeOjeda, AndrewFitzsimon
* Status: ApprovedSpecification, DistroSpecification
* Branch: n/a
* Pending: MarkShuttleworthQueue
* UduSessions: 2(0)

=== Introduction ===

This specification describes our strategies to allow for the effective branding of Ubuntu and derivatives. Some branding can be attained without affecting packages, other branding initiatives will require derivatives to rebuild or even modify and rebuild packages. We will also refer to aspects of Rosetta that should affect distro branding.

=== Rationale ===

=== Scope and Use Cases ===

* Provide for branding or neutralization, as appropriate, of the following components:
** CD
** Boot loader splash image
** Boot loader text
** Installer
** Debconf templates
** Package selection
** Help texts
** Dialogs
** Live CD Installer (UbuntuExpress)
** Artwork (Logos, images..)
** Help texts
** Dialogs
** Live CD
** "Starting Ubuntu..."
** Base
** Archive keyring?
** Debconf templates?
** lsb-release? (hard)
** Boot
** USplash image
** "Starting Ubuntu..."
** Grub menu entry
** Grub theme
** Application defaults
** GDM theme
** Splash graphic
** Default wallpaper
** Default browser homepage
** Default browser bookmarks
** Gnome/Kde theme
** Menu
** Apps on "Add/Remove programs"
** Icons on panel and desktop
** "About Ubuntu" (System Menu)
** Others
** Debootstrap script

=== Implementation Plan ===

We have discussed several approaches to branding, and in which cases they are useful. By necessity, our plan to improve the branding situation for derivatives is a combination of these approaches.

The Rosetta team has done some initial work to mark branded strings.

Many strings can simply be neutralized. This is the simplest case to handle, and subsequently requires no effort to re-brand for each derivative. We should apply this technique wherever possible, although it does not always make sense: for instance, the installer does need to talk about the distribution it's installing at some point. Similarly, <nowiki>[[PackageSelection|development work]]</nowiki> is proceeding on debootstrap to avoid having to rebuild debootstrap simply to change the contents of the base system.

Runtime substitution strategies are appropriate for simple circumstances (e.g., Apache version string, Mozilla version string). In some cases, we can use the lsb_release command and have a reasonable chance of having the code passed upstream. Since it is not always appropriate to call an external program, we will need to add a `liblsb-release` to provide the functionality of `lsb_release` as a library and use it for identification strings.

A number of items of branding can be refactored by collecting branding data into central locations. This works well for artwork and for gconf configuration data.

Some items really require build-time branding. There are hard problems to be solved in the packaging system and in Launchpad before we can manage a separate build for every derivative. This isn't achievable for Breezy, so for the near term we must avoid it as far as possible.

The hardest part of the problem is branding human-readable strings. These must be translated, so retranslation is required after branding them. Upstream software rarely uses distro-specific branding, so we can deal with that on a case-by-case basis. Most branding applies to debconf templates, and most of that is in the installer; other packages, and indeed much of the installer as well, can and should be neutralized. For the remaining cases, we have the following (non-exclusive) options:
* Translate the remaining few cases manually to properly catch linguistic issues (plurals, genders, tenses, etc.). This would require additional complexity and effort in order to avoid duplicating work across distributions which target the same languages.
* Try to catch the most common cases with a global macro (debconf already supports per-package macro substitution).
* Use special-case macros, but since they have to be maintained somehow, this could create more problems than it solves.

==== Tasks that need to be done once and for all ====

* Use `lsb_release` at build time in `debian-installer` to display correct boot loader text.
* Use `liblsb-release` or `lsb_release` in initrd build for "Starting $distro...", and in the bootloader installers for generating appropriate menu entries.
* Use `lsb_release` in `reportbug` and similar tools to select the correct bug tracker.
* Neutralize debconf templates in the installer (also consider using a global macro).
* Move `.desktop` file for "About Ubuntu" into `ubuntu-docs`.
* Possibly move default browser bookmarks into `ubuntu-artwork`?
* Split the `gnome-app-install` package into two:
## Just with the program and so on
## The branding one, with all the `.desktop` and `applications.menu`.

==== Tasks that need to be done for every derivative ====

Even after the above, it still remains to make some changes to source packages. We propose to create a tool to perform these changes in a guided fashion, with feedback from the user. This could be a script that uses HCT to make source package changes and publish them to a personal APT archive. (There are already similar projects around, see <nowiki>[[http://software-libre.org/moin/Meta/en/BrandingSystem|Branding System]]</nowiki>).

The following changes need to be made:

* Adapt strings in `lsb-release`.
* Change boot loader splash image in `debian-installer` (only required for customizers that care about the splash image on netboot installations).
* Adapt and translate remaining strings in `debian-installer`.
* Add a new `$distro-artwork` package which uses `update-alternatives` to provide a common path for all files, so that gdm etc. can find the files.
* Add a new `$distro-docs` package if desired.
* Package selection: Create/change seeds, add new $distro-meta package, configure installer to install it; $distro-meta package can be updated from the seeds at build time.
* Rebuild `debian-installer` for the distribution.

Having done this, Launchpad can perform CD builds (once it knows how to do this); it is simple to replace the splash image and bootloader text with appropriate branding at CD build time.

=== Outstanding Issues ===

==== Considerations for future development ====

* Live CD Installer (UbuntuExpress)
** Artwork (logos, images..)
** Help texts
** Dialogs
* Boot
** USplash image

==== More discussion required ====

* Allow overriding application names in `.desktop` files, but be careful not to make the system think that all applications in main are installed!

==== UDU BOF Agenda ====

* Refactoring desktop branding
** gconf schemas, etc. (<dist>-branding)
* Base
** Archive/cdimage keyring? This may stop being an issue; see <nowiki>[[CDRomAuthentication]]</nowiki>
* Application defaults
** Apps on "Add/Remove programs": all branding here is currently in gnome-app-install

==== UDU Pre-Work ====

* Review <nowiki>[[http://www.ubuntu.com/wiki/DistributionDefaultsAndBranding|DistributionDefaultsAndBranding]]</nowiki> against the above

=== Implementation Notes ===

2005-05-10 ColinWatson: Added `lsb-release-udeb`. Initial work on using `lsb_release` in the `debian-installer` build process to get the distribution name.

2005-06-03 ColinWatson: Debian branding removed upstream from base-installer, partman-auto-lvm, partman-efi, quik-installer, and yaboot-installer.

2005-07-20 ColinWatson: Patch accepted upstream to base-config that removes huge piles of Debian branding, although not quite all of it. Stopped mirror/suite from being displayed, which allows removal of a difficult-to-brand string from all translations of base-config, cdrom-detect, choose-mirror, and iso-scan.

2005-08-05 ColinWatson: Debian branding removed upstream from anna, partman-target, and prebaseconfig.

2005-08-07 ColinWatson: choose-mirror changed upstream to read the preferred distribution from /etc/lsb-release.

----
CategoryUdu, CategorySpec, CategoryDerivativeTeam 
