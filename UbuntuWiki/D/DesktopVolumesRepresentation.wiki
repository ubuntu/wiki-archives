{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


''Please check the status of this specification in Launchpad before editing it.  If it is Approved, contact the Assignee or another knowledgeable person before making changes.''

* '''Launchpad Entry''': UbuntuSpec:desktop-volumes-representation
* '''Packages affected''': gnome-vfs2, hal, ubiquity?

=== Summary ===

This specification is about providing a consistent and user-friendly representation of the drives and volumes across the desktop.

=== Release Note ===

The drives and volumes representation has been made consistent across the desktop and their naming has been simplified.

=== Rationale ===

At the moment, drives and volumes are not represented in the same way across the desktop (computer location, fileselector, places menu), and the naming is confusing in some cases.

=== Use Cases ===

* Martin has several Windows partitions mounted on his desktop. They have meaningful names which makes it easy for him to find the one where his music is stored.

=== Design ===

Naming to use on the desktop:
* use the label if there is one available (also for unmounted partition)
* if there is no label, use the hal vendor information
* if there is no vendor information, append the /dev device name

Volumes to hide:
* volumes that can't be browsed by the user (EPERM)
* volumes that are automounted at boot in a "standard known directory" (/home, /var, /usr, etc.)
* add a layer in gvfs/gnome-vfs to hide some of the volumes => the user can click Remove in nautilus to hide the volume

When an user mounts a volume without a label, ask him for one.

Look if ubiquity is setting label to partitions, if not teach it to do it
* We deliberately stopped doing this, and I think it would be a really bad idea to start again. Labels are for the system administrator to set. If you try to set them automatically, then either you get conflicts between different operating systems installed on the same computer (this really happened - both Red Hat and Debian automatically labelled the root filesystem "/", which broke one or the other of them randomly), or you get silly autogenerated names with numbers on the end that look odd. Plus, there's no standard scheme for generating labels so we're almost certain to conflict with somebody else's scheme for doing the same kind of thing. I'd strongly suggest using labels if they exist, but otherwise doing something else that '''doesn't''' involve writing a string into the filesystem metadata. --ColinWatson
** Would labels like "/ (Ubuntu)" avoid this problem? Also, do you have more details on why RH and Debian were broken by the automatic labels? Do they depend on labels to do some stuff (this sounds wrong)? -- VincentUntz
** No, it wouldn't avoid the problem because multiple installations of Ubuntu on the same machine are not uncommon. There's a limit on label length (ext2 is limited to 16 characters, at least) so there's only so far we can take automatic disambiguation. See <nowiki>[[http://bugs.debian.org/310754|Debian #310754]]</nowiki> for the problems caused by this. While you say "this sounds wrong", the primary use of labels has in fact always been to mount filesystems by label. If you want to save an automatically-generated description somewhere, I do not think that this is the best field to use. Is it really necessary to save the automatically-generated description? It seems likely that it would get less out of date if you simply generated it automatically each time you needed it, unless a label has been explicitly set. --ColinWatson

Make partitions editor set label on partitions they create (gparted?)
* Same issue as for the installer. --ColinWatson
** Well, in gparted, there can be a small entry with the label name when creating the partition, and the user can change the automatically computed label before creating the partition. -- VincentUntz
** True, though gparted is a pain to modify and I question whether this is worth it since we no longer use it by default. In any case, this would still not apply to automatic partitioning. --ColinWatson

Add a way to change the label easily (https://bugs.launchpad.net/ubuntu/+source/nautilus/+bug/61966) (https://bugs.launchpad.net/ubuntu/+source/nautilus/+bug/68924)
* This, on the other hand, would be pretty good, since it's up to the system administrator. --ColinWatson

=== Implementation ===

* Modify gnome-vfs to display the /dev entry name if there is no label nor vendor information available
* Add a method to hal to change a volume label (bug #68924)
* Modify gnome-vfs and nautilus to use this method

=== Test/Demo Plan ===

----
CategorySpec
