{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== 24.04 ===

The followings are the test plans for testing gnome-initial-setup.

==== First Boot Initialization ====

This test case is intended for OEM or pre-bootstrapped image such as Raspberry Pi image, where the account setup is after the installation.

===== Prepare and launch =====

<!> '''Do not use a production system to run this test!''' To test this behavior, we need a system that has no user account created, that means all users needs to be deleted for the test.

To delete current user, first we have to set up password for root:

<pre>
sudo passwd
</pre>

Then log out current user, switch to text terminal by Ctrl-Alt-F3, login as root, then:

<pre>
deluser --remove-home [username]
systemctl reboot
</pre>

If `deluser` failed, ensure the user is not logged in, wait and try again.

===== Page 1: Welcome (locale selection) =====

* A page with Ubuntu logo on top, a rotating ''Welcome'' and its translations below the logo, a search bar for the locales, and list of common languages on the bottom should be shown, and an option of vertical ellipsis (⋮) on the bottom, which can be expanded to more available languages.

* Click on the locale to switch between languages, and the language for the ''Next'' button should change.  Try it for a couple more times to see whether it would crash.

* Remember what you selected and click ''Next''.

===== Page 2: Typing =====

* Offers a list of available keyboard layouts and a search bar for the keyboard layouts. An option of vertical ellipsis (⋮) is on the bottom, which can be expanded to more available keyboard layouts.

* Select a different keyboard layout, remember what you selected.

* Click ''Preview'' next to it will show a window of the selected keyboard layout.

* Click ''Next''.

===== Page 3: EULA =====

<!> EULA page (as a requirement for OEM systems) needs extra files installed in the system.  This page will be skipped if PDF files under the paths denoted below are not available.

* If there is a locale-bound EULA file available at `/usr/share/desktop-provision/eula/EULA_[locale].pdf`, a localized EULA page should be displayed.

* If the above is not available, but there is a file `/usr/share/desktop-provision/eula/EULA.pdf`, there will be a EULA page displayed.

* If no, this page would be skipped entirely.

* The top-right button should be ''Accept''.  If the EULA is shown, click the button to continue.

===== Page 4: Network (Wi-Fi) =====

<!> If the system does not have any Wi-Fi interface, this page will be skipped.

* A list of Wi-Fi access points are listed.  If the one you can connect is available, select one and enter passphrase, and see whether it can be connected.

* Click ''Next'', or ''Skip'' if not connecting to an access point.
 
===== Page 5: Time Zone =====

* A map and a search bar for the cities are available.

* Note that, if no city is selected, ''Next'' button should be greyed out.

* Type a city name into the search bar, select one and hit Enter, the correlated city (might not be the same you selected, but has the same timezone) should be pinned, with city name and timezone information annotated.

* Click ''Next''.

===== Page 6: About You (account creation) =====

* Text fields to input ''Full name'', ''Username'', and ''Computer'' are available, and a button to change user icon.

* Click the edit button besides user avatar, a grid of stock photos should be shown.  Click the image to change the photo.

* Type a name into ''Full Name'', the username and computer name should be changed to a lowercase of the Full Name, unless it does not begin with a letter.

* Change Username so it begins with a number, there should be an error ''The username must start with a lower case letter from a-z.''

* Change Username so it includes special characters (like +), there should be an error ''The username should only consist of lower case letters from a-z, digits, and the following characters: - _''

* Change Computer (name) so it begins with a number, it should be allowed.

* Change Computer (name) so it includes special characters (like +), there should be an error ''The hostname should only consist of lower case letters from a-z, digits and a hyphen: -''

 <!> There is a known issue that the computer name cannot be the existing name this system was set to, which will give out an error denoting the name is used on the network.  This issue can be ignored.  Please change the name to continue.

* If any of the settings do not pass, the ''Next'' button should be greyed out.

* Set the above settings to a passing combination, and click ''Next''.

===== Page 7: Password =====

* Two password input with a security indicator should be shown.

* Type the password on the first field.

* Click the eye on the right side of the input, it should show the password you typed.

* The security indicator should show the strength of the password you typed.

* Type a different password on the second field. A message should appear ''The passwords do not match'', and the ''Next'' button should be greyed out.

* Type the same password on the second field, and click ''Next'' to continue.

===== Page 8: Setup Complete =====

* Click ''Start Using Ubuntu'', which should lead user to the desktop, and immediately lead to Desktop Welcome window.

===== Check the settings =====

* Open ''Settings'' (gnome-control-center), and check the followings:

** Go to ''System'' -> ''Region & Language'', under ''Your Account'', the selected language and formats are correct.

** Go to ''System'' -> ''Date & Time'', check the timezone is correct.

** Go to ''System'' -> ''Users'', the selected user icon and the name and the selected language are correct.

** Go to ''Keyboard'', check ''Input Sources'', the selected keyboard layout is used.

** Go to ''Wi-Fi'', the access point is connected (if available and selected).

* Logout and login with the password you set, you should be able to login with the password.

==== Desktop Welcome ====

This is displayed on the first user entering desktop environment, in order to setup Ubuntu Pro, asking user about telemetry, and introduce user to the Store.

===== Prepare and launch =====

<pre>
sudo ua detach --assume-yes
XDG_CURRENT_DESKTOP=ubuntu /usr/libexec/gnome-initial-setup --existing-user
</pre>

===== Page 1, welcome =====

* A welcome page stating the Ubuntu version and showing its mascot.

* Clicking show changelog opens a browser with the release notes of corresponding distribution.

* Click ''next''.

===== Page 2, offers Pro =====

* Offers Ubuntu Pro, by default ''skip for now'' is selected.

* Disconnect from the Internet, the first radio button must become gray and insensitive; A warning message tells you that an Internet connection is required for that option. Connect to the Internet.

* Click ''next'' and, on the next page, that is not an Ubuntu Pro page, click ''previous''. You are now back to the Ubuntu Pro page.

* Click the ''enable Ubuntu Pro'' radio button and ''next''.

===== Page 3, attach to Pro =====

 <!> Make sure /usr/lib/policykit-1-gnome/polkit-gnome-authentication-agent-1 is running.

* Choose ''add token manually'' and type a character in the box, observe that ''next'' lights up. Click it. An authentication box shows up asking for password, you give it and the program says invalid token.

* Choose ''attach machine via Ubuntu One account'', ''next'' becomes insensitive. Do as instructed and observe that eventually "valid token" appears and ''next'' lights up. Click ''next'' and maybe the authentication box shows up (depends on whether the timeout from the previous authentication has elapsed), in which case you give your password and it starts attaching. While the operation is not complete a spinner spins. Once complete, the program jumps to the next page

===== Page 4, Pro service list =====

* Your contract information is shown, with your subscription, your enabled services and available services, which match the information from <code>ua status</code>.

* ''Previous'' takes you back to page 3, whose elements are insensitive with the exception of the header bar buttons, which also work as expected (i.e. takes you to pages 2 and 4). Go back to page 4 and click ''next''.

===== Page 5, telemetry =====

* Explains that submitting your data helps improve Ubuntu.

* Click ''show the first report''. A transient window appears with the contents of the to-be-sent report. Close it.

* Click ''legal notice''. https://ubuntu.com/legal/systems-information-notice (or equivalent) opens in your browser.

 <!> Use <code>rm -rf $HOME/ubuntu-report</code> lest nothing is done in the next step because you already performed it in the past.

* Whatever the option you choose, the page should advance immediately upon ''next''.

===== Page 6, software =====

* Tells you about App Center, where more applications can be installed. A picture with App Center's and other programs' logos is in the center of the page.

 <!> If snap-store is not installed, do it: <code>snap install snap-store</code>.

* Click ''open App Center'', App Center opens.

----
CategoryDesktopTestPlans
