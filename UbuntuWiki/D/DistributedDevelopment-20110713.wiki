{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

<nowiki>[[DistributedDevelopment]]</nowiki> steering meeting held in <code>#ubuntu-meeting</code> on 2011-07-13 at 1200 UTC. '''<-- note time change'''

Chair: barry

== Apologies ==

== Agenda ==

* Attendance/apologies
* Action items
** jelmer to study the feasibility of merge helper (<nowiki>[[https://bugs.launchpad.net/bzr-builddeb/+bug/608675|bug 608675]]</nowiki>) as an intermediate step for quilt support
** jelmer to look into <nowiki>[[https://bugs.launchpad.net/udd/+bug/609187|bug 609187]]</nowiki> (warn when package import is out of date)
** Riddell to file bug saying that packaging branch pages on code.lp.net should be better labeled '''(done)'''
* Package importer progress
* Get rid of `bzr mark-uploaded` ?
* Bugs of interest:
** See http://people.canonical.com/~mbp/kanban/canonical-bazaar-kanban.html
* Any other business?

== Summary ==

* goal is to reduce import failures to under 200 by start of october
* jelmer made progress on support for multiple upstream tarballs
* merge preview diffs are available at http://package-import.ubuntu.com/merges/ (but causes some import failures, maybe move it out-of-line?)
* vila working on !NoFinalPath bug fix
* post-mortem thread on lp/bzr update and its effect on bzr-svn
* poolie plans to stop the package importer pretending to be james_w

== New Actions ==

* jelmer to post summary of user visible changes with lp rollout
* jelmer to post feature summary about inline diffs
* riddell to update udd docs to use <code>bzr tag</code> instead of <code>bzr mark-uploaded</code>

== Log ==

<pre>
<barry> #startmeeting
<MootBot> Meeting started at 07:01. The chair is barry.
<MootBot> Commands Available: [TOPIC], [IDEA], [ACTION], [AGREED], [LINK],
          [VOTE]
<jelmer> hi barry!
<barry> jelmer: hi!
<poolie> hi barry, jelmer
<barry> hi poolie 
<barry> do you know if anyone else is joining us today?
<barry> well, anyway, let's get started
<barry> [TOPIC] agenda
<MootBot> New Topic:  agenda
<barry> [LINK] https://wiki.ubuntu.com/DistributedDevelopment/20110713
<MootBot> LINK received:
          https://wiki.ubuntu.com/DistributedDevelopment/20110713
<barry> [TOPIC] action items  [08:03]
<MootBot> New Topic:  action items
<barry>    * jelmer to study the feasibility of merge helper
        (<nowiki>[[https://bugs.launchpad.net/bzr-builddeb/+bug/608675|bug 608675]]</nowiki>)
        as an intermediate step for quilt support
<barry> 
<ubottu> Ubuntu bug 608675 in bzr-builddeb "merge-package should have support
         for manipulating quilt v3 patch stacks" [High,In progress]
<jelmer> I've been away for the last week so haven't spent any time on this
         since  [08:04]
<jelmer> at the last meeting (at the rally) we discussed it, and my
         conclusions there were that it seems feasible and I've started
         working on implementing it.
<barry> jelmer: awesome.  we'll just keep it on for next time  [08:05]
<poolie> that's great
<barry>    * jelmer to look into
        <nowiki>[[https://bugs.launchpad.net/udd/+bug/609187|bug 609187]]</nowiki> (warn when
        package import is out of date)
<ubottu> Ubuntu bug 609187 in Ubuntu Distributed Development "users are not
         warned when branching ubuntu:foo (or lp:ubuntu/foo) and the package
         import of foo is out of date" [High,Triaged]
<poolie> there was some discussion recently of this being useful even for
         non-quilt branches
<poolie> hm
<poolie> or, more generally, of being able to merge both the patched and
         unpatched forms
<jelmer> jam mentioned on IRC earlier that he's working on bug 609187
<poolie> barry, i think jam and others worked on that  [08:06]
<poolie> oh, and maxb in london
<barry> very nice.  so, in progress?
<jelmer> yep
<jelmer> should perhaps be owned by jam though?
<james_w> hi  [08:07]
<maxb> jam has taken my proof of concept "How to talk to LP without
       launchpadlib" and is pursuing it
<barry> sure, i can update that.
<poolie> hi maxb
<barry> hi maxb 
<barry> maxb: do you just make straight up http calls?
<poolie> the point of avoiding lplib is that it's much faster to just make the
         single call we care about  [08:08]
<poolie> yes
<barry> makes sense
<maxb> Minimizing roundtrips and costly WADL downloads really matters if we're
       going to do this interactively
<barry> +1
<Pendulum> 
<barry>    * Riddell to file bug saying that packaging branch pages on
        code.lp.net should be better labeled  [08:09]
<barry> anybody know if the bug has been filed?
<poolie> istr that he did
<jelmer> ... and fixed the bug :)
<poolie> and, perhaps he worked on it at the rally
<poolie> hooray
<barry> yay!
<barry> do you happen to have the bug #?
<poolie> bug 797688  [08:11]
<ubottu> Launchpad bug 797688 in Launchpad itself "Ubuntu Packaging Branches
         Should be Labeled Clearer" [Low,Fix released]
         https://launchpad.net/bugs/797688
<barry> thanks (you're quicker at searching than me at this hour :)
<poolie> i have kanban fu
<poolie> http://people.canonical.com/~mbp/kanban/jr-kanban.html
<MootBot> LINK received:
          http://people.canonical.com/~mbp/kanban/jr-kanban.html
<poolie> scan down the right hand column until you find it
<barry> ah, nice! 
<poolie> i like it  [08:12]
<barry> i didn't realize each person had their own kanban
<barry> [TOPIC] package importer progress  [08:13]
<MootBot> New Topic:  package importer progress
<poolie> yes, there's one aggregated per team and one per person
<poolie> let's see
<poolie> i think max said some new things started failing
<maxb> There does seem to have been a small uptick in the count
<poolie> hm, so it stepped down a bit, but now has drifted up
<maxb> Besides the append-revisions-only stuff, which I'm taking account of
<poolie> back from 400 to 425?
<poolie> some of these are AppendRevisionsOnlyViolation which is a recent
         regression  [08:14]
<poolie> so i'm proposing to make this rather more of a priority for the
         canonical bzr team
<maxb> The append-revisions-only stuff accounts for ~25, but I've fixed about
       ~20 imports in the last 48 hours, which is why were are back at around
       400
<poolie> putting it at the top of our quarterly planning commitments, and
         trying to get it below 200 by the start of october
<poolie> which would be much faster than our current trend  [08:15]
<barry> poolie: that would be amazing
<poolie> thanks max
<jelmer> I've made some progress on support for multiple upstream tarballs,
         which isn't finished yet but should help a bit too.
<poolie> oh, that's great
<maxb> One thing is that there seems to be a gradual uptick in the number of
       packages using multiple upstream tarballs. That's also the top single
       failure cause at the moment
<maxb> Another thing to consider is that quite a number of the failures are
       failures during the generation of merge preview diffs - *not* the
       import itself  [08:16]
<maxb> A subcategory of those are, I believe, being addressed by a bugfix of
       vila's
<poolie> why does it generate merge preview diffs?  [08:17]
<maxb> I'm guessing because james_w thought it would be useful?
<maxb> I doubt many people know they exist.
<maxb> http://package-import.ubuntu.com/merges/
<MootBot> LINK received:  http://package-import.ubuntu.com/merges/
<james_w> I started generating them as a test  [08:18]
<poolie> hi james
<james_w> but never followed it through to be the replacement for
          merges.ubuntu.com
<james_w> hi
<poolie> huh
<barry> james_w: hi.  i didn't know that existed either
<poolie> so, what shall we do
<poolie> perhaps we should move it out of line so that it doesn't cause
         failure of the actual package import?  [08:19]
<maxb> I estimate ~44 failures are in the merge generation. They are probably
       legitimate bzrlib bugs
<maxb> I think we should be mindful of that possibility, but see how many of
       the failures are cleared up by vila's NoFinalPath bugfix before
       investing time  [08:20]
<james_w> that seems to be a fair number of them
<jelmer> Merges are one of the goals of the UDD branches, so it seems useful
         to keep it in.  [08:21]
<james_w> given no-one is using the output currently it wouldn't really cost
          anything to delete the code
<barry> or maybe comment it out for now?
<poolie> ok, well, now i know it's there :)  [08:22]
<barry> :)
<poolie> i agree with max, let's see how it goes with current in progress work
         landed, and then we can think about pruning it
<poolie> or, alternatively, at least linking to ti
<barry> +1
<barry> so, not really on the agenda, but i see lp and bzr got updated last
        night?  how'd that go?  [08:23]
<poolie> it was a bit bumpy
<barry> dang
<barry> but everything worked out?
<poolie> since we went several revisions forward, and there were some bad
         interactions between changes in bzr and in bzr-svn when importing
         large branches
<poolie> we are having a postmortem thread at the moment  [08:24]
<poolie> to try to understand what happened
<poolie> but i think it will be ok
<barry> cool.  i'm on the mlist so i'll follow along
<poolie> we will make it safer to deploy and roll back, and then deploy more
         often
<poolie> similar to the approach being taken with other bits of lp
<poolie> and speaking of which, can i just say how much i'm looking forward to
         their new shorter upgrade windows  [08:25]
<poolie> (https://lists.launchpad.net/launchpad-dev/msg07623.html but it's a
         bit offtopic)
<poolie> jelmer, can you tell us about what this is likely to change with
         imports?
<jelmer> poolie: Can you rephrase that, do you mean the vcs imports?  [08:26]
<poolie> yes  [08:27]
<barry> also, what are the top-level user visible changes we'll see in
        bzr/udd/codehosting now?
<poolie> we can hope to see more of them succeed after the lp upgrade?
<jelmer> poolie: What was the recent lp upgrade from last night barry was
         referring to exactly?  [08:28]
<poolie> there should be a big new feature in lp which is showing diffs inline
         in the branch pages
<poolie> lp had an upgrade outage today (australian time)
<poolie> hm
<barry> that will be *awesome*
<poolie> perhaps we should get our story straight offline :)
<poolie> and then post something on the lp blog about user visible changes, if
         any
<barry> poolie: +1, can i give you that action?  [08:29]
<poolie> actually could i put that on jelmer, since he landed the change iirc
<poolie> the inline content feature is
         http://people.canonical.com/~andrew/Inline-diff-screenshot.png
                                                                        [08:30]
<poolie> not landed yet
<barry> [ACTION] jelmer to post summary of user visible changes with lp
        rollout
<MootBot> ACTION received:  jelmer to post summary of user visible changes
          with lp rollout
<jelmer> I haven't caught up on all that email yet, but I'd be happy to take
         an action item about the post-morten analysis
<jam> poolie: that specific screenshot is for merge proposal pages
<poolie> true
<jam> danilo's change was for Branch pages, which I certainly don't see, but I
      don't know whether or not his expander code has landed.
<poolie> i think the code changes proposed now may only touch mp pages but we
         should be able to follow through and show stuff on the branch too
<poolie> jelmer so i guess there's two things to follow on, one is the
         postmortem (what went wrong) and the other is the feature
         announcement, if any (what will go right)  [08:31]
<poolie> i had the idea that the updated bzr-git etc are going to help a lot
         more branch imports complete
<poolie> am i confused?
<jelmer> I haven't landed anything related to the expander code  [08:32]
<jelmer> I do have a fix for having bzr-svn deal with tags better (not use so
         much memory), but IIRC I haven't proposed that for landing on lp yet
<poolie> didn't you land several updates into lp when we were at the rally?
                                                                        [08:33]
<poolie> perhaps we should move on; this isn't really udd specific  [08:35]
<maxb> I have something I'd like people to have a think about: What are we
       going to do about developer-maintained package branches, which don't
       use upstream-* tags because they merge directly from upstream's bzr,
       and thus the UDD importer always fails on currently? I'm thinking of,
       e.g. apport
<jelmer> (sorry, looking through the revision log atm..)
<barry> poolie: okay
<barry> [TOPIC]  * Get rid of `bzr mark-uploaded` ?
<MootBot> New Topic:   * Get rid of `bzr mark-uploaded` ?
<jelmer> taking that offline (in the post-mortem thread perhaps?) might indeed
         be better
<Riddell> hi, sorry I'm late  [08:36]
<barry> so, if i'm not mistaken, mark-uploaded is more or less unnecessary
        now, right?
<jelmer> somewhat; debcommit -r will tag too and "bzr tag" without argument
         can also behave the same way as mark-uploaded  [08:37]
<Riddell> hmm, I was hoping to get away from using debcommit
<barry> jelmer: what does mark-uploaded do that bzr tag or debcommit doesn't?
<barry> i guess there are two things leading these questions: whether to
        change the udd documentation to just use bzr tag, and whether to
        actually deprecate or get rid of the command?
<jelmer> barry: I don't think there's anything it does that bzr tag doesn't,
         other than perhaps being a bit more clearly named
<barry> jelmer: cool.  any objections to me changing the udd docs to use tag
        instead?
<poolie> james_w ^?
<barry> Riddell: i'd like to get away from recommending debcommit too
<james_w> not really
<poolie> i wonder if bzr builddeb could instead hook into the tag command
         (through adding a hook, not in some gross way) to give people policy
         checks?  [08:40]
<james_w> probably worth a note that if bzr says that they have to give a tag
          name they need a newer bzr/bzr-builddeb, or their bzr-builddeb is
          incorrectly installed
<poolie> if those checks are seen as useful
<barry> james_w: good idea  [08:41]
<barry> [ACTION] barry to update udd docs to use `bzr tag` instead of `bzr
        mark-uploaded`
<MootBot> ACTION received:  barry to update udd docs to use `bzr tag` instead
          of `bzr mark-uploaded`
<poolie> barry i suggested Riddell might put his packaging background to use
         in working on the packaging guide with yourself and daniel
<Riddell> yes, I'm working my way through it fixing things and working out
          what's missing or not clear  [08:42]
<poolie> great
<barry> Riddell: fantastic.  you can add me as a reviewer for any mp
<poolie> shall we talk about max's question?
<barry> Riddell: do you want to take the above action instead of me?
<ScottK> Riddell: Does that include non-UDD packaging?
<Riddell> barry: yes can do
<poolie> hi scott  [08:43]
<barry> [ACTION] Riddell to update udd docs to use `bzr tag` instead of `bzr
        mark-uploaded`
<MootBot> ACTION received:  Riddell to update udd docs to use `bzr tag`
          instead of `bzr mark-uploaded`
<barry> poolie: yes, let's take up maxb's question
<maxb> <maxb> I have something I'd like people to have a think about: What are
       we going to do about developer-maintained package branches, which don't
       use upstream-* tags because they merge directly from upstream's bzr,
       and thus the UDD importer always fails on currently? I'm thinking of,
       e.g. apport
<Riddell> ScottK: I'd like to discuss that with dholbach, it needs quite a lot
          of changes to include non-UDD bits and I don't know if he has
          thought about how to do that (but essentially i'm working on it from
          a bzr developer perspective so no)
<ScottK> That's one of the guide's biggest problems at the moment.  [08:44]
<Riddell> ScottK: but the guide should either be renamed or fixed for that
<ScottK> Agreed.
<Riddell> yep
<barry> ScottK: yep
<jelmer> maxb: It would seem reasonable to just directly tag the upstream
         versions with upstream-X if they have the same contents
<poolie> by detecting there's a revision identical to the orig.tgz?  [08:46]
<jelmer> either by detecting or having some place where the upstream tag
         algorithm is specified  [08:47]
<maxb> So perhaps the way forward is to discuss with the packagers of those
       packages how much they are willing to tweak their workflow for UDD
       compatibility
<poolie> can we do something towards recognizing the actual tag in the
         upstream branch?
<poolie> there very likely is one, istm
<poolie> right
<jelmer> bzr-builddeb already has a config variable export-upstream-revision
         which can be set to the tag pattern for finding upstream versions
<poolie> maxb, what kind of tweaks?  [08:48]
<jelmer> e.g. "export-upstream-revision = tag:bzr-svn-$UPSTREAM_VERSION" as
         bzr-svn's tagging algorithm uses the tag name "bzr-svn-1.0a" for
         version "1.0a"  [08:49]
<jelmer> The proper place to store that sort of information would be in
         Launchpad's release information I think  [08:50]
<poolie> that would be useful in other places
<poolie> for instance automatically presenting the releases in the ui and ws
<maxb> As in, potentially making use of "bzr merge-upstream", or setting tags
       manually
<barry> it's getting late, so let's move on  [08:52]
<barry> [TOPIC] bugs of interest
<MootBot> New Topic:  bugs of interest
<barry> [LINK]
        http://people.canonical.com/~mbp/kanban/canonical-bazaar-kanban.html
<MootBot> LINK received:
          http://people.canonical.com/~mbp/kanban/canonical-bazaar-kanban.html
<poolie> good idea
<barry> anything in particular to point out?
<poolie> i plan to stop the package importer pretending to be james tomorrow
                                                                        [08:53]
<barry> nice :)
<poolie> lots of bugs there
<poolie> moving across
<poolie> jelmer it looks like you should do a bzr-svn release  [08:54]
<poolie> barry, james, maxb, is there anything especially biting you, or that
         you think especially needs attention?
<jam> barry: [LINK] lp:///~jameinel/bzr/2.2-is-up-to-date
<jelmer> poolie: I agree; the tags memory usage issue is the main thing that's
         blocking that at the moment.
<jam> [LINK] lp:///~jameinel/bzr/2.2-is-up-to-date
<MootBot> LINK received:  lp:///~jameinel/bzr/2.2-is-up-to-date
<poolie> jam, what is that?  [08:55]
<jam> I just added a "Branch.open" hook
<jam> so that doing "bzr info lp:ubuntu/bzr" tells you if the branch is
      up-to-date
<poolie> oh i see
<poolie> great
<barry> poolie: atm, nope. things are going well
<poolie> we need to try again with a 2.3.4 sru into natty
<poolie> ok
<poolie> it's getting late here for sure
<poolie> next?
<jam> http://paste.ubuntu.com/643225/  [08:56]
<MootBot> LINK received:  http://paste.ubuntu.com/643225/
<barry> [TOPIC] aob
<MootBot> New Topic:  aob
<barry> just one small note: poolie the meeting 2 weeks from now is at the
        wrong time i think
<jam> barry: I think that goes with the earlier action item (that I missed),
      for checking if import branches are up-to-date
<poolie> yes, it does, that's nice
<barry> jam: thanks  [08:57]
<poolie> ok
<barry> jam: that looks great
<poolie> so we're going to keep it at the same time as today?
<barry> poolie: if that worked for you guys.  it was much better for me ;)
<jam> wfm, poolie is the one most impacted by it  [08:58]
<poolie> ok
<poolie> thanks everyone for coming, especially maxb
<barry> okay, with that...
<barry> #endmeeting
</pre>
