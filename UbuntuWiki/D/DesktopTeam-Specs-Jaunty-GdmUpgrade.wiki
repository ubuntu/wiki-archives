{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:gdm-upgrade
* '''Created''':
* '''Contributors''': 
* '''Packages affected''': gdm, gdm-guest-session, fast-user-switch-applet

=== Summary ===

Ubuntu is still using the old gdm codebase, this specification describes what is required to upgrade to the current upstream version

=== Release Note ===

The new gdm is being used now

=== Rationale ===

The current version is what upstream and other distributions are working on. It fixes limitations of the previous version and has cleaner code

=== Use Cases ===

* The desktop team wants to ship the current upstream code and have something easier to work on

==== Design ====

The new version has no gdmflexiserver, no configuration tool and a restricted set of configurations settings, that's an upstream choice and will not be considered as a blocker for the upgrade.

We will provide migration of the most important configuration settings.

=== Implementation ===

Changes in jaunty:
* The new gdm will be packaged in universe as gdm-new (or similar naming) (seb128)
* The guest session code will be updated to work with the new gdm version (pitti)
* The new fast-user-switch-applet gdm code will be updated to be similar to the current ubuntu version (tedg)

==== Code Changes ====

* The gdm-guest-session and the fast-user-switch-applet codes need to be updated to the new gdm codebase.
* The desktopcd and oem-config need to be updated to set the new gconf autologin setting

* New GDM requires running multiple X servers (the gdm-user one which acts as a login / password prompt when screen is locked / fast-user-switch prompt, and the users' ones)
** This is an issue on e.g. Intel because you can only start one DRI enabled server
** use a blacklist to disable DRI on the gdm X server, so that it is available on the user's server.
** Face browser does not use compositing, so this will not be an issue even if the intel (and other drivers) will not be fixed in time.

==== Migration ====

The autologin and timedlogin settings which are stored in the current text configuration needs to be migration to gconf during the upgrade. Other options should not be an issue but if user feedback points some other settings which need to be migrated those will be considered.

=== Test/Demo Plan ===

=== Unresolved issues ===

=== BoF agenda and discussion ===

* How do we edit the gdm settings (which are gconf based but owned by the gdm user)?  No GUI for some features (e.g. timed login)
** Probably easier to do from the login screen (runs as gdm user)
** Preferably, we'd expose the settings in both the login screen and the user's preferences (requiring some gksu prompting to sudo to gdm)
** Theme should offer to start any external program which is needed to change the theme
----
CategorySpec
