{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


== Introduction ==

Translating documentation requires some special considerations which do not apply when translating programs. This page contains instructions for translators and an explanation of the toolchain used to convert the documentation into translation templates and back again.

== For Translators ==

Ubuntu documentation uses Rosetta as a translation portal, as with the rest of Ubuntu. For explanations of how to use Rosetta, see the <nowiki>[[Rosetta]]</nowiki> page.

The documentation can be found in the following packages: <code>ubuntu-docs</code>, <code>kubuntu-docs</code>, <code>edubuntu-docs</code> and <code>xubuntu-docs</code>. In Ubuntu 11.04, the principal Ubuntu help documentation is found in the <code>gnome-user-docs</code> package.

There are a number of specific considerations to bear in mind when translating documentation.

<nowiki>[[File:IconsPage/IconNote.png]]</nowiki> ''Failure to observe these instructions will result in the translated document breaking.''

# '''Tags should not be translated.''' Where you see a tag in the translation (for example: "<code><xref linkend="free-software"/></code>"), the tag and anything inside the tag itself should not be translated. It is very important to copy and paste these tags '''exactly''' as they appear in this English. The exception to this is where a tag contains a URL where there is an equivalent translated URL. In those cases the translator should use discretion about whether to localise the URL.
# '''Entities should not be translated.''' Where you see a phrase expressed like "<code>&gt;</code>", do not change this.
# '''Always maintain the order of tags.''' When you see different tags nested inside each other (for example: "<code><menuchoice><guimenu>System</guimenu><guimenuitem>Administration</guimenuitem><guimenuitem>Users and Groups</guimenuitem></menuchoice></code>"), you must always preserve that order carefully - copying and pasting from the English is the best way to ensure that you do this correctly. Only translate the words inside the tags.
# For full English copies of the various guides to give you context while translating, open the ''Help'' application (yelp) in Ubuntu, or Khelpcenter in Kubuntu. Alternatively, all the guides are available to browse at http://help.ubuntu.com
# The documents are not automatically imported into Ubuntu (like the translation of programs). They need to be exported and uploaded manually to the packages. The documentation team will take care of this on occasions.

If you have any questions, please ask on the <nowiki>[[https://lists.ubuntu.com/mailman/listinfo/ubuntu-translators|ubuntu-translators]]</nowiki> mailing
list:  or the <nowiki>[[https://lists.ubuntu.com/mailman/listinfo/ubuntu-doc|ubuntu-doc]]</nowiki> mailing list.

=== Testing translations ===

'''These are instructions for testing translations in the ubuntu-docs package. For instructions on testing translations in the gnome-user-docs package, see below.'''

You can now test the translations you've done in Rosetta by inserting them into our repository and viewing them in Yelp.

# Download the LANG.po file for a particular document from Rosetta. For example the relevant templates for Precise can be found <nowiki>[[https://translations.launchpad.net/ubuntu/precise/+source/ubuntu-docs/|here]]</nowiki>. These instructions use the example of the french (fr) translation of the <code>internet</code> document.
# Get the Precise branch of our repository:<pre>
sudo apt-get install bzr xmlto gettext gnome-doc-utils

bzr checkout --lightweight lp:ubuntu-doc/precise ubuntu-docs-precise}}}
 1. Browse to the documentation directory{{{
cd ubuntu-docs-precise}}}
 1. Insert the new po file in the relevant document folder, under the <code>po</code> subfolder '''using the naming scheme LANG.po''':{{{
mv ~/Desktop/internet-fr.po internet/po/fr.po}}}
 1. Run the translate script and choose the relevant document and language:{{{
./scripts/translate.sh -d internet -l fr}}}
# The script will update the docbook xml for your document and language and will check the file created for validity. It will print any errors as output.
# Open the file in the GNOME help viewer, called yelp:{{{
yelp file://${PWD}/internet/fr/internet.xml}}}
Yelp always requires the full path to the xml document.

To build all documents with the latest translation run:{{{
for doc in $(cat libs/shipped-docs); do ./scripts/translate.sh -d $doc -l LANG; done}}}

A html version be created by running: {{{
mkdir -p build/html

for doc in $(cat libs/shipped-docs); do find ${doc}/LANG -name "*.xml" -exec xmlto -o build/html html-nochunks {} \;; done}}}

A nice formated html version (similar to help.ubuntu.com) be created by running: {{{

for doc in $(cat libs/shipped-docs); do
     xsltproc --xinclude -o build/html/$doc/$lang/index.html \
	libs/ubuntu-html-chunk-cust.xsl $doc/$lang/$doc.xml 
done}}}

Create a copy of libs/ubuntu-html-chunk-cust.xsl into libs/ubuntu-html-chunk-cust-$lang.xsl to customize/localise it's content. Also check ubuntu-banner.xsl.

LANG should be replaced by your language code.

'''NOTE:''' If you wish to make any changes to the translation, you should do so in Rosetta.

==== Instructions for gnome-user-docs ====

# Download the LANG.po file for the gnome-help template from Rosetta. The relevant templates for Precise can be found <nowiki>[[https://translations.launchpad.net/ubuntu/precise/+source/gnome-user-docs|here]]</nowiki>. These instructions use the example of the french (fr) translation.
# Get the Precise branch of our repository:{{{
sudo apt-get install bzr xmlto gettext gnome-doc-utils

bzr checkout lp:ubuntu-docs/precise ubuntu-docs-precise}}}
 1. Browse to the documentation directory{{{
cd ubuntu-docs-precise}}}
 1. Insert the new po file in the <code>gnome-help</code> folder '''using the naming scheme LANG/LANG.po''':{{{
mkdir gnome-help/fr
mv ~/Desktop/gnome-help-fr.po fr/fr.po}}}
 1. Update the file <code>gnome-help/Makefile.am</code> so that the DOC_LINGUAS string includes your language code:{{{
DOC_LINGUAS = fr}}}
 1. Ensure that you have the build dependencies for gnome-user-docs installed:{{{
sudo apt-get build-dep gnome-user-docs}}}
 1. From the root folder of the branch, run autogen:{{{
cd ../
./autogen.sh}}}
 1. From the <code>gnome-help</code> directory, build the translations using the "make" command:{{{
cd gnome-help
make}}}
 1. There should now be approximately 240 translated files in your LANG directory. To count them:{{{
ls fr | wc -l}}}
 1. Test the translated files by opening them in yelp and browsing them:{{{
yelp fr/}}}
 1. Check the validity of the xml for each file using the check_validation.sh script in the C/ directory:{{{
cd C/
for i in `ls ../fr/` ; do ./check_validation.sh ${i} ; done}}}
 1. If the script returns any validity errors, these need to be fixed '''in the po file which should be uploaded to Launchpad'''.

HTML version can be created by

 1. Move to the folder libs and move yelp-build in your language directory {{{
cd libs 
mv yelp-build ../gnome-help/fr/}}}
 1. {{{ 
cd /../gnome-help/fr/
./yelp-build html -x ../../libs/ubuntu.xsl *.page}}}

You can change the look of created pages by editing ubuntu.xsl in the libs folder.

==== Adding screenshots to gnome-user-docs ====

Screenshots cannot be translated using Launchpad.

If you wish to propose the addition of updated screenshots to the package: 

 1. Get the Precise branch of our repository:{{{
sudo apt-get install bzr xmlto gettext gnome-doc-utils
bzr checkout lp:ubuntu-docs/precise ubuntu-docs-precise}}}
 1. Browse to the documentation directory{{{
cd ubuntu-docs-precise}}}
# The English screenshots for the gnome-help template can be found in <code>gnome-help/C/figures</code>.
# Add your translated screenshots to the gnome-help/LANG/figures folder:{{{
mkdir -p gnome-help/fr/figures/
cp ~/Desktop/path*to*screenshot gnome-help/fr/figures/}}}
 1. Add your screenshots to bzr and commit the change:{{{
bzr add gnome-help/fr/figures/*
bzr commit -m "Adding screenshots for fr locale"
 1. Push your branch to Launchpad with a descriptive branch name:{{{
bzr push lp:~username/gnome-user-docs/fr-locale-screenshots
</pre>
 1. Browse to your branch on the Launchpad website and propose your branch to be merged into the ~ubuntu-core-doc/gnome-user-docs/precise branch.

== For Documentation Team Members ==

The rest of this page is a description of how the Documentation Team work gets translated and inserted into Ubuntu. It is primarily intended for reference of the Documentation Team: translators do not need to know all this information.

=== Package Requirements ===

To install all packages required to build ubuntu-docs, including translations, run:

  <code>apt-get build-dep ubuntu-docs</code>

=== Process ===

There are three steps to getting documentation translated: 
# generating a translation template
# letting the translators work their magic
# importing the translations back into our repository

These are taken in turn below.

==== 1. Generating a translation template ====

* When an English XML document is ready for translation, we make a POT file, which is the template that translators use. To make this, we use the command:
  <code>xml2po -e -o output.pot input.xml</code>.
* For documents spread over more than one file, these can be included as follows:
  <code>xml2po -e -o output.pot chapter1.xml chapter2.xml</code>
* '''IMPORTANT:''' For documents which have an omf file, these should also be included in the pot file.
* As a result, generally the appropriate command is:
  <code>xml2po -e -o output.pot C/*.xml C/*.omf</code>

'''NOTE:''' We have an automatic script to generate POT files, called <code>get-pot.sh</code>. Running this script refreshes the POT files for all documents.

==== 2. Letting the translators work their magic ====

* The pot file should then be uploaded to rosetta. This is done automatically if the pot is in a source deb package uploaded into the current version of Ubuntu, if not, it must be done manually at the relevant template page in Rosetta.
* Translators then do the rest!

==== 3. Importing the translations back into our repository ====

* Automatic exporting from Rosetta into the docteam tree is not implemented. So here is what happens.
* When a good time comes to import the translations, the translations can be downloaded from rosetta (for example, the "Download Translations link <nowiki>[[https://translations.launchpad.net/distros/ubuntu/hardy/+source/ubuntu-docs/|here]]</nowiki>). You can either download translations for all documents or for documents individually.
* The translations from the tarball are placed in the relevant document's directory.
* The translation script (''translate.sh'') is then used to convert the translations back to xml in the appropriate directory.
* The script also checks the resulting xml for validity, and there are generally errors that must be corrected which are displayed onscreen. This must be done manually.

That's it!

----
CategoryDocteam
CategoryTranslations
