{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* Created: 2005-11-02 by FabioMassimoDiNitto
* Priority: MediumPriority
* Packages: partman-auto-lvm, partman-auto

=== Note for Reviewers ===

The main implementation is already in breezy. This spec is to recollect the bits
that needs to be polished/tested in Dapper. For all the rationale and cosmetic bits please see InstallerVolumeManagement (that are not up for discussion since already approved at UDU).

=== Rationale ===

partman-auto-lvm could not be enabled on breezy powerpc because parted upstream did not support lvm.

=== Implementation Plan ===

* Import new upstream version from Debian that is our version plus extra bug fixing.

* As discussed on debian-boot mailing list, patch partman-auto recipes to tag partitions that can or cannot be on lvm volumes. (http://lists.debian.org/debian-boot/2005/10/msg00842.html)

* Modify partman-auto-lvm (pal from now on) to parse the new recipes tag (as discussed at the above URL), that as a consequence will increase portability across architectures.

* Remove size calculation hack that was added in breezy (as discussed on debian-boot mailing list same url as above. Note that the comments are inside the patch and the actual code in breezy/dapper - See:
<pre>
free_size=$(vgs -o vg_free --units k --noheading --nosuffix $VG_name | sed -e 's/\..*//g')

newscheme=''
foreach_partition '
	newmin="${1}000"
	newmed="${2}000"
	if [ "$3" != "1000000000" ]; then
           newmax="${3}000"
	else
	   newmax="$3"
	fi
</pre>
in perform_recipe_by_lvm file)

* Enable pal (partman-auto-lvm) on ppc.

* Test all of the above.

* profit.

 Estimated working time from 3 to 8 days.

* Retest possible GUI implementation since in the last round of tests they were not stable enough to be considered for inclusion.

==== Packages Affected ====

* `partman-auto-lvm`
* `partman-auto`
* probably more

=== Outstanding Issues ===

* We were offering the option to use all the freespace on all devices to create lvm volumes. This option was too buggy and removed from upstream.
