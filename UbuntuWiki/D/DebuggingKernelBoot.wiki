{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


== Introduction ==

Unfortunately it is sometimes the case that your system will fail to boot due to changes within the kernel.  It is important that when submitting bug reports about these types of failures that you include the debugging information from a failed boot (not a working boot). This article will help gather this information to provide in your report.

== Capture information from a bad boot and post to your bug report ==

When trying to capture relevant error messages that appear at boot, one may edit boot option parameters via:

# Boot the machine.
# During the BIOS screen, press the shift key and hold it down. You should see the GRUB menu after the BIOS loads.
# Navigate to the kernel entry you want to boot, and press 'e'.
# In the line starting with linux, remove the following keywords: <pre>
quiet
splash
vt.handoff=7</pre>
1.
  a. If using Ubuntu 18.04, on the line that contains: <pre>
gfxmode $linux_gfx_mode
</pre>modify it to: <pre>
gfxmode text</pre>
  a. If using an older version of Ubuntu, on the line that contains: <pre>
gfxpayload=$linux_gfx_mode</pre>modify it to: <pre>
gfxpayload=text</pre>
# Press 'Ctrl+x' to boot.
# Capture messages from the bad boot and attach to your report. In order of preference:
** The appropriate log(s) in their entirety from /var/log uncompressed.
** An unedited video of the entire bad boot from start to finish via cellphone or camera recording.
** A picture of the bad boot via cellphone or camera.
** Writing it down by hand.

/!\ Please note, stating the boot didn't work or providing logs from a good boot is not enough for a developer to review the problem. You must provide evidence from a bad boot as noted above.

== Further diagnosing ==

After the evidence above has been attached to your report, depending on the type of error messages you encounter, there are other boot options you could try to help a developer further diagnose.

For example, if you notice ACPI errors, try booting with the '''acpi=off''' boot option. For a full description of these options, refer to the <nowiki>[[https://www.kernel.org/doc/html/v4.14/admin-guide/kernel-parameters.html|kernel parameters]]</nowiki> document.

=== Boot looping or boot halts ===

If your boot immediately restarts, or halts, please utilize the boot debugging options to capture the bad boot.

=== Dropped into a initramfs shell ===

If your boot is dropped into an initramfs shell, this indicates errors in the boot sequence, for example failing to find your root partition/filesystem. You are put into the initramfs shell in an effort to allow you to recover the system. Hopefully, if you boot with the '''quiet''' and '''splash''' options removed you will notice error messages before being dropped into the shell which will help debug and direct you to a solution.

If you are dropped into an initramfs shell you may want to also try booting with the '''debug''' boot option.  It should write a log to /tmp/initramfs.debug. You could also specify some arbitrary argument (for example '''debug=vc''') to have the output written to the console.

Additionally, being able to extract log files from the system would be helpful. Once dropped into an initramfs shell, you can type '''httpd'''. You should then be able to point a web browser to the IP address of the system and view the contents of the /var/log folder.

There is another initramfs boot parameter which can purposely drop you into the initramfs shell during different stages of the initial boot sequence. The parameter is '''break=[option]''' where option can be: top, modules, premount, mount, bottom, or init. The default is premount if no options are specified. More information about the break= parameters can be found in "/usr/share/initramfs-tools/init" on your Ubuntu system.

== Links ==

* <nowiki>[[https://help.ubuntu.com/community/DebuggingSystemCrash|Debugging a System Crash]]</nowiki>
* <nowiki>[[https://help.ubuntu.com/community/vt.handoff|vt.handoff]]</nowiki> explained

----
CategoryBugSquad CategoryDebugging
