{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== How to create a library package for Ubuntu ==
I did write this tutorial when following the MOTU/School/LibraryPackaging
available here https://wiki.ubuntu.com/MOTU/School/LibraryPackaging.
Also this link was very helpful http://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html#naminglibpkg

Another very helpful page is:
https://wiki.ubuntu.com/MOTU/GettingStarted

=== Layout of openWNS library ===
<pre>
/usr/lib/libopenwns-library.so.1.0.87                             (libopenwns-library0) 
/usr/lib/libopenwns-library.so.0 -> libopenwns-library.so.1.0.87  (libopenwns-library0)
/usr/lib/libopenwns-library.so -> libopenwns-library.so.1.0.87    (libopenwns-library-dev)
/usr/lib/libopenwns-library.a                                     (libopenwns-library-dev)

The SONAME of the library is:
libopenwns-library.so.0

</pre>
=== Library Naming ===

The package name of your library depends on the SONAME of your library.

<pre>
CFLAGS?=-O2 -fPIC -g
PREFIX?=/usr/local
MINOR=0.2
MAJOR=1
LIBNAME=libmyhello

OBJECTS=hello.o
SONAME=$(LIBNAME).so.$(MAJOR)
LIBTARGET=$(SONAME).$(MINOR)

DISTDIR=$(LIBNAME)-$(MAJOR).$(MINOR)

all:$(LIBTARGET)

%.o:%.c
	$(CC) -c $(CFLAGS) $< -o $@

$(LIBTARGET): $(OBJECTS)
	$(CC) -shared -Wl,-z,defs -Wl,-soname=$(SONAME) $< -o $@
	ln -s $@ $(LIBNAME).so
	ln -s $@ $(SONAME)
</pre>

<pre>
dbn@hoppelmops:~/src/spikes/ubuntu-lib-pack-tut/libmyhello-1.0.2$ objdump -p libmyhello.so

libmyhello.so:     file format elf32-i386

Program Header:
    LOAD off    0x00000000 vaddr 0x00000000 paddr 0x00000000 align 2**12
         filesz 0x000004dc memsz 0x000004dc flags r-x
    LOAD off    0x000004dc vaddr 0x000014dc paddr 0x000014dc align 2**12
         filesz 0x00000114 memsz 0x00000118 flags rw-
 DYNAMIC off    0x000004f0 vaddr 0x000014f0 paddr 0x000014f0 align 2**2
         filesz 0x000000d0 memsz 0x000000d0 flags rw-
   STACK off    0x00000000 vaddr 0x00000000 paddr 0x00000000 align 2**2
         filesz 0x00000000 memsz 0x00000000 flags rw-

Dynamic Section:
  NEEDED      libc.so.6
  SONAME      libmyhello.so.1
  INIT        0x320
  FINI        0x4b4
  HASH        0xb4
  GNU_HASH    0xf8
  STRTAB      0x1f4
  SYMTAB      0x134
  STRSZ       0x9b
  SYMENT      0x10
  PLTGOT      0x15d0
  PLTRELSZ    0x18
  PLTREL      0x11
  JMPREL      0x308
  REL         0x2d8
  RELSZ       0x30
  RELENT      0x8
  VERNEED     0x2a8
  VERNEEDNUM  0x1
  VERSYM      0x290
  RELCOUNT    0x2

Version References:
  required from libc.so.6:
    0x09691f73 0x00 03 GLIBC_2.1.3
    0x0d696910 0x00 02 GLIBC_2.0

</pre>

=== Python Packaging ===

When using dh_pycentral, then you must install your python files to debian/<packagename>/usr/share/pyshared/ during the installation step. Replace <packagename> with the binary package that should contain the python files.

=== Useful Links ===
http://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html#naminglibpkg
