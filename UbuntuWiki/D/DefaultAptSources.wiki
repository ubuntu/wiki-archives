{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* '''Launchpad Entry''': https://launchpad.net/distros/ubuntu/+spec/default-apt-sources
* '''Created''':  by MattZimmerman
* '''Contributors''': MattZimmerman
* '''Packages affected''': apt, synaptic, aptitude

=== Summary ===

Improve the handling for apt when it comes to network sources.

=== Rationale ===

As of Ubuntu 5.10, the default sources.list is dynamically generated based on (among other information) whether a network connection was available during the installation of the system. In order to be more consistent in the face of changing hardware (and changing support for hardware), it would be preferable if the network sources were always available, regardless of network availability during installation.

=== Use cases ===

=== Scope ===

=== Design ===

Hide the warning/error when no network source information is available by default. 

=== Implementation ===

The current implementation in the michael.vogt@ubuntu.com--2005/apt--ubuntu--0 branch works as followed. 
# The methods backend will report a optional "FailReason" to the acquire code.  
# On a "Timeout", "TmpResolveFailure" and "ConnectionRefused" it is assumed that the network is not available for this source and the attempt to fetch it will be canceld. The status will be set to StatTransientNetworkError. 
# The old signature and indexfiles for this source will be used and a warning (instead of a error) is issued. 
# The list cleaner for /var/lib/apt/lists will not run on StatTransientNetworkError status
# No warnings about missing index files will be issued from pkgcachegen.cc
# apt-get update will still return a non-zero exit code on "real" network failures.

==== Code ====

The code is available in the michael.vogt@ubuntu.com--2005/apt--ubuntu--0 branch and uploaded to dapper. The coresponding changes are done in synaptic and aptitude as well.

----
CategorySpec
