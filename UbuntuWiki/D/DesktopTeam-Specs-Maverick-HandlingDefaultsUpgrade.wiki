{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


* '''Launchpad Entry''': UbuntuSpec:desktop-maverick-overriding-defaults-on-upgrade
* '''Created''':
* '''Contributors''': 
* '''Packages affected''': gnome-session, glib, other softwares that need to handle defaults change

=== Summary ===

Currently Ubuntu has no standard way to tweak the users configuration on upgrade when required, the specification describes how we will solve this issue.

=== Release Note ===

=== Rationale ===

The changes made to the desktop sometime require updating the user configuration to bring a consistent user experience (changing deprecated applets to new indicators)

=== User stories ===

* Daniel upgrades from hardy to lucid, the volume applet he was using is not available there but he gets the new sound indicator instead and can keep changing volume in easy way
* Sophie upgrades her netbook from karmic to lucid, she gets told about the new shiny theme available and decide to give it a try by selecting if after the upgrade first reboot

=== Design ===

* The new glib is getting a migration tool for gconf to gsettings data which will be improved to handle scripts too
* The new helper will be moved to gnome-session since it's not gconf or gsettings specific
* Softwares that require changes to users configuration on upgrade will be ported to the new system

The discussion covered cases like displaying a summary of changes in the new versions the user might want know about after upgrading (ie new theme), this specification doesn't deal with those changes though but is restricted to the mechanism which will allow to run code after upgrade.

=== Implementation ===

See blueprint whiteboard

==== Migration ====

* No migration required, current hacks can be ported to the new system though

=== Test/Demo Plan ===

=== BoF agenda and discussion ===

How to we deal with user settings in place:
- it's good that we keep user settings on upgrade but we don't communicate nicely about the changes in the new version

ideas:
- What about displaying notes about the new version after first login on upgrade
- Displaying those in a slideshow during the upgrade...issue is how to find those after upgrade?
- Changing the "about Ubuntu" dialog to have informations about the current version

We could open the software-center after first login since it was open during upgrade until reboot

Do upgrade in an limited "upgrade" session and not a normal one

During changes on first login after upgrade:
- gsettings migration in gconf git now, run on every login, check in a directory for things to do

2 cases:
- doing tweaking that needs to be done on upgrade, i.e setting indicator applet in the configuration
- have a way to maybe trigger interactive dialogs asking if you want ie use the new theme

should that tool be run after upgrade for people not restarting their session?
- not really, concerns only unstable users and often session restart is required

One set of notes after upgrade describing the changes: it's difficult to make it match the installed components

gsettings doesn't have a way to tell if user config = system default
 
----
CategorySpec
