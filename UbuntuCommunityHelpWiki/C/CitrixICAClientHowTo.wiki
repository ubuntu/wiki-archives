{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

Parent page: <nowiki>[[InternetAndNetworking| Internet and Networking]]</nowiki>

The Citrix ICA Client (Citrix Receiver) allows access to remote Windows sessions that run on a Citrix server.

These instructions are for current/recent Ubuntu/ICA versions.  For historical reference, instructions for older Ubuntu/ICA versions are at <nowiki>[[CitrixICAClientHowToOlderVersions]]</nowiki>.

If you are considering deployment of the Receiver in your workplace (as opposed to installation on just your machine), have a look at <nowiki>[[https://wiki.ubuntu.com/Enterprise/Remote/CitrixReceiver|the Citrix Receiver deployment how-to]]</nowiki> in the <nowiki>[[https://wiki.ubuntu.com/Enterprise|Ubuntu for the Enterprise wiki]]</nowiki>.

<<BR>>
== Citrix Receiver 13.1 on Ubuntu 14.04 ==

=== 1. (64-bit only) Alternative install procedure that can be added to a deployment bash script ===
<nowiki>[[http://mark911.wordpress.com/2014/06/27/how-to-install-citrix-receiver-icaclient-in-ubuntu-14-04-lts-64-bit-tested-and-working-using-mozilla-firefox/]]</nowiki>

=== 2. (64-bit only) Enable i386 Multiarch ===
Even the Citrix Receiver for 64-bit systems has a lot of dependencies on packages from the i386 architecture.
If you are using 64-bit Ubuntu and have not already configured i386 multiarch, you must configure it by running:
<pre>
sudo dpkg --add-architecture i386
sudo apt-get update
</pre>

N.B.  The download link currently directs you to receiver 13.2 rather than 13.1 and the 64-bit deb no longer has i386 architecture dependencies. 

=== 3. Download the Citrix Receiver for Linux .deb package ===
* Go to <nowiki>[[https://www.citrix.com/downloads/citrix-receiver/legacy-receiver-for-linux/receiver-for-linux-13-2.html]]</nowiki>
* Near the bottom of the page, select either "For 64-bit Systems" or "For 32-bit Systems" as appropriate, and goto the "Receiver for Linux" package.
* Look for "File Type: .deb" under the Download buttons.
* Click this .deb file, and have it open in Ubuntu Software Center for installation (so you can skip step 4), Or download the .deb file and install it as described in step 4..
* Optionally download the "USB Support Package".  This package provides support for passing USB devices from your local Ubuntu machine into the remote Windows session (if your Citrix server is configured to allow that).

=== 4. Install the downloaded package(s) and dependencies ===
In case your Ubuntu Software Center didn't install the Citrix receiver, so you had to download it, now install it as follows:
<pre>
sudo dpkg -i ~/Downloads/icaclient_*.deb ctxusb_*.deb
sudo apt-get -f install  # Install dependencies and finish configuring the package(s)
</pre>

=== 5. Add more SSL certificates ===
By default, Citrix Receiver only trusts a few root CA certificates, which causes connections to many Citrix servers to fail with an SSL error.  The 'ca-certificates' package (already installed on most Ubuntu systems) provides additional CA certificates in /usr/share/ca-certificates/mozilla/ that can be conveniently added to Citrix Receiver to avoid these errors:
<pre>
sudo ln -s /usr/share/ca-certificates/mozilla/* /opt/Citrix/ICAClient/keystore/cacerts/
sudo c_rehash /opt/Citrix/ICAClient/keystore/cacerts/
</pre>

=== 6. Configure Citrix Receiver ===
Run:
<pre>
/opt/Citrix/ICAClient/util/configmgr &
</pre>

To map drives (to allow access to files on your local Ubuntu machine via a share drive in the remote Windows session), see the "File Access" tab.

=== 7. (64-bit only) Fix Firefox plugin installation ===
Run:
<pre>
sudo rm -f /usr/lib/mozilla/plugins/npwrapper.npica.so /usr/lib/firefox/plugins/npwrapper.npica.so
sudo rm -f /usr/lib/mozilla/plugins/npica.so
sudo ln -s /opt/Citrix/ICAClient/npica.so /usr/lib/mozilla/plugins/npica.so
sudo ln -s /opt/Citrix/ICAClient/npica.so /usr/lib/firefox-addons/plugins/npica.so
</pre>

Starting with Citrix Receiver 13.1, the 64-bit version of Citrix Receiver switched from a 32-bit plugin (using nspluginwrapper to allow it to run within a 64-bit browser) to a native 64-bit plugin.  However, the install script still configures the plugin to run within nspluginwrapper, which doesn't work with a 64-bit plugin.  The above will reconfigure the plugin to run without nspluginwrapper.

=== 8. Configure Firefox ===
In Firefox, go to Tools -> Add-ons -> Plugins, and make sure the "Citrix Receiver for Linux" plugin is set to "Always Activate".

Starting in Firefox 32, plugins are set to "Ask to Activate" by default, but for some reason the activation prompt is never displayed for the Citrix Receiver plugin, so the plugin will not work unless it is set to "Always Activate".

=== 9. Configure Chrome/Chromium ===
To use Citrix Receiver in Chrome and/or Chromium, run:
<pre>
xdg-mime default wfica.desktop application/x-ica
</pre>

<<BR>>
== Known Issues / Workarounds ==

* If you are running KDE 4.10 or later: In System Settings, make sure GTK is set to a theme other than '''Oxygen'''.  The Oxygen theme seems to cause the Citrix Receiver to constantly crash when trying to launch fullscreen applications (such as Terminal Servers or VDI).

* Some people have experienced problems with Citrix Receiver 13.0 showing only random fragments of windows.  It is not clear if this is a bug in the graphics library that Citrix has adopted with this version and/or its interaction with certain Citrix server configurations.  If you experience this, you are likely to have better success with version 12.1, see <nowiki>[[CitrixICAClientHowToOlderVersions]]</nowiki>.  The behavior of Citrix Receiver 13.1 for the affected people has not yet been determined.

* Sometimes the Citrix client will not go full-screen with Unity. The Unity launcher and status bar will still be visible, and the Citrix mouse will be in a slightly different position than the client mouse. This can be fixed enabling ''legacy fullscreen'' in ''compizconfig-settings-manager''. It is in 'advanced search' then 'Plugin: workarounds', then second on the list.

* You can exit from the FULL SCREEN mode (in Unity) by pressing Ctrl+F2 followed by Ctrl+Super+Arrow_Down.

* You can prevent Citrix from starting FULL SCREEN by opening a terminal (Ctrl+Alt+T), gedit ~/.ICAClient/All_Regions.ini and setting DesiredHRES=1366 and DesiredVRES=768 for example.

* You can solve keyboard layout problems looking for your keyboard layout in <nowiki>[[http://support.citrix.com/proddocs/topic/receivers-java-101/java-parameters-keyboard-layouts.html]]</nowiki> and updating `KeyboardLayout value in `~/.ICAClient/wfclient.ini`

* There is a bug in Citrix Receiver 13.1.0.285639, that the receiver can not be started from unity. The problem is a missing hash in a parameter, as a workaround it can be fixed by executing the follwing command. The problem and and solution are also described here: http://discussions.citrix.com/topic/358076-deb-package-uses-icaroot-instead-of-icaroot-spelling-error/#entry1844542
<pre>
sudo perl -pi -e 's/ -ica/ --ica/g' /usr/share/applications/selfservice.desktop
</pre>

----
CategorySystem
CategoryNetworking CategoryEnterprise
