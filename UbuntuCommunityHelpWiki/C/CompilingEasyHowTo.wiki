{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


== Compiling things on Ubuntu the Easy Way ==

Let's say you are a moderately experienced Linux user, and you want to
install an application off the Internet but it doesn't have a nice
package that works on your system.  (If it does have a package, install it following the instructions on InstallingSoftware.)

A lot of users, even quite
experienced ones, have issues with going from <nowiki>[[SoftwarePackagingFormats#Tarballs|the tarball]]</nowiki> to the
installed program because they just do not know the fairly easy steps
required to get the job done. But it's only easy if you already know
how to do it! So, here's a quick guide about how to install stuff from
developer sites.

=== Step 1: Prep your system for building packages ===

By default, Ubuntu does not come with the tools required.  You need to install the package ''build-essential'' for making the package and ''checkinstall'' for putting it into your package manager.  These can be found on the install CD or in the repositories, searching in ''Synaptic Package Manager'' or the command-line <code>apt-get</code>:

<pre>
sudo apt-get install build-essential checkinstall
</pre>
And since you may want to get code from some projects with no released version, you should install appropriate version management software.
<pre>
sudo apt-get install cvs subversion git-core mercurial
</pre>

You should then build a common directory for yourself where you'll be building these packages. We recommend creating <code>/usr/local/src</code>, but really you can put it anywhere you want.  Make sure this directory is writable by your primary user account, by running 
<pre>
sudo chown $USER /usr/local/src
</pre> 
and, just to be safe 
<pre>
sudo chmod u+rwx /usr/local/src
</pre>  
After you've done this, you're set up to start getting the programs you need.

=== Step 2: Getting the software you want ===

Most of the software you'll generally want comes from released
tarballs. These are just compressed archives with extensions like ''.tar.gz'' or
''.tar.bz2'' — they are just like ''.zip'' files on Windows or ''.sit'' on MacOS X, 
if that analogy helps you. If the program you want to install comes in
this form, you should move it into the <code>/usr/local/src</code>
directory we made in Step 1 and extract it by right-clicking on the file and selecting ''Extract Here'', or by using the command line:  If your tarball is a .gz, extract the files with the command:
<pre>
tar -xzvf tarballname.tar.gz
</pre>
and for bz2 the similar command:
<pre>
tar -xjvf tarballname.tar.bz2
</pre>

In the rare case of getting a program from a cvs or subversion
repository, the developers will generally provide instructions on how
to do this on their website. If you already installed the packages
listed on Step 1, you just need to change to your <code>/usr/local/src</code>
directory (<code>cd /usr/local/src</code>) and run the commands that are listed. The procedure will vary
from program to program, so I can't help you here, but with the given
packages the instructions they provide should work smoothly.

Note: If you downloaded from source such as Git, SVN, or any other source repository then it is likely that the ./configure files have not yet been generated. You may be able to run the command
<pre>
autogen.sh 
</pre>
from within the downloaded files top directory. This command relies on automake and autoconf programs and will automatically build the configuration files and run the 
<code> ./configure </code>
command. After this step you can resume the later directions by running the command 
<pre> 
make 
</pre>

=== Step 3: Resolving Dependencies. ===

One nice thing about modern Linux distributions is they take care of dependencies for the user. That is to say, if you want to install a program, the <code>apt</code> program will make sure it installs all needed libraries and other dependent programs so installing a program is never more difficult than just specifying what you need and it does the rest. Unfortunately with tarballs this is not the case, and you'll have to do it manually. It's this stage that trips up even some fairly experienced users who often give up in frustration for not being able to figure out what they need to get.

* You probably want to read about the possibilities and limitations of <nowiki>[[AutoApt|auto-apt]]</nowiki> first, which will attempt to take care of dependency issues automatically.  The following instructions are for fulfilling dependencies manually:

To prepare, install the package <code>apt-file</code>, and then run <code>sudo apt-file update</code>.
This will download a list of all the available packages and all of the files those packages contain, which as you might expect can be a '''very''' large list.  It will not provide any feedback while it loads, so just wait.

The <code>apt-file</code> program has some interesting functions, the two most useful are <code>apt-file search</code> which searches for a particular file name, and <code>apt-file list</code> which lists all the files in a given package.  (Two explanations: <nowiki>[[http://debaday.debian.net/2007/01/24/apt-file-search-for-files-in-packages-installed-or-not/|1]]</nowiki> <nowiki>[[http://www.debianhelp.co.uk/findfile.htm|2]]</nowiki>)

To check the dependencies of your program, change into the directory
you created in step two (<code>cd /usr/local/src</code>). Extracting the tarball or downloading from
cvs/subversion will have made a sub-directory under /usr/local/src that
contains the source code. This newly-created directory will contain a
file called "configure", which is a script to make sure that the
program can be compiled on your computer. To run it, run the command <code>./configure</code> 
This command will check to see if you've got all the programs needed to
install the program — in most cases you will not, and it will error
out with a message about needing a program.

* If you run <code>./configure</code> without any options, you will use the default settings for the program. Most programs have a range of settings that you can enable or disable, if you are interested in this check the <code>README</code> and <code>INSTALL</code> files found in the directory after decompressing the tar file. You can check the developer documentation and in many cases <code>./configure --help</code> will list some of the key configurations you can do.  A very common options is to use <code>./configure --prefix=/usr</code> which will install your application into <code>/usr</code> instead of <code>/usr/local</code> as my instructions do.

If this happens, the last line of output will be something like 
<pre>
configure: error: Library requirements (gobbletygook) not met, blah blah blah stuff we don't care about
</pre>
But right above that it will list a filename that it cannot find (often a filename ending in ".pc", for instance). What you
need to do then is to run 
<pre>
apt-file search missingfilename.pc
</pre>
which will tell you which Ubuntu package the missing file is in.  You can then simply install the package using 
<pre>
sudo apt-get install requiredpackage
</pre>  
Then try running <code>./configure</code> again, and see if it works.  If you get to a bunch of text that finishes with <code>config.status: creating Makefile</code> followed by no obvious error messages, you're ready for the next steps.

=== Step 4: Build and install. ===

If you got this far, you've done the hardest part already.  Now all you need to do is run the command 
<pre>
make
</pre>
which does the actual building (compiling) of the program. 

 <nowiki>[[File:IconsPage/tip.png]]</nowiki> If it's a large program or if you've got a very slow computer, go and get a cup of coffee or something. If you have a multi-core processor you can also set the variable CONCURRENCY_LEVEL to the number of processors/cores you have to speed things up a little.

When its done, install the program.  You probably want to use
<pre>
sudo checkinstall
</pre>
which puts the program in the package manager for clean, easy removal later.  This replaces the old <code>sudo make install</code> command.  See the complete documentation at CheckInstall. 

Note: If checkinstall fails you may need to run the command like 
<pre> 
sudo checkinstall --fstrans=0
</pre> 
Which should allow the install to complete successfully. Bugs: 78455 & 599163

Then the final stage of the installation will run.  It shouldn't take long.  When finished, if you used <code>checkinstall</code>, the program will appear in Synaptic Package Manager.  If you used <code>sudo make install</code>, your application will be installed to <code>/usr/local/bin</code> and you should be able to run it from there without problems.

 <nowiki>[[File:IconsPage/note.png]]</nowiki> If this all seems way too hard for you, don't fret. You're using Ubuntu after all, and it has all of the programs that you actually need to get your work done already packaged for you. If there isn't a package out there, the odds are that you really don't need the program and within a few months someone will have packaged it for you. The only programs you actually need to build and compile like this are programs that are new and perhaps not yet stable or ready for your desktop. If you think this procedure is too hard, well maybe you ought to reconsider why you want to do this and just wait a few months for the next stable release. But it can be a good learning experience for you.

If your desired package is quite important and you think it deserves to be in Ubuntu properly, perhaps contact the <nowiki>[[http://wiki.ubuntu.com/MOTU|Masters of the Universe]]</nowiki> and see if they can do the hard work for you — if they package
something, anyone can install it without having to go through this
procedure. But if you can get through all this, you're well on your way
to becoming an expert Linux user — you'd be surprised how easy all
this seems after you've done it just a few times. Good luck!

 <nowiki>[[File:IconsPage/note.png]]</nowiki> Easy meaning "easier than tearing your hair out and then screaming about how much Linux sucks while running around the room". Not '''actually''' easy.

=== Attachments ===

The process described in this page can be performed without typing terminal commands, using the attached application. Download the package <nowiki>[[attachment:kludge_tarball_installer_v0.10.tar]]</nowiki>, extract it to your user folder, and see the README file.

=== Links ===

=== Comments ===

For a more advanced yet not so easy Howto, have a look at CompilingSoftware.

* The "easy" tutorial should be the default one (at CompilingSoftware), and the "advanced" tutorial should be at a name like CompilingSoftwareAdvanced.  The target audience  for a document like this is people who have never done any of this stuff before.  Make the default document as easy to use as possible.

* Would it be better to change the group of  /usr/local/src/ to admin and give them rwx privleages? Since anyone adding and removing software should be in the admin group.

* Would be nice to see an example tar ball included in the post. Would make it easy for someone to test the steps.
