{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



== Introduction ==

<nowiki>[[http://www.cacti.net/|Cacti]]</nowiki> is a complete network graphing solution designed to harness the power of RRDTool's data storage and graphing functionality. Cacti provides a fast poller, advanced graph templating, multiple data acquisition methods, and user management features out of the box. All of this is wrapped in an intuitive, easy to use interface that makes sense for LAN-sized installations up to complex networks with hundreds of devices.

== Cacti on Gutsy ==
=== snmpd setup ===
apt-get install snmp snmpd<<BR>>
snmpconf -g basic_setup

== Installing Cacti on Ubuntu 6.06 LTS (Dapper Drake) ==

=== Caveats ===

** These instructions are for the graphical installer.  Server installation instructions are found below.
** If this procedure doesn't work for you, try the previous procedure which is documented below.

=== Install MySQL server ===

To install MySQL server you need to install the mysql-server package

=== Install Cacti ===

1. You can get the cacti package from the Universe Repository.
2. Click "Forward" on the warning titled "Configuring libphp-adodb"
3. If you have entered a root password for MySQL, enter it on the window titled "Password of your database's administrative user:".
     If the root password is blank, just hit enter and continue.
4. Leave the question "MySQL application password for Cacti" blank and hit "Forward".
*** Note:  The system will create a random password for you, so you don't need to enter one
5. On the "Webserver type" question, select "Apache2" and then click "Forward"

=== Setup Cacti ===

1. Visit the website of your Cacti server, should be similar to "http://localhost/cacti/"
2. This should automatically initiate the "Cacti Installation Guide" in your web-browser
3. Click "Next", "Next", and "Finish" to complete this guide
4. Login to Cacti with the default username and password of "admin" and "admin"
5. You will be forced to change the "admin" password to something new
6. '''Cacti is now successfully installed!'''

=== Recommended: Create a root password for MySQL ===

If you have a blank root password for MySQL then you are recommended to create one.
<pre>
sudo mysqladmin -u root password "YourPasswordGoesHere"
    </pre>

== Installing Cacti on Ubuntu Server 6.06 (Dapper Drake) ==

1. To install MySQL-server install the mysql-server package.
2. To install Cacti install the cacti package from the Universe Repository.
3. Leave the question "Password of your database's administrative user:" blank and hit "Forward".
4. Leave the question "MySQL application password for Cacti" blank and hit "Forward".
*** Note:  The system will create a random password for you, so you don't need to enter one
5. On the "Webserver type" question, select "Apache2" and then click "Forward"

=== Setup Cacti ===

1. Visit the website of your Cacti server, should be similar to "http://server.ip.address/cacti/"
2. This should automatically initiate the "Cacti Installation Guide" in your web-browser
3. Click "Next", "Next", and "Finish" to complete this guide
4. Login to Cacti with the default username and password of "admin" and "admin"
5. You will be forced to change the "admin" password to something new
6. '''Cacti is now successfully installed!'''

=== Recommended: Create a root password for MySQL ===

Now you need to create a root password for MySQL
*** Note: Choose a password and place it between the quotation marks below
      <pre>
sudo mysqladmin -u root password "YourPasswordGoesHere"
      </pre>

== Previous Documentation on Installing Cacti ==
=== Installing Cacti for Ubuntu - Part 1 ===

1. Open up a terminal window, easiest to log in as root

2. Install Apache2 (If not already installed) by installing the apache2 package.
</pre> (see InstallingSoftware).

3. Install MySQL components (If not already installed) by installing the php5-mysql and mysql-server packages (see InstallingSoftware).

4. During the mail server installation, select the following options if you're not sure what else to use:
<pre>
Internet Site
localhost.localdomain (for the purposes of this install of cacti, i just left this as default)</pre>

5. Install Cacti by installing the Cacti package in Ubuntu (see InstallingSoftware).

6. During the cacti installation, select the following options if you're not sure what else to use:
<pre>
MySQL server host name: localhost
Database name for cacti: cacti
Cacti database username: cacti
Cacti user password: cacti_password
Webserver type: Apache2
</pre>
7. Install the MySQL database: (ignore the mysql instructions to change your password; proceed to step 8.)
<pre>
mysql_install_db
</pre>
8. Create a MySQL database called "cacti":
<pre>
mysqladmin --user=root create cacti
</pre>
9. Type '''mysql''' to enter into MySQL management.

10. At the mysql> prompt, type:
<pre>
GRANT ALL ON cacti.* TO cacti@localhost IDENTIFIED BY "cacti_password";
</pre>
NOTE: make "cacti_password" whatever you set the cacti password to during the installation of cacti.

11. Type: 
<pre>
exit
</pre>
12. Back at the shell type:
<pre>
zcat /usr/share/doc/cacti/cacti.sql.gz |mysql -u cacti -p cacti
</pre>
13. You will be prompted for a password here, use the same password again you set during the installation of cacti.

=== Installing Cacti for Ubuntu - Part 2 ===

1. Open a web browser on the machine with cacti installed

2. Type <nowiki>[[http://localhost/cacti]]</nowiki> into the address bar. Note, you can also use the IP address or DNS address of the PC instead of using "localhost".</li>

3. Click '''Next'''

4. Make sure '''New Install''' is selected and click '''Next'''

5. If all steps in Part 1 were followed correctly, all options on this page should show as <font color="green">[FOUND]</font>

6. Make sure '''NET-SNMP 5.x''' and '''RRDTool 1.2.x''' are selected and click '''Next'''

7. At this point, you should be prompted to login. You can use the username '''Admin''' and any password you previously set for this account, if any. The fault password should be '''admin'''. Upon logging in you'll most likely be forced to change your password for security purposes.

8. You should now be logged into cacti, if you need further assistance from here, it most likely won't be ubuntu specific so you should be able to refer to the generic guides on <nowiki>[[http://www.cacti.net/]]</nowiki> .

=== Installing Cacti for Ubuntu - Part 3: Errors FAQ (Work In Progress) ===

'''Q1.''' When I go to localhost/cacti, I keep getting the follow error:
<pre>
Warning: mysql_connect() [function.mysql-connect]: Access denied for user: 'cacti@localhost' (Using password: YES) in /usr/share/adodb/drivers/adodb-mysql.inc.php on line 338
</pre>
'''A.''' If you get this error, you've set the wrong password for cacti in mysql. To fix it, follow steps 9 & 10 in Part 1 of this guide.

'''A2.''' You can also get this message if you run the GRANT ALL command without the quotes around the password or without the semi-colon at the end.

'''Q2.''' The default password won't work when I try to log in through the web interface, how can I log in?

'''A.''' Go back to command line and type '''mysql'''. At the mysql> prompt, type:
<pre>
update user_auth set password = md5('admin') where username = 'admin';
</pre>
'''Q3.''' I get a "red X" and my graphs will not display properly.

'''A.''' I have found that this is because the mysql module sometimes does not get properly registered with PHP.  Run the command "php -m" and if you do not see mysql listed then this is your problem.  Run the command "dpkg-reconfigure php5-mysql" to correct the problem and then run the command "php -m" again to see if it is now listed.  Run the command "apache2ctl restart" to restart the Apache server.

'''Q4.''' I get a "red X" and my graphs will not display properly.
<pre>
Fatal error: Call to undefined function mysql_pconnect() in /usr/share/php/adodb/drivers/adodb-mysql.inc.php on line 372
</pre>

'''A.''' This is probably due to the fact that the poller runs using the commandline php. So you have to edit /etc/php5/cli/php.ini and make sure you add extension=mysql.so.

'''Q5.''' When I add a graph, I notice an error in the log: "CMDPHP: Poller[0] ERROR: SQL Exec Failed "update data_template_data set rrd_maximum='|query_ifSpeed|' where local_data_id=8""

'''A.''' I believe there's a problem with the package.  The query is trying to update a field in a column that doesn't exist in the table data_template_data.  I was able to clear this error by running 'sudo apt-get remove cacti' and installing 0.8.6i manually.  (I think the package currently installs 0.8.6h)  I didn't locate a .php file  that had both the string 'data_template_data' and the string 'rrd_maximum' but something launched that sql command. 

'''Q6.''' When I change the Title of a graph, the graph disappears from the list.  The log says, "CMDPHP: Poller[0] ERROR: SQL Assoc Failed "select data_input_fields.type_code, data_input_data.value from (data_input_fields,data_input_data) where data_input_fields.id=data_input_data.data_input_field_id and data_input_data.data_template_data_id= and (data_input_fields.type_code='index_type' or data_input_fields.type_code='index_value' or data_input_fields.type_code='output_type')" 

'''A.''' I believe there's a problem with the package.  This sql query is just broken - though it may be the log process munging the report of the query being attempted rather than the query itself.  I was able to clear this error by running 'sudo apt-get remove cacti' and installing 0.8.6i manually.  (I think the package currently installs 0.8.6h)

----
CategoryNetworking
