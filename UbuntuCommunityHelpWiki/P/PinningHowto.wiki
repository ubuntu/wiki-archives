{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


This wiki page will discuss some advanced things you can do to packages to accomplish specific goals. The first thing described is Pinning, this is useful if you want only some things from a newer version of Ubuntu. There is also package holding, which allows you to not update the package.

== Introduction to Pinning ==

Pinning is a process that allows you to remain on a stable release of Ubuntu (or any other debian system) while grabbing packages from a more recent version.

Note however that the processes described below will only work if things like libc6 versions match, so you should probably not do this on an Ubuntu system. I strongly recommend you look at UbuntuBackports before doing this.

=== Pinning Methods ===

There are 3 main files you must edit for pinning to even function.  

It is important to start out by setting your default release to avoid accidentally upgrading all packages, by editing /etc/apt/apt.conf [in intrepid that is /etc/apt/apt.conf.d/01ubuntu, "intrepid" rather than "hardy", but use the name for the appropriate release of your Ubuntu, eg. "xenial" for 16.04, "bionic" for 18.04] as follows:

<pre>
APT::Default-Release "hardy";
</pre>

The second file is: 

/etc/apt/sources.list

An example configuration is as follows:

<pre>
deb http://archive.ubuntu.com/ubuntu hardy main restricted universe multiverse
deb http://archive.ubuntu.com/ubuntu intrepid main restricted universe multiverse
</pre>

In this example, we're pulling from hardy and intrepid; the versions of Ubuntu at the time of writing; please use the names of your wanted releases, for example 'xenial' for 16.04 LTS 'Xenial Xerus', 'yakkety' for 16.10.

The next file involved is:

/etc/apt/preferences

The 'preferences' file is where the actual pinning takes place. To pin a package, set its Pin-Priority to higher number. Here's an example:

<pre>
Package: firefox-3.0
Pin: release n=hardy
Pin-Priority: -10

Package: firefox-3.0
Pin: release n=intrepid
Pin-Priority: 900
</pre>

In this example, we're giving a higher priority to Firefox from intrepid because we want rc1 instead of beta5. This of course can be done with any package, or even all packages - although in the above example, you likely want to change hardy and intrepid Pin-Priority values around so that hardy is default. For further information please read: man apt_preferences

==== Debugging Package Priorities ====

To print out the priorities of each source, run `apt-cache policy`. For priorities for packages, run `apt-cache policy packagename[s]`.

=== Recommended alternative to pinning ===

In Ubuntu, most times, the libc6 version is updated from version to version - it is not the purpose of this page to describe what libc6 is, but needless to say it breaks the above example.

A better method for grabbing things from a development version while not committing your entire machine to that version is as follows:

Add the following line to /etc/apt/sources.list

<pre>
deb-src http://archive.ubuntu.com/ubuntu intrepid main restricted universe multiverse
</pre>

Then you'll need to update your repos:

<pre>
sudo apt-get update 
</pre>

Now we need to install some packages so we can build the desired software in intrepid:

<pre>
sudo apt-get build-dep firefox-3.0
</pre>

Now we can do the following to get the package built from intrepid on our hardy machine:

<pre>
sudo apt-get -b source -t intrepid firefox-3.0
</pre>

It will output lots of info on the screen, when it's done (could take a while), you will have rc1 instead of beta5!

== Introduction to Holding Packages ==

Holding a package basically means you're telling the package manager to keep the current version no matter what.  This is useful if more recent version of a currently working program breaks after an update.

The following will describe the process of actually holding the package, there are several options to accomplish this:

=== Apt ===
Starting with Ubuntu 12.04, use Apt to hold one or more packages:

<pre>
sudo apt-mark hold libxfont1 …
</pre>  Replace 'libxfont1' with the package(s) you wish to hold.

{{{#!wiki comment/dotted

=== Synaptic ===
{| class="wikitable"
|-
| <tablestyle="float:right"> <nowiki>[[File:lockver.png]]</nowiki>
|}
First way to hold a package is in Synaptic:

* Open Synaptic:  System -> Administration -> Synaptic Package Manager
* Click Search and type the package's name in the Search box
* Highlight the version you want to pin '''Make sure that you select the correct version'''
* Once the correct package is selected, Click Package -> Lock Version
* Close Synaptic
<<BR>>

}}}

=== Dpkg ===
On older systems, use dpkg:

* Open a terminal
* sudo -s and hit enter
* Enter your password for sudo
 <pre>
echo libxfont1 hold | dpkg --set-selections
</pre>  '''Replace libxfont1 with the package you want to pin'''
* Now run sudo apt-get update and then sudo apt-get upgrade

== Removing a Hold ==
To remove a package from hold, you can run 

<pre>
sudo apt-mark unhold libxfont1 …
</pre> Replace 'libxfont1' with the package(s) you wish to unhold.

To see what the next version of the package is, use `apt-cache policy packagename` (see ''Debugging Package Priorities'' above).

{{{#!wiki comment/dotted

=== Synaptic ===
To remove the pin in Synaptic:

* Open Synaptic
* Search for the correct package
* Click on package to highlight it
* Once the correct package is selected, Click Package -> Lock Version to remove the checkmark
* Close Synaptic
}}}

=== Dpkg ===
To remove pin from Dpkg:

* Open a terminal
* sudo -s and hit enter
* Enter your password for sudo
* <pre>
echo libxfont1 install | dpkg --set-selections
</pre> '''Replace libxfont1 with the package you want to pin'''
* Now run sudo apt-get update and then sudo apt-get upgrade

'''NOTE''' 
At the time of the making this Wiki there is not a known way to Pin a package with Update Manager.

Pinning should never be used for installing Debian binary packages on Ubuntu.
Ubuntu strongly recommends against using Debian binary packages on Ubuntu, 

== Examples ==

=== Example #1: Pinning the ubuntu-x-swat/q-lts-backport-precise PPA ===

This <nowiki>[[https://launchpad.net/~ubuntu-x-swat/+archive/q-lts-backport|PPA]]</nowiki> contains backports of newer Linux kernel and Xorg stack components from quantal to precise.
<<BR>>
'''WARNING:''' The packages from this PPA are not intended for end users. It is for testing and feedback only aka unsupported!

First, add the PPA to your sources.list:

<pre>
$ sudo add-apt-repository ppa:ubuntu-x-swat/q-lts-backport
</pre>

Create and edit a new file in /etc/apt/preferences.d/ directory:
<pre>
[ /etc/apt/preferences.d/ubuntu-x-swat-q-lts-backport-precise-pin-400 ]
Package: *
Pin: release o=LP-PPA-ubuntu-x-swat-q-lts-backport
Pin-Priority: 400
</pre>

Verify the pinning priority (here: "xserver-xorg" package):
<pre>
$ sudo apt-cache policy xserver-xorg
</pre>

The output should list the "xserver-xorg" package from the new PPA with priority "400" but not as a "Candidate" for upgrading:
<pre>
xserver-xorg:
  Installed: 1:7.6+12ubuntu1
  Candidate: 1:7.6+12ubuntu1
  Version table:
     1:7.6+12ubuntu1.10 0
        400 http://ppa.launchpad.net/ubuntu-x-swat/q-lts-backport/ubuntu/ precise/main amd64 Packages
* ** 1:7.6+12ubuntu1 0
        500 http://archive.ubuntu.com/ubuntu/ precise/main amd64 Packages
        100 /var/lib/dpkg/status
</pre>

This will list all packages from the new PPA which include "lts-quantal" pattern:
<pre>
$ sudo apt-cache search lts-quantal | sort
</pre>

=== Example #2: Pinning the kubuntu-ppa/backports PPA ===

There exists a PPA for <nowiki>[[https://launchpad.net/kubuntu-ppa|backports of KDE-SC]]</nowiki> to Ubuntu/precise (latest: v4.9.1), for more details please see also <nowiki>[[http://www.kubuntu.org/news/kde-plasma-workspaces-applications-and-platform-491|here]]</nowiki>. <<BR>>

First, add the PPA to your sources.list:
<pre>
}}}

Create and edit a new file in /etc/apt/preferences.d/ directory to prevent auto-upgrades:
{{{
[ /etc/apt/preferences.d/kubuntu-ppa-backports-pin-400 ]
Package: *
Pin: release o=LP-PPA-kubuntu-ppa-backports
Pin-Priority: 400
</pre>

Simulate an upgrade to new KDE-SC:
{{{
}}}
NOTE-1: You need to pass <code>-t precise</code> to get packages from <code>kubuntu-ppa/backports PPA</code>! <<BR>>
NOTE-2: By choosing <code>kde-standard</code> meta-package you will get a complete KDE-SC installation. <<BR>>
NOTE-3: Drop <code>--simulate</code> to force a real installation.

As listed in Example #1, you can check with <code>apt-cache policy $pkgname</code> the pin-priority.

== Links ==

These documents were used as a foundation for this page, and might give you more background information:

* For Basic apt-get usage and instructions see AptGetHowTo
* <nowiki>[[http://www.debian.org/doc/manuals/apt-howto/ch-apt-get.en.html|The official Debian documentation]]</nowiki>
