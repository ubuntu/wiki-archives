{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


Discussion of this wiki can be found <nowiki>[[http://ubuntuforums.org/showthread.php?p=12062077#post12062077 |here ]]</nowiki>

=== Powerware 5110 UPS monitoring/auto shutdown in Ubuntu 12.04 Precise ===

'''NOTE:''' I take no responsibility if you stuff something up doing this. So long as you have a moderate grasp of Ubuntu/Linux and editing configuration files - then this guide will be very straightforward. Make sure you read carefully and take things slowly.
I'm going to skip the small talk - you can read over that here (where I stole the commands from):
<nowiki>[[http://blog.shadypixel.com/monitoring-a-ups-with-nut-on-debian-or-ubuntu-linux/| http://blog.shadypixel.com/monitorin...-ubuntu-linux/]]</nowiki>That out of the way - here's everything you need to do to get your Powerware 5110 UPS up and running/able to be monitored in Ubuntu 10.04 Lucid. 

'''Note:''' Updated this guide to read for Ubuntu 12.04 as I just tested it and it works fine!

 Also note that if you are dual booting with Windows7 or Windows Vista, I believe there is some kind of driver bug whereby your PC may shut down upon Windows startup with the 5110 plugged in via USB.

 There is however a firmware update available from Eaton- or if you recently bought the UPS you should be OK (check the USB F/W version on the side of it, so long as it is higher than 0.5 you should be fine).

 Now, onto the guide...

==== Installing ====

<pre>
sudo apt-get install nut
</pre>

==== Editing ups.conf ====

<pre>
gksudo gedit /etc/nut/ups.conf
</pre>

Add and save.

<pre>
 [Powerware5110]
 driver = bcmxcp_usb
 port = auto </pre>

<pre>
gksudo gedit /etc/udev/rules.d/99_nut-serialups.rules
</pre>

Add and save.

<pre>
 KERNEL=="ttyS0", GROUP="nut"
</pre>

==== Start ====
<pre>
$ sudo udevadm control --reload-rules
$ sudo udevadm trigger
$ sudo upsdrvctl start
</pre>

This should output...

<pre>
 Network UPS Tools - UPS driver controller 2.4.3
 Network UPS Tools - BCMXCP UPS driver 0.23 (2.4.3)
 USB communication subdriver 0.18
</pre>

==== Further .conf file editing. ====

<pre>
gksudo gedit /etc/nut/upsd.conf
</pre>

Add and save.

<pre>
 ACL all 0.0.0.0/0
 ACL localhost 127.0.0.1/32
 ACCEPT localhost
 REJECT all
</pre>

<pre>
gksudo gedit /etc/nut/upsd.users
</pre>

Add and save.
<pre>
 [local_mon]
 password = __YOUR_PASSWORD_HERE__
 allowfrom = localhost
 upsmon master
</pre>

<pre>
gksudo gedit /etc/nut/upsmon.conf
</pre>

Add and save.

<pre>
 MONITOR Powerware5110@localhost 1 local_mon __YOUR_PASSWORD_HERE__ master
 POWERDOWNFLAG /etc/killpower
 SHUTDOWNCMD "/sbin/shutdown -h now"
</pre>

===== Chown and chmod =====

<pre>
sudo chown root:nut /etc/nut/*
sudo chmod 640 /etc/nut/*
</pre>

==== Final .conf edit and Start ====

<pre>
gksudo gedit /etc/default/nut
</pre>

Add and save.

<pre>
 START_UPSD=yes
 START_UPSMON=yes
</pre>

<pre>
gksudo gedit /etc/nut/nut.conf
</pre>

Add and save.

<pre>
 MODE=standalone
</pre>

===== Start nut =====

<pre>
sudo /etc/init.d/nut start
</pre>

<pre>
sudo upsc Powerware5110
</pre>

Should show the following
<pre>
 ambient.temperature.high: 1
 battery.charge.low: 22
 battery.voltage: 26.9
 device.mfr: Eaton
 device.model: POWERWARE UPS 1500i
 device.serial: 
 device.type: ups
 driver.name: bcmxcp_usb
 driver.parameter.pollinterval: 2
 driver.parameter.port: auto
 driver.version: 2.4.3
 driver.version.internal: 0.23
 input.frequency: 49.9
 input.frequency.high: 55
 input.frequency.low: 45
 input.frequency.nominal: 50
 input.transfer.boost.high: 216
 input.transfer.high: 280
 input.transfer.low: 186
 input.transfer.trim.low: 260
 input.voltage: 238
 input.voltage.nominal: 240
 output.current: 0.7
 output.current.nominal: 3.8
 output.frequency: 49.9
 output.phases: 1
 output.voltage: 238
 output.voltage.nominal: 240
 ups.beeper.status: enabled
 ups.firmware: Cont:00.50 Inve:01.50
 ups.load: 18.4
 ups.mfr: Eaton
 ups.model: POWERWARE UPS 1500i
 ups.power.nominal: 1500
 ups.serial: 
 ups.status: OL
</pre>

==== Monitoring your UPS from now on. ====

 Simply run the last command:

<pre>
sudo upsc Powerware5110
</pre>

Which will net you the output with all your UPS information. Do with that what you will - feed it into some PHP page with SQL and run LAMP so you can have a live monitor/log of the UPS statistics, output it to a text file, feed it into conky, whatever! This is Linux - your skills are the limit limit 

Originally posted <nowiki>[[http://ubuntuforums.org/showthread.php?t=1443562|The Ubuntu Forums (ubuntuforums.org)]]</nowiki>
