{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



== Introduction ==

Many COWON audio players are Linux-friendly portable media devices. Most (modern) devices support the following:

* OGG/FLAC support (as well as MP3/WMA/APE/WAV)
* ID3 tag support
* M3U playlist support
* AVI/WMV/ASF video support with DivX 3/4/5 and Xvid SP/ASP codec support
* Gapless playback and Semi-parametric equalizer (for audiophiles)

This page will help you connect your COWON media player with the Banshee Media Player (version 1.8.1 +) on Ubuntu 10.04 and higher.

This method is known to work for a number of COWON audio devices, although there's no guarantee that it'll work for all.  Among those that it should work for are:

* D2/D2+
* J3
* S9
* iAUDIO 9

== Preparing Banshee ==

In order for Banshee to recognize your COWON as a media device, it requires '''Mass Storage Media Player Support''':

** Open Banshee.
** On the menu bar, select Edit > Preferences.
** Navigate to the Extensions tab, and scroll down to Device Support.
** Ensure that the "Mass Storage Media Player Support" extension is enabled.

This should be a core extension and shipped with Banshee by default.

When this is completed, quit Banshee for now and proceed with preparing your COWON.

== Preparing Your COWON ==

=== Enabling Mass Storage Class Mode ===

In order for your Cowon to mount as a regular USB hard drive, it should be in '''Mass Storage Class (MSC) mode''' and not in Media Transfer Protocol (MTP) mode.  To make or confirm this change:

** Navigate to the device's Settings screen.
** Select System.
** Scroll down to USB Mode and choose "MSC".

=== Creating the .is_audio_player File ===

Connect your COWON via USB and wait for it to appear as a USB Mass Storage device on your desktop.  Ignore Ubuntu's prompts to open Rhythmbox/Banshee and simply double click the desktop icon for your device to browse its root directory.  You should see folders entitled ''Music'', ''Pictures'', ''System'', ''Flash'', etc.

If you plan to use an external memory card within the device, navigate to the root of this, and not the root of the device's memory. For example, some devices will have two locations mounted, internet and external memory.

Banshee expects unknown Mass Storage media players to contain a file called '''.is_audio_player''' (note the dot preceding the name - this is a ''hidden file'') in the root directory of the device.  Create this file using your favourite text editor and paste the following text into it verbatim:

<pre>
name="DEVICE_NAME"
audio_folders=Music/
video_folders=Video/
output_formats=audio/mp3,audio/flac,audio/ogg,audio/wav,audio/ape,audio/wma,audio/aac,video/divx,video/wmv,video/asf,video/svid
playlist_formats=audio/x-mpegurl
cover_art_file_type=jpeg
cover_art_file_name=cover.jpg
cover_art_size = 272
</pre>

Insert the device name (i.e., J3) for DEVICE_NAME. Change the cover art size as required on the device. J3 and S9 are presumed to used 272 pixels.

Save the file and quit your text editor.

=== Enabling Playlist Support (mostly) ===

At this point, Banshee will be able to recognize your COWON and sync music with it.  M3U Playlists will also synchronize but will not actually play on the device.  This is because the COWON expects '''DOS-style paths''' (\ instead of /) and '''absolute paths''' (which are relative to the root of the device).  Banshee's M3U playlists use UNIX-style paths which are relative to the ''Music'' directory.

As a temporary fix for this issue, create a script called '''convert_playlists.sh''' in your home folder using your favourite text editor and paste the following text into it verbatim:

<pre>

cd '/media/COWON DEVICE_NAME/Music'
sed -i '/^[^#]/ s?^?/Music/?' *.m3u
sed -i '/^\// s/\//\\/g' *.m3u
todos -uo *.m3u
</pre>

Again, change DEVICE_NAME with the device model.

Do not forget to make this script executable by right-clicking on it, choosing ''Properties'', navigating to the ''Permissions'' tab and selecting ''Allow executing file as program'' -- or, if you prefer, make the change via the command line:

<pre>
$ chmod a+x convert_playlists.sh
</pre>

You can now place the script in '''/home/''USER_NAME_HERE''/.gnome2/nautilus-scripts''' and will be able to run it from Nautilus by a simple right click. The following command will make the move for you automatically.

<pre>
$ mv /$HOME/convert_playlists.sh /$HOME/.gnome2/nautilus-scripts
</pre>

Also, if you are missing dependencies for the script, please install them using ''apt-get'' or ''aptitude'':

<pre>
$ sudo apt-get install sed tofrodos
</pre>

Please note that this script was originally designed by James Ogley (see below) and has been modified for compatibility with Ubuntu 10.04+.

Discussion of the usage of this script follows.

== Syncing your Music Library ==

Now that you have prepared Banshee and your COWON, you may synchronize your music library and playlists by following these steps:

# Open Banshee Media Player
# Connect your COWON to your computer via USB
# Wait for your COWON to appear on the far left of the Banshee interface (likely at the bottom of the list below ''Music'',''Videos'',etc.)
# Select your COWON from the list on the far left of the Banshee interface
# Allow Banshee to scan the device for existing media files (this may take some time)
# Under ''Sync Preferences'' in the middle of the interface, choose the ''Sync entire library'' option in the drop-down list for ''Music'' and select the ''Sync when first plugged in and when libraries change'' checkbox
# Banshee should now synchronize your music library and playlists automatically.  If it does not begin synchronizing, try clicking the ''Sync'' in the upper right-hand corner of the Banshee interface.
# When Banshee is finished synchronizing your music and playlists, '''exit''' the program completely.
# Right click anywhere in Nautilus and find the sub-menu called '''Scripts'''. From there, you can select the '''convert_playlists.sh''' script to run it and convert Banshee's synchronized playlists into the format your COWON will understand.
# Safely eject/disconnect your COWON from your computer
# Enjoy your tunes!

== External Links ==

* <nowiki>[[http://jamesthevicar.com/wordpress/2009/07/17/m3u-playlists-on-cowon-s9-with-linux-and-banshee/|James Ogley's original blog post concerning M3U playlists on the COWON S9]]</nowiki>.
* <nowiki>[[http://www.floccinaucinihilipilification.net/wiki/index.php/.is_audio_player_file_format|Some documentation concerning the '''.is_audio_player''' file]]</nowiki>.
* <nowiki>[[http://anythingbutipod.com/|An excellent source of information for users of non-iPod portable media players]]</nowiki>.
* <nowiki>[[http://iaudiophile.net/|A Cowon user's fansite with a great forum dedicated to the Cowon J3]]</nowiki>.
