{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

This guide has been tested with Ubuntu 12.4 Server. 

==== Setup PPTP Server ====
First we need to install pptp server using apt-get
<pre>
}}}
Then we need to configure the pptpd.
{{{
</pre>
Add server IP and client IP at the end of the file. You can add like below:
<pre>
localip 192.168.0.1
remoteip 192.168.0.100-200
</pre>
This sets up the PPTP server to use IP 192.168.0.1 while distributing the IP range 192.168.0.100 to 192.168.0.200 to PPTP clients. Change these as you wish as long as they are private IP addresses and do not conflict with IP addresses already used by your server.

Configure DNS servers to use when clients connect to this PPTP server
<pre>
}}}
Uncomment the ms-dns and add google like below or OpenDNS
{{{
ms-dns 8.8.8.8
ms-dns 8.8.4.4
</pre>
Now add a VPN user in /etc/ppp/chap-secrets file. 
<pre>
}}}
The column is username. Second column is server name, you can put “pptpd” in there. Third column is password. The last column is the IP addresses, you can put * to allow all IP.
{{{
username * myPassword *
</pre>
Finally start your server
<pre>
}}}

==== Setup IP Forwarding ====

To enable IPv4 forward. Change /etc/sysctl.conf file, add forward rule below.
{{{
</pre>
Uncomment the line
<pre>
net.ipv4.ip_forward=1
</pre>
Then reload the configuration
<pre>
sudo sysctl -p
</pre>
Add forward rule in iptables
<pre>
}}}
adding to the bottom just before the exit 0
{{{
iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -o eth0 -j MASQUERADE
iptables -A FORWARD -p tcp --syn -s 192.168.0.0/24 -j TCPMSS --set-mss 1356
</pre>
This example is using 192.168.0 for its PPTP subnet. The second rule adjusts the MTU size :

You are done. Just reboot your server and you should be able to connect to using PPTPD and send all your traffic through this server.

----
CategoryVPN <nowiki>[[CategoryVPN]]</nowiki>
