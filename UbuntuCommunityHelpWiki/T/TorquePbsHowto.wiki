{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



== What is PBS? ==

PBS is an acronym for Portable Batch System. TORQUE is an open source resource manager providing control over batch jobs and distributed compute nodes. It is a community effort based on the original *PBS.

== Getting Started ==

You need server and some clients. Server also can have client package installed, so users can login to server (ssh) and submit jobs to queues. For Ubuntu 10.04 it's reccomended to manually download and install packages from Maverick repository - Lucid packages are old and problematic.

=== Set up your Server ===

 1. Install the required packages
 <pre>
sudo aptitude install torque-server torque-scheduler torque-client
</pre>
 the rest should be installed as dependencies.<<BR>>
 '''NOTE:''' there is a bug in Maverick torque-scheduler package - check if in /etc/init.d/torque-scheduler proper PIDFILE is set
 <pre>
PIDFILE=/var/spool/torque/sched_priv/sched.lock
</pre>
 
 2. Set the server and queue parameters:
** start server in 'create' mode
** set up server settings (scheduling = True, query_other_jobs = True, and later default_queue)
** define nodes
** create and set up queues (queue_type,resources_max,started,enabled)

 You can do it by using '''qmgr''' command, either interactive or not (with -c option), except first 'create' command.

=== Set up Clients ===

 1. Install the required packages
 <pre>
sudo aptitude install torque-client torque-mom
</pre>

 2. Set up node - set default server in <code>/var/spool/torque/server_name</code>
 3. Check if pbs_mom is starting automatically (/etc/rcXd..., you can write pbs_mom command in /etc/rc.local file)

== Using Torque PBS system ==

=== Basics of pbs scripts ===

* <code>#!</code> sha-bang line
* <code>-l</code> PBS parameters, including number of CPUs (cores), memory and time needed
* <code>-q</code> name of the queue you want to submit to
* <code>-m</code> notification settings
* <code>-V</code> load user environment variables

<pre>

cd /to_some_directory

some_commands and_parameters
</pre>

=== Submitting, viewing and managing jobs ===

Basic tasks:
* submit job to the queue <code>qsub yourfile.pbs</code>
* check what jobs are running on which nodes <code>qstat -an</code>
* remove job from queue <code>qdel XXX.host</code>

This is only a stub - to be continued soon...

== Resources ==

http://www.clusterresources.com/products/torque-resource-manager.php

----

CategoryScience
