{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

''<nowiki>[[UpgradeNotes]]</nowiki>/'''UpgradeProblems'''''

== Introduction ==
''This article is outdated. It needs a thorough rewrite (or maybe it is best to delete it and write a new one).''

This page tries to collect and describe possible upgrade problems and solutions. Network issues, unreachable hosts, local conditions and other possible problems preventing the Ubuntu distribution upgrade procedure will be addressed. Please help expanding this documentation if you find more information, solutions or workarounds for upgrading Ubuntu.

This page will not deal with application bugs. If the issue is related to bugs in the package manager, upgrade manager or other software, please <nowiki>[[http://www.ubuntu.com/community/reportproblem|Report the Problem]]</nowiki>.

Be aware that some of the informations here are quite technical. If you're unsure about something, please don't hesitate to ask for help on the forums instead of accidentally breaking your Ubuntu installation!

=== Current dist not found in meta-release file ===

'''Affected versions (reported):'''
* Ubuntu Intrepid 8.10 (and earlier)

'''Symptoms:'''
* Update-Manager doesn't detect that a distribution upgrade is available.
  (even after 'Show new distribution releases' is set to 'Normal' in 'Software Sources')
* <code> sudo do-release-upgrade </code> reports 'Current dist not found in meta-release file'.

'''Cause:'''
 /var/lib/update-manager/meta-release is missing an entry for the current release.

'''Workaround:'''
 Add required sections to /var/lib/update-manager/meta-release for your current release.
 For Intrepid failing to upgrade to Jaunty, the sections for Intrepid onwards were missing, so I added:
<pre>
Dist: intrepid
Name: Intrepid Ibex
Version: 8.10
Date: Thu, 30 Oct 2008 12:00:00 UTC
Supported: 1
Description: This is the 8.10 release
Release-File: http://archive.ubuntu.com/ubuntu/dists/intrepid/Release
ReleaseNotes: http://archive.ubuntu.com/ubuntu/dists/intrepid/main/dist-upgrader-all/current/ReleaseAnnouncement
UpgradeTool: http://archive.ubuntu.com/ubuntu/dists/intrepid/main/dist-upgrader-all/current/intrepid.tar.gz
UpgradeToolSignature: http://archive.ubuntu.com/ubuntu/dists/intrepid/main/dist-upgrader-all/current/intrepid.tar.gz.gpg

Dist: jaunty
Name: Jaunty Jackalope
Version: 9.04
Date: Thu, 24 Apr 2009 12:00:00 UTC
Supported: 0
Description: This is the 9.04 release
Release-File: http://archive.ubuntu.com/ubuntu/dists/jaunty/Release
ReleaseNotes: http://archive.ubuntu.com/ubuntu/dists/jaunty/main/dist-upgrader-all/current/ReleaseAnnouncement
UpgradeTool: http://archive.ubuntu.com/ubuntu/dists/jaunty/main/dist-upgrader-all/current/jaunty.tar.gz
UpgradeToolSignature: http://archive.ubuntu.com/ubuntu/dists/jaunty/main/dist-upgrader-all/current/jaunty.tar.gz.gpg
</pre>
The update-manager GUI did not detect the new distribution immediately after this change, but I was able to upgrade successfully by running <code> sudo do-release-upgrade </code>

'''Submitted by:''' <nowiki>[[Tybion]]</nowiki>

=== Not enough free disk space ===

'''Affected versions (reported):'''
* Ubuntu Intrepid 8.10 (and earlier)

'''Symptoms:'''
* Update-Manager doesn't detect that a distribution upgrade is available.
  (even after 'Show new distribution releases' is set to 'Normal' in 'Software Sources')
* <code> sudo do-release-upgrade </code> reports 'Not enough free disk space'.

'''Cause:'''
 The upgrade needs a total of 2364M free space on disk '/'.

'''Workaround:'''
 Empty your trash and remove temporary packages of former installations using 'sudo apt-get clean'. 

=== Cannot connect to host: Fetching updates fails ===

'''Affected versions (reported):'''
* Ubuntu Gutsy 7.10
'''Symptoms:'''
* Upgrade-Manager hangs during the "Fetching updates" step.
* <code> sudo do-release-upgrade </code> suddenly stops while trying to connect to a repository.
'''Cause:'''
 The repository from which you are trying to download upgrades from is unreachable.<<BR>>
 When upgrading to a new distribution release, the update manager will try to download and add the address of a local download mirror in <code>/etc/apt/sources.list.d/prerequists-sources.list</code>. Sometimes this procedure may fail and add an invalid address, or the mirror might be unreachable due to network issues between you and the host.<<BR>>
 Correcting the before mentioned file will not help, as it will just be re-created at next upgrade attempt.
'''Example:'''
 Helge lives in Denmark, but due to local network issues the Danish software mirror ''dk.archive.ubuntu.com'' does not work as opposed to the global mirror, ''archive.ubuntu.com'', which works fine.

'''Workaround:'''
 As a temporary solution, you can force Ubuntu to make requests for the bad host be directed to the good one, e.g. from ''dk.archive.ubuntu.com'' to ''archive.ubuntu.com''. This will be based on the IP address of the good host.
 <<BR>>
 <<BR>>
 '''1)''' Obtain the IP address of the good host (in this example we use '''archive.ubuntu.com'''):
  Open a terminal console and run this command:<pre>
   nslookup archive.ubuntu.com
  </pre>
  Output (example):<pre>
   Name:   archive.ubuntu.com
   Address: 91.189.88.46
   Name:   archive.ubuntu.com
   Address: 91.189.88.31
   Name:   archive.ubuntu.com
   Address: 91.189.88.45
  </pre>
  You can use either of the three IP addresses in the example.

 '''2)''' Add an entry in <code>/etc/hosts</code>
  Open <code>/etc/hosts</code> in a text-editor (you'll need root privileges).<<BR>>
  At the top of the file, add a new line with the IP of the good host followed by the URL address of the bad host, example:<pre>
91.189.88.46 dk.archive.ubuntu.com
  </pre>
  This tells Ubuntu that ''dk.archive.ubuntu.com'' have the IP that really belongs to ''archive.ubuntu.com'', thus faking connections for ''dk.archive.ubuntu.com'' to instead go to ''archive.ubuntu.com''.

=== Unable to resolve host yourhost ===

'''Affected versions (reported):'''
* Ubuntu Gutsy 7.10
'''Symptoms:'''
* Error message in terminal: <code>unable to resolve host yourhost</code> or freezing sudo apps in Gnome
'''Cause:'''
 If you upgrade from Ubuntu 7.10 to 8.04 it is impossible to run any application which needs root rights. This is propably because of some fake sudo problems.

'''Workaround:'''
* As a temporary solution, You could go to:  <code>System > Administration > Network</code>
* Unlock the widow with your user password
* Go to the tab <code>Host</code>
* Edit the second part of the the first line <code>127.0.0.1</code> by replacing the host name <code>localhost</code> by your host name (eg. yourhost)

 Based on JP NYC: <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux-meta/+bug/195308]]</nowiki>

=== Very slow application startup after upgrade ===

'''Affected versions (reported):'''
* Ubuntu Hardy 8.04 (orhers likely)
'''Symptoms:'''
* Extremely long delays (60 seconds or more) when starting applications from desktop.
'''Cause:'''
* The upgrade process injudiciously alters several items in the network setup. Specifically the hosts list and the domain name:

{| class="wikitable"
|-
| 
| Before
| After
|-
| Domain Name
| my.domain.name
| ''blank''
|-
| Hosts (line 2)
| 127.0.1.1  myhost myhost.my.domain.name
| 127.0.1.1  myhost.my.domain.name myhost.my.domain.name
|}

Applications communicate with the X-server over a socket interface. This can be any valid IP address, but typically, the name of the computer is used to find the IP address of the local X-server using a standard name lookup. If the computer's name is not in the hosts file, a network lookup using DNS will be attempted. If this fails, then localhost will be used. When the upgrade ''qualified'' the previously unqualified machine name in the hosts file, and then removed the domain name, there was no longer a matching entry in hosts, so a DNS lookup was attempted. The long delay is due to the timeout incurred in waiting for the DNS lookup to fail, finally falling back on localhost and allowing the program to execute.

'''Solution:'''
* Open the network configuration applet, select the "General" tab and re-enter the correct domain name. Then select the "Hosts" tab and correct the applicable hosts entry.

'''Final Note:''' While this may only be a problem that shows up in cases where the domain name is set and/or the hosts file has been customized, there may also be many possible variants, all owing to a mismatch between the computer's name and the matching alias entry in hosts.

'''Submitted by:''' sbesch@acsu.buffalo.edu

== Your Feedback ==
DuncanLithgow wrote Jul 8, 08: It would be great if the entry 'Cannot connect to host: Fetching updates fails' could be clearer on what message the user gets when they hit this problem. I tried searching Launchpad for variations on the text in the title and didn't find anything matching. Perhaps the entry could start with a code section with the actual error message?

hardmath wrote May 7, 09: It would be nice to add a section on problems with distribution upgrades caused by lack of disk space.  I vaguely recall working around this problem in the last iteration by uninstalling some large apps, then reinstalling after the upgrade.  But it would be neat if there was a way to use a memory stick temporarily to get over the hump.

==== Page Maintainers ====
DuncanLithgow, You?
----

I purchased a used computer with a fresh installation of Windows XP.  I installed Ubuntu with a dual boot option, version 9.04.  Immediately had problems with message "Insufficient space" when installing updates.  

I also installed Ubuntu 9 on my wife's Dell laptop, which had windows XP and an earlier version of Ubuntu.  The same problem occurred, insufficient space for updates.

Something needs to be done to allow default settings to modify partition space so that Ubuntu 9 has sufficient room for updates.
----
CategoryInstallation
