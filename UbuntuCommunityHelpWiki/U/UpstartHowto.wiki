{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== Upstart ==

Upstart is a replacement for the traditional sysvinit package, and runs as process #1.  Through upstart, we are able to have an event-driven process, whilst at the same time retaining compatibility for the original sysvinit behaviour.

This page documents how to do a few common operations with the new system.

You may want to look at <nowiki>[[UbuntuBootupHowto]]</nowiki>, or <nowiki>[[http://upstart.ubuntu.com/cookbook| the Upstart Cookbook]]</nowiki> for more examples and details of how the Init system is structured in Ubuntu and how to make use of it.

=== Where are initscripts installed? ===

This has not changed; they are installed in <code>/etc/init.d</code>.  See <code>/etc/init.d/README</code>.

However, most important system jobs are no longer shipped as initscripts, but as upstart jobs.  These are installed in <code>/etc/init</code>.

=== How are initscripts started and stopped? ===

This has not changed; symlinks are made from the initscript in the <code>/etc/init.d</code> directory to the <code>/etc/rc?.d</code> directories.  See
<code>/etc/init.d/README</code> and <code>/etc/rc?.d/README</code>.

=== What order are initscripts started and stopped in? ===

If a service has not been converted to upstart, this has not changed; the symlinks are named <code>SNNname</code> or <code>KNNname</code>, where <code>NN</code> is a number from 00 to 99.  The K scripts are run first in numerical order, followed by the S scripts in numerical order.

However, services which have been converted to upstart will define their start criteria in the file, like this:

  start on runlevel [2345]
  stop on runlevel [!2345]

This means the service will be started when the system reaches runlevel 2, 3, 4, or 5. It should be noted that it will be started in parallel with every other service that starts on those runlevels, and anything else still starting. The [!2345] in the stop on means it will be stopped whenever a runlevel that is *not* 2, 3, 4, or 5 is reached.

=== How do I find the current/previous runlevel? ===

This has not changed; use the "runlevel" command.  See <nowiki>[[http://manpages.ubuntu.com/manpages/en/man8/runlevel.8.html|runlevel(8)]]</nowiki>.

=== How do I change the runlevel? ===

This has not changed, use the "telinit" command or just invoke "init" directly.  See <nowiki>[[http://manpages.ubuntu.com/manpages/en/man8/telinit.8.html|telinit(8)]]</nowiki>.

=== How do I change the default runlevel? ===

You should edit <code>/etc/init/rc-sysinit.conf</code> instead and change the following line:
<pre>
    env DEFAULT_RUNLEVEL=2
</pre>

=== How do I change the behaviour of Control-Alt-Delete? ===

Edit the <code>/etc/init/control-alt-delete.conf</code> file.  The line beginning "<code>exec</code>" is what upstart will run when this key combination is pressed.

To not do anything when Control-Alt-Delete is pressed, you can simply delete this file.

Note that this only affects the behaviour of Control-Alt-Delete when at a text console.  In a desktop environment, this key combination is handled by the desktop itself and must be reconfigured there.

=== How do I enter single-user mode? ===

This hasn't changed.  Choose the "(recovery mode)" option from GRUB; add "<code>-s</code>", "<code>S</code>" or "<code>single</code>" to the kernel command-line; or from a running machine, run "<code>telinit 1</code>" or "<code>shutdown now</code>".

=== How do I reduce the number of gettys? ===

Also see "How do I change which runlevels gettys are run in?"

In /etc/init there is a file named ttyN.conf for each getty that will be
started, where N is numbered 1 to 6.  Remove any that you do not
want.

This will not take immediate effect, however you can run "stop ttyN"
to stop one that is running.

If your system has Upstart 0.6.7 or later, (first included in Ubuntu 11.04). you will be able to disable the automatic start of these without removing them by running

  echo manual >> /etc/init/ttyN.conf
