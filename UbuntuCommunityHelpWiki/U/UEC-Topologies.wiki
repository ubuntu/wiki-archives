{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

An Ubuntu Enterprise Cloud may consist of as few as two physical systems, up to potentially hundreds or perhaps thousands.

This page provides some basic suggested topology recommendations, based on the number and type of physical systems you have available for use in your cloud.

''Note: You may add as many nodes (NCs) to any of these topologies as you wish.''

''Note: Please refer to <nowiki>[[UEC-Glossary]]</nowiki> for explanation of terms used in this page.''

=== 1 Physical System (Not recommended for Production Use) ===

This is the most basic possible configuration, with the CLC/Walrus/CC/SC and VM hosting (NC) all on the same machine. This is no different to any other mode, except that network traffic for the node controllers does not have to traverse the local network. There have been some bugs found (and already fixed) when installing in this environment ( Bug:503180 , Bug:519648 , Bug:519653 )

1. '''machine A''': CLC/Walrus/CC/SC/NC

==== Sample configuration (existing LAN) ====

LAN networking configuration:
* Network 192.168.1.0/24
* DHCP and DNS servers 192.168.1.2
* UEC server 192.168.1.4
* /etc/network/interfaces on the UEC server <pre>
iface eth0 inet manual

auto br0
iface br0 inet static
    address 192.168.1.4
    netmask 255.255.255.0
    network 192.168.1.0
    broadcast 192.168.1.255
    gateway 192.168.1.2
### dns-* options are implemented by the resolvconf package, if installed
### these are google's dns servers
    dns-nameservers 8.8.8.8 8.8.4.4
### this setting could be "local" if you all your local hosts
### were named something like a.localdomain b.localdomain c.localdomain etc
    dns-search localdomain
    bridge_ports eth0
    bridge_fd 9
    bridge_hello 2
    bridge_maxage 12
    bridge_stp off
</pre>
* /etc/eucalyptus/eucalyptus.conf - key elements to check: <pre>
VNET_PUBINTERFACE="br0" # must match the br definition above
VNET_PRIVINTERFACE="br0" # must match the br definition above
VNET_MODE="MANAGED-NOVLAN"
VNET_SUBNET="172.19.0.0" # ips from this range are bound to $VNET_PRIVINTERFACE:priv
VNET_NETMASK="255.255.0.0"
VNET_DNS="192.168.1.2" # what DNS server nodes are given
VNET_PUBLICIPS="192.168.1.100-192.168.1.110"
</pre>

If installing by following <nowiki>[[UEC-PackageInstall]]</nowiki> you will normally end up doing the br0 configuration *after* installing the cluster controller service and thus end up with eth0 rather than br0 in the eucalyptus.conf file. So be sure to check. If it is wrong, you need to: <pre>
sudo stop eucalyptus CLEAN=1
sudo /etc/init.d/eucalyptus-nc stop
sudo start eucalyptus CLEAN=1
sudo /etc/init.d/eucalyptus-nc start
</pre>
The CLEAN parameter makes it rebuild part of a hidden database file with the resulting configuration. Check <code>ip addr</code> to make sure that nothing is bound to <code>eth0</code> - if it is the easiest way to be sure you have a clean config is to reboot and check again. If the PRIV interface is wrong, you may see nodes get DHCP replies from the LAN DHCP server rather than the cc private DHCP server, and things will be messy.

It should be possible to run on a completely self contained system too, but no one has documented that (except perhaps using SYSTEM mode, but that disables some key features like the 'user data' scripts). Running on a laptop using network manager roaming should also be possible, as long as the machine is completely self contained when disconnected - it needs its own DNS server, nat rules for the 'public ip range' etc.

=== At least 2 Physical Systems ===

This configuration puts all of the user facing components (CLC/Walrus) and back-end control components (CC/SC) on a single system, and uses the second for VM hosting.

# '''machine A''': CLC/Walrus/CC/SC
# '''machine B''': NC
# (more NCs...)

=== At least 3 Physical Systems ===

This configuration puts user facing components (CLC/Walrus) on one machine, back-end control components on another (CC/SC), and uses the third for VM hosting (NC).

# '''machine A''': CLC/Walrus
# '''machine B''': CC/SC
# '''machine C''': NC
# (more NCs...)

=== At least 4 Physical Systems ===

This configuration puts user facing components on their own machines, one for user/VM control (CLC) and one for storage (Walrus).  The third machine is for back-end control (CC/SC) and the fourth for VM hosting (NC)

# '''machine A''': CLC
# '''machine B''': Walrus
# '''machine C''': CC/SC
# '''machine D''': NC
# (more NCs...)

=== At least 5 Physical Systems ===

This configuration puts user facing components (CLC/Walrus) on one machine, back-end control components on another (CC/SC), and uses the third for VM hosting (NC), fourth for a second CC/SC, and fifth for an additional NC using resources from CC2/SC2.

# '''machine A''': CLC/Walrus
# '''machine B''': CC1/SC1
# '''machine C''': NC1
# '''machine D''': CC2/SC2
# '''machine E''': NC2
# (more CCs/SCs/NCs...)
