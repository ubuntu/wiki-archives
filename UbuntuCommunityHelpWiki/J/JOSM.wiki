{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


JOSM is the '''J'''ava '''O'''pen'''S'''treet'''M'''ap editor for use with the !OpenStreetMap project (<nowiki>[[http://openstreetmap.org/|openstreetmap.org]]</nowiki>)

This page is solely for Ubuntu related information and installation instructions. For a more in-depth guide and some tutorial material, please visit the OSM wiki page for <nowiki>[[http://wiki.openstreetmap.org/index.php/JOSM|JOSM]]</nowiki>.

== Warning: current breakage ==

The JOSM package in Ubuntu has been broken since April 2009 (<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/josm/+bug/364017 | bug report]]</nowiki>) (though this has been fixed in Karmic). The package does not work with the new server API.
If you prefer not to install manually, a quick workaround is to install the package (and dependencies) via the package manager first, and overwriting /usr/share/josm/josm.jar with the package from the website (rename the download to josm.jar)

== Installation on Ubuntu ==

The !OpenStreetMap project has been around for several years now and the best currently developed editor (JOSM) has only recently been packaged for Debian and Ubuntu. While the MOTU maintained package  should be your first choice, you can still use this installation guide to use the project's main development jar file directly.

=== Installing JOSM ===
JOSM is available from the Universe repositories for the first time in Ubuntu 8.04. So you can install the package <code>josm</code> very quickly and easily through your favourite package manager. The downside of this is that JOSM is very much a fast moving target and has changed rapidly of the last few months. To take advantage of the bug fixes and new features you may want to download the very latest version. See the following section to install manually.

=== Manually Installing JOSM ===
If have a version of Ubuntu older than 8.04 or just want to install JOSM manually then follow these instruction.

==== Installing Java ====
As the name implies JOSM requires a Java runtime environment to work. Ubuntu 8.04 has a version of  GNU's GCJ that is compatible with JOSM. Unfortunately previous version of Ubuntu will require you to have Sun's JRE of at least v1.5, which is simple to install through Synaptic. Please note this requires the universe repository.

/!\ Ensure the Java path is set to the latest Java version. See the <nowiki>[[Java#head-fef9352fb26820bb774df978180c9dd3a60e777b |Java]]</nowiki> wiki page for more details. 

==== Downloading JOSM ====

Click <nowiki>[[http://josm.openstreetmap.de/download/josm-latest.jar|here]]</nowiki> to download the latest version of JOSM.

You may also want to take a look at the recent <nowiki>[[http://josm.openstreetmap.de/log/?verbose=on|changelog]]</nowiki>.

Now you can start JOSM by simply running the following command from a terminal using the path to the JOSM jar file.
<pre>
java -jar ~/Desktop/josm-latest.jar
</pre>
Note that JOSM can use a lot of memory, so it may pay to run something like ''java -Xmx512M -jar ...''

==== Desktop Integration ====
For better integration into the Ubuntu desktop use the following steps (please note that <nowiki>[[RootSudo |sudo]]</nowiki> access will be required):

* Move the jar file to the /usr/share/java folder.
<pre>
sudo mv ./Desktop/josm-latest.jar /usr/share/java/ </pre>
 
* Download the <nowiki>[[http://josm.openstreetmap.de/browser/trunk/images/logo.png|menu icon]]</nowiki>, rename it to josm.png and place it in the /usr/share/pixmaps/ directory.
<pre> 
sudo mv ./Desktop/logo.png /usr/share/pixmaps/josm.png </pre>

* Use the following code to create a <code>josm.desktop</code> file place it in the /usr/share/applications/ directory.

<pre>
[Desktop Entry]
Encoding=UTF-8
Name=JOSM
Comment=Import GPX files and upload Open Street Map data
Exec=java -jar /usr/share/java/josm-latest.jar
Icon=josm.png
Terminal=false
Type=Application
StartupNotify=true
Categories=Application;GTK;Java;Utility;Viewer;
MimeType=application/x-GPS-Exchange-Format
</pre>

Now you should have an entry for JOSM in your desktop menu, the exact location will depend on which desktop you are using. 

==== Updating JOSM ====

You only have to download a newer josm-latest.jar file to update JOSM to the latest daily build. I would recommend that you do this on a monthly basis if you want to keep up with bug fixes and new features.

Sometimes there will be changes to the default startup settings of JOSM. You will not see these changes until you update your <code>~/.josm/preferences</code> file. The quickest way is generate a new one by simply renaming/deleting the file and restarting JOSM. Please bear in mind that if you do this you will lose your current settings such as the upload logon information, if you chose to save it earlier.

== Troubleshooting ==
<pre>
xcb_xlib_unlock: Assertion `c->xlib.lock' failed.
Aborted (core dumped)
</pre>
If you receive the error this error, try running the following command.

<pre>
export LIBXCB_ALLOW_SLOPPY_LOCK=true
</pre>

Another <nowiki>[[https://bugs.launchpad.net/mandriva/+source/libxcb/+bug/185311/comments/12|reported]]</nowiki> workaround is: 

<pre>
sudo sed -i 's/XINERAMA/FAKEEXTN/g' /usr/lib/jvm/java-6-sun-1.6.0.04/jre/lib/i386/xawt/libmawt.so</pre>

Take care of the path, it changes with java release and architecture (ie, java-6-sun... and i386)

This page was originally based on <nowiki>[[http://ubuntuforums.org/showthread.php?t=499978|this]]</nowiki> Ubuntuforums.org thread.

----
