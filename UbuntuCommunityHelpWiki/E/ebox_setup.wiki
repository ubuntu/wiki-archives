{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

=== Setup the EBOX ===

Before we can use our ebox server and connect other services to it, we have to do some setup on the ebox to get it to work.

'''IPTABLES'''

Make sure that iptables is off or accepting connections on port 389 from the address on which you want to put your service:

<pre>
    iptables -L
</pre>

'''SLAPD'''

We have to make sure that our ldap server is responding on all interfaces so that we can connect to it from another server.
<pre>
    sudo nano /etc/default/slapd
</pre>
Should look like this:
<pre>
    SLAPD_SERVICES="ldap://0.0.0.0 ldapi://%2fvar%2frun%2fslapd%2fldapi/????x-mod=0$
</pre>

'''Linux Login PAM'''

In order for the Ubuntu user to be able to login later, we must change the login skel to /bin/bash
<pre>
    sudo nano /etc/ebox/80samba.conf
</pre>    
And change so that it looks like:
<pre>
    login_shell = /bin/bash
</pre>
this will change the login skel for a new user. But for an existing user ("matte") you must run:
<pre>
    smbldap-userinfo matte
</pre>
Don't change anything other than the login skel or the user account can break

'''LDAP Admin Information'''

Sometimes when you connect other services to the ebox ldap you have to enter the ldap admin account. And to get the admin account and password do the following;

get root:
<pre>
    sudo su
</pre>
Get all of the ldap tree:
<pre>
    ldapsearch -x -b"dc=kalle,dc=se"
</pre>
Search in the output for this entry:
<pre>    
### ebox, kalle.se
    dn: cn=ebox,dc=kalle,dc=se
    objectClass: organizationalRole
    objectClass: simpleSecurityObject
    description: eBox admin account
    cn: ebox
</pre>

So my admin user is '''"cn=ebox,dc=kalle,dc=se"'''

Now get the password:
<pre>    
    less /etc/ldap.secret
</pre>
And there you have your admin account and password for the ldap server.

'''TEST'''

Test if you have connection to the ebox from an external server:
<pre>
    telnet ebox-ip 389
</pre>
You should get:
<pre>
    Connected to localhost.
    Escape character is '^]'.
</pre>

Time to get some services to the ebox server.
