{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

== How to setup the use of a USB pen drive as a key for an ecryptfs private directory ==

{| class="wikitable"
|-
| <rowbgcolor="#FFF280"> {i} Please refer to EncryptedFilesystems for further documentation.
|}

=== Partition and format the USB stick ===

If it's not already done, you'll want to partition and format a filesystem to be used to hold the key data from ecryptfs:

<pre>
# fdisk /dev/sdb
# mkfs.ext3 /dev/sdb1
</pre>

=== Copy your .ecryptfs to the USB stick ===

Mount the pen drive on a temporary path, then copy ''.ecryptfs'' from your home directory to the temporary mountpoint.

<pre>
# mount /dev/sdb1 /mnt
# cp -a /home/USERNAME/.ecryptfs/* /mnt
# umount /mnt
</pre>

=== Obtain the device's UUID ===

This step is required for automatizing the mounting of the pen drive to the proper path on boot.

<pre>
# blkid /dev/sdb1
</pre>

=== Automatize ===

==== To mount on boot ====

Add the following line to ''/etc/fstab'' to mount the USB pen drive to the proper directory on boot:

<pre>
 UUID=<UUID from blkid> /home/<username>/.ecryptfs          ext3     relatime        0       2
</pre>

==== To mount on connection ====

There has to be a way to do this...
