{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

How to set upp ldap and nfs to an ebox server. For ldap users and files:

'''THE EBOX SERVER HAS THE IP 192.168.0.3'''
'''THE SEARCH BASE IS dc=ebox'''

To get this to work you have to change this to match your system:

<pre>
    apt-get install libpam-ldap libnss-ldap nss-updatedb libnss-db nfs-common ldap-utils

</pre>

On the questions enter this:
<pre>
    LDAP server Uniform Resource Identifier: ldap://192.168.0.3 <- it's important it says ldap://<ip-address>
    Distinguished name of the search base: dc=ebox
    ldap://ldap.example.com 3
    Make local root Database admin: No
    Does the LDAP database require login? No
</pre>
Open file:
<pre>
    /etc/ldap.conf 
</pre>
Make sure it says:
<pre>

    bind_policy soft
    host 192.168.0.3
    uri ldap://192.168.0.3
</pre>
And after this, at the bottom:
<pre>

    nss_base_passwd         ou=Users,dc=ebox?one
    nss_base_passwd         ou=Computers,dc=ebox?one
    nss_base_shadow         ou=Users,dc=ebox?one
    nss_base_group          ou=Groups,dc=ebox?one

</pre>
Open this file:
<pre>
    /etc/ldap/ldap.conf
</pre>
It should look like this:
<pre>

    BASE    dc=ebox
    URI     ldap://192.168.0.3
    SIZELIMIT       0
    TIMELIMIT       0
    DEREF           never
</pre>
Then run these commands:
<pre>
    sudo auth-client-config -t nss -p lac_ldap
    sudo pam-auth-update
</pre>
Test so that it works:
<pre>
    getent passwd
</pre>
You should now see your ldap users

Time for nfs and home folders.
Create folders:
<pre>
    /home/samba/users
</pre>
Then open file:
<pre>
    /etc/fstab
</pre>
And add this line att buttom:
<pre>
    192.168.0.3:/home/samba/users /home/samba/users nfs rw,hard,intr,rsize=8192,wsize=8192,bg  0       0
</pre>
Activate the mount:
<pre>
    mount /home/samba/users
</pre>

Ubuntu 10.04 has something wrong with the ldap and pam module.
So ldap users can login if you do not remove all lines and only have these lines activated in the  files below:
<pre>
    sudo nano /etc/pam.d/common-account
</pre>
<pre>
    account sufficient pam_ldap.so
    account required pam_unix.so
</pre>
 
<pre>
    sudo nano /etc/pam.d/common-auth
</pre>
<pre>   
    auth sufficient pam_ldap.so
    auth required pam_unix.so nullok_secure use_first_pass
</pre>
 
<pre>
    sudo nano /etc/pam.d/common-password
</pre>
<pre>   
    password sufficient pam_ldap.so
    password required pam_unix.so nullok obscure min=4 max=8 md5
</pre>

time to reboot and use ubuntu with ebox:
<pre>
    reboot
</pre>
