{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



== Introduction ==
*** Wine allows you to run many Windows programs on Linux. Its homepage can be found at <nowiki>[[http://www.winehq.org|WineHQ.org]]</nowiki>. They also have an <nowiki>[[https://wiki.winehq.org/Ubuntu|Ubuntu page]]</nowiki> with installation and build advice. 

*** If you are running the latest release of Wine which is  v1.6, you can get further assistance on the #winehq <nowiki>[[InternetRelayChat|IRC]]</nowiki> channel on irc.freenode.net. First, 

*** please consider if you really need to run the specific Windows program because in most cases, its equivalent can be provided by an OpenSource program. Also, consider using <nowiki>[[Qemu]]</nowiki> instead of Wine if you need a complete Windows installation.

== Installing Wine ==

=== Ubuntu versions of Wine (Recommended) ===
* open the software center 
* Type wine and install 'wine' 

=== Newer versions of Wine (Not Recommended) ===
The Wine Ubuntu repository provides the newest development versions of Wine.  Follow these steps to add the repository to your software sources:
1. Open a terminal and run these commands:
2. <code>wget https://dl.winehq.org/wine-builds/winehq.key</code>
3. <code>sudo apt-key add winehq.key</code>
4. <code>sudo apt-add-repository 'https://dl.winehq.org/wine-builds/ubuntu/'</code>

Note, however, that these are development packages (ie beta software), and may suffer from regressions and other problems not present in the stable version of Wine included with Ubuntu.  You should avoid using them unless the current stable version of Wine does not support or is incompatible with the application you wish to use.

If you are using an older version of Wine and want support from WineHQ, you will need to upgrade to the latest development version first.  If you do this, however, please file associated Wine bugs at winehq's <nowiki>[[http://bugs.winehq.org/|Bugzilla Page]]</nowiki> rather than in <nowiki>[[https://launchpad.net|Launchpad]]</nowiki>.

== Initial Setup ==

Before using Wine, it is necessary to create the fake C: drive where your Windows applications will be installed.  To do this, enter the following command into the terminal: You may find the terminal by going to Applications -> Accessories -> Terminal 
<pre>
winecfg
</pre>
You also have the option of configuring Wine via the Configure Wine option in the Applications-> Wine menu.

This will create a hidden folder (.wine) in your home directory containing the fake C: drive as well as registry files similar to those used in Windows.  Once this directory is created, the '''Wine Configuration Window''' will appear.  This window will allow you to customize a variety of settings for Wine, including which Windows Version that is emulated, drive mappings, DLL overrides, as well as application specific settings.  Click the '''Ok''' button to close the window. 

== Installing Windows Applications With Wine ==
To install Windows applications using Wine, follow these instructions:
 
1. Download the Windows application from any source (e.g. download.com).  Download the .EXE (executable).
2. Place it in a convenient directory (e.g. the desktop, or home folder).
3. Open the terminal, and '''cd''' into the directory where the .EXE is located.
4. Type wine ''the-name-of-the-application.extension'' (e.g. wine realplayer_installer.exe).

This will start the .EXE using Wine.  If it is an installer, it should then run as it would in Windows.  If the application asks for a directory to install the application to, select put it under C:\Program Files.

== To start/run Windows programs using Wine ==
After installing an application using the directions above, those applications can be started and used by entering ''wine programname.exe'' (e.g. ''wine realplayer.exe'').  When done, close the application as one would normally. You must run the installed executable, which will by default be in the virtual Windows drive created by Wine, at ''~/.wine/drive_c''. Generally programs will install themselves somewhere under ''Program Files'' inside the virtual Windows drive, following Windows conventions.

You can also use the Wine file browser, by running ''winefile'' in a terminal. Clicking the ''C:\'' button in the toolbar will open a window where you can browse the virtual Windows drive created in .wine. Doubleclicking an executable in the Wine file browser will run it in Wine.

Instead of having to always enter the terminal or use the Wine file browser, you may also create a desktop icon, and start a Wine application using that icon.  To do this, right click on the desktop and select "Create a launcher."  If you wish, select an icon from the list of available icons (or browse to an icon you would like to use), fill out other information that is requested (Name, generic name, etc.).  For the command, type in '''wine the-location-of-the-program.exe''' (e.g. wine /home/john/.wine/realplayer.exe).  The most important part of creating a launcher is the command, the generic name is not as important. Just make sure you de-select "Run in terminal."  This completes the process.

In some cases the application requires to be running from a certain location. In this case create launcher with command

<pre>
sh -c "cd /home/USER/.wine/drive_c/Program Files/Appdir/; wine /home/USER/.wine/drive_c/Program Files/Appdir/game.exe"
</pre>

Of course you will need to replace USER and Appdir with the proper data.

If you desire to have an icon on the panel, create a launcher on the panel of choice.  Do this by right-clicking the panel, selecting  "Add to Panel," and selecting "Custom Application Launcher."  This will ask you for the same information as before.

Alternatively, to make life easier, you can set it so wine will automatically open .exe files files for you - instead of using the Wine File to locate the file each time. To do so, right click on the .exe file, select Properties, and then select the Open With tab. Click the 'Add' button, and then click on 'Use a custom command'. In the line that appears, type in wine, then click Add, and Close. Now all .exe files will be automatically opened by Wine, so you can use Nautilus to browse and open them instead of the Wine File.

== Uninstalling Wine Applications ==
Open up a terminal window and type the command below.

<pre>
wine uninstaller
</pre>

What this will do is open up a program similar to the Windows '''add/remove programs''' control panel, allowing you to uninstall applications from a Wine installation.  Running uninstall programs directly via Wine should also work normally.  Alternatively, you could also simply delete the folder of the application.  However, as when done in Windows, this method will be '''unclean''' and will not remove the program's configuration from the Wine registry like using an uninstaller will. 

== Configuring Wine ==
On the command line or in Run Application, type <code>winecfg</code>

=== Adding CD and DVD drives to Wine ===

Go to the '''drives''' tab in winecfg. Hit the Autodetect button.

If you find that this does not work correctly for you, then follow these instructions:

1. Run <pre>
winecfg
</pre>
2. Navigate to the '''drives''' tab
3. Click on '''Add...'''
4. In the path bar, type <pre>
/media/cdrom
</pre>

5. Click '''Show Advanced''' button below the '''Browse...''' button and set the '''Type''' to <pre>
CD-ROM
</pre>

6. Click ''OK''

If you have more than one CD/DVD device you will need to identify each one differently. Use '''/media/cdrom0''' for the first CD/DVD device, '''/media/cdrom1''' for the second one, and so on. If in doubt, type the following command in your terminal.

<pre>
ls -la ~/.wine/dosdevices/
</pre> 

What this command will do is check your CD/DVD device details after Wine is installed.

=== Adding applications to the menu ===
It is good procedure before setting up the menu entry to launch the new Windows program from the command line to make sure the program runs properly. To do this type this command in the terminal.

<pre>
wine "C:\PATHTOPROGRAM\Program.exe" 
</pre>

For example the command would be '''wine "C:\Program Files\World of Warcraft\WoW.exe"''' Once you are satisfied that you have the correct details, use the normal menu editing process to add a new entry. When you get to the Command field of the entry editor be sure to copy and paste the line you used to launch the program from the terminal. Finish and save the new entry. Test to make sure the new Windows program loads via the menu.

=== Changing application specific settings ===
1. Type this command into your terminal. <pre>
winecfg
</pre>

2. Click on '''Add Application...'''
3. Navigate to where the .exe is and choose that program
4. The dropdown at the bottom allows you to choose which version of Windows Wine should emulate. Also, any changes to the Libraries and Graphics tabs will only affect the chosen application in the Applications tab.

==== Using Windows Themes/Skins In Wine ====

==== Color Scheme ====

You can change the wine color scheme to closely match the default Ubuntu colors with this Terminal command.

<pre>
gedit ~/.wine/user.reg
</pre>

You may also want to create a backup copy in your Home folder with this command via terminal.

<pre>
cp ~/.wine/user.reg ~/
</pre>

Replace the [Control Panel\\Colors] section with

<pre>
[Control Panel\\Colors] 1176981676
"ActiveBorder"="239 235 231"
"ActiveTitle"="203 133 61"
"AppWorkSpace"="198 198 191"
"Background"="93 77 52"
"ButtonAlternativeFace"="200 0 0"
"ButtonDkShadow"="85 85 82"
"ButtonFace"="239 235 231"
"ButtonHilight"="255 255 255"
"ButtonLight"="255 255 255"
"ButtonShadow"="198 198 191"
"ButtonText"="0 0 0"
"GradientActiveTitle"="239 235 231"
"GradientInactiveTitle"="239 235 231"
"GrayText"="198 198 191"
"Hilight"="246 200 129"
"HilightText"="0 0 0"
"InactiveBorder"="239 235 231"
"InactiveTitle"="239 235 231"
"InactiveTitleText"="255 255 255"
"InfoText"="0 0 0"
"InfoWindow"="255 255 166"
"Menu"="239 235 231"
"MenuBar"="239 235 231"
"MenuHilight"="246 200 129"
"MenuText"="0 0 0"
"Scrollbar"="239 235 231"
"TitleText"="255 255 255"
"Window"="255 255 255"
"WindowFrame"="0 0 0"
"WindowText"="0 0 0"
</pre>

==== Using Theme/Skins ====

Wine has basic handling for Windows theme/skin files in the "msstyles" format. There is a large number of these themes on <nowiki>[[http://www.deviantart.com|Deviant Art]]</nowiki>. To use these you must make a folder in Wine's virtual Windows drive, then tell Wine to use the theme.

Firstly go into Wine's virtual drive, which is usually ".wine/drive_c" in your Home folder (this is hidden, you may need to select View->Show Hidden Files in the file manager). Inside this folder go into the "windows" folder then make a new folder in there called "Resources". Enter this new folder and make a new folder called "Themes". Inside here you should make a folder for each theme you want, and put the files ending in ".msstyles" directly into them. For example, the full path to a theme file called sample.msstyles might be "/home/username/.wine/drive_c/windows/Resources/Themes/Sample/sample.msstyles".

Next you need to tell Wine to use your theme, so once again run this command in the terminal.

<pre>
winecfg
</pre>

In the configuration window select the tab '''Desktop Integration''' and un-check out the '''Theme:''' box, which should now have your theme in it's menu. After selecting the theme click '''Apply''' at the bottom to see how it looks (they don't always display properly), then if you are happy click ok and you're done!

=== Fullscreen issues with overlapping Panel ===
Sometimes the Panel overlaps your fullscreen application you're running in wine.  If you are running Visual Effects, the first solution you should try is to turn those off: Go to System -> Preferences -> Appearance, and click the Visual Effects tab.  Select None, and your screen will flash.  Try your full-screen application again.  You may re-enable Visual Effects afterwards - just don't forget to turn them back off when you want to run that application again!

If that does not work, then you will have to turn off the panels prior to running the application and restarting it afterwards, until a better workaround can be found.  In Ubuntu the commands are
gnome-session-remove gnome-panel and gnome-panel & respectively. In Xubuntu I understand they are <code>killall xfce4-panel</code> and <code>xfce4-panel</code>.

== Instructions for using wine over remote X11 sessions ==
If you're (trying) to use wine over a forwarded X11 session (ie Ubuntu is on one computer; you're connected to it by ssh or another connection and you already have X11 forwarding set up to display regular Ubuntu applications on your remote computer) and the windows opened by wine are lacking fonts etc, the answer is <nowiki>[[http://ubuntuforums.org/showpost.php?p=2650704&postcount=8|here]]</nowiki>

== Instructions for specific Windows programs ==
Some Windows programs have been tested on Ubuntu. They are listed below:

* <nowiki>[[DVDShrink]]</nowiki>
* <nowiki>[[FlashPlayerStandalone]]</nowiki>
* <nowiki>[[WorldofWarcraft]]</nowiki>

Also, see Wine's Application Database at http://appdb.winehq.org/ or <nowiki>[[http://wine-review.blogspot.com/]]</nowiki>

== Creating file associations ==
If you want certain files to open in a windows application by clicking on them, the best way is to create a script. For example I want Adobe Flash project files (*.fla) to open in Adobe's Flash editor if I double click it.

You can for example create a file using this terminal command. 

<pre>
gedit ~/.wine/Flash\ 8
</pre>

Now paste the following example script in it, save and close gedit.

Example script:
<pre>
# !/bin/sh

QUICKPARLOCATION="c:\\Program Files\\Macromedia\\Flash 8\\Flash.exe"
PARAM=`winepath -w "$*"`
wine "$QUICKPARLOCATION" "$PARAM"
exit 0
</pre>

Make sure the file is executable with this command.

<pre>
chmod +x ~/.wine/Flash\ 8
</pre>

After you completed this go to an *.fla file right click it, properties, go to the “open with” pane, click add, add this line into your terminal and select the radio button.

<pre>
'/home/<yourusername>/.wine/Flash 8'
</pre>

Now if everything went ok, you can doubleclick the file and it will be openend in Flash 8.

== Troubleshooting ==
=== Error: Cannot change screen BPP from 32 to XX ===
In some cases (mostly games) the application does not start and you get error: Cannot change screen BPP from 32 to 16 (or some other number).

In such case editing xorg.conf and CTRL-ALT-Backspace helps as is described on http://ubuntuforums.org/showthread.php?t=649283

=== 'dhtmled.ocx' is missing or invalid ===
It seems that in Ubuntu Karmic Wine(v1.0.1) registry isn't configured correctly to use ActiveX component dhtmled.ocx. On some application this can cause error like this: "Component 'dhtmled.ocx' or one of it's dependencies not correctly registered: a file is missing or invalid". So we must tell Wine where to find this file.

1. Download registry file:
   <code>cd ~</code>
   <code>wget http://jwc.sourceforge.net/other/ieslinux-dhtmledit.reg</code>
2. Open regedit:
   <code>wine regedit.exe</code>
3. Import the downloaded registry settings
   <code>file->import registry file->open ~/ieslinux-dhtmledit.reg</code>

=== Screen flickers to black when starting an application ===
This is sometimes caused by a problem with the video driver not handling XRandR well. To see if this is actually a problem with XRandR, in a console, run:

<pre>
xrandr
</pre>

If your screen blanks while running that command, then this might be the issue. To work around this issue, Wine can be configured to not use XRandR. To do so:

1. Start Wine's Registry Editor.
2. Navigate to "HKEY_CURRENT_USER\Software\Wine\X11 Driver". You may need to create X11 Driver.
3. Create a new key called "UseXRandR" and set it to "N".

See Wine Bug <nowiki>[[http://bugs.winehq.org/show_bug.cgi?id=15214|#15214]]</nowiki> and Wine Wiki page <nowiki>[[http://wiki.winehq.org/UsefulRegistryKeys|UsefulRegistryKeys]]</nowiki>.

== Related Wiki Pages ==
* <nowiki>[[Games]]</nowiki>
* <nowiki>[[AdobePhotoshop]]</nowiki> - A guide for running CS4 under WINE.
----
