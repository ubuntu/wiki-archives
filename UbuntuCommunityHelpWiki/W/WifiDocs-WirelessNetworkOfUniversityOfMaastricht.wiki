{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



== Introduction ==

This guide is about how to connect to the wireless network of the University of Maastricht (MAASnet)
I have only tried this guide for Edgy,Feisty,Gutsy and Hardy but it will work for Dapper as well with high probability. 

If you run Ubuntu Linux / Debian and want to connect to the wireless network of the University of Maastricht (MAASnet) and you have any questions / problems you can contact me : Email:  Be sure to create and attach the following text files :

<pre>
lsb_release -a > release.txt
lspci -nn > lspci-nn.txt
sudo lshw -C network > lshw-network.txt

</pre>

network-manager (WifiDocs/NetworkManager) is able to connect to most normal wireless networks. It's very user friendly. Sadly network-manager isn't able to connect to the MAASnet network yet (as far as I know). This means we have to configure the network by hand.

== Hardy intel 3945/4965 wireless ==
This doesn't work with intel iwl3945/iwl4965 in Hardy due to the transition from ipw (Gutsy and before) to iwl. It's easy to connect to the MAASnet using the intel 3945 windows driver wrapped with ndiswrapper. That is if you have no ethical problems with running the non-free windows driver while the iwl3945 driver is free software. This is just a temporary ugly solution. Follow "Hardy with ndiswrapper" below to make this work. The bug reports :
* https://bugs.launchpad.net/linux/+bug/220640
* http://www.intellinuxwireless.org/bugzilla/show_bug.cgi?id=1658

== Hardy with ndiswrapper ==
* For some wireless chipsets you need to use your windows driver to be able to connect to MAASnet
* ndisgtk depends on ndiswrapper-common and ndiswrapper-utils-1.19 so you can install all three packages from usb if you don't have internet
(download them to a usb stick from packages.ubuntu.com)
* issue the following commands :
<pre>
sudo aptitude install ndisgtk
sudo ndisgtk
</pre>

* download your windows wireless driver from your manufacturer
* point to the right .inf file of your windows driver (try the XP driver first)
* rebooot
* follow this guide from the start (you probably need "wext" for wpasupplicant but some people might need "ndis")
* it works!

== How to connect to the wireless network of the University of Maastricht (MAASnet) ==

=== Step 0 : while you are still connected to internet ===

* make sure your system is fully updated
* type the following in the terminal to install a few packages :
sudo aptitude install linux-generic wpasupplicant ndisgtk
* download your windows wireless driver from your manufacturer
* read this entire guide

=== Step 1 : disable networkmanager for your next sessions ===
Go to System->Preferences->Sessions and disable networkmanager

=== Step 2 : make sure wpasupplicant is installed ===

Check whether wpasupplicant is installed :
<pre>
dpkg -l | grep wpasupplicant
</pre>

If needed install wpasupplicant by (you need internet for this) :
<pre>
sudo aptitude install wpasupplicant
</pre>

* Or download it (so you can put it on cd or usb stick) for Dapper from http://packages.ubuntu.com/dapper/net/wpasupplicant
* Or download it (so you can put it on cd or usb stick) for Edgy from http://packages.ubuntu.com/edgy/net/wpasupplicant
* Or download it (so you can put it on cd or usb stick) for Feisty from http://packages.ubuntu.com/feisty/net/wpasupplicant
* Or download it (so you can put it on cd or usb stick) for Gutsy from http://packages.ubuntu.com/gutsy/net/wpasupplicant
* Or download it (so you can put it on cd or usb stick) for Hardy from http://packages.ubuntu.com/hardy/net/wpasupplicant

=== Step 3 editting /etc/wpa_supplicant/wpa_supplicant.conf ===

In this guide you have to edit 2 files : /etc/network/interfaces and /etc/wpa_supplicant/wpa_supplicant.conf

<pre>
gksudo gedit /etc/wpa_supplicant/wpa_supplicant.conf
</pre>
And make it look like this /etc/wpa_supplicant/wpa_supplicant.conf :
<pre>
network={
ssid="MAASnet"
key_mgmt=IEEE8021X
wep_key0=12345678901234567890123456
phase2="auth=MSCHAPV2"
identity="i******"
password="*******"
}
</pre>

* Replace ''12345678901234567890123456'' by any string of '''random''' 26 numbers for security. You can generate this using this python script if you want (save it to a genkey.py and type : python genkey.py)
<pre>
__doc__ = """generate a random wepkeys which work with maasnet (26 
random numbers)"""
import random
for i in range(10):
  b = ""
  for a in range(26):
    b = b + str(random.randint(0,9))
  print "wep_key0=" + b
</pre>
* Replace ''"i******"'' by your student ID number
* Replace ''"*******"'' by your student password (which is the same as for email)

=== Step 4 : connect for testing (and debugging if needed) ===
This show you all your network interfaces :
<pre>
ip addr
iwconfig
</pre>
Now make sure all your networkinterfaces are down :
<pre>
sudo ifdown eth0
sudo ifdown eth1
.....
.....
</pre>
Replace eth0 and eth1 for your network interfaces that are up (except lo). Your wireless interface is often called eth1 or wlan0 but you can check with iwconfig. If you don't see a wireless interface try using ndiswrapper to use your windows driver. Your wired ethernet interface is often called eth0.

Now to actually try to connect to the network :

<pre>
sudo wpa_supplicant -c /etc/wpa_supplicant/wpa_supplicant.conf -i eth1 -D wext
</pre>

Replace eth1 with your wireless interface. $iwconfig will show you your wireless interface(s).

Most people need ''wext''. Replace ''wext'' with your the wpa-driver you need. Try ''wext'' if you don't know which one to use. To use your windows driver choose ''ndiswrapper'' and read the part in this guide about ndiswrapper. Here's a bit more information from /usr/share/doc/README.modes :

<pre>
Table of supported drivers
==========================  ==

A summary of supported drivers follows:

Driver          Description
=======  ============
hostap          Host AP driver (Intersil Prism2/2.5/3)
madwifi         MADWIFI 802.11 support (Atheros, etc.)
atmel           ATMEL AT76C5XXx (USB, PCMCIA)
wext            Linux wireless extensions (generic)
ndiswrapper     Linux ndiswrapper
ipw             Intel ipw2100/2200 driver
wired           wired Ethernet driver
test            test driver
</pre>

If something goes wrong try to change the wpa-driver or dive into wpasupplicant's debugging mode (use -dd for more debugging output) :

<pre>
sudo wpa_supplicant -c /etc/wpa_supplicant/wpa_supplicant.conf -i eth1 -D wext -d
</pre>

Even more debugging output :
<pre>
sudo wpa_supplicant -c /etc/wpa_supplicant/wpa_supplicant.conf -i eth1 -D wext -dd
</pre>

Once you get something like "successful" remember the wpa-driver you used and press ctrl+c. 

=== Step 5 : editting your /etc/network/interfaces ===
Now edit your /etc/network/interfaces by :
<pre>
gksudo gedit /etc/network/interfaces
</pre>
/etc/network/interfaces :
<pre>

auto lo
iface lo inet loopback

auto eth0
iface eth0 inet dhcp

auto eth1
iface eth1 inet dhcp
wpa-driver wext
wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
</pre>

Don't remove the  lo lines. You can choose to comment all other lines. Add these four relevant lines for your wireless interface.

Replace eth1 by your wireless interface.
Replace wext by the wpa-driver that works best with your wireless card. 

This shows you all your network interfaces :
<pre>
ip addr
iwconfig
</pre>
Now make sure all your network interfaces are down :
<pre>
sudo ifdown eth0
sudo ifdown eth1
sudo ifdown wlan0
sudo ifdown wlan1
.....
.....
</pre>

Replace ''eth0'' and ''eth1'' and ''wlan0'' and ''wlan1'' for your network interfaces that are up (except ''lo''). Often your wireless interface will be called eth1 or wlan0 (check with iwconfig). Your wired ethernet interface is often called eth0 (check with `ip addr` when you have an ip on your wired interface to see which one it is).

=== Step 6 : let's hope it works ===
Now let's hope it works (replace ''eth1'' for your wireless interface :

<pre>
sudo ifup eth1
</pre>

When you switch networks and don't want to reboot :
<pre>
sudo ifdown eth1 ; sudo ifup eth1
</pre>

=== Step 7 : protect your network settings and unimaas passpord ==

Now protect your network settings and unimaas password  :
<pre>
sudo chown root:root /etc/wpa_supplicant/wpa_supplicant.conf
sudo chmod 600 /etc/wpa_supplicant/wpa_supplicant.conf 
</pre>

You can still edit your /etc/wpa_supplicant/wpa_supplicant.conf by typing :
<pre>
sudo gedit /etc/wpa_supplicant/wpa_supplicant.conf
</pre>

== More information and other networks ==

You can find wpasupplicant documentation in /usr/share/doc/wpasupplicant and /usr/share/doc/wpasupplicant/examples. Some documentation is compressed. To uncompress them :
<pre>
gunzip /usr/share/doc/wpasupplicant/*.gz
gunzip /usr/share/doc/wpasupplicant/examples/*.gz
</pre>

Example wpa_supplicant.conf. Uncomment and adapt any networks you use :
<pre>
network={
ssid="MAASnet"
key_mgmt=IEEE8021X
wep_key0=65190159381713902819208232 # random!
phase2="auth=MSCHAPV2"
identity="i****" # specify
password="*****" # specify
}

</pre>

== if you need more help ==
More general wireless documentation : WifiDocs

If you run Ubuntu Linux / Debian and want to connect to the wireless network of the University of Maastricht (MAASnet) and you have any questions / problems you can contact one of the following people : 
* Email:  
* your name ?
Be sure to create and attach the following text files :

<pre>
lsb_release -a > release.txt
lspci -nn > lspci-nn.txt
sudo lshw -C network > lshw-network.txt
</pre>
