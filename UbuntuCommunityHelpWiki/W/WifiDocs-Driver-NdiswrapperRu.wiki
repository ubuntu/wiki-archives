{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



== Вступление ==

Даже если для вашей беспроводной сетевой карты нет родного Linux-драйвера, у вас по-прежнему есть возможность заставить её работать с помощью Ndiswrapper. Ndiswrapper — модуль Linux, который позволяет Ubuntu использовать Windows-драйвер для беспроводных карт (в большинстве случаев).

  ''Если вы не знаете название чипсета, который использует ваша WiFi-карта, выполните в терминале команду <code>lspci</code>; оно должно быть указано там. Чтобы выяснить, известно ли о том, что ваш чипсет работает с модулем ndiswrapper, найдите свою карту в списке <nowiki>[[http://sourceforge.net/apps/mediawiki/ndiswrapper/index.php?title=Main_Page|здесь]]</nowiki>.
  Эта ссылка может даже предоставить вам полезные советы о том, как заставить работать конкретно вашу карту, и ссылку на работающие Windows-драйверы.''

== Установка ==

  ''Прежде, чем устанавливать беспроводной драйвер при помощи ndiswrapper или ndisgtk, убедитесь в отсутствии '''любых других''' драйверов, пытающихся использовать вашу беспроводную карту. В случае их присутствия Ubuntu может зависнуть (freeze).''
  

Ubuntu поставляется с необходимым предустановленным драйвером, но нуждается в пакете ndiswrapper-utils, чтобы заставить его работать. Кроме того, есть графический интерфейс для ndiswrapper, которым вы можете воспользоваться, — ndisgtk. Этот интерфейс позволит вам устанавливать (install), удалять (uninstall) и автоматически запускать (automatically start) ndiswrapper-драйверы с наименьшими усилиями.

=== Устанавливаем пакеты (с Internet-доступом на Ubuntu-машине) ===

Если вам удалось получить доступ в Интернет каким-то другим методом, находясь при этом в системе Ubuntu, то:

1. Убедитесь в том, что репозитории multiverse и universe разрешены; см. AddingRepositoriesHowto

2. Установите пакет ''ndisgtk'' из репозиториев Ubuntu.
<pre>
sudo apt-get install ndisgtk
</pre>
Если вы не знаете, как устанавливать приложения, вы можете <nowiki>[[http://help.ubuntu.com/ubuntu/desktopguide/C/add-applications.html|прочитать это руководство]]</nowiki>.

=== Устанавливаем пакеты (с Internet-доступом на другой машине) ===

Скачайте файлы для своей версии Ubuntu:

==== В настоящее время поддерживаемые версии ====
  1. Для 10.04 Lucid Lynx
    a. <nowiki>[[http://packages.ubuntu.com/lucid/misc/ndiswrapper-common]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/lucid/ndiswrapper-utils-1.9]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/lucid/ndisgtk]]</nowiki>
  1. Для 9.10 Karmic Koala
    a. <nowiki>[[http://packages.ubuntu.com/karmic/misc/ndiswrapper-common]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/karmic/misc/ndiswrapper-utils-1.9]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/karmic/net/ndisgtk]]</nowiki>
  1. Для 9.04 Jaunty Jackalope
    a. <nowiki>[[http://packages.ubuntu.com/jaunty/misc/ndiswrapper-common]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/jaunty/misc/ndiswrapper-utils-1.9]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/jaunty/net/ndisgtk]]</nowiki>
  1. Для 8.10 Intrepid Ibex
    a. <nowiki>[[http://packages.ubuntu.com/intrepid/misc/ndiswrapper-common]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/intrepid/misc/ndiswrapper-utils-1.9]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/intrepid/net/ndisgtk]]</nowiki>
  1. Для 8.04 Hardy Heron
    a. <nowiki>[[http://packages.ubuntu.com/hardy/misc/ndiswrapper-common]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/hardy/misc/ndiswrapper-utils-1.9]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/hardy/net/ndisgtk]]</nowiki>
  1. Для 6.06 Dapper Drake
    a. <nowiki>[[http://packages.ubuntu.com/dapper/misc/ndiswrapper-utils]]</nowiki>
    a. <nowiki>[[http://packages.ubuntu.com/dapper/net/ndisgtk]]</nowiki>

<!> Для продвинутых пользователей: Есть известная ошибка в этих Debian-пакетах, подробно изложенная <nowiki>[[http://forums.debian.net/viewtopic.php?p=100586&sid=f09bad1b17b5f4c62f1c4e68d044b8bf|в этой нити]]</nowiki>. Если у вас возникают проблемы после установки из этих пакетов, модуль ядра может быть не установлен, поэтому вы можете получать ошибку ''FATAL: Module ndiswrapper not found'', когда запускаете ''modprobe ndiswrapper'' в терминале. Лучший способ избежать этой проблемы — скомпилировать исходники, доступные тут: <nowiki>[[http://ndiswrapper.sourceforge.net/]]</nowiki>. Это довольно просто, но требуется установить пакет build-essential. Вы можете установить его без подключения к Интернету, используя ''apt-cdrom'' из командной строки или менеджер пакетов synaptic вместе с установочным CD Ubuntu. 

Скопируйте соответствующие файлы в директорию на Ubuntu-машине (например, в свою домашнюю директорию) и установите их в таком порядке:

<pre>
sudo dpkg -i ndiswrapper-common_*.deb
sudo dpkg -i ndiswrapper-utils-*.deb
sudo dpkg -i ndisgtk_*.deb
</pre>

<!> ''Команды, перечисленные выше, — общий пример установки .deb-пакетов из командной строки. Необходимо находиться в директории, куда были скопированы файлы. Если терминал вам ещё не привычен, попробуйте почитать BasicCommands''.

=== Устанавливаем пакеты (без Internet-доступа) ===

  И без соединения с Интернетом вы по-прежнему можете установить ndiswrapper-utils из Desktop CD. Если вы производили установку с его помощью, то репозиторий, в котором находится ndiswrapper-utils, содержится на CD, но не внутри live-сессии (live session). Вам необходимо перезагрузиться в недавно установленную Ubuntu и затем вставить Desktop CD. У вас спросят, хотите ли вы добавить пакеты на CD к своему списку репозиториев.

Если вы производили установку, используя Dapper Alternate CD, эти пакеты, кроме ndisgtk, включены в него.

Вставьте CD в дисковод, выберите '''System''' > '''Administration''' > '''Synaptic Package Manager''' и поищите ''ndis''. Если вы не знаете как устанавливать приложения, <nowiki>[[http://help.ubuntu.com/starterguide/C/ch02.html|прочтите это руководство]]</nowiki>.

== Конфигурация ==

=== Запретите свободные драйверы ===
Во-первых, все версии, начиная с Ubuntu 6.06, содержат открытый (open source) драйвер bcm43xx, который был заменён в 8.04 на b43 и b43legacy, см. <nowiki>[[WifiDocs-Driver-bcm43xx]]</nowiki>. Если этот драйвер у вас не работает, тогда вы должны отключить его, так как он будет создавать конфликты с ndiswrapper. Чтобы отключить его, добавьте строчки <code>blacklist bcm43xx</code> для каждого драйвера к чёрному списку modprobe (modprobe blacklist).
<pre>
echo -e "blacklist bcm43xx\nblacklist b43\nblacklist b43legacy\nblacklist ssb" | sudo tee -a /etc/modprobe.d/blacklist
</pre>
/!\ Для версий 9.04 и выше, имя файла изменилось на blacklist.conf

(Или просто отредактируйте файл <code>/etc/modprobe.d/blacklist</code> и добавьте <code>blacklist bcm43xx</code>, <code>blacklist b43</code>, <code>blacklist b43legacy</code> и <code>blacklist ssb</code> к концу файла.)
Примечание: Это влияет только на то, что будет загружено при запуске, поэтому придётся перезагрузиться, чтобы драйверы bcm43xx были запрещены. Если у вас основанная на Atheros карта, добавьте в чёрный список не только ath_pci, но ещё и ath_hal, так как ndiswrapper не будет работать, если ath_hal до сих пор загружен.

/!\ Чтобы заставить работать D-link DWL-G122 USB wireless device, нам пришлось заблокировать также и rt2500usb, а затем перезагрузиться. Нас осенило, когда информация о соединении устройства (device's "Connection Information") продолжала сообщать нам о том, что драйвером является rt2500usb, несмотря на то, что мы следовали всем инструкциям на этой странице.

/!\ '''D-Link DWL-G122 USB Wireless device''': По состоянию на декабрь 2008 года '''Ubuntu 8.10''' предоставляет полную поддержку «из коробки» ("out of the box") для этого устройства, используя драйвер '''<code>rt73usb</code>'''. В этом случае нет необходимости использовать ndiswrapper вовсе и нет необходимости вносить какие-либо изменения в стандартный файл '''<code>/etc/modprobe.d/blacklist</code>'''. После присоединения D-Link USB device, ввод команды '''<code>lsusb</code>''' в консоли должен возвращать что-то вроде этого:<<BR>>
<code>Bus 001 Device 002: ID 07d1:3c03 D-Link System DWL-G122 802.11g Adapter [ralink rt73]</code><<BR>>
Чтобы проверить, что драйвер '''<code>rt73usb</code>''' загружен, введите команду '''<code>lsmod | grep rt73usb</code>'''
и проверьте, что вывод содержит строку, начинающуюся с '''<code>rt73usb</code>''', которая значит, что драйвер загружен.

=== Определяем беспроводной адаптер ===

  /!\ '''Важно:''' Будьте осторожны, когда используете драйверы с CD, поставляемого вместе с беспроводной картой. Они могут сработать, и вы сможете испробовать их, но существует возможность сбоев ядра (kernel crashes) и других серьёзных проблем, если драйвер на CD не был испытан с ndiswrapper.

 Вам стоит скачать испытанные драйверы для Windows XP, подходящие для вашей карты, из списка ndiswrapper.
==== Беспроводной PCI-адаптер ====
# Откройте терминал ('''Applications''' | '''Accessories''' | '''Terminal'''), наберите <code>lspci</code> и нажмите Enter.
# Просмотрите вывод команды <code>lspci</code> на предмет наличия своей беспроводной карты.
# После того, как вы определили свою карту, запишите содержимое первой колонки, которое должно быть похожим на ''0000:00:0c.0''.
# Теперь наберите <code>lspci -n</code> в терминале и нажмите Enter.
# Найдите PCI ID для своего устройства. В выводе команды ваше устройство будет известно под идентификатором, который вы только что записали, например, ''0000:00:0c.0''. PCI ID будет в третьей колонке вывода и будет иметь вид ''104c:8400''.
==== Беспроводной USB-адаптер ====
# Откройте терминал ('''Applications''' | '''Accessories''' | '''Terminal'''), наберите <code>lsusb</code> и нажмите Enter.
# Просмотрите вывод команды <code>lsusb</code> на предмет наличия своей беспроводной карты.
# После того, как вы определили свою карту, запишите chipset ID, который будет в виде ''104c:8400''.

=== Скачиваем Windows-драйверы ===
# Найдите Windows-драйвер, соответствующий вашему чипсету: используйте информацию об ID, которую вы только что получили, и <nowiki>[[http://sourceforge.net/apps/mediawiki/ndiswrapper/index.php?title=Main_Page|список]]</nowiki> ndiswrapper, чтобы найти и скачать правильные файлы Windows-драйвера для вашего или очень похожего (одинаковые chipset ID) беспроводного адаптера.
# Распакуйте Windows-драйвер, используя инструменты (запускаемые из терминала) unzip, cabextract и/или unshield, и найдите INF-файл (расширение .INF или .inf) и SYS-файл (расширение .SYS или .sys). Сначала, возможно, придётся установить ''cabextract'' и ''unshield''.
# Если есть несколько INF- и SYS-файлов, взгляните на <nowiki>[[http://ndiswrapper.sourceforge.net/joomla/index.php?/component/option,com_openwiki/Itemid,33/id,list/|список]]</nowiki> ndiswrapper, чтобы найти какие-нибудь подсказки о том, какие файлы следует использовать.
# Если у вас есть Windows-драйверы на CD и вы не можете извлечь INF- или Bin-файлы, можете попробовать установить драйверы на Windows-машину. Затем просмотрите: Контрольная панель-Система-Вкладка «Оборудование»-Кнопка «Драйверы устройств». Потом найдите своё устройство среди сетевых адаптеров. После того, как найден сетевой адаптер,  посмотрите, какой драйвер используется, с помощью двойного щелчка на адаптере в списке. Потом перейдите на вкладку «Драйверы» и нажмите на кнопку «Информация о драйверах». Драйвер и путь будут указаны; он обычно находится в папке C:/windows/system32/drivers. Чтобы наверняка, произведите поиск этого файла. BIN-файл и INF-файл обычно имеют одно и то же имя в папке C:/windows/system32. После обнаружения всех файлов скопируйте их на flash-носитель или запишите на CD, чтобы переместить их на Ubuntu-машину для установки при помощи Ndiswrapper.

 1. Убедитесь, что INF-файл, SYS-файл и все BIN-файлы помещены вместе в одну директорию.

=== Устанавливаем Windows-драйвер ===

==== Устанавливаем Windows-драйвер, используя ndisgtk (графический интерфейс ndiswrapper) ====

  Если вы предпочли установку ndisgtk, графического интерфейса для ndiswrapper, после установки выберите '''System''' | '''Administration''' | '''Windows wireless drivers''' и последуйте инструкциям на экране. Чтобы знать, чего следует ожидать, некоторые скриншоты ndisgtk могут быть найдены <nowiki>[[http://lxer.com/module/newswire/view/46385/|здесь]]</nowiki>.

  Если это сработало и у вас есть сетевое подключение, тогда можете перейти к «<nowiki>[[#autostart|Автоматически загружаем при старте]]</nowiki>» — ndisgtk загрузит драйвер, если он правильно установится.

==== Устанавливаем Windows-драйвер, используя командную строку ====

В терминале запустите следующую команду:

  <pre>
  sudo ndiswrapper -i ~/drivers/drivername.inf
  }}}

  (если драйвер — в директории в вашей домашней папке с именем <code>drivers</code> и называется <code>drivername.inf</code>)

ndiswrapper скопирует <code>.inf</code>- и <code>sys</code>-файлы в <code>/etc/ndiswrapper/...</code>. Не забывайте, что набираемое вами имя файла зависит от регистра (is case-sensitive).

===== Проверяем и убеждаемся, что драйвер был установлен правильно =====

  Запустите следующие команды из терминала:
  {{{
  ndiswrapper -l
  }}}

  Если драйвер установлен верно, вы должны увидеть последующий вывод:
  {{{
  Installed ndis drivers:
  {name of driver} driver present, hardware present
  }}}
  или
  {{{
  {name of driver} : driver installed
       device ({Chipset ID}) present
  }}}

  Если вы не видите это сообщение:
   a. Попробуйте другой драйвер — такой, как драйверы для Windows 2000, или подходящий для вашего PCI ID драйвер из <nowiki>[[http://ndiswrapper.sourceforge.net/mediawiki/index.php/List|списка ndiswrapper]]</nowiki>.
   a. Этот документ имеет раздел «<nowiki>[[#trouble|Решение проблем]]</nowiki>», который может дать вам ответ.
   a. Попробуйте найти дополнительную помощь. Прочтите HowToGetHelp, чтобы получить больше информации.

=== Загружаем модуль нового драйвера ===

  Если ndiswrapper верно сопоставил драйвер беспроводному адаптеру, вы сейчас должны быть готовы загрузить драйвер в память и попытаться установить сетевое соединение.

  Откройте терминал и запустите следующие команды:
  {{{
  sudo depmod -a
  sudo modprobe ndiswrapper
  }}}

  Потом, также в терминале, проверьте наличие сообщений об ошибке:
  {{{
  tail /var/log/messages
  }}}

  В качестве альтернативы, откройте терминал и попробуйте команды <code>ip</code> и <code>iwconfig</code>. Беспроводная карта должна появиться с именем интерфейса ''wlan0''. Если она там не появляется, то драйвер работает не должным образом.

  Если ошибок нет, вы теперь должны быть способны настроить сетевое соединение.

=== Настраиваем беспроводную сеть ===

==== Настраиваем беспроводную сеть, используя nm-applet (пользовательский интерфейс GNOME для Network Manager) ====
 Будучи установленным, этот апплет делает беспроводное подключение к нескольким сетям (роуминг) проще — это полезно, если вы используете свой ноутбук для подключения к беспроводным сетям из более чем одного местоположения.
  
## Откройте инструмент Networking Admin ('''System''' | '''Administration''' | '''Networking'''), выберите Wireless connection и нажмите '''Properties''', убедитесь, что флажок '''Enable roaming mode''' установлен.
## Нажмите на иконке Network Manager (иконка с компьютерами в верхнем правом углу системного трея), ESSID вашей сети должен быть показан в выпадающем списке. Выберите свою сеть, нажав на ней.
## Если сеть требует какой-либо дальнейшей настройки (например, WEP-ключ), должен появиться диалог, выберите правильные настройки и вставьте свой ключ.
## Апплет Network Manager использует Keyring Manager для хранения ваших паролей, поэтому второй диалог откроется после этого, запрашивая создание главного пароля (master password) для Keyring Manager. Заметьте, что вас будут просить ввести главный пароль каждый раз, как вы входите в систему (logon). <nowiki>[[http://ubuntuforums.org/showpost.php?p=2776815&postcount=1|Здесь]]</nowiki> есть решение, как избежать необходимости постоянно вводить пароль.
## Ваша беспроводная сеть должна быть уже настроена — перейдите к «<nowiki>[[#autostart|Автоматически загружаем при старте]]</nowiki>»

/!\ При использовании этого метода настройки с драйвером TNET1450 беспроводная сеть продолжила отбрасывать пакеты и беспроводное подключение переставало отвечать через несколько минут. Если вы столкнулись с похожими проблемами, используйте метод network-admin, описанный ниже.

/!\ nm-applet не использует стандартный файл NetworkAdmin <code>/etc/network/interfaces</code> для хранения настроек беспроводной сети, поэтому вы не будете иметь возможность использовать команды '''ifup''' и '''ifdown''', чтобы запускать (start) и останавливать (stop) сетевой адаптер. Запуск и останов ndiswrapper ('''sudo modprobe ndiswrapper''' / '''sudo modprobe -r ndiswrapper''') может быть использован вместо этого. Это может затруднить диагностирование проблем с соединением.

/!\ nm-applet требует запись в <code>/etc/modules</code>, чтобы запускать ndiswrapper при старте системы. Однако, эта установка должна быть удалена при использовании ручной настройки (network-admin), так как ndiswrapper будет запущен приложением network-admin при помощи только команды alias в <code>/etc/modprobe.d/ndiswrapper</code>.

==== Настраиваем беспроводную сеть, используя network-admin (Network Admin) ====
Это альтернативный, более естественный метод использования GNOME-апплета nm-applet.
## Откройте инструмент Networking Admin ('''System''' | '''Administration''' | '''Networking'''), выберите Wireless connection и нажмите '''Properties''', убедитесь, что флажок '''Enable roaming mode''' не установлен.
## В поле Network Name выберите или наберите ESSID своей сети
## В поле Password type выберите тип вашего сетевого пароля: Hex (например, 208AB43..) или Ascii (например, secret)
## В поле Password наберите или вставьте свой сетевой пароль
## В Connection Configuration выберите тип настройки сети — обычно это DHCP.
## Если ваша сеть настраивается с использованием статических IP-адресов, заполните IP-адрес своего компьютера, маску подсети и IP-адрес шлюза.
## Нажмите '''OK''', чтобы применить эти установки — они будут размещены в файле <code>/etc/network/interfaces</code>
## Для полноты, в диалоге Network Settings нажмите '''Save''' и наберите запоминающееся имя для настроенной сети. Оно может быть использовано для того, чтобы выбирать между несколькими сетями вручную.
## Ваша беспроводная сеть должна быть уже настроена — перейдите к «<nowiki>[[#autostart|Автоматически загружаем при старте]]</nowiki>»

  Примечание: Во время старта система активирует установки Network Admin, хранящиеся в файле <code>/etc/network/interfaces</code>, куда инструмент Networking сохраняет свои установки.

 Вы можете выяснить эти сетевые установки путём активации и деактивации интерфейса беспроводной сети из терминала, который покажет некоторые диагностические сообщения:

  {{{
  sudo ifdown wlan0
  sudo ifup wlan0
  }}}

 Вы можете выяснить статус сетевого адаптера при помощи команд:
  {{{
  ifconfig
  iwconfig
  
  dmesg
  tail /etc/var/messages
  }}}

==== Настраиваем беспроводную сеть, используя командную строку ====
Если вышеприведённые методы не предоставляют рабочего беспроводного сетевого соединения, вы можете отредактировать файл сетевых интерфейсов вручную и диагностировать сеть с помощью командной строки.

 Вы можете обнаружить установки свыше тех, что доступны с помощью инструмента Networking, используя ''iwconfig''. Кроме того, ''порядок'' беспроводных установок может быть очень важен. Если вы обнаружите, что команды ''iwconfig'' нужны в командной строке ''в определённом порядке'', убедитесь, что файл утверждает установки в таком же порядке.

 Протестируйте ''/etc/network/interfaces'' через активацию и деактивацию интерфейса беспроводной сети из терминала, который покажет некоторые диагностические сообщения:

  {{{
  sudo ifdown wlan0
  sudo ifup wlan0
  }}}

  Вы можете выяснить статус сетевого адаптера при помощи команд:
  {{{
  ifconfig
  iwconfig
  
  dmesg
  tail /etc/var/messages
  }}}

  Примечание: Во время старта система активирует установки Network Admin, хранящиеся в файле <code>/etc/network/interfaces</code>, куда инструмент Networking сохраняет свои установки.

  ''Для информации о том, как заставить работать WPA, прочтите WPAHowto.''

=== Автоматически загружаем при старте ===
Если всё работает, вам нужно сообщить своей системе о необходимости загружать модуль при старте.
В зависимости от метода используемого сетевого менеджера, это потребует различных настроек

 Настройте ndiswrapper для использования с установками Network Admin — это добавит alias, ассоциирующий wlan0 инструменту ndiswrapper, в modprobe.d
  {{{
  sudo ndiswrapper -m
  }}}

==== Исключительно для апплета Network Manager ====
 Если вы используете nm-applet для настройки беспроводной сети, ndiswrapper не будет запущен установкой alias сетевого менеджера.
 Убедитесь, что модуль ndiswrapper загружается при старте системы:
 Отредактируйте файл <code>/etc/modules</code> и добавьте запись для ndiswrapper в конец файла

 В Ubuntu,

  {{{
  gksudo gedit /etc/modules
  }}}

 В Kubuntu,

  {{{
  kdesu kate /etc/modules
  }}}

 и добавьте слово <code>ndiswrapper</code> к концу этого файла, сохранив его.

/!\ nm-applet требует запись в <code>/etc/modules</code>, чтобы запускать ndiswrapper при старте системы. Однако, эта установка должна быть удалена при использовании ручной настройки (network-admin), так как ndiswrapper будет запущен приложением network-admin с помощью команды alias в <code>/etc/modprobe.d/ndiswrapper</code> и наличие записи в <code>etc/modules</code> может быть причиной, по которой беспроводной сетевой драйвер не запустится подобающим образом

/!\ Строго рекомендуется сделать резервную копию (backup copy) файла <code>/etc/modules</code> прежде, чем вручную редактировать его.

== Решение проблем ==
* Если вы не можете получить работающий драйвер, рассмотрите компиляцию и использование последней версии ndiswrapper. Ubuntu Breezy поставляется с v1.1, и по состоянию на январь 2006 года v1.8 является стабильной версией.
* ''Can not modprobe ndiswrapper, fatal error given.''
** Эта ошибка обычно выдаётся, когда ndiswrapper скомпилирован и установлен. У вас плохо установлен ndiswrapper, или вы не удалили поставляемый с Ubuntu модуль. Вам нужно деинсталлировать ndiswrapper и убедиться, что вы удалили поставляемый с Ubuntu модуль ndiswrapper. Инструкции о том, как деинсталлировать ndiswrapper, могут быть найдены <nowiki>[[http://ndiswrapper.sourceforge.net/mediawiki/index.php/Uninstall|здесь]]</nowiki>
* Если вы не можете соединиться, убедитесь, что eth0 (или любой другой возможно используемый сетевой интерфейс) отключён или деактивирован (down/deactivated). Команда, отключающая eth0:

{{{
sudo killall dhclient
sudo ifconfig eth0 down
</pre>

=== Некоторые общие ошибки ===

* Пытались установить драйвер с CD-ROM
** Файлы должны присутствовать на жёстком диске, они не могут быть загружены с CD-ROM
* Не все файлы копируются на жёсткий диск
** Не все файлы с накопителя требуются. Вам в основном нужны .inf- и .sys-файлы. Некоторые драйверы используют также .bin-файл, но никакие другие типы файлов не должны быть нужны.
* Слишком много файлов драйвера копируется в папку
** Вам нужно иметь лишь 1 .inf- и 1 .sys-файл в директории на жёстком диске.
* Нет возможности получить файл driver.inf для установки — ''file not found''
** Вам нужно находиться в одной директории с .inf-файлом или указать полный путь к файлу.
* Другой драйвер загружается и привязывается к устройству
** Иногда ndiswrapper используется преждевременно. Может существовать родной поставляемый с Ubuntu драйвер, который занимает положение первичного драйвера и конфликтует с ndiswrapper. Для более подробной информации об этом перейдите к WifiDocs/WirelessTroubleShootingGuide и просмотрите стадию про драйверы и ndiswrapper.

== Компилируем последнюю версию ndiswrapper ==

''Этот раздел основан на <nowiki>[[http://ndiswrapper.sourceforge.net/mediawiki/index.php/InstallDebian|вики-странице]]</nowiki> проекта ndiswrapper и был скопирован с Ubuntu Forums. Первоначальный пост может быть найден <nowiki>[[http://ubuntuforums.org/showthread.php?p=601226|тут]]</nowiki>. Пожалуйста, обсуждайте испытываемые проблемы или ошибки там.''

 Рекомендуется, прежде всего, удалить любые следы ndiswrapper со своего компьютера. Существует модуль, устанавливаемый по умолчанию с Ubuntu. Чтобы удалить его, из терминала запустите следующие команды:

  {{{
  sudo modprobe -r ndiswrapper
  sudo apt-get --purge remove ndiswrapper-utils
  sudo rm -r /etc/ndiswrapper/
  sudo rm -r /etc/modprobe.d/ndiswrapper
  sudo rm /lib/modules/$(uname -r)/kernel/drivers/net/ndiswrapper/ndiswrapper.ko
  }}}

<!> В Jaunty ndiswrapper.ko находится в другом месте:
  {{{
  sudo rm /lib/modules/$(uname -r)/kernel/ubuntu/ndiswrapper/ndiswrapper.ko
  }}}
<!> Прежде, чем вы начнёте компилировать свой собственный ndiswrapper, пожалуйста, заметьте, что всякий раз когда вы обновляете ядро, вам нужно компилировать ndiswrapper заново. Тем не менее, в случае переустановки не будет необходимости в удалении предыдущих следов ndiswrapper, как это было разобрано выше.

=== Устанавливаем заголовочные файлы ядра ===

  Из терминала запустите:
  {{{
  sudo apt-get install linux-headers-$(uname -r)
  }}}

  и запустите следующее для зависимостей:
 
  {{{
  sudo apt-get install dh-make fakeroot gcc-3.4 build-essential
  }}}

=== Скачиваем и распаковываем текущую версию ===

  Вы можете найти текущую версию ndiswrapper <nowiki>[[http://sourceforge.net/project/showfiles.php?group_id=93482|тут]]</nowiki>.

  Используя терминал, перейдите в директорию, куда вы сохранили скачанный файл, и запустите следующие команды:

  {{{
  tar xvfz ndiswrapper-[current version].tar.gz
  cd ndiswrapper-[current version]
  }}}

 Замените <code>[current version]</code> на настоящую версию скачанного файла.

=== Устанавливаем Ndiswrapper ===

  Наиболее поздняя версия ndiswrapper (начиная по крайней мере с версии 1.19) может более не компилироваться в виде .deb-пакета. Но с этим можно что-то сделать, как бы то ни было. Просто выполните последующее, находясь в директории ndiswrapper (см. выше):

  {{{
  sudo make uninstall
  sudo make
  }}}

  Советуется запускать следующее в fakeroot:
  {{{
  fakeroot
  sudo make install
  }}}

  Если какая-либо ошибка происходит во время этих этапов, пожалуйста, попробуйте установить снова. Может потребоваться запускать команды в fakeroot во время всего процесса. Когда всё установилось без ошибок, вернитесь к разделу этого документа об <nowiki>[[#install|установке]]</nowiki>, чтобы закончить с ndiswrapper.

=== Собираем deb-пакеты и устанавливаем (работает только для старых версий ndiswrapper) ===

<!> Пожалуйста, заметьте: Это технически устаревший материал. Однако, в определённых обстоятельствах может потребоваться использование более старой версии ndiswrapper для того, чтобы заставить работать беспроводную карту. Если по какой-либо причине не работают предыдущие этапы, тогда скачайте версию до 1.16, чтобы применить последующее.

  Запустите следующее из терминала:
  {{{
  fakeroot debian/rules binary-modules
  fakeroot debian/rules binary-utils
  cd ..
  sudo dpkg -i ndiswrapper-modules-[your kernel]_[current version]-1_i386.deb ndiswrapper-utils_[current version]-1_i386.deb
  }}}

  Теперь вернитесь к разделу «<nowiki>[[#configure|Конфигурация]]</nowiki>» этого документа, чтобы установить и использовать свой только что созданный пакет ndiswrapper.

== Полезные ссылки ==

* <nowiki>[[http://sourceforge.net/apps/mediawiki/ndiswrapper/index.php?title=Main_Page|Вики проекта ndiswrapper]]</nowiki>

* <nowiki>[[http://ubuntuforums.org/showthread.php?t=197102|Автоматизированная установка Ndiswrapper]]</nowiki>: альтернативный метод установки Ndiswrapper и настройки его с помощью Network Manager

* WifiDocs

----
CategoryNetworking
