{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

Parent: <nowiki>[[WorldofWarcraft]]</nowiki>

{| class="wikitable"
|-
| <tablestyle="float:right; font-size: 0.9em; width:40%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em;">'''Contents'''
|}

This article tries to address the common issues people are having with running World of Warcraft using Wine under Ubuntu. 

A failed DRI test from the intro of the guide, as well as problems that persist after you have explored and tried on all of these different hints and tips, are often related to graphics cards and drivers. Sometimes the graphics card is just not well enough supported in the driver, and other times a driver update or reinstall solves the problem. See here <nowiki>[[https://help.ubuntu.com/community/BinaryDriverHowto/]]</nowiki> and here <nowiki>[[http://albertomilone.com/nvidia_scripts1.html]]</nowiki> for more info on installing updated drivers for your graphics card.

WoW runs especially well on Nvidia video card hardware because Nvidia has well supported drivers for Linux. Intel cards are usually not very powerful, and will not run the game very well even though the drivers are well supported. As for ATI, they have been lagging far behind in making Linux drivers for their graphics cards, and therefor ATI user may experience that WoW will be unstable and give bad performance or even not run at all.

Remember that DirectX support in Wine is still in early development, but as an able alternative, WoW does also have full support for OpenGL, which in turn is fully supported in in most Unix-like operating systems, including Ubuntu, and World of Warcraft is one of the best supported games by Wine at the moment.

=== Frequent blinking ===
Constant blinking of the gaming window can be cause by the Visual Effect (<nowiki>[[CompizFusion|Compiz]]</nowiki>) which are set to normal in the default installation of Ubuntu. To remove it go to System -> Preferences -> Appearance then the Visual Effects tab and select '''None'''.

=== Intel 950 (and most certainly other DRI-based drivers) ===

Intel drivers are very buggy when it comes to more sophisticated games. WoW is one of them. If you've been following the guidlines here you'd probably notice that WoW is completely unplayable on these exhibiting extremely low framerate and garbled screen. There is an easy way to make WoW fully playable on these chips.

# Launch <code>winecfg</code> and go into graphics tab; *disable* both vertex and pixel shaders.
# Open config.wtf and REMOVE any gxApi entry, e.g.:
<pre>
SET gxApi "opengl"</pre>
  This should be removed, so that the game will use (surprise!) DirectX.
# Make sure other tweaks (ffxDeath, ffxGlow) are still applied.
# Save the file, launch WoW and enjoy a working game. (:

=== ATI / AIGLX ===
Please be aware that People using AIGLX may experience low framerates.

As a test, one can do this:
<pre>
 /etc/init.d/gdm stop          # this will shutdown your X Server!
 startx `which wine` WoW.exe   # start X with WoW as "Desktop Manager" (might look funny :])
</pre>

Running AIGLX and another X Server running wow will probably crash the box, so please dont try that or make sure you can ssh to the box.

My personal experience is ~5-10 FPS with wow inside aiglx, while 25-30 fps running on a "standalone X Server"

=== DLL files ===
If you have troubles running the installation or even the game itself, you may need to get a few .dll files from a windows installation or here:

** <nowiki>[[http://www.dll-files.com/dllindex/dll-files.shtml?msvcp60|msvcp60.dll]]</nowiki> (MD5: 6050bcc1b23f3df7a1876cbdcbac8232)
** <nowiki>[[http://www.dll-files.com/dllindex/dll-files.shtml?mfc42|mfc42.dll]]</nowiki> (MD5: 7e4d1b552ee1dfa859ba9033b3670590)
** <nowiki>[[http://www.dll-files.com/dllindex/dll-files.shtml?riched20|riched20.dll]]</nowiki> (MD5: 878f0ebc1bef45694311f7d4f7fe3344)
** <nowiki>[[http://www.dll-files.com/dllindex/dll-files.shtml?riched32|riched32.dll]]</nowiki> (MD5: 804d815826fe00d6471c72d8299fcbb5)

 and place them in /home/<username>/.wine/drive_c/windows/system32. You will, however, need a Windows license to use these files.

 ''Note: Remember to change <code><username></code> to your personal computer login username''
 
=== Installer.exe ===
If you recieve the error <code>Unrecognized key "options". (AttributeParser::Parse)</code> while trying to install after copying the files from the cd's onto your hard drive, copy the Installer.exe from Disk 1 into the directory you copied your files and re-run the Installer.   

=== Adjust the soundbuffer size ===
If you have problems with sound stuttering you may have to increase or decrease the sound buffer a bit. It's configured by changing the value of the <code>SET SoundBufferSize</code> line in <code>wtf/Config.wtf</code>. Anything from 50 to 250 may cure your problem. Bear in mind that excessive buffer size may create audio sync issues.

=== Mozilla ActiveX / Gecko rendering engine ===
When the patch program, or the WoW Launcher starts, it will ask you about installing Mozilla ActiveX. Select "Yes". In doing this you will download a trimmed down version of the Gecko rendering engine (Firefox, Mozilla) which will respond to ActiveX calls, this means anytime a program tries to use HTML for a display, or similar, it will show. The launcher's news section and the changelog shown when applying a patch both use the rendering engine.

=== Desktop panels on top of WoW ===
You may have trouble with the desktop panels (gnome-panel in Gnome, and kicker in KDE) showing up above the WoW "window".

Two possible workarounds with gnome-panel are to either use the autohide option on the panel or the hide buttons, both of which you activate by right clicking the panel -> properties

If you are using Beryl or Compiz, then you should start the game in windowed mode and then use a keyboard shortcut to make it go to fullscreen. 

In order to make the game run in windowed mode go to the <code>Video</code> menu "in game" (press <code>ESC</code> -> <code>Video</code>), and check the option <code>Windowed mode</code> and press <code>Okay</code>. Alternatively you can also either add <code> -windowed </code> to the command you use to start WoW, or add this line
<pre>
SET gxWindow "1" </pre> 
to the <code>wtf/Config.wtf</code> config file. Then launch the game.

In Beryl you then press <code>CTRL+ALT+ENTER</code> to activate the fullscreen shortcut.

In Compiz you need to do the following first:
# Open CompizConfig Settings Manager
# Scroll down until you see the section titled Window Management.
# Enable the Extra WM Actions plugin
# Open the config dialogue & click the arrow next to General to display the various config options for the plugin
# Click on the space next to Toggle Fullscreen where it says disabled. It should now read "New Accelerator...", (without the quotes)
# Press the key combination you wish to use for toggling full screen mode. You may for example use <code>CTRL+ALT+ENTER</code> and exit the configuration utility

Now run the game, and use your hot-key combination to switch to fullscreen.

=== Reassign Control key ===
If you are using CONTROL in your switch workspace key combo, you may need to reassign it to avoid inteferance from WoW.

=== Changing video settings crash ===
If you try to configure WoW's video settings (Resolution, Vertex Shaders, Pixel Shaders etc.) while running in opengl mode, WoW may crash. The workaround is to configure WoW's video settings while running WoW in d3d mode, or by using a special addon.

 The addon is found here <nowiki>[[http://files.wowace.com/ApplyToForehead/no-ext/]]</nowiki>, and you should extract the zipped folder in to <code>/Interface/AddOns/</code> in your WoW directory. Then enable it under <code>AddOns</code> in the choose character screen. You probably need to tick the option, which says <code>Load out of date AddOns</code>, for it to work.

 You use d3d mode by running WoW with this command in stead of your usual one:
 <pre>
 wine wow.exe -d3d</pre>

 or you can change this line in wtf/Config.wtf
 <pre>
 SET gxApi "OpenGL"</pre>
 to
 <pre>
 SET gxApi "d3d"</pre>
 run the game and change the settings, and then change the line back.

 If this causes the display to be inverted or otherwise corrupted, do not be concerned. The display will correct itself once you switch back to OpenGL. Running in d3d mode is simply so you can set WoW's video options.

=== Fullscreen glow ===
If WoW crashes on startup under opengl, but runs with d3d, try disabling 'fullscreen glow effects', in the video setting screen or by adding this line to <code>wtf/Config.wtf</code>:
 <pre>
 SET ffxGlow "0"</pre>

The world zombie event before Wrath of the Lich King release and some death knight quests in WotLK have a new glow effect that also may not work - on two of my computers, it causes the entire screen to glow white/black/green (depending on the effect).  To disable this effect, add this line to <code>wtf/Config.wtf</code>:
 <pre>
 SET ffxSpecial "0"</pre>

=== Nvidia driver error ===
For users with an Nvidia card who have upgraded to '''Wine 0.9.30''' after installing, you may need to reinstall your nvidia-glx if you are crashing with the following error message when running WoW from the console:

 <pre>
Major opcode of failed request: 142 (GLX)
Minor opcode of failed request: 3 (X_GLXCreateContext)
Serial number of failed request: 14
Current serial number in output stream: 15

/*( This can be fixed by typing: */

$ sudo apt-get install nvidia-glx</pre>

=== ATI enter game world crash ===
For users with an ATI video card: certain cards have trouble rendering games and video in opengl using current flgrx drivers which will cause your computer to hard locks when you attempt to enter a domain.  This error will occur just after character creation/selection, as the game environment is loading, or possibly after a short period of play.  In order to fix this error, add the following three lines of code to your xorg.conf file in the ATI device section:

 <pre>
 Option "Capabilities" "0x00000800"
 Option "UseFastTLS" "off"
 Option "KernelModuleParm" "locked-userpages=0"</pre>
 You edit the file by doing this command:
 <pre>
 gksudo gedit /etc/X11/xorg.conf</pre>
 The section should look something similar to this after editing:
 <pre>
 Section "Device"
   Identifier  "aticonfig-Device[0]"
   Driver      "fglrx"
   Option       "Capabilities" "0x00000800"
   Option       "UseFastTLS" "off"
   Option       "KernelModuleParm" "locked-userpages=0"
 EndSection</pre>

=== Corrupt panel icons ===
If you experience corrupt icons on your panel then you then you may need to set the <code>SET UIFaster</code> parameter in <code>wtf/Config.wtf</code>
 
 Use it like this: 
 <pre>
 Set UIFaster "x"</pre>

 Where x equals:
 <pre>
 0 – This turns off all UI acceleration
 1 – For Internal Use Only - DO NOT USE!
 2 – Enables partial UI acceleration only.
 3 – Enables all UI acceleration.</pre>

 Example:
 <pre>
 Set UIFaster "2"</pre>The value 2 usually corrects this problem.

=== Crashes From Indoor to Outdoor ===
If wow crashes each time your character moves from outdoors to indoors, even though the patch above was applied, then try disabling double buffering. Unchecking "Enable desktop double buffering" under the "Graphics" tab in winecfg. It has been reported that this solved the problem. -- This option is only for those with older versions of wine, the newest version has this feature removed.

Alternatively try using the linux minimap add-on, possible compatibility issue with XGL. 

=== Glitch every 3-5 sec ===
If you see a noticeable graphical studder every 3 to 5 seconds or so for this you need to edit /etc/X11/xorg.conf and add something like:

Option "UseFastTLS" "2"

to the Video card "Device" Section. This of course is normally a problem with the OSS (open source software) Drivers for ATi cards. 

=== WoW hangs on exit ===
With certain versions of Wine you may experience that WoW hangs (unable to do anything) when you exit the game.

'''This bug does not exist in the newest version of wine, 0.9.46'''

The bug was fixed in version 0.9.38, but because of a regression it re-emerged in version 0.9.44, and was fixed again in 0.9.46.

If for some reason the newest version of Wine does not work for you, then you can always fix the problem by downloading and installing a version of Wine between 0.9.38 and 0.9.43, which are still relatively new and play the game fine.

Other reports state that changing the sound driver configured in winecfg from <code>OSS</code> to <code>ALSA</code> or changing the windows version in <code>winecfg</code> fixes the problem.

There are a few workarounds for the problem if it persists. Just alt-tab out of the game and kill it with the process manager. Or if you launch WoW in a terminal you can kill it with <code>ctrl-c</code>. For those who don't like to end WoW process so brutally, you may want to try this:

First write these two commands inside WoW

1. /console reloadui
2. /logout 

Then

1. click <code>"Back"</code> on characters page
2. click <code>"Quit"</code> on logon page. 

=== Sound stops working after alt-tabbing out ===
Since Wine version 0.9.42, if WoW loses focus (that is, if you alt-tab to another window) the sound will stop working. Also, some users have reported that WoW crashes or black-screens completely when WoW loses focus.

The simplest way to make sound play while WoW doesn't have focus is to enabling the option Enable Sound in Background in the Sound Options menu.

Setting the game to run in Windowed Mode (and then simply making it fullscreen) also appears to fix this problem and there is little noticeable difference between this and actually being fullscreen.

There is also a post in the WoW appdb page, that gives a backwards diff patch that can be applied to the Wine source before compiling, that can fix the problem, but just commenting out the line in question - so that WoW never is even told that it has lost focus - works well too; you can then alt-tab between windows and back to WoW with zero delay, with WoW always running underneath, but this may break compatibility with other Wine apps and might not work with all windowmanagers, your mileage may vary.

To comment out the line:

*** download, extract the latest Wine tarball
*** open up the file dlls/winex11.drv/event.c
*** look for a bit of code that looks like the following: 

<pre>
/* Abey : 6-Oct-99. Check again if the focus out window is the
Foreground window, because in most cases the messages sent
above must have already changed the foreground window, in which
case we don't have to change the foreground window to 0 */
if (hwnd == GetForegroundWindow())
{
   TRACE( "lost focus, setting fg to 0\n" );
   SetForegroundWindow( GetDesktopWindow() );
}

*** comment out the SetForegroundWindow() line like this: 

if (hwnd == GetForegroundWindow())
{
   TRACE( "lost focus, setting fg to 0\n" );
/* SetForegroundWindow( GetDesktopWindow() ); */
}
</pre>

*** build Wine as usual
*** ???
*** PROFIT 

=== No Sound or other unrelated issues ===
To fix sound, or possibly other problems, first try adding
<pre>
SET ffxDeath "0" SET ffxGlow "0"
</pre> 
to "/home/<username>/.wine/drive_c/Program Files/World of Warcraft/WTF/Config.wtf", without the quotes, where <username> is you computer login name. Try to run World of Warcraft. If this doesn't work, remove the text, and type in 
<pre>
winecfg
</pre> 
into a terminal. Click add application. Select C:\Program Files\World of Warcraft\Wow.exe or where ever your Wow.exe file is. Highlight Wow.exe. Select "Windows 2000". Then go to the Graphics tab. Uncheck "Allow window manager to control the windows" and "Allow window manager to decorate the windows". Now go to the Audio tab. Check both ALSA and OSS. Be sure "Hardware Acceleration" is set to "Full", and that "Driver Emulation" is unchecked. Now go to the "Drives" tab. Press "Autodetect..." Now press "Apply" and then "Ok". Now start World of Warcraft. Exit at the log-in screen. Now type 
<pre>
winecfg
</pre> 
into a terminal again. Go to the "Graphics" tab. Recheck "Allow window manager to control the windows" and "Allow window manager to decorate the windows". Press "Apply", and then "Ok". It should now work perfectly. Try the graphics tweaks for added effect on performance!      

=== Direct3D error in OpenGL mode ===

If you're getting stuck during login with a 'Downloading' prompt, exit the game and start from a terminal. Confirm that you receive this error:
<pre>
"err:d3d:InitAdapters Failed to initialize gl caps for default adapter
err:wine_d3d:WineDirect3DCreate Direct3D9 is not available without opengl"</pre>

Edit your Config.wtf, removing the <code>SET gxApi "OpenGL"</code> line. Start the game up, login to the character selection screen. Then exit the game, add the line back in - and you should be fine. This error is apparently caused by Blizzard's Hardware Survey code tripping something in Wine. As Wine isn't supported by Blizzard, sending back data that isn't quite correct is probably OK by them. 

=== Mouse Sidebuttons ===
To make the sidebuttons on your mouse work in WoW follow this link: <nowiki>[[http://www.cs.cornell.edu/~djm/ubuntu/#enable-5button-mouse]]</nowiki>

=== Patch download source ===
If you are having difficulties downloading or installing a patch, you can try downloading the direct file from here: <nowiki>[[http://www.wowwiki.com/Patch_mirrors]]</nowiki>

=== Segmentation Fault (Wine) using Nvidia ===
If you receive a Segmentation Fault when executing:
wine "c:\Program Files\World of Warcraft\WoW.exe"

Then try installing the lates NVidia drivers.  

This post <nowiki>[[http://www.nvnews.net/vbulletin/showthread.php?t=118602]]</nowiki> on nvnews.net has a link to beta drivers that works as of 8/29/08

Note: The current driver version in the official repositories is newer than the beta discussed above (by several revisions), so this should no longer be necessary.
