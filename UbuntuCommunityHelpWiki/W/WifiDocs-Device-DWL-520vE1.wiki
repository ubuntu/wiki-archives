{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



== DLinkDWL520E1 ==

This page describes the setup procedure for the D-Link DWL-520 E1 in Ubuntu 5.04. The instructions apply only to the '''E1''' revision of the card. Other revisions of the card are much easier to setup (refer to HardwareSupportComponentsWirelessNetworkCards).

''In Ubuntu 6.06 (Dapper) the hostap drivers are included. Follow the guide, but skip installing and compiling the hostap kernel module. Also, make sure to blacklist the orinoco, orinoco_pci, and hermes drivers. See http://ubuntuforums.org/showthread.php?p=1149887''

''Verified to work in xubuntu Gutsy Gibbon - November 24th 2007 ~Polygon''
=== Prerequisites ===

Refer to the SynapticHowto for instructions on adding new repositories and packages.

The following repositories are required:

* standard repositories shipped with Ubuntu 5.04
* universe

(NB: I installed all repositories listed in the <nowiki>[[http://www.ubuntuguide.org/#extrarepositories|Ubuntu Guide]]</nowiki>. If you do not find any packages listed below, follow the instructions in said Guide.)

The following packages are required:

* hostap-source (revision 1:0.2.6-1)
* hostap-utils (revision 1:0.2.6-1)
* build-essential
* linux-headers-XXX

'''Note:''' in this document XXX refers to the version of your running kernel. To determine the version run {{{
uname -r }}}

'''Note:''' the hostap kernel module requires the kernel to have been compiled with the CONFIG_NET_RADIO option enabled. The 386 kernel shipped with Ubuntu 5.04 does not include that option; however, all other kernels do. If you have not already installed a kernel specific to your CPU you are advised to do so before using this document.

=== Install the hostap kernel module ===

Include din the hostap-source package is ''/usr/src/hostap-source.tar.bz2'', which contais the source for the hostap kernel module.

 0. Open a terminal: Applications | System Tools | Terminal

 0. Change to root {{{
    sudo -s }}}

 0. Extract the hostap source {{{
    cd /usr/src
    tar xjvf hostap-source.tar.bz2 }}}

 0. Change directory to just below hostap tree and build deb package {{{
    cd /usr/src/modules/hostap-source/
    ./debian/rules binary-modules KSRC=/usr/src/linux-headers-$(uname -r) }}}

 0. Install the module {{{
    cd ..
    dpkg -i hostap-modules-XXXXX.deb }}}

At this point the hostap kernel module has been built and installed. The module should load correctly without freezing the computer, though this has been known to happen. To load the module run {{{
modprobe hostap }}}

=== Prepare The Firmware ===

The D-Link DWL-520 E1 requires 2 firmware files to be loaded. Without the firmware the card is not useable.

 0. Download the firmware into a temporary directory {{{
    cd /tmp
    wget http://www.red-bean.com/~proski/firmware/1.8.4.tar.bz2
    wget http://www.red-bean.com/~proski/firmware/primary.tar.bz2 }}}
     
    "The above links are dead. I found the firmware here:
    http://www.netgate.com/support/prism_firmware/ May 15, 2008 ~Malangaman"

    Note that these were the latest files at the time this document was written. Later firmware files may be available.

 0. Extract the firmware archives {{{
    tar xjvf 1.8.4.tar.bz2
    tar xjvf primary.tar.bz2 }}}

 0. Create a permanent location for the firmware {{{
    mkdir /etc/firmware }}}

 0. Copy only the useful firmware to the permanent location {{{
    cp 1.8.4/rf010804.hex /etc/firmware
    cp primary/pm010102.hex /etc/firmware
    chown root:root /etc/firmware/*
    chmod 644 /etc/firmware/* }}}

=== Setup The Network Interfaces ===

Ubuntu 5.04 now supports specifying firmware files to load right in the interfaces file. This greatly simplifies the setup by keeping all network interface information in a single file.

 0. Load the interfaces file in an editor {{{
    gedit /etc/network/interfaces }}}

 0. Specify the details for the D-Link wireless interface by placing the following at the bottom of the loaded file (you likely want to change the hostname line) {{{
    iface wlan0 inet dhcp
        hostname your.hostname.com
        fw_primary /etc/firmware/pm010102.hex
        fw_secondary /etc/firmware/rf010804.hex
        wireless_mode managed }}}

=== Prologue ===

Upon reboot a wireless interface (wlan0) will be created and the firmware loaded to the D-Link card. Because the default ESSID is blank it may take a while to boot; use CTRL+C to skip the ''Starting Networking'' step while booting.

After logging in, edit the network interface using the Network Settings tool (System | Administration | Networking). This tool will allow you to specify a ESSID and WEP key for the interface.

=== Troubleshooting ===

 0. On startup my computer occasionally hangs during the ''Starting Hotplug...'' Only solution I know of is to do a cold reboot of the computer (power off for 30 seconds then start again).

 1. The card is often incorrectly recognized by Ubuntu. This causes the module ''orinoco_pci'' to be loaded (and subsequently time out) during the 'Starting hotplug system' part of the boot process. To prevent this module from loading add the line {{{
orinoco_pci}}}
to the bottom of ''/etc/hotplug/blacklist''.

----
CategoryHardware CategoryNetworking CategoryWireless
