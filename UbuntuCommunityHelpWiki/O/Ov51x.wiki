{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== Introduction ==

There are quite a lot of webcams that can be made to work using the Ov51x-driver. Note that manual installation may not be needed for you, so please read the Ubuntu wiki <nowiki>[[Webcam|webcam page]]</nowiki>.

=== Preliminaries ===
This guide has been reported to work with a Hercules Classic Webcam, an el-cheapo webcam incorporating 4LEDs for low lighting usage. The output of <code>lsusb</code> shows the following:
<pre>
05a9:4519 OmniVision Technologies, Inc.
</pre>

The drivers needed to make it work are the ov51x and ov519_decomp modules.

This guide assumes that your camera is seen on the USB bus, otherwise you have to activate and make sure that USB works properly by activating the bus. If your cam is seen on the USB bus, the following procedure gives you a fully functional cam on your machine.

=== Installation ===

==== Get linux headers ====

Get the linux headers for your system, so that you can compile the drivers once you downloaded them. To do this, open a terminal window (Applications -> Terminal on XUbuntu) and type

<pre>
sudo apt-get install build-essential linux-headers-`uname -r`
</pre>

==== Get the modules ====
Get the modules for your webcam:
<pre>
wget http://www.rastageeks.org/downloads/ov51x-jpeg/ov51x-jpeg-1.5.9.tar.gz
</pre>
(If this results in an error, check the <nowiki>[[[http:--www.rastageeks.org-downloads-ov51x-jpeg-|rastageeks ov51x-jpeg directory]]</nowiki>], maybe you have to download a newer version)

Ensure the drivers landed into a directory you know...

==== Extract the drivers ====
Move to the directory where your downloaded drivers are, and extract the source files from the tar files.

<pre>
tar -xvf ov51x-jpeg-1.5.9.tar.gz
</pre>

and Change directory to where your sources are:

<pre>
cd ov51x-jpeg-1.5.9
</pre>

==== Prepare the installation files ====

<pre>
make
</pre>

==== Compile ====
Compile the modules:

<pre>
sudo make install
</pre>

==== Install ====
And install them:

<pre>
sudo depmod -A
sudo modprobe ov51x-jpeg
</pre>

You should now be able to enjoy images from your webcam.

=== Troubleshooting ===
==== Installation of < 1.0.0 version ====

'''Credits:''' This guide is based on the <nowiki>[[http://ubuntuforums.org/showpost.php?p=2049256&postcount=14|forum post]]</nowiki> by gentle_turtle. He based this posting on information earlier in the thread his post is part of and on <nowiki>[[this Ov51x-guide|http:--blog.thedarkmere.net-index.ph...peg-guide.html]]</nowiki>. 

The > 1.0.0 versions are definitely more easy to install, but for those who might for some reason not succeed installing the newer versions, here is the shortened version of the guide that was at this location before 1.0.0 was released.

First we get the headers:
<pre>
sudo apt-get install build-essential linux-headers-`uname -r`
</pre>

Then the modules for your webcam:
<pre>
wget http://www.rastageeks.org/downloads/ov51x-jpeg/ov51x-jpeg-1.5.9.tar.gz
</pre>

extract them
<pre>
tar -xvf ov51x-jpeg-1.5.9.tar.gz
</pre>

and change dir to the contents of the archive
<pre>
cd ov51x-jpeg-0.5.9
</pre>

Compile and install the modules:
<pre>
sudo make install
</pre>

'''Note''': if you are using Feisty, remove the lines referring to "linux/config.h" (<code>#include <linux/config.h></code>) from all .c-files first! (else you will get an error witch prohibits you from continuing these instructions successfully.

And now we can install the modules by hand:

<pre>
sudo modprobe videodev
sudo modprobe i2c_core
sudo insmod /lib/modules/`uname -r`/extra/ov51x.ko
sudo insmod /lib/modules/`uname -r`/extra/ov519_decomp.ko
</pre>

To test your installation you can use any camera viewing application, such as xawtv.

===== Making modules permanent =====

Also this part is based on the <nowiki>[[http://ubuntuforums.org/showpost.php?p=2049256&postcount=14|forum post]]</nowiki> by gentle_turtle. He based this posting on information earlier in the thread his post is part of.

If you reboot after installing the drivers in the first part, you'll notice the webcam is not detected anymore. Therefore we need to make these modules permanent, so that your machine recognizes the webcam both at bootup as well when you plug it in. The problem here with respect to other module installations is that for some obscure reason, the ov519_decomp module insists in loading the ov511 module when loading through modprobe, and ov511 knows nothing of some of the functions in ov519_decomp and therefore complains.

We will thus load ov51x normally through modprobe, but we will load ov519_decomp through insmod. Let us look at the steps to do this.

====== Load modules at start up ======

Make sure you load the vidoedev and i2c_core modules at bootup: to do this, in the terminal type:

<pre>
sudo vi /etc/modules
</pre>

or

<pre>
gksudo gedit /etc/modules
</pre>

At the end of the files, add the following two lines:

<pre>
videodev
i2c_core
</pre>

Now save the file and quit the editor. This will guarantee that from now on at bootup the videodev and the i2c_core modules are loaded.

====== Autodetection ======

Of course we want to tell Ubuntu what to do whenever it notices the camera is plugged in:

<pre>
sudo touch /etc/modprobe.d/ov51x
sudo vi /etc/modprobe.d/ov51x
</pre>

(instead of vi you may also type gedit, or any other editor...)

And finally open up add the following lines file the following line:

<pre>
install ov51x /sbin/modprobe --ignore-install ov51x; insmod /lib/modules/`uname -r`/extra/ov519_decomp.ko
</pre>

'''Note''': This has to be ONLY on one line.
Save the file and quit the editor.

And voila, at next reboot your Hercules Classic webcam is there, ready to use.... Have fun!

=== External Links ===
* <nowiki>[[http://www.rastageeks.org/ov51x-jpeg/index.php/Main_Page|ov51x JPEG hacked Linux driver wiki]]</nowiki> - The main page for the <nowiki>[[http://www.rastageeks.org|rastageek]]</nowiki> driver used on this page.
** <nowiki>[[http://www.rastageeks.org/ov51x-jpeg/index.php/Working_Webcams|Working Webcams]]</nowiki> - A list of webcams supported by this driver.

----
CategoryHardware
