{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



== Introduction ==

These instructions are specific to QGIS 7.x and below. Developers and users who wish to compile newer versions of QGIS please go to the front page at BuildingQuantumGisFromSource . 

== QGIS Specific Requirements ==

Need to be running breezy...

The packages qgis depends on to build are available in the "universe" component of Ubuntu. This is not activated by default, so you need to activate it:

1. Edit your /etc/apt/sources.list file.
2. Uncomment the all the lines starting with "deb"

Now update your local sources database:

<pre>
sudo apt-get update
</pre>

== Install package dependencies. ==

Even if you dont plan to code using kdevelop, its worth installing first because it will make sure you have the dependencies for a useable c++ compilation environment. Not all these packages are strictly needed for QGIS to build, but I find them convenient to have. If you are short on disk space or bandwidth, you may wish to be a little more selective. If you are unsure, just install them all, they cant cause any harm.

<pre>
sudo apt-get install kdevelop3 autoconf2.13 autobook autoconf-archive gnu-standards libqt3-mt-dev qt3-doc kdbg libarts1-dev kdelibs4-doc htdig doxygen kdoc sgmltools-lite linuxdoc-tools a2ps gv qt3-designer qt3-dev-tools kbabel graphviz c-cpp-reference g++ libtool flex bison automake1.8 checkinstall ccache libtool proj sqlite3 libsqlite3-dev libsqlite3-0 gsl-bin libgsl0 libgsl0-dev cvs
</pre>

/!\ '''Note:''' This will prompt to install a whole heap of additional packages....go ahead its ok.

Now you can install all the packages qgis requires to build:

<pre>
sudo apt-get build-dep qgis
</pre>

== Setup ccache (optional) ==

You should also setup ccache to speed up compile times:

<pre>
cd /usr/local/bin
sudo ln -s /usr/bin/ccache gcc
sudo ln -s /usr/bin/ccache g++
</pre>

== Make sure the correct version of automake is being used ==

/!\ NOTE: If you installed kdevelop using the step above, ubuntu will have installed automake-1.4. This causes a problem when running the autogen.sh command below as it picks up the wrong copy of aclocal and automake. To circumvent this while still keeping both installed on your system do the following:

<pre>
sudo update-alternatives --config automake
</pre>

Which will present you with something like:
<pre>
There are 4 alternatives which provide `automake'.

  Selection    Alternative
-----------------------------------------------
      1        /usr/bin/automake-1.6
      2        /usr/bin/automake-1.8
* +    3        /usr/bin/automake-1.4
      4        /usr/bin/automake-1.9

Press enter to keep the default[*], or type selection number: 2
Using `/usr/bin/automake-1.8' to provide `automake'.
</pre>

== GRASS Specific Steps ==

=== Install GRASS ===

/!\ If you don't need to build with GRASS support,  you can skip this section.

Now you can install grass from breezy:

<pre>
sudo apt-get install grass libgrass-dev 
</pre>

=== Install GRASS raster driver for gdal ===

The apt package for this is currently not in ubuntu repositories. Here is one way to install it :

<pre>
cd /tmp
wget http://ftp.uk.debian.org/debian/pool/main/libg/libgdal-grass/libgdal1-grass_1.2.6-1+b1_i386.deb
sudo dpkg -i libgdal1-grass_1.2.6-1+b1_i386.deb
</pre>

== Starting the compile ==

The qt files are not in the expected place, so you need to tell configure where to look for them. Or you can <code>export QTDIR=/usr/share/qt3</code>.

Now you can proceed to the initial configure step:

<pre>
./autogen.sh --enable-debug --prefix=/usr --with-qtdir=/usr/share/qt3 --with-grass=/usr/lib/grass
</pre>

At the end of the autogen / configure process above you should see output like below, indicating that qgis is going to be built with all its bells & whistles...

<pre>
==========================================  ==
qgis 0.6.0devel22
------------------------------------------
GDAL/OGR      : yes (Version 1.2.6)
GEOS          : yes (Version 2.0.1)
PostgreSQL    : yes (Version 7.4.7)
GRASS         : yes <-- may be no if you skipped grass step above!
SPIT          : yes
Georeferencer : yes
GPS/GPX       : yes
PROJ4         : yes
SQLITE3       : yes

Debug         : yes
Plugin dir    : ${exec_prefix}/lib/qgis

The binary will be installed in /usr/bin

The build is using Qt in /usr/share/qt3
------------------------------------------
Configure finished, type 'make' to build.
</pre>

Now we go on to the compilation step. I like to time the build so I can get an idea of how long it takes in general. THe first time you build will take substantially longer as ccache will not receive many hits. Subsequent builds should be much faster!

<pre>
echo `date` > /tmp/qgis_compile.txt ; make ; echo `date` >> /tmp/qgis_compile.txt
</pre>

Now install as a package for easy removal later:

<pre>
sudo ./doCheckInstall.sh
</pre>

Using doCheckinstall.sh will do the equivalent of make install, but it will also make a debian package of QGIS, making it easy to compile on one machine and install on many...

== Installing PostGIS to set up a GeoDatabase ==

/!\ '''Note''' this is not the most efficient way, just the way that I ended up doing it:

<pre>
sudo apt-get update
sudo apt-get install postgresql-8.0
</pre>

Add the following two lines to your /etc/apt/sources.list:

<pre>
deb http://www.orcaware.com/packages/ubuntu/ breezy/
deb-src http://www.orcaware.com/packages/ubuntu/ breezy/
</pre>

Now install the postgis packages:

<pre>
sudo apt-get update
sudo apt-get install postgresql-postgis-8.1 libpostgis1-pg8.1 libpostgis-common libpostgis-doc libpostgis-java libpostgis-utils-pg8.1 libpostgis1-examples libgeos2c2a
</pre>

=== Setting up a simple GeoDatabase ===

/!\ '''Disclaimer:''' These instructions are not to be considered a full security solution. They are probably ok for a desktop user who runs their own pc behind a firewall, but they are no substitute for a proper secure multiuser deployment of QGIS!!! Use at your own risk!

/!\ '''Note:''' There are many ways to set up a database, this is not neccessarily the best, but it works for me.

/!\ '''Note:''' These notes rely on features found in PostgreSQL 8.1. Using an older version will require modification of this procedure.

<pre>
sudo su - postgres
createuser -s -d -r -l -i -P -E
</pre>

You will be prompted to answer some simple questions:
<pre>
Enter name of role to add: foouser    <-- use your normal user acct name here!
Enter password for new role:
Enter it again:
CREATE ROLE
</pre>

Now exit the postgres user (you should never need to use that account again as your new account has full admin rights over the database).

<pre>
exit
</pre>

Now you should be back at your normal user account and you can create your first database:

<pre>
createdb -E UNICODE gis
</pre>

You can verify your new database exists by using psql -l e.g.:

<pre>

psql -l
        List of databases
   Name    |  Owner   | Encoding
-----------+----------+----------
 gis       | foouser  | UTF8          <-- thats our new db we just created
 postgres  | postgres | LATIN1
 template0 | postgres | LATIN1
 template1 | postgres | LATIN1
(4 rows)

</pre>

Now we need to install the PostGIS functions and so on into our new database:

/!\ To be added
<pre>

</pre>
----
