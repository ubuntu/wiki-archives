{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

== LTSP Management ==
=== Updating your LTSP server ===
When logging onto the LTSP network as an administrator you will sometimes find a bubble appear in the top right informing you that there are updates available for you computer.  Any updates you apply here will automatically be applied to all clients, though they may require a reboot.  This is because LTSP clients all use the same set of applications on the server.  When this prompt appears click the small red icon <nowiki>[[File:updateicon.png]]</nowiki> , and enter your password to display the following application.

<nowiki>[[File:updateavailable.png]]</nowiki>

This application allows you to apply all available updates for your computer quickly and easily.  Clicking on the '''Check''' button, checks to see if there are any more updates since the computer last checked.  If you are going to perform the updates, it's a good idea to click this button.  Once the check is completed, you are ready to update your system.

Be sure to check how much information is going to be downloaded, if you are low on bandwidth, or using a slow connection.  Click on the '''Update''' button, to set the computer downloading and installing updates.  Once clicked, if there are any verification issues, these will be shown.  If you are happy that the packages come from a trusted source, you can click ok to continue.  First, your computer will download all available packages and display a screen similar to that below

<nowiki>[[File:updatedownload.png]]</nowiki>

After all packages have finished downloading, you will be presented with the progress box, which shows how far the computer has come in updating.  If you wish you can click the word '''terminal''' to show more detailed information about the updates as shown below.

<nowiki>[[File:updateinstall.png]]</nowiki> <nowiki>[[File:updateinstallterminal.png]]</nowiki>

After the updates have completed, the computer will inform you if you need to restart in order for the updates to come into effect.  You can either shutdown when you wish, or click the small blue icon <nowiki>[[File:restarticon.png]]</nowiki> in the top right hand corner, and you will be presented with this question.

<nowiki>[[File:updaterestart.png]]</nowiki>

/!\ '''IMPORTANT''' If you restart your computer without shutting down your clients, their computers will stop responding and they may lose data.  Be sure all clients are logged out before restarting the server.  

=== Updating your LTSP clients NFS root ===

At some point in the future, updates will become available for your LTSP server.  You must remember that although you may have applied all the updates to the server itself, as in the instructions....HERE it is likely that the LTSP chroot will also need updating.  To do this you must open up a terminal and use the following commands.

First make sure the Client environment has the same Package lists as the Server, to achieve that, you will copy the sources.list file from the Server to the Client environment.

<pre>
sudo cp /etc/apt/sources.list /opt/ltsp/i386/etc/apt/
</pre>

Now issue the command below.

<pre>
sudo chroot /opt/ltsp/i386
</pre>

This will change your root directory to be the LTSP clients root directory.  In essence, anything you now do inside here, will be applied to the LTSP clients NFS root.  This is a separate small set of files that are used to boot the clients into a usable, and enable them to contact the LTSP server.  Once inside this shell, we must type the following command to obtain the latest list of packages from the apt servers.

<pre>
apt-get update
</pre>

Once this has completed you will have to upgrade the software in the chroot by running the following command 

<pre>
apt-get upgrade
</pre>

Once all upgrades have finished, you must leave the chroot by either typing ''''exit'''' or by using the key combination Ctrl+D.  This will return you to the root of the server.

If your kernel has been upgraded you must run the LTSP kernel upgrade script, to ensure that your LTSP root uses the latest version.  This is performed by running the command below

<pre>
sudo ltsp-update-kernels
</pre>

You will see some output similar to the following

<pre>
pete@edubuntu:~$ sudo ltsp-update-kernels
`/opt/ltsp/i386/boot/vmlinuz' -> `/var/lib/tftpboot/ltsp/vmlinuz'
`/opt/ltsp/i386/boot/vmlinuz-2.6.15-20-386' -> `/var/lib/tftpboot/ltsp/vmlinuz-2.6.15-20-386'
`/opt/ltsp/i386/boot/initrd.img' -> `/var/lib/tftpboot/ltsp/initrd.img'
`/opt/ltsp/i386/boot/initrd.img-2.6.15-20-386' -> `/var/lib/tftpboot/ltsp/initrd.img-2.6.15-20-386'
Not on powerpc, skipping yaboot installation.
Skipping etherboot images.  Install the mknbi package if you need them.
Skipping openfirmware images.  Install the mkvmlinuz package if you need them.
Skipping netabootwrap images.  Install the aboot package if you need them.
</pre>

All of your clients will now use the latest kernel upon their next reboot.

=== Changing the IP of your LTSP server ===
At some point in time, it may become necessary to change the IP address of your LTSP server.  Normally this does not present an issue, but LTSP servers and clients communicate over an encrypted channel and require all SSL certificates to be updated.  Without this update, '''no LTSP clients will be able to log in'''.  This is done by simply opening a terminal and running the following command.  

<pre>
sudo ltsp-update-sshkeys
</pre>

You should see output similar to the following, and your clients will now be able to log in again.

<pre>
pete@edubuntu:~$ sudo ltsp-update-sshkeys
</pre>

'''This workstation isn't authorized to connect to server''' error message on client, please run commands '''sudo ltsp-update-sshkeys''' and '''sudo ltsp-update-image''' (in this order) reference: https://bugs.launchpad.net/ubuntu/+source/ltsp/+bug/144296
 
