{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== Introduction ==
This is a howto for installing the Canon Pixma iP4200 printer and related printers on Ubuntu 6.06 (Dapper Drake) using the Canon supplied drivers.  Some or all parts may work for other Canon printers.  For the iP2200, (and some others), see: <nowiki>[[HardwareSupportComponentsPrinters-CanonPrinters-CanonPixmaIP2200]]</nowiki>

Note: This manual also works for the following printers:
Canon IP5200 using the IP4200 drivers.
Canon IP4300 using the IP4200 drivers.

This does not work for AMD64.

== Installation ==
Note: You will have to accept Canon's license agreement to download the software.

1.  Connect your printer, and start Ubuntu.

2.  Install the needed packages: alien, libxml1, libpng12-0, libpng12-dev, libgtk1.2 and libgtk1.2-common with Synaptic or type:
<pre>
sudo apt-get update
sudo apt-get install alien libxml1 libpng12-0 libpng12-dev libgtk1.2 libgtk1.2-common</pre>

3.  Download the drivers for your printer from Canon.  For the purposes of this howto, we will assume that the files are saved to the directory /home/yourname/canon.

The iP4200 drivers are <nowiki>[[http://software.canon-europe.com/files/soft24302/software/iP4200_Linux_260.tar.gz | here]]</nowiki>. You can also type in a terminal <pre>
mkdir canon
cd canon
wget http://software.canon-europe.com/files/soft24302/software/iP4200_Linux_260.tar.gz </pre>

4.  Extract the files with archive manager
or type
<pre>
tar -xvzf iP4200_Linux_260.tar.gz
</pre>

5.  Convert the RPM packages to Debian packages:
<pre>
sudo alien cnijfilter-common-2.60-1.i386.rpm cnijfilter-ip4200-2.60-1.i386.rpm
</pre>

6.  Install the packages:
<pre>
sudo dpkg -i *.deb</pre>

7.  Make sure the library links are correct.  /usr/lib/libtiff.so.3 should point to /usr/lib/libtiff.so.4 (or to the same thing as /usr/lib/libtiff.so.4 points to)
If not, type:
<pre>
sudo ln -s /usr/lib/libtiff.so.4 /usr/lib/libtiff.so.3
</pre>
This is the important part!  The iP4200 driver wants to use libtiff.so.3, but that is an old version.  We fix this by making libtiff.so.3 a link to libtiff.so.4.

Also, /usr/lib/libpng.so.3 should point to /usr/lib/libpng.so If not, type:
<pre>
sudo ln -s /usr/lib/libpng.so /usr/lib/libpng.so.3
</pre>

and /usr/lib/libxml2.so.2 should point to /usr/lib/libxml.so.1 If not, type:
<pre>
sudo ln -s /usr/lib/libxml2.so.2 /usr/lib/libxml.so.1
</pre>

And finally make the loader aware of the changes:
<pre>
sudo ldconfig
</pre>

8.  Restart cups:
<pre>
sudo /etc/init.d/cupsys restart
</pre>

9.  Add a new printer.  Under GNOME, this is accessed in System|Preferences|Printing.  Select Canon as the manufacturer, click on "Install Driver..." and select /usr/share/cups/model/canonip4200.ppd. Now select "iP4200 Ver.2.60" under "Model". Select "Standard" for the driver (this should be the only option).  Make sure the connection is correct.
Hopefully, printing a test page will work!

== Advanced Features ==
Unfortunately, the installed PPD file doesn't allow you to select the printing quality. To fix this, back up your ppd file, then open it as root:
<code>gksudo gedit /etc/cups/ppd/iP4200-Ver.2.60.ppd </code>

Insert these lines in the file after the "Resolution" section:
<pre>
* OpenUI *CNQuality/Quality: PickOne
* DefaultCNQuality: 3
* CNQuality 2/High: "2"
* CNQuality 3/Normal: "3"
* CNQuality 4/Standard: "4"
* CNQuality 5/Economy: "5"
* CloseUI: *CNQuality
</pre>

The following gives a greater choice of print resolution if added to the "Resolution" section, but I am not clear whether the Quality setting impinges upon this. Note that the ip4200 only offers 600dpi in black and white.

<pre>
* Resolution 1200/1200 dpi: "<</HWResolution[1200 1200]>>setpagedevice"
* Resolution 2400/2400 dpi: "<</HWResolution[2400 2400]>>setpagedevice"
* Resolution 4800/4800 dpi: "<</HWResolution[4800 4800]>>setpagedevice"
</pre>

(from http://gentoo-wiki.com/Canon_Pixma_Series)

N.b. neither of these modifications is done in the unofficial packages provided by: http://mambo.kuhp.kyoto-u.ac.jp/~takushi/

After this, restarting cups should enable the changes <code>sudo /etc/init.d/cupsys restart</code>

To perform maintenance on the printer, such as head cleaning, type in a terminal:
<code>cngpij -P iP4200-Ver.2.60</code>

You may want to add this to your menu, since it is a real pain to remember.
In the window that pops up, select "Maintenance".

----
CategoryHardware
