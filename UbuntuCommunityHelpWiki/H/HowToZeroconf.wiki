{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


<nowiki>[[http://www.zeroconf.org/|Zeroconf]]</nowiki> is a collection of tools and protocols to allow networks to configure themselves. It is called Bonjour (formerly Rendezvous) by Apple, and used extensively on Mac OS X.

Zeroconf consists of:
* Name resolution, MDNS
* Service Advertising
* Address allocation

Traditionally most of its work is done by DHCP and DNS. But the decentralised zeroconf method is appropriate in some situations, for example ad-hoc networks. It also requires no configuration (apart from the installation).

It works happily along side traditional tools. For example you may have an IP address allocated by DHCP and use DNS to resolve address on the web, but still use the hostname.local from MDNS (Multicast DNS) to resolve the addresses of other computers on the LAN.

Note, if you are not doing this on your own network you may want to talk to the Network Admin first. Although zeroconf is a fairly efficient protocol the admin may not want the extra traffic. Also be aware that it is trivially easy to spoof an mdns .local name.

It can currently be used for:
* Sharing music - Rhythmbox, Banshee, iTunes
* Sharing files - gShare
* Automatic discovery of VoIP clients in your local network - <nowiki>[[http://wiki.ekiga.org/index.php/Avahi|Ekiga]]</nowiki>

=== Installation ===

==== Ubuntu 9.04 (Jaunty Jackalope) ====

Zeroconf is installed and configured by default in the Desktop version of Ubuntu 9.04. The following steps can be used for testing:

# Open Terminal and deduce the local host name from the prompt (e.g., myuser@myhost:~$)
# Go to System > Preferences > Remote Desktop. Check the first two boxes under Sharing and configure the Security settings as desired.
# From another computer, launch a VNC client and enter myhost.local as the host name, replacing the "myhost" portion with the host name deduced from step 1 above.
# Assuming the remote Ubuntu computer responded to the VNC connection request, then Zeroconf is properly resolving the local host name.

=== MDNS ===

Now each computer with avahi-daemon (or mdnsresponder) installed will identify itself on the network as
<pre>
hostname.local
</pre>
for example, my computer flute, identifies itself as
<pre>
flute.local
</pre>

Now any computer on the network can use hostname.local in place of an ip address. For example you can do
<pre>
ping flute.local
</pre>
or
<pre>
ssh flute.local
</pre>

=== Firewall configuration ===

If you are running a firewall and you are having problems like
<pre>
sam@titania:~$ ping flute.local
ping: unknown host flute.local
</pre>
then it is possible that your firewall is blocking the zeroconf communication. If you can turn your firewall off and this fixes the problem, then it is definitely the firewall.

If you are using <nowiki>[[Firestarter]]</nowiki> all multicast traffic is blocked. This may be configurable in the next version. The current work around is to edit <code>/etc/firestarter/user-pre</code> as root. You will need to chmod u+w this file to make it writable before editing. For example,

<pre>
sudo -s
cd /etc/firestarter
chmod +w user-pre
gedit user-pre
</pre>

Set the contents of the file to the following
<pre>
$IPT -A INPUT -p udp --dport 5353 -d 224.0.0.251 -j ACCEPT
$IPT -A OUTPUT -p udp --dport 5353 -d 224.0.0.251 -j ACCEPT
</pre>

Then, save the file, make it read-only, and restart firestarter
<pre>
chmod -w user-pre
/etc/init.d/avahi-daemon restart
</pre>

Now you should be able to resolve .local names.

<pre>
sam@titania:~$ ping flute.local
PING flute.local (192.168.1.101) 56(84) bytes of data.
64 bytes from flute.local (192.168.1.101): icmp_seq=1 ttl=64 time=4.45 ms
64 bytes from flute.local (192.168.1.101): icmp_seq=2 ttl=64 time=4.16 ms
</pre>

If you are using [Guarddog] as a firewall, you'll need to create a new zone for multicast traffic and add an entry to the  networkprotocoldb.xml file.

Call the new zone "multicast" and set its Zone Addresses to 224.0.0.0/255.0.0.0
Add the XML below into /usr/share/apps/guarddog/networkprotocoldb.xml just above where it says "<protocol name="domain">". Restart [Guarddog] & then check the boxes to allow mDns traffic between your zones.

<pre>
<protocol name="mDns">
  <!-- Protocol information guessed by Greg N <emailgregn@googlemail.com> -->
  <longname>mDns,Bonjour,Avahi,ZeroConf</longname>
  <longname lang="nl">mDns</longname>
  <longname lang="fr">mDns</longname>
  <longname lang="it">mDns</longname>
  <longname lang="es">mDns</longname>
  <description>Protocols to allow networks to configure themselves. It is called Bonjour (formerly Rendezvous) by Apple, and used extensively on Mac OS X. </description>
 
  <classification class="net"/>
  <network>
    <udp source="server" dest="client">
      <source><port portnum="nonprivileged"/></source>
      <dest><port portnum="5353"/></dest>
    </udp>
    <udp source="client" dest="server">
      <source><port portnum="5353"/></source>
      <dest><port portnum="nonprivileged"/></dest>
    </udp>
  </network>
  <security threat="medium" falsepos="low"/>
</protocol>
</pre>

=== Resources ===

* <nowiki>[[http://www.zeroconf.org/|Zeroconf]]</nowiki>
* <nowiki>[[http://developer.apple.com/networking/bonjour/index.html|Bonjour]]</nowiki>
* <nowiki>[[http://0pointer.de/lennart/projects/nss-mdns/|libnss-mdns]]</nowiki>
* <nowiki>[[http://avahi.org/|Avahi mdns responder]]</nowiki>
