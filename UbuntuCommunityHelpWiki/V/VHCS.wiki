{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


This procedure will install VHCS2 without using the .deb file. With no secret and non-free scripts, open and clean ready to be customized acording your needs.

=== Preparation ===
Create basic directories to work
<pre>
mkdir -p /tmp/vhcs_tmp/install
cd /tmp/vhcs_tmp/install
</pre>

Remove unwanted packages
<pre>
apt-get remove ppp pppconfig pppoeconf ubuntu-standard
</pre>

Shutdown unwanted services from inetd
<pre>
update-inetd --remove daytime
update-inetd --remove telnet
update-inetd --remove time
update-inetd --remove finger
update-inetd --remove talk
update-inetd --remove ntalk
update-inetd --remove ftp
update-inetd --remove discard
</pre>

=== Packages Installation ===
Install base packages.
<pre>
apt-get install ssh postfix postfix-tls proftpd-mysql courier-authdaemon courier-base courier-imap courier-maildrop courier-pop libberkeleydb-perl libcrypt-blowfish-perl libcrypt-cbc-perl libcrypt-passwdmd5-perl libdate-calc-perl libdate-manip-perl libdbd-mysql-perl libdbi-perl libio-stringy-perl libmail-sendmail-perl libmailtools-perl libmd5-perl libmime-perl libnet-dns-perl libnet-netmask-perl libnet-perl libnet-smtp-server-perl libperl5.8 libsnmp-session-perl libterm-readkey-perl libtimedate-perl perl perl-base perl-modules bind9 diff gzip iptables libmcrypt4 mysql-client-5.0 mysql-common mysql-server-5.0 patch php5 php5-mcrypt php5-mysql php-pear procmail tar original-awk libterm-readpassword-perl libsasl2-modules libsasl2-2 sasl2-bin apache2 apache2.2-common apache2-mpm-prefork libapache2-mod-php5 bzip2 build-essential
</pre>

When asked:
<pre>
"courier" - No
"postfix" - defaults
"proftpd" - standalone
</pre>

=== Database Setup ===
Setup MySQL password
<pre>
 > create database vhcs2;
 > use vhcs2
 > grant all privileges on *.* to 'vhcs2'@'localhost' identified by 'vhcs2' with grant option;
 > \q
</pre>

=== Download and Extract VHCS2 ===
Download VHCS2 2.4.7.1:
<pre>
</pre>

=== Configuration File ===
Edit configs/vhcs2.conf and change the following lines:
<pre>
DEFAULT_ADMIN_ADDRES = your email
SERVER_HOSTNAME = your hostname
BASE_SERVER_IP = your ip
DATABASE_TYPE = mysql
DATABASE_HOST = localhost
DATABASE_NAME = vhcs2
DATABASE_PASSWORD = vhcs2
DATABASE_USER = vhcs2
</pre>

If you wish alter this line too:
<pre>
DATE_FORMAT = m.d.Y
</pre>

=== Compile and Create VHCS Tree ===
Create the VHCS Tree:
<pre>
</pre>
This will create the VHCS tree into the /tmp directory

Copy files into correct directories:
<pre>
</pre>

=== Configuration Script ===
First you need to patch some problematic files. 
* Edit /var/www/vhcs2/engine/vhcs2_common_code.pl
* Find the text
<pre>
`key`=>$main::db_pass_key,
</pre>
* Add the following line '''before'' the line above
<pre>
`keysize`=>32,
</pre>
 ''There are two occurrences'''

Run the configuration script:
<pre>
</pre>

Then interact with the script:
<pre>
Welcome to VHCS2 '2.4 Spartacus' Setup Dialog.
This program will set up VHCS2 system on your server.
Please press 'Enter' to continue.

Please enter system hostname (Enter for defaults) [debian]: ''yourhostname''
Please enter system network address (Enter for defaults) [192.168.0.128]: ''your ipaddress''

Please enter SQL server host (Enter for defaults) [localhost]:

Please enter system SQL database (Enter for defaults) [vhcs2]: ''vhcs2''
Please enter system SQL user (Enter for defaults) [root]: ''vhcs2''
Please enter system SQL password (Enter for defaults) [none]: ''vhcs2''
Please repeat system SQL password: ''vhcs2''

Please enter VHCS ftp SQL user (Enter for defaults) [vftp]: ''vftp''
Please enter VHCS ftp SQL user password (Enter for defaults) [none]: ''vftp''
Please repeat VHCS ftp SQL user password: ''vftp''

Please enter administrator login name (Enter for defaults) [admin]:
Please enter administrator password: your password
Please repeat administrator password: your password

Please enter admininistrator email address: ''your email address''
</pre>

== Setup Automatic Scripts == (* This is not working @ 8.0.4 Please fix it)
First add vhcs2_daemon script to multiuser startup. 
<pre>
</pre> 
This will make vhcs2_daemon script run at startup right after apache

=== Final Fixes ===
Create postfix directory
<pre>
</pre>

----
