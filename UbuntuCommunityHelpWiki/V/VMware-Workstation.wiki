{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


== Ubuntu as a VMware host ==

=== Installing from the .bundle ===

Tested with:
* VMware Workstation 6.5.1 Build 126130, Ubuntu 8.10, AMD64
* VMware Workstation 6.5.1, Kubuntu 8.10, AMD64
* VMWare Workstation 6.5.0, Ubuntu 8.10 x86
* VMWare Workstation 6.5.0, Super Ubuntu 8.10 x86

''VMware-Workstation-6.5.0-118166.i386.bundle''

0. Install required packages build-essential, linux-kernel-headers and linux-kernel-devel  <pre>
sudo aptitude install build-essential linux-kernel-headers linux-kernel-devel
</pre>

0. Navigate to where the .bundle VMWare file is, then type this in<pre> 
gksudo bash ./VMware-Workstation-6.5.0-118166.i386.bundle 
</pre>

And that's it! Enjoy your VMWare Workstation installation!

=== Alternate Installation from .bundle ===

Tested with:
* VMWare Workstation 6.5.0, !HackBuntu Alpha 3 8.10 x86 (PM me for DL link)
* VMWare Workstation 6.5.0, Super Ubuntu 8.10 x86

In the terminal, navigate (cd) to where your installation resides. Then type this in <pre>
sudo ./VMware-Workstation-6.5.0-118166.i386.bundle
</pre>

=== Installing on Jaunty ===

Credit to:  <nowiki>[[http://ubuntuforums.org/member.php?u=526343|judgen]]</nowiki>

http://ubuntuforums.org/showthread.php?t=1040351

0. Same as above, but then you have to remove the broken module: <pre> 
sudo mv /usr/lib/vmware/modules/binary /usr/lib/vmware/modules/binary.old
</pre>

1. then simply rebuild the module.<pre> 
sudo vmware-modconfig --console --install-all
</pre>

=== Installing from the .rpm ===

''VMware-workstation-6.0.2-59824.i386.rpm''

It’s relatively easy to convert VMWare’s .rpm to a .deb and install VMWare inside the package manager. Here’s how:

1. Make sure you have the kernel headers and compiler first, with:
<pre>
sudo apt-get install linux-headers-$(uname -r) build-essential gcc-3.4
</pre>
2. Download VMWare Workstation 6.0 from their site in <code>.rpm</code> format, and get a serial number from them while you’re at it.
3. Convert the <code>.rpm</code> to a <code>.deb</code> with
<pre>
fakeroot alien --scripts VMware-workstation-6.0.*.rpm
</pre>
4. Install the .deb with
<pre>
sudo dpkg -i vmwareworkstation_6.0.*.deb
</pre>
5. Edit <code>/etc/vmware/locations</code> as root and add the following three lines (not necessary on 6.0.5):
1. Just after
<pre>
answer BINDIR /usr/bin
</pre>
            add
<pre>
answer SBINDIR /usr/sbin
</pre>
2. Just after
<pre>
remove_answer BINDIR
answer BINDIR /usr/bin
</pre>
            add
<pre>
remove_answer SBINDIR
answer SBINDIR /usr/sbin
</pre>
6. Run <code>vmware-config.pl</code> (and answer the questions accordingly; this hasn’t really changed since VMWare 4.5. You will have to give the correct location for the kernel headers, i.e. /usr/src/linux-`uname -r`/, although you must know in advance what `uname -r` will return.) with
<pre>
sudo /usr/bin/vmware-config.pl
</pre>
7. Unzip the EULA, which VMWare expects to be uncompressed but which is installed compressed:
<pre>
sudo gunzip /usr/share/doc/vmware/EULA.gz
</pre>
8. Start vmware, accept the EULA, and enter the serial number. 

== Ubuntu as a VMware Guest ==

VMware version 5 is reported to work with Ubuntu out-of-the-box.  Try using NAT rather than bridging when using VMware 5 with Ubuntu as a guest OS.

=== Initial Install ===
1. Download the iso from http://www.ubuntu.com/download/ this demo used the '''ubuntu-5.10-install-i386.iso''' image.

1. Create a new Virtual Machine.
*** Virtual Machine Configuration: '''Typical'''
*** Guest Operating System: '''Linux'''
*** Version: '''Other Linux 2.6.x kernel'''
*** Virtual Machine Name & Location: Pick as you will.  (for the record I chose '''Ubuntu''' and '''O:\VPC\''')
*** Network Connection: '''Use bridged networking''' (Refer to <nowiki>[[http://www.vmware.com/support/ws55/doc/ws_net_configurations_common.html|this VMware documentation]]</nowiki> for information on the other network connection configurations.)
*** Disk capacity: Again the choice is yours, I chose '''4GB''' and turned on ''Allocate all disk space now'' and ''Split disk into 2 GB files''.  Allocating the disk space will increase performance, while spliting the disk into 2GB chunks will minimise any file size limitations if transferring a virtual machine using Samba.

1. Change the settings of the new virtual machine:
*** Memory - Increase the memory given to the guest OS from 256 (the default) to 512.  Although not necessary since I've got the RAM, why not.
*** CD-ROM - Use ISO Image: set to the location of the downloaded is, mine was '''O:\BitTorrent\ubuntu-5.10-install-i386.iso'''

## Start the virtual machine.
## At the boot menu, press enter.
## Configure the Ubuntu installation:
*** Language & Location: Doesn't matter
*** Keyboard: I stuck with the default, '''American English'''
*** Hostname: Doesn't matter, I went with '''Ubuntu'''
*** Disk Partition: '''Erase entire disk: SCSI (...'''
*** Write Changes to Disk: '''Yes'''
*** ...wait...
*** Timezone: Doesn't matter
*** Full name for the new user: I chose '''bob'''
*** Username for your account: I chose '''bob'''
*** Password and Verify: pick one, no restrictions
*** Reboot: '''Continue''', I didn't bother "removing" the ISO.
*** Once you see ''Restarting system.'' Ubuntu has shutdown, press Ctrl-Alt to release the cursor and click VM->Power->Reset
*** ...wait...
*** Select video modes...: Don't add anything more than the defaults '''1024x768''', '''800x600''', '''640x480'''

At this point Ubuntu is usable but without the virtual tools you can not use some of the higher resolutions. and to release the mouse you must press Ctrl-Alt.  So onto the install...

=== Installing Virtual VmwareTools ===

There a number of advantages in installing VmwareTools in your Ubuntu guest VM.

## Open the System->Administration->Synaptic Package Manager
## Install the following packages (replace 'kernel version' below with what is reported with ''uname -r''):
<pre>
uname -r
sudo apt-get install make gcc gcc-3.4 linux-headers-'kernel version'
</pre>

## Goto the desktop and eject the Ubuntu iso.
## Ctrl-Alt to get the cursor back, VM->Install VMware Tools...
## Wait for the ''CD'' to appear on the desktop. This may require going to Places->Computer and clicking on the CD icon to make Ubuntu read the new disk.
## Copy '''VMware''''''Tools-x.x.x-xxxx.tar.gz''' from the CD to your desktop.
## Right click on the VMware''''''Tools tarball and select ''Extract Here''
## Open a terminal
<pre>
export CC=/usr/bin/gcc-3.4
cd ~/Desktop/vmware-tools-distrib
sudo ./vmware-install.pl
</pre>
      Accept all the defaults, this should take you through making a few directories and then run the config program.  The config program will need to compile the drivers and so it will use make, the gcc you specified and the headers to compile.
**** The first non default is screen size.  I know 640x480, 800x600 and 1024x768 work, I have had 1280x1024 work (I use this one) and I've had 1600x1200 not work.  
**** If you pick one that doesn't work, get to a terminal and run /usr/bin/vmware-config-tools.pl to pick a different one.
**** What you pick here becomes the max setting and you can pick a lower one withing Ubuntu, however the max is used at startup so if it doesn't work you are up the creek.
1. Restart the system with System->Log out->Shutdown. Wait until Ubuntu has shutdown and either turn off or restart the VM.

=== Installation tips ===

0. The install script asks for the path of gcc. If it isn't automatically found find the path on your system by running <pre>
 which gcc </pre>. Set the full path to the binary in the variable CC: <pre>
 export CC=/usr/bin/gcc-3.4 </pre>

0. When you run ''vmware-config.pl'', if the script can't find your kernel's C headers you must install the appropriate headers package. Do this by running <pre>
sudo apt-get install linux-headers-$(uname -r) </pre>
 You must then point vmware-config.pl to the appropriate directory, such as <pre>
 /usr/src/linux-headers-2.6.10-5-686/include </pre>

0. If the VMware Management Interface (MUI) for GSX complains about a lack of ''libdb.so.3'' and instruct you to get ''compat-db-3.3.<##>-<#>.i386.rpm''.  You want the Ubuntu package ''libdb2'' for this.

=== Enabling Parallel Port Access ===

VMware allows direct access to parallel ports, which is handy if you've got a scanner that only has Windows drivers.  You may need to make the following minor change to VMware's startup script.

0. Open /etc/iniit.d/vmware in an editor by running <pre>
 gksudo gedit /etc/init.d/vmware </pre>

0. Find the case statement that looks like this (around line 814) <pre>
## See how we were called.
  case "$1" in
   start) </pre>

0. Add the following text at the end of the case statement <pre>
 rmmod lp
 chgrp lpadmin /dev/parport0
 chmod g+rw /dev/parport0 </pre>

== Troubleshooting Tips ==

=== After a kernel update, VMWare stops working ===

After upgrading to a newer kernel version, you may find VMWare stops working and displays the error (note: if you're not running it from a terminal the program will just exit with no graphical error messages):

<pre>
vmware is installed, but it has not been (correctly) configured
for this system. To (re-)configure it, invoke the following command:
/usr/bin/vmware-config.pl.
</pre>

This happens even on a minor kernel update (e.g  2.6.12-9 to 2.6.12-10), but is simple to rectify using the steps above. Before running "/usr/bin/vmware-config.pl" as suggested you will need to get the correct kernel headers for your new kernel, and make sure you point the correct version of gcc to the config script.

All this is explained above, so I wont go through it here. Once you've done that run the conifg script, select the defaults for all the options except:

<pre>
Would you like to skip networking setup and keep your old settings as they are?
(yes/no) [no] 
</pre>

Select yes, as you're network setting should not have changed.

Once the config file has finished you should be able to run VMWare again with no problems.

=== Important Note about Updating from Hoary to Breezy ===

A heads up for people coming from hoary to breezy with a VMWare install. I was trying to reconfigure my vmware install for use in breezy (regenerate kernel modules, etc) using vmware-config.pl; however, doing so would not only fail to make VMWare work, but it would leave my system relatively unusable (specifically, sudo no longer worked!). The solution was to download the distribution tarball again, and reinstall (as per the instructions here). Simply reconfiguring the old install doesn't seem to work.

=== Configuration aborts when updating from Dapper to Edgy ===

When upgrading from Dapper to Edgy, and then running sudo vmware-config.pl (as explained above), you might find that the configuration aborts with the message:
<pre>
Unable to build the vmmon module.

The error contains the following line:

/tmp/vmware-config3/vmmon-only/./include/compat_wait.h:60: error: conflicting types for ‘poll_initwait’
include/linux/poll.h:62: error: previous declaration of ‘poll_initwait’ was here
</pre>

You need to install the vmware-any-any-update patch, which you can find here: http://platan.vc.cvut.cz/ftp/pub/vmware. Just download the vmware-any-any-update file, untar it, and run 
sudo ./runme.pl
It will automatically call vmware-config.pl, which should then complete normally (ignore the warnings generated). 

A further explanation is here: http://www.vmware.com/community/thread.jspa?messageID=76957&tstart=0

=== Configuration aborts when updating from Feisty to Hardy (or any system running the 2.6.24-2 kernel) ===

When using the 2.6.24-2 kernel, a patch must be applied to get the vmware modules to compile.  This applies to you if vmware-config.pl crashes with the message 
<pre>
make[2]: *** [/tmp/vmware-config0/vmmon-only/linux/driver.o] Error 1
make[1]: *** [_module_/tmp/vmware-config0/vmmon-only] Error 2
make[1]: Leaving directory `/usr/src/linux-headers-2.6.24-2-generic'
make: *** [vmmon.ko] Error 2
make: Leaving directory `/tmp/vmware-config0/vmmon-only'
Unable to build the vmmon module.
</pre>

The solution is to download a patch from http://platan.vc.cvut.cz/ftp/pub/vmware/vmware-any-any-update115.tar.gz that will correct this issue.  Extract the files, then run 
<pre>
sudo ./runme.pl
</pre>
from the vmware-any-any-update115 directory. ''Note:  This is not my mirror, if someone cares to mirror this file it would be a good thing''

Source: http://communities.vmware.com/thread/113938

When running kernel 2.6.24-16, you need the patched patch from http://aldeby.org/blog/?p=113.

=== Configuration aborts when Installing VMware 6.0.5 on Intrepid (or any system running the 2.7.27 kernel) ===

You need to replace the three files
<pre>
/usr/lib/vmware/modules/source/vmmon.tar
/usr/lib/vmware/modules/source/vmnet.tar
/usr/lib/vmware/modules/source/vmblock.tar
</pre> with the files available here: http://forum.ubuntu.org.cn/viewtopic.php?p=913873&sid=8b8d9aa85dd0ccd8ff0f4708d37d6dfd

=== Ubuntu is hosting a guest VM, and the clock gets out of sync ===

The clock of a Linux guest OS could run much faster than the host computer, if the host computer isusing dynamic CPU speed technology.

To Fix this problem:
0. Edit your /etc/vmware/config <pre>
sudo vim /etc/vmware/config
</pre>
0. Add the following line to /etc/vmware/config <pre>
host.cpukHz = x
host.noTSC = TRUE
ptsc.noTSC = TRUE
</pre>x = Max CPU speed in kHz (i.e. 2GHz CPU = 2000000)
# Install VMware Tools in Guest OS
# Verify that Time synchronization between the virtual machine and the host operating system is selected

=== VMWare "Snapshot Manager" Crashes ===
The VMWare "Snapshot Manager" may still crash when clicked on.  To work around this problem, set an environment variable in the shell before running VMware.  I have these two commands together in a shell script for launching the program: <pre>
export VMWARE_USE_SHIPPED_GTK=yes
vmware
</pre>

=== VMWare Runs Slowly on Pentium-M "Centrino" Notebook ===

If you have a Pentium-M "Centrino" notebook, you may notice VMware runs very slowly at times.  To fix this problem, do as follows in a shell script: <pre>
OLD_CSTATE="`cat /sys/module/processor/parameters/max_cstate`"
echo "1" > /sys/module/processor/parameters/max_cstate
export VMWARE_USE_SHIPPED_GTK=yes
vmware
echo $OLD_CSTATE > /sys/module/processor/parameters/max_cstate
</pre>

=== Bridged Networking Won't Start ===

Some people may have a problem starting bridged networking ''(vmnet0)''. vmnet0 is bridged to eth0, so try running '''ifdown eth0''' first, THEN running the vmware-config.pl or runme.pl.

=== VMWare 5.5 breaks after installing the 'vmware-any-any-update' package ===
VMware 5.5 doesn't need the 'vmware-any-any-update' package. If you did try this, you will get the following sorts of errors: <pre>
Version mismatch with vmmon module: expecting 137.0, got 116.0. Try reinstalling VMware Workstation.
</pre> To fix this problem, run the version of vmware-config.pl included in the VMware package. If have already run the version in the vmware-any-any-update package, rerun the vmware-install.pl script to reinstall VMware.

=== Missing Library Files Error ===

You get an error about missing library files (file extension .so).  This will happen if you don't have the X Window system installed.  You can either install the libraries one by one or install x-window-system-core, which is simpler, but will also install other unnecessary packages: <pre>
sudo apt-get install x-window-system-core
</pre>

CategoryVirtualization
