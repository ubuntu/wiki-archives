{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


Vala is a new programming language that aims to bring modern programming language features to GNOME developers without imposing any additional runtime requirements and without using a different ABI compared to applications and libraries written in C. 

<code>valac</code>, the Vala compiler, is a self-hosting compiler that translates Vala source code into C source and header files. It uses the GObject type system to create classes and interfaces declared in the Vala source code.

<nowiki>[[http://live.gnome.org/Vala/]]</nowiki>

== Building and Installing Vala ==

You can <nowiki>[[https://edge.launchpad.net/~vala-team/+archive/ppa|install Vala by adding a repository]]</nowiki> from the <nowiki>[[https://edge.launchpad.net/~vala-team|Vala team]]</nowiki> on Launchpad. This is recommended. There are currently outdated versions in the universe repository. The Vala team PPA also contains:

* <nowiki>[[http://live.gnome.org/Libgee|libgee]]</nowiki> - Libgee is a collection library providing GObject-based interfaces and classes for commonly used data structures. 
* <nowiki>[[http://code.google.com/p/vtg/|vtg]]</nowiki> - Vala Toys for gEdit is an experimental collection of plugins that extends the gEdit editor to make it a better programmer editor for the Vala language. 
* <nowiki>[[http://www.valaide.org/|valide]]</nowiki> - Val(a)IDE is an Integrated Development Environment (IDE) for the Vala programming language.
* <nowiki>[[http://live.gnome.org/GtkSourceView/GtkSourceCompletion|gtksourcecompletion]]</nowiki> - used by the editor packages. Source completion is not working in the PPA builds; there is no library file created.

Install latest stable Vala from the Vala team PPA:
<pre>
sudo apt-key adv --recv-keys --keyserver keyserver.ubuntu.com 7DAAC99C
sudo add-apt-repository ppa:vala-team
sudo apt-get update
sudo apt-get install valac-0.18 vala-0.18-doc valac-0.18-dbg
valac --version

sudo apt-get install libgee-dev 
sudo apt-get install gedit-vala-plugin vala-gen-project
sudo apt-get install valide
</pre>

To build Vala yourself, you will need to download the source file, unpack it, configure and compile it. The "build-essential" package will install the gcc compiler and related tools. Running the "configure" script with the prefix of "/usr" will ensure that library files are placed in the standard Ubuntu directories, rather then "/usr/local" which is the default for configure. 

You could build with the <code>./configure; make; sudo make install</code> commands, but then you can't remove Vala with <code>apt-get</code> or other package managers. Using <nowiki>[[CheckInstall]]</nowiki> you can create an Ubuntu package (".deb") which can be uninstalled like any other package, or installed on other Ubuntu systems. Note that CheckInstall is not designed to produce packages suitable for distribution.

Example for vala-0.7.9:
<pre>
sudo apt-get install build-essential flex bison libglib2.0-dev
sudo apt-get install checkinstall devhelp libgtk2.0-dev 

wget http://download.gnome.org/sources/vala/0.7/vala-0.7.9.tar.bz2
tar -xvf vala-0.7.9.tar.bz2
cd vala-0.7.9/
./configure --prefix=/usr
sudo checkinstall
valac --version
</pre>

If you go with the sudo make install stuff, you could receive the following error message when you issue the first valac commmands
<pre>
valac: error while loading shared libraries: libvala.so.0: cannot open shared object file: No such file or directory
</pre>
This means that the compiler could not find the libraries, however they are exactly where they are supposed to be, namely in the directory /usr/local/lib. 
To correct the error at compiling time, you will run the command
<code>sudo ldconfig</code>
to update the linkers to dynamic libraries.

== Libraries and Bindings ==

<nowiki>[[http://live.gnome.org/Vala/Bindings]]</nowiki>

To use a library with Vala you need the Vala API file (".vapi") and the Ubuntu development package. Different naming standards are used for the libraries, the Vala API files, and the Ubuntu packages. Vala comes with a variety of VAPI bindings already created. Look for Vala API files in <code>/usr/share/vala/vapi/</code>

{| class="wikitable"
|-
| '''Library'''
| '''Vala API''' (.vapi)
| '''Ubuntu development package''' (.deb)
| '''Vala Namespace'''
|-
| GLib
| glib-2.0
| <nowiki>[[http://packages.ubuntu.com/karmic/libglib2.0-dev|libglib2.0-dev]]</nowiki>
| GLib
|-
| Gtk+
| gtk+-2.0
| <nowiki>[[http://packages.ubuntu.com/karmic/libgtk2.0-dev|libgtk2.0-dev]]</nowiki>
| Gtk
|-
| Poppler-glib
| poppler-glib
| <nowiki>[[http://packages.ubuntu.com/karmic/libpoppler-glib-dev|libpoppler-glib-dev]]</nowiki>
| Poppler
|-
| DBus
| dbus-glib-1
| <nowiki>[[http://packages.ubuntu.com/karmic/libdbus-glib-1-dev|libdbus-glib-1-dev]]</nowiki>
| DBus
|-
| GStreamer
| gstreamer-0.10
| <nowiki>[[http://packages.ubuntu.com/karmic/libgstreamer0.10-dev|libgstreamer0.10-dev]]</nowiki>
| Gst
|-
| Glade2
| libglade-2.0
| <nowiki>[[http://packages.ubuntu.com/karmic/libglade2-dev|libglade2-dev]]</nowiki>
| Glade
|-
| SQLite3
| sqlite3
| <nowiki>[[http://packages.ubuntu.com/karmic/libsqlite3-dev|libsqlite3-dev]]</nowiki>
| Sqlite
|-
| Gnome-desktop
| gnome-desktop-2.0
| <nowiki>[[http://packages.ubuntu.com/karmic/libgnome-desktop-dev|libgnome-desktop-dev]]</nowiki>
| Gnome
|-
| Gnome-menu
| libgnome-menu
| <nowiki>[[http://packages.ubuntu.com/karmic/libgnome-menu-dev|libgnome-menu-dev]]</nowiki>
| GMenu
|-
| GnomeVFS
| gnome-vfs-2.0
| <nowiki>[[http://packages.ubuntu.com/karmic/libgnomevfs2-dev|libgnomevfs2-dev]]</nowiki>
| GnomeVFS
|}

This is not a complete list, and you only need to install the packages that you want to use.

<pre>
sudo apt-get install libglib2.0-dev libgtk2.0-dev libpoppler-glib-dev libdbus-glib-1-dev libgstreamer0.10-dev libglade2-dev libsqlite3-dev libgnome-desktop-dev libgnome-menu-dev libgnomevfs2-dev 
</pre>

See InstallingSoftware for options other then <code>apt-get</code>.

== Compiling ==

The Vala compiler "<code>valac</code>" can be used to directly compile your application to an executable. You can also use <code>valac</code> to generate the C source files without compiling. C source code and header files (".c" and ".h") can then be compiled with <code>gcc</code> into executables or libraries. This means you can write code in Vala, and distribute C source files using all the common tools and not imposing any extra build-time dependencies, such as needing Vala installed.

Check that you have <code>valac</code> installed:
<pre>
$ valac --version
Vala 0.7.9
</pre>

Make a file called "list.vala" based on http://live.gnome.org/Vala/ListSample

Compile and run <code>list</code>. (You may need packages "build-essential" or "libglib2.0-dev")
<pre>
$ valac list.vala -o list
$ ./list
</pre>

Use the <code>--ccode</code> flag to generate C and header files without compiling an executable (include directives are in the "c" file): 
<pre>
$ valac --ccode list.vala 
$ ls
list.c  list.vala
</pre>

Compile the C source file with <code>gcc</code> using <code>pkg-config</code> to include the right development files. When compiling with <code>valac</code> GLib/GObject is imported by default.
<pre>
$ gcc -o list list.c `pkg-config --libs --cflags gobject-2.0`
$ ./list 
</pre>

<nowiki>[[http://packages.ubuntu.com/intrepid/pkg-config|pkg-config]]</nowiki> generates the flags for <code>gcc</code> based on the Ubuntu development packages you have installed:
<pre>
$ pkg-config --libs --cflags gobject-2.0 
-I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include  -lgobject-2.0 -lglib-2.0
$ pkg-config --libs --cflags glib-2.0
-I/usr/include/glib-2.0 -I/usr/lib/glib-2.0/include  -lglib-2.0
</pre>

Vala API files can be used to include other development packages. Use <code>valac --pkg <vapi file></code> like you would use <code>pkg-config</code> with <code>gcc</code>. Vapi file have to be specified with no extension in --pkg option.

Make a file called "gtksample.vala" based on http://live.gnome.org/Vala/GTKSample (You may need the package "libgtk2.0-dev")

<pre>
$ valac gtksample.vala
gtksample.vala:1.7-1.9: error: The namespace name `Gtk' could not be found
using Gtk;
      ^^^
Compilation failed: 1 error(s), 0 warning(s)
$ valac --pkg gtk+-2.0 gtksample.vala
$ ./gtksample
</pre>

In the example above the executable "gtksample" is linked to the Gtk2.0 library. The valac flag <code>--pkg gtk+-2.0</code> tells the vala compiler to use the Vala API file "gtk+-2.0.vapi". <code>valac</code> looks for Vala API files in <code>/usr/share/vala/vapi/</code>. The "gtk+-2.0.vapi" file tells <code>gcc</code> to include the C header file "gtk/gtk.h". The development header and source files are present on your system because you installed the "libgtk2.0-dev" Ubuntu development package. 

If you distribute "gtksample" in executable form, the standard GTK+ library "libgtk2.0-0.so" must be on the system. If you distribute the C source files, then the GTK+ development files must also be present.
