{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== Introduction ==

For those of you having trouble with VMware, try the new <nowiki>[[http://www.vmware.com/products/server/|VMware 2.0 server 64-bit version]]</nowiki>. Note that it uses a web interface rather than the software client; point your browser at '''http://localhost:8222/ui/''' or '''https://localhost:8333/ui/''' after you install and log in with the user you created during the Ubuntu installation and your normal user account's password.

== VMware Server 2.0 64bit on Ubuntu 8.04 LTS 64bit Server ==

First, install Ubuntu 8-04 LTS 64bit Server - suggest with ssh server only - no other services installed.

Next,
<pre>
sudo apt-get update
sudo apt-get upgrade
</pre>

Then,
<pre>
sudo apt-get install build-essential linux-headers-`uname -r` xinetd
</pre>

<nowiki>[[http://www.vmware.com/products/server/|Download VMware Server 2.0 64bit version tar file]]</nowiki> and SCP it to the new host server you just installed.  You'll need to register for a serial number.

Unpack the tar file and change into the directory '''vmware-server-distrib'''

<pre>
sudo ./vmware-install.pl
</pre>

You should be able to use the default answers for pretty much everything.  At the end of the install process - give the path where you want to keep your virtual machines and enter the serial number that you got when registering.  When asked about what account you want to be the administrator - say '''yes''' and at the next question, enter the username you want to use. Due to a bug in the config script, single character usernames will be rejected. To get around this, enter 'root' as the username, then edit the file /etc/vmware/hostd/authorization.xml and change the ACEDataUser value to your username.

If you get an '''error''' about gcc versions different from the version the current kernel is compiled with - just answer '''yes''' and everything should work just fine.

Once installed you can access the web-based management interface at <nowiki>[[http://servername_or_ip:8222/ui/]]</nowiki> or <nowiki>[[https://servername_or_ip:8333/ui/]]</nowiki>

You should now have a working VMware Server 2.0 64bit virtual machine host.

Note 1: in order to view the '''console''' of the virtual machine in Firefox you will need to install a plugin (which Firefox should get from your Vmware host).  The version of the plugin is specific to the version of the Vmware Server you installed - so if you have two VMware host servers - one running VMware Server 2.0 and another running an earlier beta version of VMware Server - Firefox will complain that it needs different versions of the plugin for each - and installing one will uninstall the other.  Therefore - when upgrading your VMware Server hosts - you should do all of them at once - otherwise you'll have issues with the plugin version when accessing the consoles of the virtual machines hosted on the various servers.

Note 2: As usual - since we are installing from a tar file and there is no deb installer in the repositories (yet)... any time your host server gets a kernel update - you will need to rerun the VMware installer/config script (after rebooting the server so the new kernel and header files are active) so that it can compile the necessary modules for the current running kernel version.

== VMware Server 2.0 64bit on Ubuntu 8.04 LTS 64bit Desktop ==

If you like to have the GUI system management tools available on the VMware host server - you can follow the above procedure but install on top of an Ubuntu 8.04 LTS 64bit Desktop install.  That way you can access the web based management interface directly on the server at '''<nowiki>[[http://localhost:8222/ui/]]</nowiki>''' or '''<nowiki>[[https://localhost:8333/ui/]]</nowiki>''' in your web browser of choice to manage your virtual machines.

If you are running the machine as a server - having the GUI always running on the vm host can chew up resources (cpu cycles, memory, etc.) unnecessarily.  After installation of VMware you can set the server to start without the Gnome Display Manager (GDM).

As your initial su user...
<pre>
sudo rm /etc/rc2.d/S30gdm
</pre>

If you ever want to back out this change...
<pre>
sudo ln -s /etc/init.d/gdm /etc/rc2.d/S30gdm
</pre>

When you reboot, the machine will now boot to a text console.  To get the GUI - just log in as the user you want and
<pre>
startx
</pre>

Use the 'logout button' to return to the text console.

== VMware Server on Ubuntu 6.06 LTS amd64 ==

This page is for information regarding installation of VMware Server on Ubuntu 6.06 LTS amd64. Feisty users have an easier way, which works for AMD64 too. See "Quick Installation" section at <nowiki>[[VMware-Server]]</nowiki>.

As of June 2006, the VMware Server's UI is 32-bit and requires 32-bit libraries when installing on a 64-bit host, but guest OS's can be either 32-bit or 64-bit.

== Install Prerequisites ==

First make sure you have the build-essential, kernel headers, xinetd, gcc, and g++ packages installed:
<pre>
sudo apt-get install build-essential linux-headers-`uname -r` xinetd gcc-4.0 g++-4.0
</pre>

Gutsy users will need to install the following instead:
<pre>
sudo apt-get install build-essential linux-headers-`uname -r` xinetd gcc-4.1 g++-4.1
</pre>

Install the 32-bit libraries required by VMware UI.
"Some of the backend components are 64 bit, but the UI is still a 32 bit application. May be sometime down the road, the UI will also be 64 bit."
<pre>
sudo apt-get install ia32-libs libc6-i386
</pre>

== Install the VMware Server ==

Download VMware Server from http://www.vmware.com/products/server/. As of June 2006, the latest release is Version 1.
As part of the download process you will get a 20-digit serial number also.
<pre>
tar -xvzf VMware-server-e.x.p-23869.tar.gz
cd vmware-server-distrib
sudo ./vmware-install.pl
</pre>

At the end of the installation, you will be prompted to run the /usr/bin/vmware-config.pl script.
<pre>
Before running VMware Server for the first time, you need to configure it by
invoking the following command: "/usr/bin/vmware-config.pl". Do you want this
program to invoke the command for you now? [yes]
</pre>

For the most part the defaults given should be suitable.

== Starting VMware Console ==

Here's the easy part:

Applications|System Tools|VMware Server Console

If you have installed '''VMware Server 2.0 Beta''', the above menu item will not appear, as this version uses a web-based interface.  To access it, open up your web browser of choice and point it to http://localhost.  (I'm not sure what would happen if you were previously accessing locally hosted sites at http://localhost.  Someone with this experience might update this section).  You'll be prompted to log in, which you'll need to do as root.  If you haven't set a password for your root account (it's disabled by default), do:

<pre>
sudo passwd root
</pre>

The first password prompt is for your sudo password.  You will then be asked to type a new UNIX password twice.

== Troubleshooting ==

=== ldd: /lib/ld-linux.so.2 exited with unknown exit code (127) ===
You may get this error message:
<pre>
/usr/bin/ldd: line 171: /lib/ld-linux.so.2: No such file or directory
ldd: /lib/ld-linux.so.2 exited with unknown exit code (127)
</pre>

This is due to either missing 32-bit libraries, or vmmon having been compiled under a different kernel (see below).  Install the 32-bit libraries:
<pre>
sudo apt-get install ia32-libs
</pre>

=== VMware Console refuses to start ===
If you are trying to start the VMware Console, and it just disappears, it may be due to vmmon having been compiled under a different kernel other than the one that is running.  Vmmon is very finicky about having been compiled under the exact kernel that is running.
Perhaps you've just upgraded your kernel.  Or perhaps it was updated automatically via the Update Manager much earlier, and you've just rebooted now.

You will need to download the latest headers and set the symlink directory.
<pre>
sudo apt-get install linux-headers-`uname -r`
sudo rm /usr/src/linux
sudo ln -s /usr/src/linux-headers-`uname -r` /usr/src/linux
</pre>

You can then recompile vmmon by:
<pre>
sudo vmware-config.pl --recompile
</pre>

=== No sound under ESD / ARTS ===

'''TODO''': Maybe move this to a separate page, since it appears to be specific to Workstation?

I had this problem with VMware Workstation (not Server) on AMD64:
It would start up okay otherwise, but refuse to give me sound,
saying /dev/dsp was locked.

According to http://kb.vmware.com/vmtnkb/search.do?cmd=displayKC&docType=kc&externalId=1611&sliceId=SAL_Public
vmwaredsp from http://knihovny.cvut.cz/ftp/pub/vmware/ is supposed to fix this,
but it would refuse to run for me. It would keep telling me
<pre>
ERROR: ld.so: object 'libvmdsp.so' from LD_PRELOAD cannot be preloaded: ignored.
</pre>

There is a hint in one of the vmware forums that the LD_PRELOAD stuff can't run on a shell script,
so I tried patching the actual /usr/local/bin/vmrun script to do the vmwareesd stuff (it's just a
couple of environment variables really) just prior to running vmrun ... and lo!, it works!
Here's my patch:

<pre>
--- /usr/local/bin/vmrun~	2006-09-27 11:07:00.000000000 +0300
+++ /usr/local/bin/vmrun	2006-09-29 13:47:11.000000000 +0300
@@ -194,6 +194,8 @@
 vm_run() {
### Append any libraries that are still missing.
    export LD_LIBRARY_PATH="`LANGUAGE=C LANG=C ldd "$binary" | vm_append_missing`"
+   export LD_PRELOAD=libvmdsp.so${LD_PRELOAD+:}"$LD_PRELOAD"
+   export VMDSP_BACKEND=esd

    exec "$binary" "$@"
 }
</pre>

You will obviously need to have the vmwaredsp libraries installed in /usr/bin.
(I also had to patch the installation script to not worry even though /lib64 is a symlink.)

-- https://wiki.ubuntu.com/Era

----
CategoryVirtualization
