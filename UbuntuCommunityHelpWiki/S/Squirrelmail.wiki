{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== Introduction ==

Webmail is software which allows you to view email from any computer, anywhere in the world, through your web browser. Squirrelmail is a simple, fast and popular webmail package. The website is <nowiki>[[http://www.squirrelmail.org/|here]]</nowiki>. This guide will enable you to setup webmail on your own server, for use either within your home network, or outside.

== Preparation ==

In order to run, you need to first set up a number of things:
* A working Mail Transfer Engine, see MailServer
* A working (IMAP) Mail Delivery Agent, see MailServer
* A working Apache installation with PHP, see the <nowiki>[[ApacheMySQLPHP|Apache]]</nowiki> page.
* Squirrel mail does not require MySQL, so you can run it on a server without MySQL installed. However if you wish, you can use MySQL for addressbooks, to set up MySQL, see the <nowiki>[[ApacheMySQLPHP|Apache]]</nowiki> page.
 
== Installation ==

Install the following packages: <code>squirrelmail</code> (see InstallingSoftware).

== Configuration ==

=== Squirrelmail Configuration ===

Squirrelmail has a very simple configuration menu. To run it, type:<pre>
sudo squirrelmail-configure</pre>

You can use the numbers and letters to browse through the configuration menu. You don't need to edit all the options. In fact, it is a good idea just to edit the necessary options, until you have squirrelmail working, because it is easier to see what might be wrong. After squirrelmail is working, you can customise all the options! It is a good idea to check the following options though:

* In ''Menu 2'' (mail server settings), although you shouldn't have to edit these, just check they are correct. You can use an imaps server if you like, but if squirrelmail is running on the same machine as your mail server, it is faster and perfectly safe to use imap (you can configure your imap server to ensure that it only listens on <code>localhost</code> if you like). Check that your mail settings are:<pre>
A.  Update IMAP Settings   : localhost:143 (other)
B.  Update SMTP Settings   : localhost:25</pre>
* In ''Menu 4'' (general settings), it is a good idea to enable option 11 (Allow server-side sorting).

Go on to configure Apache, and then come back and explore the other options!

=== Apache Configuration ===

Squirrelmail comes with a sample apache configuration file in <code>/etc/squirrelmail/apache.conf</code>. You can copy this file to <code>/etc/apache2/sites-available/squirrelmail</code> with the command:<pre>
sudo cp /etc/squirrelmail/apache.conf /etc/apache2/sites-available/squirrelmail
</pre>then link it to the sites-enabled directory with the command:<pre> 
sudo ln -s /etc/apache2/sites-available/squirrelmail /etc/apache2/sites-enabled/squirrelmail
</pre> Alternatively you can use the a2ensite tool:<pre>
sudo a2ensite squirrelmail</pre> You shouldn't have to edit anything else. 

Alternatively, if you wish to use a virtual server setup instead, you can. For setting up SSL, uncomment the last section from the configuration file. For more details on how to use apache, see the <nowiki>[[ApacheMySQLPHP|Apache]]</nowiki> page.

Reload Apache Configuration: <pre>
sudo /etc/init.d/apache2 force-reload</pre>

If you ever wish to disable squirrelmail, you may simply delete the link in the site-enabled directory and Reload Apache's Configuration.

== Check it works! ==

Open a webbrowser, and go to the address <code>http://localhost/squirrelmail</code>. Change <code>localhost</code> for the address of your server, or your virtualhost, if you have used that Apache setup. You should see the Squirrelmail login box!

== Add plugins ==

On of the strength of squirrelmail is the large amount of plugins that can be added to the webmail. You can find a list of the plugins available <nowiki>[[http://www.squirrelmail.org/plugins.php|here]]</nowiki>. Installation is very easy, just unpack the plugins in <code>/usr/share/squirrelmail/plugins/</code> and look for a <code>README</code> or an <code>INSTALL</code> file in the plugin directory.

For plugin activation, you have to launch the configuration utility of squirrelmail as described in squirrelmail configuration section by typing <code>sudo squirrelmail-configure</code> and selecting Option 8: Plugins.

There are a few plugins bundled with the Squirrelmail package - have a look at "abook_take" (add email addresses from an email) and "delete_move_next" (message deletion and moving options from within the message preview).  It is also worth having a look at the Addressbook import/export plugin "abook_import_export".

== A note about LDAP ==

A neat setup is to configure both Squirrelmail and Evolution to use LDAP to store addresses - that way, you can access your contact list via Squirrelmail when you're away from home.  However, Squirrelmail's default LDAP settings won't talk to OpenLDAP's default settings unless you set Protocol to 3 when adding an LDAP server.

== Hardy Heron Issues ==

Using the early release of Hardy Heron Ubuntu, you may encounter some additional configuration problems.  

Firstly, you are prompted to run <code>/usr/sbin/squirrelmail-configure</code> for configuration, however this does not work since it attempts to locate configuration files relative to the configuration program location.  Instead you must run it via the soft link in <code>/etc/squirrelmail</code>, i.e.:<pre>
/etc/squirrelmail/conf.pl</pre>

Secondly, the user preferences data directories defined in the default squirrelmail configuration do not match those created by the ubuntu installation.  Under ''Menu 4'' you should change Data Directory to <code>/var/lib/squirrelmail/data/</code> and also change Attachment Directory to <code>/var/spool/squirrelmail/attach/</code>.

Thirdly, squirrelmail cannot seem to locate its default user preferences file.  This results in the error ''Error opening ../data/default_pref'' when accessing the login page.  The simplest way to resolve this appears to be by creating a soft link via:<pre>
ln -s /etc/squirrelmail/default_pref /var/lib/squirrelmail/data/default_pref</pre>
