{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

{| class="wikitable"
|-
| <tablestyle="float:right; font-size: 0.9em; width:40%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em;"><<BR>>
|}

== Work in progress ==
This page is a work in progress.  It contains known errors and mistakes.  Don't use this how-to while this notice in in place unless you are contributing to improving it. 

== About ==
The Samba domain forms the basis is most of the Small Business Server.  All integration for all of our systems are based on having the domain server properly configured. 

This tutorial is similar to other SAMBA tutorials, but it is specific to installing a samba DC for a small office.  That means that the choices made and the examples used are specific to getting a Small Business Server up and running.  These same choices may not be appropriate for other settings.  This tutorial is not a general Samba tutorial.

== Assumptions and Variables ==
* The companies name is <Office Enterprises>

* The Lan's IP network is: <192.168.1.xxx>

* The Router/Gateway's Lan IP address is: <192.168.1.1>

* The Main Server's IP address is: <192.168.1.2>

* The domain name is: <office.lan>

* The realm is: <OFFICE.LAN>

* The Long-term release used is: <Ubuntu 20.04>

== Install Samba ==

The following are the steps necessary to install Samba on a fresh install of Ubuntu 20.04.  It is strongly suggested that you ONLY follow this tutorial on a fresh install of Ubuntu, as these steps may fail on a system that has had Samba installed previously.

=== Preparing for the Installation ===

The following steps will get your server ready for installing Samba:

==== Disable DHCP on the Router ====
If you have not already done so, ensure that you have disabled DHCP on the router.

If you have not already done so, see <nowiki>[[link]]</nowiki>
----

==== Double check that you do not have Samba running on the system ====
Use the following command to ensure that you don't already have Samba running on your system:

<pre>
</pre>

If the output of that command lists any samba, smbd, nmbd, or winbindd processes, then you already have Samba installed and you will need to remove it before continuing. 
----
==== Edit /etc/hosts ====
We need to make sure the /etc/hosts file on the DC1 server correctly resolves the fully-qualified domain name (FQDN) and short host name to the LAN IP address of DC1. 

<pre>
</pre>

The contents of the file should look like this:
<pre>
127.0.0.1     localhost
192.168.1.2   DC1.office.lan     DC1
</pre>

(if the file contains other values, we should change them to match the example above)
----

=== Update packages ===

The first thing we need to do is update our packages database from the repositories:

<pre>
</pre>

After we have updated the package database, we need to upgrade to the latest versions of all packages using the following command:

<pre>
</pre>

----
=== Install packages ===
Now we need to install all of the packages Samba will need.  We can do that using the following command:

<pre>
</pre>

----
You have now completed the installation of Samba. The next step is to <nowiki>[[SmallBusinessServer-SAMBA-Configure|configure and provision]]</nowiki> the Samba domain.
