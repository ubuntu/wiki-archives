{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



Synergy is a program that will let you use one keyboard and mouse on multiple computers across a network. The computers can be running Linux, Windows, or OS X.  The computer with the keyboard and mouse is the '''server''' or '''host''', and the computers with the displays to be controlled remotely are the '''clients'''. This HOWTO lets you know how to get Synergy set up and running on your Ubuntu system.

Warning! Synergy is not very secure at all!  Consider - you are setting up something to allow an entirely different computer control the keyboard and mouse on your own computer!  Don't try and use this anywhere unsecure! There is a way of making it more secure by running it over OpenSSH, but that is currently beyond the scope of this article.  More documentation is available on the <nowiki>[[http://synergy-project.org/|Synergy website]]</nowiki>.

NOTE:  The more current release versions of Synergy include the server, client, and a GUI in one package.  Additionally, the newer versions have added encryption.  Most of this guide is dated if you are using the newer versions from the Synergy website mentioned above.

=== Quickstart Guide ===

There are three ways of using Synergy. The first two are provided by the synergy package, while the third is provided by a third-party application called QuickSynergy.

If you choose to use only the first-party methods, you can install synergy from the <nowiki>[[apt:synergy|software center]]</nowiki> or their <nowiki>[[http://synergy-project.org/|website]]</nowiki>.

==== On the Server ====

Follow one of these section steps on the computer with the keyboard and mouse. If you don't know the hostname of the server, run the <code>hostname</code> command from a <nowiki>[[UsingTheTerminal|Terminal window]]</nowiki>.

===== Using Synergy GUI =====

# <nowiki>[[apt:synergy|Install Synergy]]</nowiki> and open it
# Select the 'server' option
# On the main window, make sure 'Configure Interactively' is selected and click on 'Configure Server'
# In the 'Screens and links' tab drag screens to represent your setup. Press 'OK'
# Click 'Start'

===== Using QuickSynergy =====

# <nowiki>[[apt:quicksynergy|Install QuickSynergy]]</nowiki> and open it (under Applications > Accessories)
# Under the 'Share' tab enter the hostname or IP address of the Client machines in one of the directional boxes. The directional box you choose will determine which edge of the Host computer's screen the mouse will "run off".
# Click Execute
# Move the mouse to the edge of the Host screen -- it should now appear on the client screen.

==== On the Client(s) ====

Follow these steps on the computer you would like to control with a remote keyboard and mouse.

===== Using Synergy GUI =====

# <nowiki>[[apt:synergy|Install Synergy]]</nowiki> and open it
# Select the 'client' option
# In the main window, type the IP address of the Host machine in the IP field, or use the hostname found above with <code>.local</code> added to the end
# Click 'Start'

===== Using QuickSynergy =====

# <nowiki>[[apt:quicksynergy|Install QuickSynergy]]</nowiki> and open it (under Applications > Accessories)
# Under the 'Use' tab, type the IP address of the Host machine in the IP field, or use the hostname found above with <code>.local</code> added to the end. Type in the hostname of the Client machine in the Screen field.

 1. Click Execute

=== Manual Configuration ===

The following steps assume you are setting up synergy on a host computer named '''myserver''' and a client computer named '''myclient'''.

==== On the Server ====

Synergy configuration can go in your home folder called '''.synergy.conf''' or in '''/etc/synergy.conf'''. It is up to you whether you would like the changes to be per-user or system-wide.

Here is a sample configuration that will be the needs of 95% of users:
<pre>
section: screens
        myserver:
        myclient:
end
section: links
        myserver:
                right = myclient
        myclient:
                left = myserver

end
</pre>

'''myserver''' is the hostname of the computer running synergys (providing the keyboard and mouse)
'''myclient''' is the hostname of the computer running synergyc (using the keyboard and mouse provided by myserver)
'''section: screens''' is where you set the host names of the computers going to be used.
'''section: links'''   is what side the mouse will leave the screen of one computer to reach the desktop of the other.  '''myserver''' is set to the left of '''myclient''', so when I drag the mouse off the right hand side of '''myserver''''s screen it appears on the left hand side '''myclient''''s screen.  Use '''up'''/'''down''' instead of '''left'''/'''right''' to establish and over/under sort of relationship.

==== Running Synergy ====

From the server, run the command:
<pre>
synergys
</pre>

From the client, run the command:
<pre>
synergyc <SERVER HOSTNAME>
</pre>

Replacing <SERVER HOSTNAME> with either the hostname ('''myserver''') or IP address of '''myserver'''.

You should now be able to move your mouse pointer off the right edge of your server's screen and see it show up at the left side of your client's screen. See the steps in the next section to make synergy start automatically on the host and client computers.

If you have any problems at this point it is helpful to run synergys and synergyc in the foreground with the '''-f''' option. This allows you to see error/status information that synergy prints to the terminal.

=== Autostart Synergy after logging in (GNOME) ===

==== On the Server ====

Follow these steps to start synergys when you log into GNOME.

Go to System Menu > Preferences > Startup Applications. Click "Add" and enter

<code>synergys</code>

If you want to use the configuration set up with QuickSynergy use this instead:

<code>synergys -c ~/.quicksynergy/synergy.conf</code>

Click OK and Close.

==== On the Client ====

Follow these steps to start synergyc when you log into GNOME.

Go to System Menu > Preferences > Startup Applications. Click "Add" and enter

<code>synergyc <SERVER HOSTNAME></code>

Replacing <SERVER HOSTNAME> with either the hostname or IP address of '''myserver'''.

Click OK and Close.

=== Autostart Synergy before logging in (GDM) ===

Note:  Autostarting Synergy before logging in requires that your network connection be available at all times and not just after you log in.  This is accomplished by enabling the network connection for all users.  To do this, choose System->Preference->Network Connections.  Choose the network name and select Edit.  Select "Available to all users", and then click "Apply".  This connection will now be available at all times, including at the GDM login screen.

To make sure synergy is running at all times, the following has to happen:  First, synergy is started when the GDM login screen starts. Then, synergy is killed and restarted when a user logs in.  When the user logs out, synergy is killed and GDM starts it again. To edit system configuration files in the following sections open a text editor as the root user:

<pre>
sudo gedit
</pre>

==== On the Server ====

At the end of the file <code>/etc/gdm/Init/Default</code>, just before the line that says <code>exit 0</code> add the following:
<pre>
/usr/bin/killall synergys
while [ $(pgrep -x synergys) ]; do sleep 0.1; done
/usr/bin/synergys
</pre>

Add the following to the end of <code>/etc/gdm/PostLogin/Default</code> (create this file file if it does not already exist):
<pre>
/usr/bin/killall synergys
while [ $(pgrep -x synergys) ]; do sleep 0.1; done
</pre>

If you created the file, make sure it is executable with this command:
<pre>
sudo chmod +x /etc/gdm/PostLogin/Default
</pre>

Now, create a session file <code>/etc/X11/Xsession.d/85synergys</code> with the following contents
<pre>
/usr/bin/killall synergys
while [ $(pgrep -x synergys) ]; do sleep 0.1; done
/usr/bin/synergys
</pre>

Lastly, we must make the file executable with this command:
<pre>
sudo chmod +x /etc/X11/Xsession.d/85synergys
</pre>

==== On the Client ====

At the end of <code>/etc/gdm/Init/Default</code>, just before the line that says <code>exit 0</code> add the following:
<pre>
/usr/bin/killall synergyc
while [ $(pgrep -x synergyc) ]; do sleep 0.1; done
/usr/bin/synergyc <SERVER HOSTNAME>
</pre>
Be sure to replace <SERVER HOSTNAME> with the host name or IP address of the computer running synergys.

NOTE: If your system has been configured to login automatically, this step may cause ubuntu to hang right before going to the desktop. If this is the case, remove these lines from <code>/etc/gdm/Init/Default</code> and everything should work properly. If your system is hanging at this stage, you can hit CTRL-ALT-F1 to login through command line and edit this file.(Tested on 10.04LTS Lucid Lynx)

Add the following to the end of <code>/etc/gdm/PostLogin/Default</code> (create this file file if it does not already exist):
<pre>
/usr/bin/killall synergyc
while [ $(pgrep -x synergyc) ]; do sleep 0.1; done
</pre>

If you created the file, make sure it is executable with this command:
<pre>
sudo chmod +x /etc/gdm/PostLogin/Default
</pre>

Now, create a session file <code>/etc/X11/Xsession.d/85synergyc</code> with the following contents
<pre>
/usr/bin/killall synergyc
while [ $(pgrep -x synergyc) ]; do sleep 0.1; done
/usr/bin/synergyc <SERVER HOSTNAME>
</pre>

This will run synergyc when any user logs in. Be sure to replace <SERVER HOSTNAME> with the host name or IP address of the computer running synergys.  Lastly, we must make the file executable with this command:
<pre>
sudo chmod +x /etc/X11/Xsession.d/85synergyc
</pre>

=== Autostart Synergy before logging in (KDM) ===

==== On the Client ====

Follow these steps to start the synergyc client when the KDM login screen launches.

Add the following to the end of `/etc/kde3/kdm/Xsetup`:
<pre>
/usr/bin/killall synergyc
sleep 1
/usr/bin/synergyc <SERVER HOSTNAME>
</pre>

Be sure to replace <SERVER HOSTNAME> with the host name or IP address of the computer running synergys.

For the client file we must also edit the Xstartup script to kill our synergyc process running as root before the user Xsession scripts run. To do this add the following to the end of `/etc/kde3/kdm/Xstartup` and it should look like this:
<pre>

PATH="$PATH:/usr/bin/X11"

if [ -e /etc/nologin ]; then
## always display the nologin message, if possible
  if [ -s /etc/nologin ] && which xmessage > /dev/null 2>&1; then
    xmessage -file /etc/nologin -geometry 640x480
  fi
  if [ "$(id -u)" != "0" ] && \
     ! grep -qs '^ignore-nologin' /etc/kde3/kdm/kdm.options; then
    exit 1
  fi
fi

/usr/bin/killall synergyc
sleep 1

if grep -qs '^use-sessreg' /etc/kde3/kdm/kdm.options && \
   which sessreg > /dev/null 2>&1; then
      exec sessreg -a -l "$DISPLAY" -u /var/run/utmp \
                   -h "`echo $DISPLAY | cut -d: -f1`" "$USER"
#### NOTREACHED
fi
</pre>

=== Autostart Synergy before logging in (LightDM) ===

==== On the client ====

Add the following line at the end of <code>/etc/lightdm/lightdm.conf</code>:

<pre>
[SeatDefaults]
greeter-setup-script=/usr/bin/synergyc <OPTIONS> <SERVER HOSTNAME>
</pre>

Where '''<SERVER HOSTNAME>''' is the name/IP of the server you are connecting to.

==== On the server ====

Add the following line at the end of <code>/etc/lightdm/lightdm.conf</code>:

<pre>
display-setup-script=/usr/bin/synergys -c <CONFIG FILE>
</pre>

Where '''<CONFIG FILE>''' is the path to your config file for synergy (see above for typical locations).

On the Ubuntu 14.04 64bit the configuration file changed to  <code>/usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf</code>, and you need add this line at the end of the file:
<pre>
greeter-setup-script=/usr/bin/synergys -c <CONFIG FILE>
</pre>

On the Ubuntu 14.10 64bit add the line above to <code>/usr/share/lightdm/lightdm.conf.d/50-unity-greeter.conf</code>.

=== See Also ===

<nowiki>[[http://synergy-project.org/|Synergy Homepage]]</nowiki>
<nowiki>[[http://code.google.com/p/quicksynergy/|QuickSynergy Homepage]]</nowiki>
----
CategoryInstallation
