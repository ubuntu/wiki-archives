{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Dell Diagnostic Partition ===

If your Dell computer has a diagnostic partition when shipped you can add it to the <nowiki>[[Grub2|Grub2]]</nowiki> boot menu and run the diagnostic utilities when necessary.

The diagnostic partition is approximately 40 megabytes placed first on the hard drive. If you use '''gparted''' to display the disk, it will appear as a physical partition called ''/dev/sda1''. It will have the bootable flag set and be formatted with the FAT filesystem.

It isn't some kind of magic, it is just a bootable DOS system. If you are curious, you can mount it and view (or edit) the contents:

<pre>
sudo mount -t vfat /dev/sda1 /mnt
</pre>

=== Grub2 Menu Configuration ===

If you have already installed Ubuntu, then '''update-grub2''' was executed to automatically probe for other bootable partitions on your system. However, the probe logic does not currently seem to be able to detect a bootable DOS system. You need to define the diagnostic partition manually.

==== Default Custom Menu ====

First you must edit the menu file which defines custom bootable partitions: ''/etc/grub.d/40_custom''. As installed, this file will contain the following 5 lines:

<pre>
exec tail -n +3 $0
</pre>

==== Define Dell Diagnostics Menu Entry ====

You should append these lines to the end of the existing file:

<pre>
menuentry "Dell DOS Diagnostics (on /dev/sda1)" {
insmod chain
insmod fat
set root=(hd0,1)
chainloader +1
}
</pre>

'''Note:''' I inadvertantly left a space character following the closing curly bracket... this caused my custom menu item to be stored in ''/boot/grub/grub.cfg'', but inexplicably it did NOT appear in the Grub2 menu!

==== Update the Grub2 Menu ====

Finally, get the Grub2 configuration to include your custom menu entry:

<pre>
sudo update-grub2
</pre>

'''Note:''' This command reports each stage of probing for bootable partitions, but it does NOT mention processing the custom menu file.

==== Test the Dell Diagnostics ====

Reboot your system and you should see that ''Dell DOS Diagnostics (on /dev/sda1)'' has appeared as the last line in your Grub2 menu. Select it to boot and run the diagnostic programs. When you exit the utilities the system will reboot to the Grub2 menu.

----
CategoryInstallation
