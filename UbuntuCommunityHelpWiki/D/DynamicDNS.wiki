{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

Parent page: <nowiki>[[InternetAndNetworking| Internet and Networking]]</nowiki>

== Dynamic DNS Introduction ==

Every computer attached to the Internet has an IP address.  Name Translation is the process of relating a name (like 'www.google.com') to an <nowiki>[[http://en.wikipedia.org/wiki/IP_address|IP address]]</nowiki> (like '74.125.19.103') so that a website (or other service) on a computer can be accessed using an easily remembered name, rather than the IP address number of the computer.  Name Translation is implemented via a distributed database known as the <nowiki>[[http://en.wikipedia.org/wiki/Domain_Name_System|Domain Name System]]</nowiki>.

This database is implemented on the Internet by
<nowiki>[[http://en.wikipedia.org/wiki/Name_server|DNS name servers]]</nowiki> which keep track of DNS records and exchange this information between each other to maintain consistency. Every request for a name (ie. a web browser) is then directed to one of these name servers.

Most servers on the Internet have a <nowiki>[[http://en.wikipedia.org/wiki/IP_address#Static_and_dynamic_IP_addresses|fixed (static) IP address]]</nowiki> that never changes.  The DNS record for this node will only change infrequently.

However, many home users are assigned an IP address that changes more frequently.  These <nowiki>[[http://en.wikipedia.org/wiki/IP_address#Static_and_dynamic_IP_addresses|dynamic IP addresses]]</nowiki> are assigned by an <nowiki>[[http://en.wikipedia.org/wiki/Internet_service_provider|ISP]]</nowiki>.   This makes it a challenge to translate a Name to one of these IP addresses.

A number of DNS name servers offer a method to update the DNS database with dynamic IP name translations.   This is accomplished by using a small software utility on their computer or a local router.

These Dynamic DNS services allow the user to choose a hostname and set an initial IP address to correspond to that hostname. The software utility then periodically checks for a change to the computer's IP address, and when a new IP address is discovered, it updates the Dynamic DNS database to reflect that change.

== Registering with a Dynamic DNS provider ==
DNS requires that a name server somewhere on the Internet keep track of 'where you are' (i.e. your current IP address). That is, its database must always be updated to make sure your hostname always corresponds to your current IP address.

In order to use one of these Dynamic DNS services, registration is required first. Here is a selection of these services (a full list is available <nowiki>[[http://www.dmoz.org/Computers/Internet/Protocols/DNS/DNS_Providers/Dynamic_DNS/|at DMOZ]]</nowiki> and at <nowiki>[[http://dnslookup.me/dynamic-dns/|Dynamic DNS]]</nowiki>):

* <nowiki>[[http://www.dyndns.com/support/clients/|DynDNS.com]]</nowiki>
* <nowiki>[[http://www.no-ip.com/getting_started.php|No-IP]]</nowiki>
* <nowiki>[[http://www.dynu.com/Free-Dynamic-DNS|Dynu.com(free)]]</nowiki>
* <nowiki>[[http://www.easydns.com/dynamicdns.php3|EasyDNS]]</nowiki>
* <nowiki>[[http://www.zoneedit.com/doc/dynamic.html#faq1|ZoneEdit]]</nowiki>
* <nowiki>[[http://www.dnspark.com/services/dynamicDNS.php|DNSPark]]</nowiki>
* <nowiki>[[http://namecheap.simplekb.com/kb.show?show=article&articleid=583&categoryid=11|NameCheap]]</nowiki>
* <nowiki>[[http://www.dslreports.com/faq/240|DSLReports]]</nowiki>
* <nowiki>[[http://freedns.afraid.org/|FreeDNS (Afraid.org)]]</nowiki>
* <nowiki>[[http://opendns.org/|OpenDNS]]</nowiki>
* <nowiki>[[http://www.dy.fi/|dy.fi (Finland only)]]</nowiki>
* <nowiki>[[https://desec.io/|deSEC]]</nowiki>
* <nowiki>[[http://dnsmadeeasy.com/integration/dynamicdns/|DNS Made Easy]]</nowiki>
* <nowiki>[[https://now-ip.com|Now-IP]]</nowiki>

Upon registering, you will select a username and password, as well as a hostname that you will use as the DNS name (to allow external access to your machine using the hostname).

Many Dynamic DNS providers offer a selection of hostnames available for free use with their service. However, with a paid plan, any hostname (including your own registered domain name) can be used.

== Setting up Dynamic DNS service updates ==

Once you have chosen a Dynamic DNS service provider, you need to set up a way that your IP address record will be updated whenever it is changed. There are two ways of doing this:

* using a dynamic DNS software utility that is installed on your computer
* using the built-in capabilities of a cable/DSL modem/router

Many router/modems support Dynamic DNS reporting/notification/updating directly. If your router's configuration is accessible from a web browser, try accessing it by logging into the local IP address of your router (for example, http://10.1.1.1/ or http://192.168.0.1/ ) and look for the Dynamic DNS (DDNS) settings.

However, even if your modem/router does support dynamic DNS reporting, there are cases in which you may wish to use a software utility on your computer to perform the updates anyway:
* you are using several Dynamic DNS services at once (most routers only accommodate one service at a time)
* the router does not support your particular Dynamic DNS service
* your server is on a mobile computer (e.g. laptop) which is not always connected to the same network/router/modem.

=== Using a software utility to perform Dynamic DNS Updates ===

There are several available utilities. Each Dynamic DNS service may work better with a particular utility. (You may need to add the Ubuntu Universe to your set of software repositories to install some of these utilities. See InstallingSoftware.)

==== ddclient ====
<nowiki>[[http://sourceforge.net/apps/trac/ddclient|ddclient]]</nowiki> is the original Linux utility for dynamic DNS updates. <nowiki>[[http://sourceforge.net/apps/trac/ddclient/wiki/Protocols|The ddclient wiki]]</nowiki> lists some configurations for several Dynamic DNS services. More info can be found on the <nowiki>[[http://sourceforge.net/projects/ddclient/forums/forum/399428|ddclient forums]]</nowiki>. The following section has been adapted from <nowiki>[[http://ubuntuguide.org/wiki/Dynamic_IP_servers|Ubuntuguide.org Dynamic IP servers]]</nowiki>.

* Install ddclient using a software package manager, or using the command-line interface:
<pre>
sudo apt-get install ddclient
</pre>

If this is the first time you have installed ddclient, you will be prompted by the installation script for the hostname(s) that you registered with DynDNS (or other Dynamic DNS service). You will also be prompted for the username/password your registered with your Dynamic DNS service. Lastly, you will be asked which ethernet port you primarily use to connect to the Internet (eth0 for wired or wlan0 for wireless, usually). Most of the time this is all you will need to do for the utility to function correctly.

You can also later edit the ddclient configuration file, however, to suit your specific needs (or if you make changes to your service, hostname, or other variables).

* Edit the ddclient configuration file (using kate instead of nano in Kubuntu, or gedit instead of nano in Ubuntu):
<pre>
 sudo nano /etc/ddclient.conf
</pre>

* To set the number of seconds between updates, I add the line
<pre>
 daemon=3600
</pre>

My dynamic IP only changes rarely, so I only check it hourly (3600 seconds in an hour).

* To use secure SSL communications, I add the line
<pre>
 ssl=yes
</pre>

* To use the DynDNS checkip service (which will autodetect your current IP address), I add the line
<pre>
 use=web, web=checkip.dyndns.com/, web-skip='IP Address'
</pre>

My configuration file now looks like:
<pre>
# Configuration file for ddclient generated by debconf
# 
# /etc/ddclient.conf
# 
# Check the current IP address. Either check the eth0 port for its current IP address (can't be used on a LAN),
# or use the DynDNS IP checking service.
 daemon=3600
 pid=/var/run/ddclient.pid
# use=if, if=eth0
 use=web, web=checkip.dyndns.com/, web-skip='IP Address'
# 
# Login and change the values at the DynDNS site, using SSL.
 protocol=dyndns2
 ssl=yes
 server=members.dyndns.org
 login=myDynDNSusername
 password='myDynDNSuserpassword'
 mysite_1.dynds.org,mysite_2.dyndns.org,mysite_3.dyndns.org
</pre>

Note: if this doesn't work, try changing web-skip to 'Current Address'

Note that the password must be enclosed in quotation marks, e.g 'myDynDNSuserpassword' for DynDNS.

To use ddclient with <nowiki>[[https://www.dynu.com|Dynu]]</nowiki> free dynamic DNS service, the configuration file is as followed:

<pre>
daemon=60                                                # Check every 60 seconds.
syslog=yes                                               # Log update msgs to syslog.
mail=root                                                # Mail all msgs to root.
mail-failure=root                                        # Mail failed update msgs to root.
pid=/var/run/ddclient.pid                                # Record PID in file.                                      
use=web, web=checkip.dynu.com/, web-skip='IP Address'    # Get ip from server.
server=api.dynu.com                                      # IP update server.
protocol=dyndns2                        
login=myusername                                         # Your username.
password=YOURPASSWORD                                    # Password or MD5 of password.
MYDOMAIN.DYNU.COM                                        # List one or more hostnames one on each line.
MYDOMAIN.COM
</pre>

Note: refer to this <nowiki>[[https://www.dynu.com/DynamicDNS/IPUpdateClient/DDClient|setup page]]</nowiki> for more information about updating subdomains.

* Ensure that the configuration is working:
<pre>
 sudo ddclient -daemon=0 -debug -verbose -noquiet
</pre>

* Note that you can add additional services and/or domain names to be updated simply by adding an additional block to the configuration file (appropriate for the service). Here is an example (see below for references to additional examples).
<pre>
 protocol=otherDDNSservice
 server=whatever.ddnsservice.org
 login=MyOtherDDNSserviceusername
 password=MyOtherDDNSservicepassword
 mysite4.dnsservice.org, mysite5.dnsservice.org
</pre>

===== Troubleshooting =====
The following details a <nowiki>[[http://linux.derkeiler.com/Mailing-Lists/Ubuntu/2007-12/msg01412.html|troubleshooting method]]</nowiki> used to repair a ddclient setup.

* Remove/purge all of the previous install attempts:
<pre>
sudo apt-get remove --purge ddclient
</pre>

* Install ssh & ssh socket so that you can send your password via ssh instead of in the clear:

<pre>
sudo apt-get install ssh libio-socket-ssl-perl
</pre>

''Note: ssh w/ddclient won't work without libio-socket-ssl-perl, so make sure that you install that even if you have ssh already installed.''

* Reinstall a current ddclient package from the repositories:

<pre>
sudo apt-get install ddclient
</pre>
At the prompts enter the appropriate values, for example:

* Dynamic DNS service provider: ''www.dyndns.com''
* DynDNS fully qualified domain names: ''your-hostname.dyndns.org''
* Username for dynamic DNS service: ''your-username''
* Password for dynamic DNS service: ''your-password''
* Interface used for dynamic DNS service: ''web''

* Modify the /etc/ddclient.conf to send the password using ssh and to properly check for the IP address:

<pre>
sudo gedit /etc/ddclient.conf
</pre>

Add entries for "daemon", "ssl" and replace "use=if, if=web" with "use=web" to match the following example:

<pre>

daemon=300
pid=/var/run/ddclient.pid
ssl=yes
use=web, web=checkip.dyndns.com/, web-skip='IP Address'
login=your-username
password=your-password
protocol=dyndns2
server=members.dyndns.org
your-hostname.dyndns.org
</pre>

''Reference for secure updates: https://www.dyndns.com/support/kb/using_ddclient_with_dyndns_services.html''

Now ddclient is set to run as a daemon. Because you had other ddclient configs previously, check:

<pre>
sudo gedit /etc/default/ddclient
</pre>

Check to make sure it contains the following lines:

<pre>
run_ipup="false"
run_daemon="true"
daemon_interval="300"
</pre>

''Note: you can set the interval shorter or longer, but if you do, also reset your /etc/ddclient.conf to match. https://bugs.launchpad.net/ubuntu/+source/ddclient/+bug/152875''

Now, just to be sure everything sticks I generally reboot at this point, then check the status afterward:

<pre>
sudo /etc/init.d/ddclient status
</pre>

You should see:

<pre>
Status of Dynamic DNS service update utility: ddclient is running
</pre>

However, that may not always catch problems in the ddclient.conf file, so issue:

<pre>
sudo /etc/init.d/ddclient restart
</pre>

if you do not get an error similar to the following you probably are good to go:

<pre>
WARNING: file /etc/ddclient.conf, line x
</pre>

Then I obtain a new IP address/lease from my service provider (shutting off the modem, having my router request a new lease, whatever) & monitor
https://www.dyndns.com/account/services/hosts/ to see if the change actually makes it to dyndns. Also monitor /var/log/syslog to watch the changes there as well.

''Also note that there is a password length limitation.''
* Not very well tested, but passwords >=64 characters in length seem to fail. If you have a fairly long password, try changing it something shorter temporarily (try 8 characters) to see if that's the problem.

====== Running ddclient with cron ======
<nowiki>[[http://pubs.opengroup.org/onlinepubs/9699919799/utilities/crontab.html|Cron]]</nowiki> is the automatic task scheduler for Linux systems. Although ddclient runs as a daemon, for various reasons I have found it necessary to force an update at least once a day. This can be done as a daily scheduled task, using cron.

* Edit the crontab with administrative (root) privileges:
<pre>
 sudo crontab -e
</pre>

* Add the line:
<pre>
 45 04 * * * /usr/sbin/ddclient --force
</pre>

This will run ddclient and force an update daily at 04:45. See <nowiki>[[http://pubs.opengroup.org/onlinepubs/9699919799/utilities/crontab.html|here]]</nowiki> for a full description of cron and its options or <nowiki>[[https://help.ubuntu.com/community/CronHowto|Ubuntu Community Help -- Cron]]</nowiki>.

==== Now-IP with Curl ====
Updating from Ubuntu is easy using just curl and Now-IP

<pre>
curl -u <email>:<password> "https://now-ip.com/update?hostname=<hostname>"
</pre>

==== Namecheap & Python ====
You can update with namecheap and python with the following script.
Use your prefered editor and create the file /home/USERNAME/update_dns
<pre>
import urllib2

urllib2.urlopen("http://dynamicdns.park-your-domain.com/update?host=%s&domain=%s&password=%s" % ("@", "YOURDOMAIN", "YOURPASSWORD"))
</pre>

Enter into the terminal
<pre>
crontab -e
</pre>

and add the following line
<pre>
* */1 * * * python /home/USERNAME/update_dns
</pre>

This will update every hour.

==== no-ip ====

This is another Dynamic DNS reporting client. Install the noip2 package from a software package manager, or from the command-line interface:
<pre>
sudo apt-get install noip2
</pre>

* Run no-ip and follow the installation prompts:
<pre>
sudo no-ip -C
Please enter the login/email string for no-ip.com: <your_login>
Please enter the password for user 'your_login': <your_password>
Please enter an update interval:[30] <interval time in minutes>
Do you wish to run something at successful update?[N] <N>
</pre>

* Start the no-ip client

<pre>
sudo no-ip
</pre>

==== inadyn ====

* Install the <nowiki>[[http://www.inatech.eu/inadyn/|inadyn]]</nowiki> package using a software package manager, or from the command-line interface:
<pre>
sudo apt-get install inadyn
</pre>

* Edit the file /etc/inadyn.conf:
<pre>
sudo gedit /etc/inadyn.conf
</pre>

It should contain something like:
<pre>
--username myusername
--password mypassword
--update_period 60000
--alias myhost.dyndns.org
--background
</pre>

* Test that it works:
<pre>
sudo /usr/sbin/inadyn
</pre>

* Add inadyn to your 'crontab':
<pre>
export EDITOR=gedit && sudo crontab -e
</pre>

Edit the file to add the following line:
<pre>
@reboot /usr/sbin/inadyn
</pre>
* Verify using:
<pre>
sudo crontab -l
</pre>

* When you reboot, you should see indyn listed when you type:
<pre>
ps -A | grep inadyn
</pre>

You should be able to log in to your Dynamic DNS provider's website and verify that the DNS entry is being updated. Certainly this is possible with www.dyndns.org, in any case. Alternatively you can type your hostname into a service like http://www.dnsstuff.com/.

==== Using dy.fi by cron tab ====

Edit crontab:
<pre>
sudo crontab -e
</pre>
Add lines To update ddns at 0610 mon-sat:
<pre>
10 06 * * 1-6 wget --delete-after --no-check-certificate --no-proxy --user=yourname@yourmail.fi --password=password 'http://www.dy.fi/nic/update?hostname=yourdomain'
</pre>

Add lines To redirect ddns and stop pointing 5.10pm mon-sat:
<pre>
10 17 * * 1-6 wget --delete-after --no-check-certificate --no-proxy --user=yourname@yourmail.fi --password=password 'http://www.dy.fi/nic/update?hostname=yourdomain&offline=yes'
</pre>

Another method is to install the perl script dyfi-update.pl
from http://www.dy.fi/page/clients 

=== Using your Modem/Router to perform Dynamic DNS Updates ===

Here are some example screenshots from Wireless Routers that support dynamic DNS updates:

Netgear router example:

 <nowiki>[[File:dyndns.jpg]]</nowiki>

D-Link router example:

 <nowiki>[[File:routerdyn.jpg]]</nowiki>

Linksys/Cisco router example:

 <nowiki>[[File:linksysdyndns.jpg]]</nowiki>

== Redirecting a registered hostname to a dynamic DNS name ==
A user may already have a hostname registered with a name server that does not have Dynamic DNS capabilities. Most DNS services allow URL forwarding, however.  That makes it possible to set up a free Dynamic DNS service (using the instructions above) with a free hostname (URL) and then forward the previously-registered static hostname (URL) to the Dynamic DNS hostname (URL).

For example, I set up a free Dynamic DNS hostname URL at DynDNS.com that is ''foobar.dyndns.org''. I set up my software utility (DynDNS likes ddclient or inadyn) to constantly update the Dynamic DNS database for ''foobar.dyndns.org''.

However, I have used ''example.myoriginalfoobar.com'' as a registered hostname (URL) for years, with a static DNS service (DinosaurDNS.org) that doesn't have Dynamic DNS capabilities. I login to DinosaurDNS.org and set my DNS record for ''example.myoriginalfoobar.com'' to forward (using a CNAME (Alias) record) to ''foobar.dyndns.org''.

Now anyone trying to access ''example.myoriginalfoobar.com'' will be redirected to ''foobar.dyndns.org'', which will then redirect them to whichever IP address my Dynamic DNS updating utility has specified.

Using forwarding rules, an infinite number of URLs can be forwarded to a single dynamic URL. (The primary host that resides at the destination IP address must then resolve the forwarded URLs (using virtual host or .htaccess files) and direct them to the appropriate server on the computer (or LAN).) For this reason, it is only necessary to have one dynamic DNS URL for your computer (or LAN).

=== CNAME aliases ===
Different DNS registrars have different methods of forwarding a URL, but in general there is one method common to all of them: CNAME aliases.

If you have a URL registered with a DNS registrar, go to the DNS settings for your domain name. Delete any A records (or other entries) and use only CNAME entries.

For example, let's say my free Dynamic DNS URL is ''foobar.dyndns.org'' (at DynDNS.com). My domain URL is ''myoriginalfoobar.com'', registered at DinosaurDNS Registrar.

Logging into DinosaurDNS Registrar, I edit the DNS settings for ''myoriginalfoobar.com'' (which in my control panel is found under ''Manage DNS''). I make sure I have these entries:
<pre>
 Name Type Content
 @ CNAME foobar.dyndns.org.
 www CNAME foobar.dyndns.org.
 example CNAME foobar.dyndns.org.
</pre>

The period ("full stop") at the end of the URL is important to designate that the CNAME is a FQDN (fully qualified domain name). A CNAME should not have "http://" in it. The @ symbol indicates a URL name without the first segment, e.g. the URL ''myoriginalfoobar.com'' by itself. In this example, I am forwarding ''myoriginalfoobar.com'', ''www.myoriginalfoobar.com'', and ''example.myoriginalfoobar.com''.

Using CNAME aliasing, the original URL is retained in the browser. It is up to you (using virtual host files or Rewrite rules in the .htaccess files of Apache, for example) if you wish to massage the URL at your server (to change it to a canonical name) or redirect it.

== Other resources ==
Much of this page was adapted from the original articles at:

* <nowiki>[[http://ubuntuguide.org/wiki/Dynamic_IP_servers|Ubuntuguide.org Dynamic IP servers]]</nowiki> -- information about Dynamic DNS and setting up one or more webservers using Dynamic DNS with ddclient
* <nowiki>[[http://www.kubuntuguide.info/index.php/Dynamic_IP_servers|Kubuntuguide Dynamic IP servers]]</nowiki> -- information about Dynamic DNS and setting up one or more webservers using Dynamic DNS with ddclient

----
CategoryInternet CategoryNetworking
