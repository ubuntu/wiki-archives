{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



== PCTel Modems ==

In order to use PcTEL Micromodem 56 (HSP56 MicroModem Pctel, or any other modem supported by driver) you will have to switch to kernel 2.6.8.1 or lower. Even so, some units will NOT work with 2.6 kernel (consult README file in driver archive), but all of them work with 2.4 kernels. To make the short story long, going online on Ubuntu 5.10 aka. Breezy Badger you have to do four things: (before u do all this, read this section until the end)
I. get some utilities (gcc & initrd among else)
II. get vanilla kernel on www.kernel.org (I suggest) 2.6.8.1
III. Recompile the kernel
IV.Install the driver and configure ppp

Here are the details:
(I will assume your kernel source is in /usr/src

Open terminal and use root privileges <pre>
sudo apt-get install gcc-3.4 build-essential libncurses5-dev kernel-package gnome-ppp
sudo ln -sf /usr/bin/gcc-3.4 /usr/bin/gcc # this will make your system use gcc 3.4 instead of 4.0.2 This is necessary because you will not be able to compile kernel with gcc-4 series</pre>
Go to your downloaded kernel folder
<pre>
sudo tar -xvfj kernel-2.6.8.1.tar.gz
cd kernel-2.6.8.1
sudo make mrproper
sudo make xconfig #if xconfig doesn't work use menuconfig or gconfig instead
</pre>
Configure your kernel if you know what you are doing, but you don't since you are reading this so don't do anything you are not 100% sure about. <pre>
File-> Load go to /boot and select config-2.6.12-9-386 or current config file (check with uname -r in a separate terminal)
sudo make-kpkg clean
sudo make-kpkg --initrd --revision=custom.1.0 kernel_image

After couple of hours, or less depending on you CPU....
cd /root
sudo dpkg -i kernel-image-2.6.8.1_custom.1.0_i386.deb
</pre>

If something goes wrong you will have to delete folder in <code>/usr/src</code> with your new kernel's name, NOT your default kernel.

If something goes wrong, go to where your kernel source is and run <code>sudo make clean </code> and repeat everything above. If you are using GRUB that's it. No more. If you are using LILO, google a bit and you'll find how to configure it.

Only one note here: you will not see standard Ubuntu splash on boot process; screen will be black, but the boot will go as normal. If you want to see what is happening go to /boot/grub and open menu.lst and under line that goes boot /boot/vmlinus something...something <code> quiet splash </code> delete <code> splash </code>. Or, if you will you can go on-line and find a better way to do this. There are enough resources.

Second, if you are messing with configuration of the kernel, '''DO NOT''' change things you are not sure about. Sure, feel free to select only your graphic/music card or such things, but if you are not sure if you need something don't remove that. Remember, these are the settings that '''work'''.

* Actually, if this compiled kernel doesn't work, you will have to add some changes... and here they are: (you can do this in the first attempt)
<pre>
CONFIG_BLK_DEV_RAM=y
CONFIG_BLK_DEV_RAM_SIZE=16384
CONFIG_BLK_DEV_INITRD=y
</pre>
These settings may be changed in Block Devices in kernel configuration or you can open file /boot/config-2.6.8.1 and look for these lines (if they don't exist, make them).First thing seems to be nesessary only on older Pcs, but what does old mean is beyond me. I have Pentium II 400 Mhz @ 128 Mb RAM and it takes three hours to compile kernel if no changes are made to config file. Final size is cca. 12 Mb, however fully customized kernel is around 2 MB and it takes 30 minutes to compile. You can speed up the process by killing gdm and all the stuf you dont need. Here is how to: f1+ctrl+alt and then use sudo <pre>
sudo /etc/init.d/gdm stop
</pre>
now continue with <code> make menuconfig </code> ...

See http://www.falkotimme.com/howtos/debian_kernel2.6_compile/ for more help on this (kernel compilation) step.

You will now have to download <nowiki>[[http://linmodems.technion.ac.il/pctel-linux/pctel-0.9.7-9-rht-6.tar.gz|modem drivers]]</nowiki> and install them. Simply run <pre>
sudo ./setup
Or in the ~/src folder
sudo ./configure
sudo make
sudo make install
</pre>
from within the '''untarred''' modem driver directory. In order to use second method you will have to copy your kernel source to /usr/src. Do this Only AFTER you have successfuly compiled the kernel, and DO NOT compile it from /usr/src.

Final step: once you have sucessfuly compiled the kernel and the drivers you will whish to be able to load the drivers every time you boot the machine. Here is how you do it: go to /etc and look for file called modules. Open it and add following lines:
<pre>
linmodem
pctel
pctel_hw
</pre>

You can also load them by

<pre>
sudo modprobe linmodem
sudo modprobe pctel
sudo modprobe pctel_hw
</pre>

In the end, you will have two kernels you can chose among, if something goes wrong. Rememember that what you do by using one kernel will not be undone when you use the other one.

=== Notes ===
Original forum post here: http://ubuntuforums.org/showpost.php?p=928212&postcount=10 The OP couldn't edit the wiki, I thank him for his time and effort for contributing.

Also see http://ubuntuforums.org/showthread.php?t=171163
