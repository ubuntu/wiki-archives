{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



== Modems supported by the Intel536EP driver ==

This page describes how to install the driver for the Intel 536EP
internal modem on Ubuntu for i386 systems. Some of these are sold
as Cnet modems and have Ambient chips on board.
Note that according to the tel-Readme.txt, the driver works only for 32 bits systems.
The process below
is quick easy and works quite well.

You can tell if you have this type of modem by running this command in a Linux shell/terminal:
<pre>
lspci | grep 536EP
</pre>

If you receive no output from that command, then you do not have an Intel 536ep modem. If you do have the modem, you should have received output similar to this:
<pre>
01:0b.0 Communication controller: Intel Corporation 536EP Data Fax Modem
</pre>

'''Update: '''
 '''Most people (NEW USERS) can skip compiling process and download the driver already prepackaged (deb file) from the following location: <<BR>>
* <nowiki>[[http://groups.google.com/group/ubuntu-modems/web/modem-driver-downloads-for-536ep]]</nowiki>'''

''As of this writing, compilation and usage has been tested on 5.10 through 9.04. There is a minor complication on 5.10, discussed below. (Only compilation has been tested on 5.04 and nothing at all tested on 4.10.)''

=== Install required Ubuntu packages ===

Just a note to keep the link to the web page for Intel 536EP and 537EP on the web site of Philippe Vouters (who seems to update the driver for new kernel release): http://www.x9000.fr/Intel/

Ubuntu 5.04 (Hoary Hedgehog)
 Make sure you have followed the section entitled ''If compiling from source'' in <nowiki>[[DialupModemHowto-FromSource|here]]</nowiki>.

Ubuntu 5.10 (Breezy Badger)
 Make sure you have followed the sections entitled ''If compiling from source'' and ''Installing GCC 3.4'' in <nowiki>[[DialupModemHowto-FromSource|here]]</nowiki>.

Ubuntu 6.06 (Dapper Drake)
 It's not clear if you need GCC 3.4; it will probably work with the 'normal' gcc you get when following the ''Compiling the driver'' section below.

Ubuntu 6.10 (Edgy Eft) and 7.04 (Feisty Fawn)
 No extra packages are required.

=== Get the driver itself ===

Download the drivers for the modem.

For Ubuntu 5.04, 5.10 and 6.06, use this link:
 http://downloadfinder.intel.com/scripts-df-external/Detail_Desc.aspx?agr=Y&ProductID=977&DwnldID=9266&strOSs=39&OSFullName=Linux*&lang=eng

For 6.10, use this instead:
 http://linmodems.technion.ac.il/packages/Intel/Philippe.Vouters/intel-536EP-2.56.76.0_21_09_2006.tgz

For 7.04, try this:
 http://linmodems.technion.ac.il/packages/intel/Philippe.Vouters/intel-536EP-2.56.76.0_23_02_2007.tgz
or this:
 http://www.mrgtech.ca/intel_536ep_feisty.tar.gz

As of today, March 11 2009, the latest driver is:
  http://linmodems.technion.ac.il/packages/intel/Philippe.Vouters/intel-536EP-2.56.76.0_2009_02_08.tar.bz2

Make sure you know where you've saved this file, which is named `Intel-536EP-4.71.tgz` or `intel-536EP-2.56.76.0_21_09_2006.tgz` or `intel-536EP-2.56.76.0_23_02_2007.tgz`or 
`intel-536EP-2.56.76.0_2009_02_08.tar.bz2`; for the purposes of this document it will be assumed that it is in your home directory (which is /home/<username>, where <username> is your username).

=== Compiling the driver .tgz ===

First we need to uncompress the downloaded file. Start a terminal window and run the following command:
<pre>
tar -xjf intel-536EP-537EP-20*.tar.bz2
</pre>

or (for 8.04)
<pre>
tar -xzf Intel-536EP-4.71.tgz
</pre>

or (for 6.10)
<pre>
tar -xzf intel-536EP-2.56.76.0_21_09_2006.tgz
</pre>

or
<pre>
tar -xzf <filename>
</pre>

or
<pre>
tar -xjf <filename>
</pre> in the case of the more recent versions ending with .bz2

where <filename> is the name of the downloaded file.

This assumes you saved the file downloaded from Intel in your home directory; otherwise, type `cd <directory-where-the-file-is>` before typing the `tar` command above.

This will create a directory `Intel-536` with the source contained in it. Change to this directory by typing
<pre>
cd Intel-536
</pre>

or (for 6.10 and 7.04)
<pre>
cd intel-536EP-2.56.76.0
</pre>

Still in the terminal window, type the following: 
<pre>
make clean
</pre>

This should produce output looking like this: 
<pre>
Try `uname --help' for more information.
cd coredrv; make clean
make[1]: Entering directory `/home/rory/Intel-536/coredrv'
rm -f *.ko *.o *~ core
make[1]: Leaving directory `/home/rory/Intel-536/coredrv'
rm -f *.o *.ko
</pre>

Now type 
<pre>
make 536
</pre>

This will result in many lines of output being printed to the terminal window; you can ignore most of them. The final lines should look like this: 
<pre>
CC      /home/rory/Intel-536/coredrv/Intel536.mod.o
LD [M]  /home/rory/Intel-536/coredrv/Intel536.ko
make[2]: Leaving directory `/usr/src/linux-headers-2.6.12-9-386'
make[1]: Leaving directory `/home/rory/Intel-536/coredrv'
</pre>

There should be an `Intel536.ko` file in the directory now; test this by typing `ls -l Intel536.ko`; the output should look like
<pre>
-rw-r--r--  1 rory rory 1070520 2005-10-16 21:02 Intel536.ko
</pre>

The file size should be similar, though probably not identical.

=== Installing the driver ===

There are two steps to installing the driver. The first is to copy the Intel536.ko file created above to an appropriate directory, and the second is to cause the driver to be loaded at boot time.

''Installing the Intel536.ko file''

Copy the file to the modules directory by this command: 
<pre>
sudo cp Intel536.ko /lib/modules/$(uname -r)/kernel/drivers/char
</pre>
 
You may be prompted for a password; if so, enter your user password.

Make your system aware of this module with `depmod`: 
<pre>
sudo depmod -a
</pre>

Finally, load the driver with the `modprobe` command: 
<pre>
sudo modprobe Intel536
</pre>

This command should not print a response; if it prints something like this: 
<pre>
FATAL: Module Intel536 not found.
</pre>

you have made an error; most likely you have copied the file to the wrong place. If you see a different error message, there may be an error in the module, or your modem, or you may not have a Intel 536-based modem.

''Loading the driver at boot time''

To load the module at boot time, we need to add a line "<code>Intel536</code>" to the file /etc/modules. First make a backup of the file:
<pre>
sudo cp /etc/modules /etc/modules.backup
</pre>

Now run this to add the required line:
<pre>
sudo sh -c "echo Intel536 >> /etc/modules"
</pre>

=== Setting up the modem ===

The name of your modem device is `/dev/536ep0`.

Kubuntu Users:
To use KPPP you will need to create a symlink to /dev/536ep0 from /dev/modem. Udev rewrites everything in /dev on each reboot, thus erasing this symlink. So you have to create a ''rule'' for udev to recreate the symlink. You can add the needed rule by running this command:
<pre>
sudo echo -e '# Intelmodem536ep\nKERNEL=="536ep0", SYMLINK=="modem"' >> /etc/udev/rules.d/10-local.rules
sudo ln -s /dev/536ep0 /dev/modem
</pre>

'''After completing all of the above steps, you may need to reboot before you can access your modem.'''

=== Connecting ===
Dialing programs that will NOT work with this modem:
* The Gnome Network program
* pppconfig

Dialing programs that WILL work with this modem: ''(because they allow 'stupid mode')''
* wvdial
* Gnome-ppp
  ''Currently, the graphical program gnome-ppp is not included in the standard installation, but once you are connected with wvdial, you can easily install it with the <nowiki>[[Synaptic]]</nowiki> Package Manager.''
* KPPP

To setup wvdial, first make a backup of the current configuration file:
<pre>
sudo mv /etc/wvdial.conf /etc/wvdial.conf.bak
sudo touch /etc/wvdial.conf
</pre>

Next open the file /etc/wvdial.conf as root with an editor. (You can use the command <code>sudo gedit /etc/wvdial.conf</code> ) Copy the text below into that file. Modify the text so that your Dialup Phone#, Username, and Password are correct for your service. When finished, save and exit the file.
<pre>
[Dialer Defaults]
Modem = /dev/536ep0
Baud = 115200
Init = ATZ
New PPPD = yes
Stupid Mode = 1
Auto Reconnect = off
Dial Attempts = 1

Phone = 1234567
Username = ExampleName
Password = ExamplePassword
</pre>

You should be able to start your connection by typing into a shell/terminal:
<pre>
wvdial
</pre>

<nowiki>[[DialupModemHowto|Go back to the main wiki]]</nowiki>
