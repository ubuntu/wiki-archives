{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


<nowiki>[[File:IconsPage/info.png]]</nowiki> These are debconf seed files to help you customize an Ubuntu installation CD.  For more information, see <nowiki>[[InstallCDCustomization]]</nowiki>.

=== 100% automatic installation script ===
This preseed file was written by CraigBox for his employer, <nowiki>[[http://www.itpartners.co.nz/|IT Partners]]</nowiki>.  It automatically partitions and installs a machine, including a complex setup script that is run on first boot.

<pre>

d-i     base-installer/kernel/override-image    string linux-server
d-i     base-installer/kernel/linux/extra-packages-2.6  string

d-i     archive-copier/desktop-task     string ubuntu-standard
d-i     archive-copier/ship-task        string

d-i     pkgsel/install-pattern  string ~t^ubuntu-standard$
d-i     pkgsel/language-pack-patterns   string

base-config     base-config/install-language-support    boolean false

d-i     preseed/late_command            string cp -a /cdrom/preseed/install.sh /target/root; sed -i 's_exit 0_sh /root/install.sh_' /target/etc/rc.local; 

d-i     netcfg/choose_interface select auto

d-i     netcfg/get_hostname     string unassigned-firewall
d-i     netcfg/get_domain       string unassigned-domain

d-i     netcfg/wireless_wep     string

d-i     mirror/country          string New Zealand
d-i     mirror/http/hostname    string nz.archive.ubuntu.com
d-i     mirror/http/directory   string /ubuntu
d-i     mirror/suite            string dapper
d-i     mirror/http/proxy       string

d-i     partman-auto/disk       string /dev/discs/disc0/disc

d-i     partman-auto/expert_recipe      string boot-root :: 100 50 100 ext3 $primary{ } $bootable{ } method{ format } format{ } use_filesystem{ } filesystem{
 ext3 } mountpoint{ /boot } .  500 10000 1000000000 ext3 method{ format } format{ } use_filesystem{ } filesystem{ ext3 } mountpoint{ / } .  64 512 2048 linux
-swap method{ swap } format{ } .

d-i     partman/confirm_write_new_label boolean true
d-i     partman/choose_partition        select Finish partitioning and write changes to disk
d-i     partman/confirm                 boolean true

d-i     grub-installer/only_debian      boolean true
d-i     grub-installer/with_other_os    boolean true

d-i     prebaseconfig/reboot_in_progress        note

d-i     clock-setup/utc                 boolean true
d-i     time/zone                       string Pacific/Auckland

passwd          passwd/root-password            password whatever
passwd          passwd/root-password-again      password whatever

passwd          passwd/root-login               boolean true
passwd          passwd/make-user                boolean false

d-i     preseed/include string  debconf/exim.cfg debconf/clamav.cfg debconf/mailgraph.cfg debconf/ntop.cfg debconf/samba.cfg debconf/ssh.cfg
</pre>

In the 'debconf' directory I keep answers for packages that would otherwise ask questions at installation time.  I built these from the output of `debconf-get-selections`.  For example, exim.cfg contains:

<pre>
exim4-config    exim4/dc_noalias_regenerate     boolean false
exim4-config    exim4/dc_smarthost      string
exim4-config    exim4/dc_relay_domains  string
exim4-config    exim4/dc_relay_nets     string
exim4-base      exim4/purge_spool       boolean false
exim4-config    exim4/mailname  string  localhost.localdomain
exim4-config    exim4/dc_local_interfaces       string
exim4-config    exim4/dc_minimaldns     boolean false
exim4-config    exim4/exim3_upgrade     boolean true
exim4-config    exim4/dc_other_hostnames        string
exim4-config    exim4/dc_eximconfig_configtype  select  internet site; mail is sent and received directly using SMTP
exim4-config    exim4/no_config boolean true
exim4-config    exim4/hide_mailname     boolean
exim4-config    exim4/dc_postmaster     string
exim4-config    exim4/dc_readhost       string
exim4-config    exim4/use_split_config  boolean true
exim4-base      exim4/move_exim3_spool  boolean false
</pre>

In install.sh, you can put anything you want to run at first boot.  I wanted finer grained control over what installed, in the way I had with base-config (which was removed with Ubuntu 6.06).  This file runs once, called from /etc/rc.local, and then modifies the rc.local script so it will not run again:

<pre>
INSTALL="apt-get install -y"
REMOVE="apt-get remove -y"

apt-get update

$INSTALL exim4-daemon-heavy mailx mailgraph

sed -i 's_sh /root/install.sh_exit 0_' /etc/rc.local

echo "Installation complete."
</pre>

----
* Return to <nowiki>[[InstallCDCustomization]]</nowiki>.

----
CategoryInstallation CategorySystem CategoryEmail
