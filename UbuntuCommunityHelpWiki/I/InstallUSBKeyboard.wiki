{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



== Introduction ==
''Recurrent posts in the community forums cover problems connected with the installation of USB keyboards. This document shows a simple step-by-step procedure to gain access to this kind of USB devices.''

Please notice that this help document covers problems appearing up to, and not included, the operating system's (from now "o.s.") log-in phase. Further explanations regarding USB keyboards problems during and after the log-in phase are strictly related to configuration issues of o.s. installation thus out of the scope to this document.

What we try here, is to ensure that once connected a USB keyboard to a USB port, you are enabled to use it to access the BIOS setup and the bootloader's menu' (be it Grub, LiLo or whatever...) to select and start the required operating system.

== Background information ==
We have to distinguish three specific and chronologically ordered situations where a USB keyboard is used:
 1) to enter and optimise the BIOS setup;<<BR>>
 2) to select the operating system to boot, by the use of the boot manager (e.g. Grub, LiLo...);<<BR>>
 3) during and after o.s.' log-in (both in the character terminal as in graphic windowing mode).<<BR>>

Coherently with what we have stated before, only the first two options are covered on this document, therefore some rough indications are given at the end of this document to address the right destination for your further actions.

== Prerequisites ==
In order to go on with this "tutorial" you have to satisfy to some prerequisites.<<BR>>
It is required to:
 a) be able to access the PC through a PS/2 keyboard;<<BR>>
 b) know how to access to the BIOS;<<BR>>
 c) search two BIOS options, "USB keyboard support" or "USB legacy support", "PnP managed by OS" or options labeled in some similar way (depending from the BIOS brand and version your mother board uses).<<BR>>

== Preparation ==
Any connection/disconnection of USB devices during the procedures described in this document, has to be made with the PC powered OFF.

To have no interference and to simplify operations, please, preventively detach any other USB device from the computer. This will also avoid them to be stressed by the probably required repetitive reboot activities.

== Hardware checkset ==
Hardware issues are often the cause of USB keyboards as other USB devices' malfunction, so let we check the state of the art.

If you are using an external USB-HUB it is recommended to disconnect it and plug the USB keyboard directly to one of the PC's native USB ports (not to an extension board' USB port!).<<BR>> 
This because some low-end USB-HUBs are only partially compatible to the USB standards, so they may interfere with normal messaging between the system and the various attached USB devices wrongly inducing you, in some cases, to think your USB keyboard is stuck.
<<BR>>
Additionally USB-HUBs are the devices at most failure risk due to rough handling, low hardware quality or environmental injuries. So a check will help you avoiding the first problem source you may meet during this ongoing procedure. 

If your USB now works, take in account to seriously suspect your USB HUB or another USB device is creating the problem. Check them singularly and place the culprit directly into the trash as it may seriously damage other USB devices if not your PC's USB ports.

If this doesn't help, go on reading the following steps. Don't forget to reset the PC to check any modification made!

== Software checkset ==
'''Situation 1. - Enter and optimise the BIOS setup'''<<BR>> 
During the POST (Power On Self Test), when the PC is running up for a power-on or a reset, the USB keyboard input is managed by the BIOS routines, if set up to do so.
<<BR>>
If not, there is no way the USB keyboard can be recognised and a PS/2 type keyboard is expected to be connected to its port by default instead.

As long as your USB keyboard isn't recognised, you aren't able to access the BIOS so you can't do anything else as to connect a PS/2 type keyboard, access the BIOS... 
 
<<BR>>
<nowiki>[[File:USBKBRDInstall-POST01.jpg]]</nowiki>

...by the use of [Del], [F1], [F2], [F9] or whatever key is indicated at the early stages of the start-up process of the PC,

<<BR>>

<nowiki>[[File:USBKBRDInstall-BIOS-USBKBDON.jpg]]</nowiki>

and enable the "USB keyboard support" or "USB legacy support" option that can be found in the BIOS.

<<BR>>
Save, exit and reset. If, in spite of the precedent set-up, the BIOS continues refusing to recognise the USB keyboard (e.g. you can't go into the BIOS by pressing the correct key on the USB keyboard) you have a second chance to convince it to.

Use the PS/2 keyboard to enter the BIOS again, 

<nowiki>[[File:USBKBRDInstall-BIOS-PnPBIOSon.jpg]]</nowiki>

and look at the "PnP mode" option.
PnP is the procedure to set-up extension cards and some on-board' chips connected to the PCI bus.
As USB controllers in your computer (both on-board as the eventually added expansion cards) are connected to the PCI bus, they have to be set-up by the BIOS to have the USB keyboard working at the early POST phase. 

There are two configuration modes available for PnP:

. the BIOS has to manage the PnP setup;
<<BR>>
. the operating system deals with the PnP setup.

You have to explicitly specify the BIOS has to manage the PnP mode (and not the operating system), to obtain the USB keyboard recognised during this phase.

Verify this and, on change, save, exit the BIOS and reset the PC to control if the USB keyboard is now alive.

<<BR>><<BR>>
(Situation 2.) When the boot manager's menu' appears on the screen no key on the USB keyboard enables you to move the selection to one different item from the default one that will start the boot automatically after a few seconds.

This means that you haven't successfully managed the instructions in "situation 1."!

''It must be clear that no boot manager loads any keyboard device-driver so it expects the BIOS to manage the USB keyboard correctly!''

'''''During this stage the o.s. hasn't been already loaded so no change to the o.s. configuration will solve the problem!'''''

You have no choice, go back to Case 1., and work to solve the situation from there.

<<BR>>
(Situation 3.) So you have managed to get the USB keyboard recognised by the BIOS, and in Grub (or LiLo) you are able to select a choice different from the default by the use of the up/down arrows keys.

After a not so long time (we hope), the log-in screen appears but you discover to be unable to write any character into the user/password fields, or if you started from a live CD-R/DVD and you aren't able to write with your keyboard to any application you run from the desktop.

From this point on, problems related to the USB keyboard have to be conducted, in some way, to the Linux operating system configuration issues (and in rare cases to bugs).

In this case, the principal sources of the problem to be searched in are:

 . incorrect o.s. setup files for character mode terminal emulation (e.g. the recovery mode in *ubuntu);<<BR>>
 . incorrect window server setup files for graphic windowing environment (when the windowing mode is run, e.g. Xwindow in Linux)<<BR>>
 . missing, wrong, bugged keyboard device drivers;<<BR>>
 . unsupported USB devices.<<BR>>

As stated before this case isn't covered in this document. This because the verifications/operations to be made to get the USB keyboard working are so many and depending from e.g. the window manager used, to justify separate documentation.

<<BR>>
{| class="wikitable"
|-
| <tablestyle="float:right; font-size: 0.6em; width:20%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.6em;">Started 19-06-2008 and supervised by Andreas Troschka
|}

-##
