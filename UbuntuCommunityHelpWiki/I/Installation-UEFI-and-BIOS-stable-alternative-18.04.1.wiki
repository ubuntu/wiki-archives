{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


<nowiki>[[..-|Return to the main UEFI-and-BIOS page]]</nowiki>
-----

== Stable alternative with Lubuntu 18.04.1 LTS ==

=== Portable system that boots and works in most computers ===

This page describes a combination of portable systems that boots and works in most PC computers (laptops, desktops and workstations with Intel or AMD processors).

* During the last ten years most personal computers that were manufactured and sold contain 64-bit processors, so I am focusing on 64 bit systems.

* Lubuntu 18.04.1 LTS was selected due to the light foot-print, which helps when running from an external drive, typically a fast USB 3 pendrive or memory card, but a USB 3 SSD is a powerful alternative.

There is a

* [persistent] live system for maximum portability, and
* an installed system for maximum stability and flexibility (possible to update and upgrade only limited by the drive space).
* Both systems are quite portable, stable and flexible, when used carefully.

=== Live, persistent live and installed systems ===

The compressed image file

'''dd_lubuntu-18.04.1-desktop-amd64-persistent-n-installed_15GB.img.xz'''

contains a

* a live part, that can be run as 
** live-only
** persistent live
** installer
* an installed part (installed like into an internal drive)

=== UEFI and BIOS ===

All these operation modes work in

* UEFI mode (including secure boot) and
* BIOS mode (alias CSM alias legacy mode)

=== Grub menu ===

{| class="wikitable"
|-
| Run '''installed Lubuntu''' (installed like into an internal drive) <nowiki>[[File:01-persistent-n-installed_15GB_grub-menu-cropped.png]]</nowiki>
| Run '''persistent live''' Lubuntu <nowiki>[[File:02-persistent-n-installed_15GB_grub-menu-cropped.png]]</nowiki>
|-
| Run '''live-only''' Lubuntu, 'Try' <nowiki>[[File:03-persistent-n-installed_15GB_grub-menu-cropped.png]]</nowiki>
| '''Install''' Lubuntu (into another drive) <nowiki>[[File:04-persistent-n-installed_15GB_grub-menu-cropped.png]]</nowiki>
|}

=== Links to file and md5sum ===

You can find the compressed image file and the md5sum via these links,

* <nowiki>[[https://phillw.net/isos/linux-tools/uefi-n-bios]]</nowiki>
* <nowiki>[[https://drive.google.com/open?id=0BzX-18u3W1sQUXI2YV95dHJxVlE]]</nowiki> (alternate link)

=== User and password in the installed Lubuntu system ===

{| class="wikitable"
|-
| <#CCFF99> user: guru
|-
| <#CCFF99> password: changeme
|}

== Construction ==

=== Basics ===

The Lubuntu systems in this compressed image file were installed and combined inspired by a <nowiki>[[https://askubuntu.com/questions/16988/how-do-i-install-ubuntu-to-a-usb-key-without-using-startup-disk-creator/984285#984285|method originally described by C.S.Cameron]]</nowiki>.

* Use <nowiki>[[https://help.ubuntu.com/community/mkusb|mkusb]]</nowiki> to create an persistent live drive.
* Modify the partition table with 'gparted'.
* Install the installed system.
* Move 'grub.cfg' of the installed system to the location of that of the persistent live drive.

=== Extras ===

I modified/added the following steps.

* Remove the swap file from the installed system
** to avoid excessive wear of a pendrive or memory card.
** If you wish you can create a swapfile and point to it from 'fstab'.
* Update and upgrade the installed system to be up to date 2019-02-07.
** The kernel version of the installed system is '''4.15.0-45'''.
** The kernel version of the 18.04.1 LTS iso files is '''4.15.0-29'''.
* Install 'mkusb' and 'lubuntu-restricted extras' into the installed system.
* Copy 'grub.cfg' of the persistent live drive to '40-custom' of the installed system.
* Run 'sudo update-grub' to merge the grub menuentries of the persistent live drive into that of the installed system.
* '''Copy 'grub.cfg' of the installed system to the location of that of the persistent live drive. This step must be repeated every time the installed system is upgraded with new kernels or other packages that affect 'grub.cfg''''.
* Clean the system to make the compressed iso file as small as possible.

=== Screenshot of the installed Lubuntu system ===

<nowiki>[[File:05-persistent-n-installed_15GB_grub-menu.png]]</nowiki>

==== Comments to the screenshot ====

The system was run in !VirtualBox in order to get screenshots of the grub menu. I continued into the installed system and this screenshot.

* 'lsb_release -a' prints 'Ubuntu 18.04.1 LTS'
* 'uname -a' prints version '4.15.0-45' of the linux kernel
* 'lsblk' describes the partition table with 6 partitions.
** Partition #2 is the 'bios_grub' partition, necessary to boot a GPT partition table in BIOS mode.
* 'free -m' shows the available and used RAM (and swap = 0 because the swapfile is removed).
* 'less /etc/grub.d/40_custom' can be used to view the content from 'grub.cfg' of the persistent live drive.

* The part of '.bash_history' above the separator '#####...' is left in order to show important commands. '''The high-lighted three lines can be used to update 'grub.cfg' and to transfer it to the location, that the bootloaders point to, in '/dev/sdx3''''.
** Please modify the drive letter 'x' to the actual letter, when you intend to run the operation.

== Install from the compressed image file ==

Remember to check with '''md5sum''', that the download of the compressed image file was successful.

The size of the target drive must be at least 16 GB (nominal size, there is some margin for 'undersized' drives)

It is straight-forward to install from the compressed image file with <nowiki>[[https://help.ubuntu.com/community/mkusb|mkusb]]</nowiki>.

If you clone with another tool, you should run <nowiki>[[..-stable-alternative#gpt-fix|gpt-fix]]</nowiki> in order to match the gpt data to the current drive size (mkusb version 10.6.6 or newer versions of mkusb, runs gpt_zap and gpt_fix built-in).

'''See the detailed description at this link''': <nowiki>[[..-#Installation_from_a_compressed_image_file]]</nowiki>

== Tweak the system ==

The system in the compressed image file is intended for external drives, primarily USB pendrives and memory cards, but can be used in an SSD or even HDD (external or even internal if you wish).

You may want to tweak the installed system:

* add (restore) a swap file (or partition), if there is not enough RAM, and there is a risk that programs fail because they run out of memory.
* remove journaling to reduce wear (but make the system more sensitive to corruption).
* add the mount option noatime in '/etc/fstab' to reduce wear

and you '''should'''

* Change the password to 'your own' to get some basic security, but the system is not encrypted, so it is easy for an experienced user to see your files anyway.
* Grow the 'installed-root' partition to use the whole drive.
** There will only be a minor improvement in a 16 GB drive but
** in larger drives, it is a must to grow the 'installed-root' partition or to create another 'data' partition to use the unallocated drive space.

See more details at <nowiki>[[..-stable-alternative#Tweak_the_system]]</nowiki>

== System installed in a 16 GB USB 3 pendrive running in an Intel NUC ==

{| class="wikitable"
|-
| '''Running installed Lubuntu'''
| '''Running persistent live Lubuntu'''
|-
| <nowiki>[[attachment:06-persistent-n-installed_15GB_installed-in-pendrive.png|See details in full size screeshot]]</nowiki>  <nowiki>[[File:06-persistent-n-installed_15GB_installed-in-pendrive-half-size.png]]</nowiki>
| <nowiki>[[attachment:07-persistent-n-installed_15GB_persistent-live-in-pendrive.png|See details in full size screeshot]]</nowiki> <nowiki>[[File:07-persistent-n-installed_15GB_persistent-live-in-pendrive-half-size.png]]</nowiki>
|}

-----
<nowiki>[[..-|Return to the main UEFI-and-BIOS page]]</nowiki>
