{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


Return to <nowiki>[[https://help.ubuntu.com/community/Lubuntu-fake-PAE|Lubuntu-fake-PAE]]</nowiki>

== Lubuntu-fake-PAE 'installed system' ==

=== Description ===

==== Advantages ====

- No live install CD/DVD/USB drive is used

- No upgrading between versions is necessary

- You get a complete worḱing operating system directly

==== Disadvantages ====

- It is a different way to install a system.

- 13.04 installs into 16 GB and 13.10 installs into 4 GB (fixed sizes)

- It is easier to use 'grub-n-iso' for a dual boot system

This Lubuntu Raring 'installed system' can run with Pentium M and Celeron M CPUs. It has been tested from a USB 3 pendrive and from a hard disk drive. It uses the fake-PAE method of 7bit @ubuntuforums to let the 32-bit PAE kernel be updated with CPUs without a PAE flag.

When running Lubuntu 12.04 with a non-pae kernel
<pre>
cat /proc/cpuinfo
</pre>
reports 32 bits physical address size for a Pentium M, but when running Lubuntu 13.04, it reports 36 bits physical address size.

So you need the pae kernel running to get 36 bits. If you don't get 36 bits with a pae kernel, your CPU has no PAE capability.

==== Warning ====
This Lubuntu Raring 'installed system' was made for Pentium M and Celeron M, that have PAE capability but no PAE flag. It is harmless for all computers modern enough to have USB. '''We take no responsibility for any damage, that this software can cause with very old hardware without PAE capability (pre Pentium II)'''.
----

=== Instruction details ===

==== a. Read this file and the text files. ====

==== b. Download the files and check that the md5sums are correct ====

Right now the image files to download reside on these links

<nowiki>[[https://drive.google.com/folderview?id=0B46yhFQuJvfPRXRvSmJ6b0xoNE0&usp=sharing |google drive of Nio Wiklund alias sudodus]]</nowiki> -- link for 'all' files

<nowiki>[[http://phillw.net/isos/lubuntu-fake-pae]]</nowiki> -- fast and stable link for the big image files

==== c. Backup your present system or at least your personal files. ====

==== d. Select the target drive, where you want to install this Lubuntu Raring 'installed system', ====
which is a compressed image of an installed system (not an iso file, not a live system).

Lubuntu 13.04 can be installed on a drive with at least 16 GB.

{| class="wikitable"
|-
| <#CCFF99>'''New''': Lubuntu 13.10 'Saucy' can be installed on a drive with at least 4 GB. The partition is rather small, but there is enough space to test Saucy on your computer. And it is easy to use '''gparted''' to grow the partition to fill the drive, and to add swap if desired.
|}

We have tested it on a USB 3 drive. It is fastest in a USB 3 port, but faster than a standard USB 2 pendrive also in a USB 2 port, because the flash hardware is much faster than that of standard pendrives, so it is not limiting the read/write speed.

You can also install it on a hard disk drive, for example an internal drive.

But if you want to make a dual boot system, use the 'grub and iso' method instead.
----

'''Check very carefully which device is the USB drive. Double check and triple check''', because dd will overwrite the drive and if you write to a drive with unique data, there is no way to get them back.

It makes it easier, if you '''disconnect all external drives except the target''', the USB drive intended to be the target.

The following command can help identify the USB drive intended to be the target. Run them one line each time and watch the output to the terminal window.

- press the hotkey combination '''ctrl +alt + t''' or use the menu system to get a terminal window.

- notice that upper case and lower case letters make a difference in linux commands, so type exactly like here or cut and paste into the terminal window. Press the Enter (or Carriage Return) key to ‘send’ the command. 

<pre>
sudo fdisk -lu
sudo parted -l
sudo blkid
df
</pre>

==== e. Install ====

==== e.1. Change directory to where you have the downloaded files ====

==== e.2.1 Use 'mkusb' ====

Either run the shell-script '''mkusb''' from the Ubuntu Forums tutorial <nowiki>[[http://ubuntuforums.org/showthread.php?t=1958073|"Howto make USB boot drives"]]</nowiki>, which helps you write to the correct USB drive

<pre>
sudo chmod ugo+x mkusb                       # make mkusb executable
</pre>
<pre>
./mkusb dd-LubuSaucy-pae2pm-4GB.img.xz       # run this command
Usage:
sudo ./mkusb dd-LubuSaucy-pae2pm-4GB.img.xz  # copy and paste this line
</pre>
<pre>
sudo ./mkusb dd-LubuSaucy-pae2pm-4GB.img.xz  # run this command
...
...                          # select the target device and start the installation
...
</pre>

The current version of mkusb includes '''pv''' to monitor the progress, if pv is installed.

For files that expand to more than 4 GB (to be exact, 4 Gibibytes or more), the information from '''gzip -l file.gz''' will be garbled, so expect to get output like this (16 GB is 511% of 3129040896 B)!
<pre>
14,9GB 0:08:56 [28,5MB/s] [============================================================] 511%            
3909654+0 poster in
3909654+0 poster ut
16013942784 byte (16 GB) kopierade, 539,373 s, 29,7 MB/s
</pre>

==== e.2.2 Or do it 'manually' in the following way ====

==== e.2.2.1 Make sure there is no mounted partition on the target drive ====

==== e.2.2.2 and run the zcat command line as superuser ====

<pre>
sudo -s                                     # enter superuser prompt 
</pre>
<pre>
xzcat dd-LubuSaucy-pae2pm-4GB.img.xz | dd bs=4096 of=/dev/sdx
</pre>
<pre>
sync                 # and wait for the command prompt (while writing to the USB drive)
</pre>
<pre>
exit                                        # exit superuser prompt
</pre>

where x is the target drive. It should be a letter (no digit, because you are writing to the drive (or device), not to a partition). So for the first drive '''of=/dev/sda''', for the second drive '''of=/dev/sdb''' ... 

Triple check that it is the correct drive letter, so that you will write to the correct drive. '''dd''' is nicknamed 'disk destroyer' because it does what you tell it to do without any questions. The margin between miracle and catastrophe is very narrow.

==== e.3. 'New': Use 'pv' to monitor the progress of data through a pipe ====

{| class="wikitable"
|-
| <#CCFF99>Install pv, which shows a progress bar, data piped, time used and time left. We tell it the amount of data to be expected (15258 Mibibytes for 16 GB or 3814 Mibibytes for 4 GB).
|}

<pre>
sudo apt-get install pv
</pre>

'''Run the zcat command line as superuser as in the previous paragraph.'''

You can test it only pretending to write (which is '''much''' faster than writing to a USB drive).

<pre>
zcat dd-sdb.img.gz |pv -s 15258m| dd bs=4096 of=/dev/null
</pre>
which produces something like this. '''pv''' shows Mibibytes and '''dd''' shows Megabytes. 
<pre>
14,9GB 0:01:13 [ 207MB/s] [================================================>] 100%            
3909654+0 records in
3909654+0 records ut
16013942784 byte (16 GB) copied, 73,923 s, 217 MB/s
</pre>
and for the Saucy image
<pre>
xzcat dd-LubuSaucy-pae2pm-4GB.img.xz |pv -s 3814m| dd bs=4096 of=/dev/null
</pre>
which produces something like this
<pre>
3,72GB 0:00:23 [ 160MB/s] [================================================>] 100%            
976384+0 records in
976384+0 records ut
3999268864 byte (4,0 GB) copied, 23,7798 s, 168 MB/s
</pre>

And then write to the USB drive (change x to the appropriate drive letter, double-check and triple-check)!

<pre>
zcat dd-sdb.img.gz |pv -s 15258m| dd bs=4096 of=/dev/sdx
</pre>
and
<pre>
xzcat dd-LubuSaucy-pae2pm-4GB.img.xz |pv -s 3814m| dd bs=4096 of=/dev/sdx
</pre>

==== f. Boot and log in as guru in 13.04 and oem in 13.10. The password is changeme, ====
and should be changed if you intend to continue to run your new system.

==== g. Check that ====

<pre>
cat /proc/cpuinfo
</pre>

reports 36 bit physical address size!

'''Warning''': If that is not the case, don't use it, because it needs those 36 bits
to run properly with pae!

==== h. Update and upgrade and install programs ====
like you would with any normal installed Ubuntu based system. These extra application programs are installed in Lubuntu 13.04 Raring

- '''touchpad-indicator''', '''ubuntu-tweak''' and '''htop'''

The icon on the panel between the battery and the network symbols is the Touchpad-indicator. Click on it to switch the touchpad on/off. 

'''New''': Lubuntu 13.10 Saucy version has a simpler touchpad-toggle '''TT''', fake-PAE and of course the standard zRAM configuration, that makes it work better in computers with low RAM. It was too early to get touchpad-indicator. As long as there is free space, it is possible to update/upgrade the system. This screenshot illustrates the terminal window where you can start by typing TT, if you want to shut off the touchpad

<nowiki>[[File:dd_saucy-a2-installed-system_4GB.jpg]]</nowiki>

The Xorg acceleration method can be changed to UXA (which helps with old Intel graphics). Edit (or create) /etc/X11/xorg.conf as follows: (there should be a tab before each line except the first and the last).
<pre>
Section "Device"
	Identifier "Intel Graphics"
	Driver "intel"
	Option "AccelMethod" "uxa"
EndSection
</pre>
The Saucy version includes the following extra programs and tweaks.
<pre>
OEM
TT alias touchpad-toggle
alias rm='rm -i'
the grub menu is shown (not hidden in a single boot system)
lxterminal in autostart (for the OEM user)
changed permissions of /media/oem to improve access to automounted
devices (for the OEM user)
alias l='ls -l' (for the OEM user)
template in fstab to uncomment for floppy
htop
fake-PAE
wooden-wall (changed default wallpaper)
ubuntu-tweak
lubuntu-restricted-extras
pulseaudio
pavucontrol
</pre>

==== i. If the drive is larger than the partition, use gparted to edit the partition size! ====
and take advantage of the whole drive, maybe with a swap partition and a FAT32 data partition.

==== j. If the drive is a hard disk drive, ====
you should remove the mount option '''noatime''' in '''/etc/fstab'''. If an SSD drive, you can add the mount option '''discard''' in '''/etc/fstab'''.

==== k. The first GB of the drive is a FAT partition for exchange of data ====
with other operating systems, for example Windows.

==== l. The last GB is swap. ====
13.04: If the target drive is slightly smaller than 16 GB, this partition can be shrunk or removed, but if the UUID is changed, it should be entered into '''/etc/fstab'''. If on flash memory, this swap partition is only for rare peaks in memory usage. You are recommended to add a swap partition on an internal hard disk drive if swap will be used regularly. That HDD swap partition should be addressed in '''/etc/fstab''' instead of the one on the flash drive.

13.10: Thanks to zRAM, a swap partition is probably not necessary in a USB drive.

==== m. Observe that Lubuntu Raring end of life is January 2014. ====
The fake-pae should survive an upgrade to the next version. Upgrade or make a fresh install of Lubuntu 13.10 'Saucy' (between October 2013 and January 2014).

==== n. Tips if you want to change the name of the computer and add a new user ====
Changing the name of the computer should be easy. I think it is enough to edit '''/etc/hostname''' and '''/etc/hosts'''.

13.04: It is easier to create a new user instead of changing the existing user.  But don't remove the original one unless the new user is member of the sudo group and you have verified that it is able to perform system tasks.

13.10: Creating a new user is easy. Double-click on the icon in the top left corner and fill in the form ... and the oem user will be removed.

==== o. Language support ====
Even if you selected a new language when you created the new user, you have to add language support separately. At the main menu, select

'''Preferences -- Language Support'''

and click on 'Install/Remove Languages' ... click on 'Apply System-Wide' if that is what you want, and reboot.
----

Good luck!

Return to <nowiki>[[https://help.ubuntu.com/community/Lubuntu-fake-PAE|Lubuntu-fake-PAE]]</nowiki>
