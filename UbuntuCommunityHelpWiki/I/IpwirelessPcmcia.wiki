{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== IPwireless PCMCIA (Sentech Mywireless) *ubuntu linux howto ==

This page provides instructions on how to install the drivers for a Sentech !MyWireless IPWireless pcmcia modem on Feisty Fawn.
Currently there is two types of Mywireless IPWireless modems supplied in South Africa - PCMCIA (laptop) and USB/Ethernet (desktop).

The USB/Ethernet modems are supported out of the box using either PPPOE or the r0dent's ipw driver so i will not dwell on that here.

Now to the installation:
Please ensure that you are within Sentech coverage, our if you have been using the Windows drivers then you should know your signal
status already. The PCMCIA modem has two lights on it a red one that is always on and a full green or blinking green indicate good
usable signal.

== Installation ==

The installation involves building the experimental ipwireless_cs module and installing it. To do this you need the kernel headers,
if you already have the kernel headers you can skip the next step.

=== Install kernel headers ===

<pre>
sudo apt-get install linux-headers-$(uname -r)
</pre>

=== Download the Driver ===

Please '''NOTE''' these drivers are still in the early stage of development and are not yet in the mainline kernel. They work nicely for
me how ever YMMV.

http://kernel.org/pub/linux/kernel/people/jikos/ipwireless_cs/

You need to get :
<pre>
ipwireless_cs-2.6.19_2.6.18.tar.bz2
</pre>

This patch is also required to update the driver for the 2.6.20.x kernels

<pre>
workq.patch
</pre>

Extract and Patch :

<pre>
 tar xjvf ipwireless_cs-2.6.19_2.6.18.tar.bz2
cd ipwireless_cs-2.6.19_2.6.18
patch -p 1 -i ../workq.patch
</pre>

Compile the driver :

<pre>
 make
</pre>

Install the driver :

<pre>
 sudo make install
</pre>

=== Test the driver ===

Insert your Mywireless IPwireless pcmcia card into the pcmcia slot, you should see the following in /var/log/syslog :

<pre>
kernel: [ 9780.592000] pccard: PCMCIA card inserted into slot 0
kernel: [ 9780.592000] cs: memory probe 0xd0000000-0xd03fffff: excluding 0xd0000000-0xd003ffff
kernel: [ 9780.596000] pcmcia: registering new device pcmcia0.0
kernel: [ 9781.228000] PPP generic driver version 2.4.2
kernel: [ 9781.232000] ipwireless_cs 1.0.15-jikos2 by Stephen Blackheath, Ben Martel and Jiri Kosina
kernel: [ 9781.232000] ipwireless_cs: Card type V1
kernel: [ 9781.232000] ipwireless_cs: I/O ports 0x3100-0x310f, irq 3
kernel: [ 9781.232000] ipwireless_cs: registering modem device ttyIPWp0
kernel: [ 9781.232000] ipwireless_cs: registering monitor device ttyIPWp8
kernel: [ 9781.232000] ipwireless_cs: waiting for card to start up...
kernel: [ 9786.244000] ipwireless_cs: card is ready.
</pre>

== Configure dialer ==

=== kppp ===
Because i am using Kubuntu i used kppp to setup the connection, am sure you can use your favorite dialer to achieve the same
thing.

==== create device link ====
The ipwireless_cs driver creates ttyIPWpx devices in /dev, since kppp does not list this device i created a link between /dev/ttyIPWp0
to /dev/modem0 as am already using /dev/modem for my 3G phone. 

This is done using the udev system. Edit the /etc/udev/rules.d/60-symlinks.rules file and add this:

<pre>
KERNEL=="ttyIPWp*",                     SYMLINK+="modem%n"
</pre>

==== configure kppp ====

* Start kppp -> configure
* Configure -> Accounts -> New -> Manual setup -> Connection name = SENTECH -> Phone number -> Add -> *99# -> OK -> OK
* Modems -> Device -> New -> Name = SENTECH -> Modem device = /dev/modem0 
* Modem -> Modem commands -> Initialization string 2: AT+CGDCONT=1,"PPP","sentech.co.za","username,password",0,0 -> OK
* Select SENTECH connection and SENTECH modem and hit connect
* Enter your username and password
* With good coverage you should be connected in an instant

=== Command line PPP ===

These instructions are shamelessly stolen from the author of the usb IPWireless drivers page, They provided me with guide lines
in setting up kppp about and am sure will help you setup any other dialer.

Create a ppp peers file /etc/ppp/peers/sentech :

<pre>
noipdefault
/dev/ttyIPWp0
115200
defaultroute
usepeerdns
hide-password
lcp-echo-interval 60
lcp-echo-failure 3
connect "/usr/sbin/chat -v -f /etc/chatscripts/sentech"
noauth
persist
mtu 1400
user "xxxxx"
maxfail 0
deflate 15
</pre>

Create a chat script /etc/chatscripts/sentech :

<pre>
TIMEOUT 30
ABORT "NO CARRIER"
ABORT "BUSY"
ECHO ON
SAY "Dialling sentech...\n"
""              \rAT
"OK-+++\c-OK"   ATH0
OK ATZ
OK AT+CGDCONT=1,"PPP","sentech.co.za","username,password",0,0
OK ATD*99#
SAY "Waiting up to 30 seconds for connection ... "
CONNECT ""
SAY "Connected..."
</pre>

Connect :

<pre>
pppd call sentech 
</pre>

== Resources ==

* http://kernel.org/pub/linux/kernel/people/jikos/ipwireless_cs/
* http://www.neology.co.za/support/MyWirelessLinuxDrivers
* http://www.ipwireless.com/company/install_linux.html
* http://www.sentech.co.za/
