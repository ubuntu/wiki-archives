{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

KONICA MINOLTA 1690MF

== Introduction ==
{| class="wikitable"
|-
| <tablestyle="float:right; font-size: 0.9em; width:40%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em;"><<BR>>
|}

=== Support of the 1690MF under Ubuntu ===

The 1690MF is marginally supported out of the box on Ubuntu.  However, with a little tweaking, the Konica-Minolta 1690MF can be made to work exceptionally well on Ubuntu.  And once you have this operational on a Ubuntu box, its fairly easy to share all of the units features with other computers on your network.

=== About this tutorial ===

This tutorial will walk you through setting up printing and scanning on a Ubuntu 11.10 box, and then help you share those services on your local network, making it available to many more clients than could otherwise support this unit.

=== Assumptions made in this tutorial ===

We make the following assumptions in this tutorial (you will need to adjust these to fit your situation)

* This set up assumes that we are on a small home or office network and are behind a firewall.
* Our LAN is an IP4 network on subnet 192.168.0.0/24 (192.168.0.0 - 192.168.0.255)
* Our Ubuntu box is 192.168.0.23
* Our Konica-Minolta Magicolor 1690MF is at 192.168.0.15

== Printing with CUPS ==

=== Step 1: Add the drivers to your system ===

We need to install the “foo2zjs” package to get the drivers we need.  From a terminal, run the command:

<pre>
apt-get install foo2zjs
</pre>

This will install all of the printer drivers we need to print in both color or black and white.
Note: Their are two drivers that work for our printer, but both have slight issues that you need to be aware of.  The 1690MF driver prints great in black and white, but it does not print in color.  The  2530 DL driver prints in color really well, but always prints composite black instead of using the black toner. To deal with this, we will simply install the printer twice, and select the B&W or Color printer as needed for your print job.

=== Step 2:  Add the printer as a black and white printer ===

1.	Open your browser to the CUPS admin page (http://localhost:631/admin/).

2.	From the Admin page, click on “add a printer” button.  You will need to log-in using the user name and password you use to log in to the machine.

3.	Select the “KONICA MINOLTA magicolor 1690MF” from either the local printers list (if attached by USB) or from the discovered printers list (network) and click “Continue”

4.	You should now have a form up with a couple of options.  Fill out the form using the following values:

<pre>
Name: 1690MF-BW
Description: KONICA MINOLTA mc1690MF (B&W)
Location: My Desk
</pre>

And click “Continue”

NOTE: If you want to share this printer with other computers on your network, check the box that says “Share this printer” before clicking continue.

5.	Under “Make” select “KONICA MINOLTA” and click “Continue”

6.	Select the “KONICA MINOLTA Magicolor 1690MF foomatic/lavafoo” driver and click “add printer”

7.	Print a test page.  If the test page does not print, recheck these steps.

=== Step 3:  Add the printer as a color printer ===
1.	Open your browser to the CUPS admin page (http://localhost:631/admin/).

2.	Click on “add a printer” button.  If you are not already logged in you will need to log-in using the user name and password you use to log in to the machine.

3.	Select the “KONICA MINOLTA magicolor 1690MF” from either the local printers list (if attached by USB) or from the discovered printers list (network) and click “Continue”

4.	You should now have a form up with a couple of options.  Fill out the form using the following values:

<pre>
Name: 1690MF-Color
Description: KONICA MINOLTA mc1690MF (Color)
Location: My Desk
</pre>

And click “Continue”

NOTE: If you want to share this printer with other computers on your network, check the box that says “Share this printer” before clicking "Continue".

5.	Under “Make” select “KONICA MINOLTA” and click “Continue”

6.	Select the “KONICA MINOLTA magicolor 2530 DL Foomatic/foo2lava” driver and click “add printer”

7.	Print a test page.  If the test page does not print, recheck these steps.

=== Step 4:  Add the printer on Client machines (Linux and MAC) ===
1.	Your shared printer should be automagically picked up by linux and mac computers on your local network.  If they are not, then check to make sure CUPS is showing printers shared by other systems.  To do that on Linux, click:

<pre>
System > Administration > Printing
</pre>

2.	From the window that opens up, you need to open up the Server Setting dialog box by clicking:

<pre>
Server > Settings
</pre>

3.	Check the box that says “Show printers shared by other systems” and then click on “Save”.  Within a minute you should see your printers.

=== Step 5:  Add the printer on Client machines (Windows and MAC) ===
It is generally best to use the drivers that shipped with the 1690MF for MAC and Windows clients. It is possible to set this printer up for sharing with SAMBA, but that is beyond the scope of this document.

== HOW TO SCAN: SANE and the Konica Minolta Magicolor 1690MF ==
=== Step 1: Ensure that you have at least version 1.0.22 of sane installed ===

sane 1.0.22 is installed by default on ubuntu 11.10 desktops, but we still need to check and make sure we have it, and that we have the correct version.  To do that, run this command from a terminal:

<pre>
scanimage -V
</pre>

You should see something like this as a result:

<pre>
scanimage (sane-backends) 1.0.22; backend version 1.0.22
</pre>

(hint: it should already be installed on Ubuntu 11.10 and higher. If it reads version 1.0.21, you do not have the magicolor back end, and need to upgrade to a newer version of ubuntu).

If sane is not installed (you would have gotten a command not found error), then you can install it using the following command

<pre>
apt-get install  xsane
</pre>

This will also install the xsane front end.

=== Step 2: Enable the Magicolor back end ===

1.	Edit the file /etc/sane.d/dll.conf by running the following command:

<pre>
sudo gedit /etc/sane.d/dll.conf
</pre>

2.	Within that file, change the line that reads

<pre>
</pre>

to read

<pre>
magicolor
</pre>

3.	Save the file and close gedit. Note: if the magicolor line does not have a hash (“#”), you do not need to edit anything and can just close gedit.

=== Step 3: Tell the Magicolor back end where to find the network scanner ===

While sane will attempt to autodetect the scanner on the network, you will most likely need to specify the IP address of the scanner.

NOTE: If you are connecting via usb, and not the network, skip to step 4.  You usually do not need to connect both ways.

1.	open a terminal and run the command:

<pre>
 sudo gedit /etc/sane.d/magicolor.conf
</pre>

2.	After the line that reads

<pre>
 net autodiscovery
</pre>

You need to add a line with the word "net" and IP address of your Magicolor 1690MF scanner. That line should look like this:

<pre>
 net 192.168.0.15
</pre>

(make sure to change the address to match that of your scanner)

3.	Now that you have added the IP address of your scanner, save the file and close gedit.

=== Step 4: Tell the Magicolor back end where to find the USB scanner ===

1.	With the 1690MF plugged into your computer via a USB cable, run the command:

<pre>
 sane-find-scanner
</pre>

the output of that command will look something like this:

<pre>
## sane-find-scanner will now attempt to detect your scanner. If the
## result is different from what you expected, first make sure your
## scanner is powered up and properly connected to your computer.

## No SCSI scanners found. If you expected something different, make sure that
## you have loaded a kernel SCSI driver for your SCSI adapter.

found USB scanner (vendor=0x132b [KONICA MINOLTA], product=0x2089 [KONICA MINOLTA magicolor 1690MF scan]) at libusb:001:003

## Your USB scanner was (probably) detected. It may or may not be supported by
## SANE. Try scanimage -L and read the backend's manpage.

## Not checking for parallel port scanners.

## Most Scanners connected to the parallel port or other proprietary ports
## can't be detected by this program.
</pre>

You can ignore everything that starts with a hash tag, but the important part is this line:

<pre>
found USB scanner (vendor=0x132b [KONICA MINOLTA], product=0x2089 [KONICA MINOLTA magicolor 1690MF scan]) at libusb:001:003
</pre>

2.	We need to add those two values to the Magicolor back end. To do that, fire up gedit as root using this command:

<pre>
 sudo gedit /etc/sane.d/magicolor.conf
</pre>

3.	Find the line that reads:

<pre>
 usb
 </pre>

and after it we need to add a line with the word "usb" followed by the vendor number and the product number we got with the scanimage -L command.  That line should look like this:

<pre>
 usb 0x132b 0x2089
</pre>

4.	After you have added that line, save the file and close gedit.

=== Step 5: Test your new scanner ===

1.	open a terminal window and run the command

<pre>
 xsane
</pre>

You should now have a working interface to your Konica Minolta Magicolor 1690MF.

NOTE: Sometime you will need to reboot the machine in order to get sane working properly with the magicolor backend.  It doesn't happen all of the time, but knowing this can save a lot of time and headaches.

== Sharing via sane.d ==
<nowiki>[[sane.d tutorial]]</nowiki>
