{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



== 1. Install dependencies: ==

<pre>
sudo apt-get install apache2 libapache2-mod-php5 mysql-server libnet-snmp-perl php5-mysql libnet-telnet-cisco-perl php5-snmp php5-gd libalgorithm-diff-perl rrdtool librrds-perl
</pre>
Note: The command listed above needs to be on one line

== 2. Setup SSL on the Apache2 webserver: ==

IMPORTANT – You should always use SSL because Nedi contains a great amount of information about your network.  Here is a great step-by-step tutorial on <nowiki>[[https://wiki.ubuntu.com/OpenSSL#head-ef90d99537150adb4809a3b7f0e554910ddf84cd|How to setup SSL in Ubuntu]]</nowiki>

== 3. Download Nedi: ==

<pre>
wget http://www.nedi.ch/pub/nedi-1.0.8.tgz
</pre>

== 4. Uncompress and extract the archive: ==

<pre>
tar -xzf nedi-1.0-rc6.tgz
</pre>

== 5. Move Nedi directory to /opt and fix permissions: ==

<pre>
sudo mv nedi /opt/
sudo chown -R www-data:www-data /opt/nedi
sudo chmod 775 /opt/nedi/html/log/
</pre>

== 6. Create a link to the webserver root: ==

<pre>
sudo ln -s /opt/nedi/html/ /var/www/
</pre>

== 7. Create a link to the configuration file: ==

<pre>
sudo ln -s /opt/nedi/nedi.conf /etc/nedi.conf
</pre>

== 8. Create a MySQL database password: ==

<pre>
sudo mysqladmin -u root -p password "YourPasswordGoesHere"
</pre>

== 9. Initialize the Nedi database: ==

<pre>
cd /opt/nedi/
./nedi.pl -i
</pre>

== 10. Answer these prompts: ==

** MySQL admin user: root
** MySQL admin pass: <enter the password you created in step #8>

== 11. Edit /opt/nedi/nedi.conf: ==

** List your SNMP read-only passwords (one per line)
** List your telnet usernames and passwords (one pair per line)

== 12. Optional - Edit /opt/nedi/seedlist and add your network devices: ==

List the IP addresses of your devices (one per line)

== 13. Restart the webserver (Apache2): ==

<pre>
sudo /etc/init.d/apache2 restart
</pre>

== 14. Run a discovery of your network and gather your device configurations ==

<pre>
cd /opt/nedi/
./nedi.pl -pob
</pre>

== 15. Login to your Nedi website: ==

<pre>
http://localhost/html/
User: admin
Password: admin
IMPORTANT - Change the admin password NOW!
</pre>

== 16. Create a script to start/stop Nedi: ==

<pre>
nano /opt/nedi/startnedi.sh
</pre>

== 17. Paste this text into that file: ==

<pre>
opts="-pob"
CMD="./nedi.pl $opts"
LOGPATH="/var/log/nedi"
LOGFILE="$LOGPATH/nedi.log"
LASTRUN="$LOGPATH/lastrun.log"
cd /opt/nedi
now=`date +%Y%m%d:%H%M`
echo "#$now start # $CMD" > $LASTRUN
echo "#$now start" >> $LOGFILE
$($CMD >> $LASTRUN)
tail -8 $LASTRUN >> $LOGFILE
now=`date +%Y%m%d:%H%M`
echo "#$now stop" >> $LOGFILE
echo "#$now stop" >> $LASTRUN'
</pre>

Press “Control-O” and then “Enter” to save these changes.

== 18. Make “startnedi.sh” an executable file, and create a directory to hold Nedi log files: ==

<pre>
chmod +x /opt/nedi/startnedi.sh
sudo mkdir /var/log/nedi
me=`whoami`;sudo chown $me:$me /var/log/nedi
</pre>

== 19. Schedule Nedi to run periodically (every 4 hours) using cron: ==

<pre>
crontab -e
15 */4 * * * /opt/nedi/startnedi.sh  # Discover and gather device configurations
</pre>

Press “Control-O” and then “Enter” to save these changes.

-or-

Create a file in /etc/cron.d/ containing this information:
<pre>
15 */4 * * *    root   /opt/nedi/startnedi.sh  # Discover and gather device configurations
</pre>

Both of these methods will cause the script to run every 4 hours at :15 past the hour beginning with 4:00am.
----
