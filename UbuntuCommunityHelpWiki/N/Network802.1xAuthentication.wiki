{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

This document explains how the network on a Ubuntu system can be configured to use 802.1x authentication.

== Introduction ==
'''IEEE 802.1x''' is a standard for authenticating a computer on the network. It is often used for gaining access to large networks with a variety of users, such as a university network or a community network. This authentication protocol can be used on both ''wireless'' and ''wired'' networks.

<nowiki>[[File:IconsPage/note.png]]</nowiki>
Windows users might be familiar with the <code>SecureW2</code> software, which provides 802.1x authentication for the Microsoft Windows 2000, XP and Vista operating systems.

== Basic configuration ==
To authenticate to a network with the 802.1x protocol, the '''WPA-Supplicant''' software can be used. Despite the softwareâ€™s heavy focus on wireless networking, it can be used for the authentication of wired networks as well. Ubuntu comes with WPA-Supplicant installed by default.

To configure our computer for using WPA-Supplicant, two configuration files need to be edited. First, create a new text file in <code>/etc</code> with your favourite editor or, if you are logged in to a graphical environment, by typing in a terminal:

<pre>
sudo gedit /etc/wpa_supplicant.conf
</pre>

Copy the following basic configuration into the new file:

<pre>
ctrl_interface=/var/run/wpa_supplicant

ctrl_interface_group=0

eapol_version=2

ap_scan=0
</pre>

Next we need to add the authentication configuration for the network we are authenticating to. We add this network definition to the same file (wpa_supplicant.conf).

There is no single configuration that will work for every network, so check with your network administrator or institution for the specific settings and protocols needed for your situation. Multiple networks can be configured in the WPA-Supplicant configuration file. A basic setup might look like the following.

Example for a wired network with:
* Network access authentication through IEEE 802.1x.
* EAP-Tunnelled Transport Layer Security, using PAP and MD5 as the authentication protocol.
* No certificates.

<pre>
network={
        key_mgmt=IEEE8021X
        eap=TTLS MD5
        identity="myloginname"
        anonymous_identity="myloginname"
        password="mypassword"
        phase1="auth=MD5"
        phase2="auth=PAP password=mypassword"
        eapol_flags=0
}
</pre>

To test the authentication process, we can call WPA-Supplicant directly with our new configuration file. For example, in case of a wired network, execute the following command:

<pre>
sudo wpa_supplicant -c /etc/wpa_supplicant.conf -D wired -i eth0
</pre>

<nowiki>[[File:IconsPage/tip.png]]</nowiki>
See <nowiki>[[WifiDocs-WPAHowTo]]</nowiki> for more information on configuring WPA-Supplicant for wireless networks.

If WPA-Supplicant can authenticate our computer to the network, we can add it to the global network configuration. By doing this WPA-Supplicant is automatically run when we boot up the computer or restart its network.

Open the network interface configuration file:

<pre>
sudo gedit /etc/network/interfaces
</pre>

There should already be a number of network interfaces configured in this file. Below we add 802.1x authentication for a wired network, be sure to select the proper driver for WPA-Supplicant if you want to authenticate to a wireless network:

<pre>
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet dhcp

wpa-driver wired

wpa-conf /etc/wpa_supplicant.conf
</pre>

To test our new configuration, we stop the network on our system before saving the above configuration file:

<pre>
sudo /etc/init.d/networking stop
</pre>

After saving this file, we should be able to start the network with 802.1x authentication enabled:

<pre>
sudo /etc/init.d/networking start
</pre>

For most cases, this is all that is required to automatically authenticate our computer to the network using the IEEE 802.1x protocol.

== Advanced topics ==
=== Using WPA-Supplicant on a bridged network interface ===
If you are using a bridged network interface, using WPA-Supplicant to authenticate your system to the network is no problem if you have a working WPA-Supplicant configuration. In the example below, we add a bridge with eth0 as its only interface:

<nowiki>[[File:IconsPage/note.png]]</nowiki>
More interfaces can be added to the bridge dynamically, for instance for use with a virtual machine using QEMU or KVM.

<pre>
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet manual

auto br0
iface br0 inet dhcp
bridge_ports eth0
bridge_stp off
bridge_maxwait 5

wpa-iface eth0
wpa-bridge br0
wpa-driver wired
wpa-conf /etc/wpa_supplicant.conf
</pre>

<nowiki>[[File:IconsPage/tip.png]]</nowiki>
For more information on network bridging in Ubuntu, see <nowiki>[[NetworkConnectionBridge]]</nowiki>.

== More information ==

The WPA-Supplicant documentation details the available configuration directives. It can be found in <code>/usr/share/doc/wpasupplicant</code> if WPA-Supplicant is installed.

See also the <nowiki>[[man|system manual pages]]</nowiki> for <code>wpa_supplicant</code> and <code>wpa_supplicant.conf</code>.

== Related links ==

* <nowiki>[[http://hostap.epitest.fi/wpa_supplicant/|The WPA-Supplicant website]]</nowiki>
* <nowiki>[[http://en.wikipedia.org/wiki/IEEE_802.1X|Wikipedia article about IEEE 802.1x]]</nowiki>

----
CategoryNetworking 
