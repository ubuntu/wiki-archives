{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


== Introduction ==

<nowiki>[[http://www.namazu.org/|Namazu]]</nowiki> is a full-text search engine intended for easy use. Not only does it work as a small or medium scale Web search engine, but also as a personal search system for email or other files.

Namazu is the perfect solution for building an intranet search engine. It's light and low in dependencies (compared to <nowiki>[[http://lucene.apache.org/|Lucene]]</nowiki> like/based solutions).

Namazu can index a large number of file types including office documents, pdf's and code source files.

=== Installation ===

Namazu is available as a package and can be installed using any package management tool you prefer.
<pre>
sudo apt-get install namazu2 namazu2-index-tools
</pre>

Additional parsers are available if you install <code>xpdf</code>, <code>wv</code>, <code>unzip</code>... packages.
<pre>
sudo apt-get install xpdf wv unzip unrtf
</pre>

To tell namazu which files it is allowed to index, the <code>/etc/namazu/mknmzrc</code> has to be edited and the lines after <code>$ALLOW_FILE</code> should be uncommented.

=== Using Namazu ===

Namazu is composed of several tools like an indexer, a search tool and other.
To create or update a namazu index the <code>mknmz</code> tool has to be used.
To periodically synchronize the index, a line like below can be placed in <nowiki>[[crontab]]</nowiki>:
<pre>
0,15,30,45 * * * * www-data mknmz --output-dir=/storage/archive/index  /storage/archive/data/ > /tmp/namazu.log 2>&1
</pre>
The command will update the index from <code>/storage/archive/index</code> with the parsed data from <code>/storage/archive/data/</code>.

In this example we'll skip the command line tools to search the index and will create a web page for this job. 

=== Namazu web search ===

Namazu can be accessed through a web page by configuring a web form to pass queries to <code>namazu.cgi</code> &mdash; a cgi file which comes in official package and can be found at <code>/usr/lib/cgi-bin/namazu.cgi</code>.

Configure your favorite web server to point to (for example) <code>/storage/archive</code>, where you can create a <code>cgi-bin</code> directory. Copy the <code>namazu.cgi</code> file in it, and create a new file in the same directory under the name of <code>.namazurc</code>.
<pre>
mkdir /storage/archive/cgi-bin
cp /usr/lib/cgi-bin/namazu.cgi /storage/archive/cgi-bin/
cat > /storage/archive/cgi-bin/.namazurc
Lang   en
Index   /storage/archive/index
Template        /storage/archive/index
</pre>

The <code>.namazurc</code> will be loaded by <code>namazu.cgi</code> along with the settings from it. A more detailed file with <code>.namazurc</code> settings can be found in <code>/etc/namazu/namazurc</code>.

Next just configure your vhost to allow <code>.cgi</code> scripts. On <nowiki>[[Apache]]</nowiki> you should install <code>libapache2-mod-fastcgi</code> package. On <nowiki>[[nGinx]]</nowiki> there's an example available on <nowiki>[[FcgiWrap]]</nowiki> page.
