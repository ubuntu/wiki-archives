{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

title QLogic SANSurfer CLI

{| class="wikitable"
|-
| <tablestyle="float:right; font-size: 0.9em; width:40%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em;"><<BR>>
|}

== Introduction ==
The QLogic SANSurfer CLI is a command-line management tool for the Qlogic SANSurfer line of fiber-channel cards. It is generally released (as of this writing) as Windows executables, and RedHat/SUSE RPMs. This document details how to convert the QLogic RPMS for use on Ubuntu. This procedure has been tested on Ubuntu 9.04 server. Other variants should work, but have not been tested.

Note that the QLogic CLI tool is released as a binary named scli. This may be confused with the <nowiki>[[http://packages.ubuntu.com/jaunty/scli|Ubuntu scli package]]</nowiki>, ''a collection of SNMP command-line management tools''

== Getting the CLI tools ==

The SANSurfer CLI tool is available from <nowiki>[[http://driverdownloads.qlogic.com/QLogicDriverDownloads_UI/SearchByProduct.aspx?ProductCategory=39&Product=934&Os=26|Qlogic driver downloads page]]</nowiki>. This document will assume the use of the file scli-1.7.3-14.i386.rpm

<pre>
 $ mkdir /tmp/qlogic; cd /tmp/qlogic
</pre>

Download the appropriate scli RPM to the new folder (/tmp/qlogic/, for example). You should now have /tmp/qlogic/scli-1.7.3-14.i386.rpm

== Installing the Qlogic CLI ==

=== Prerequisites ===

You'll need the ''alien'' package to convert the .rpm into a .deb.
<pre>
 /tmp/qlogic$ sudo apt-get install alien
</pre>

=== Convert RPM into DEB ===

<pre>
 $ alien -g scli-1.7.3-14.i386.rpm 
 $ cd scli-1.7.3
 $ mv debian DEBIAN
 $ mv \$\{_prefix\}/opt/ .
 $ rm -rf \$\{_prefix\}/
</pre>

Edit control file ..
<pre>
 $ vim DEBIAN/control
</pre>
.. to remove any references to the ${_prefix} prefix:
<pre>
Source: scli
Section: admin
Priority: optional
Maintainer: Your Name <yourname@your.host.com>
Version: 1.7.3-14
Package: scli
Architecture: i386
Depends: 
Description: SANsurfer FC HBA CLI
 QLogic FC HBA Command Line Interface application
 .
 (Converted from a rpm package by alien version 8.73.)
</pre>

Edit conffile ..
<pre>
 $ vim DEBIAN/conffiles
</pre>
.. so that it looks like this (removing the ${_prefix} prefix on every line):
<pre>
/opt/QLogic_Corporation/SANsurferCLI/adapters.properties
/opt/QLogic_Corporation/SANsurferCLI/agent.properties
/opt/QLogic_Corporation/SANsurferCLI/flashcfg.properties
/opt/QLogic_Corporation/SANsurferCLI/menu.properties
/opt/QLogic_Corporation/SANsurferCLI/sfcli.properties
</pre>

Package everything back into a .deb:
<pre>
 $ dpkg -b scli-1.7.3 scli-1.7.3-14.deb
</pre>

=== Install the CLI ===
<pre>
 $ sudo dpkg --install scli-1.7.3-14.deb
 $ cd /opt/QLogic_Corporation/SANsurferCLI
 $ tar -xzf lib.tgz
 $ sudo cp -i lib/ia32/2.6/*.so /usr/lib/
 $ ln -s /opt/QLogic_Corporation/SANsurferCLI/scli qlscli
</pre>

== See Also ==

* <nowiki>[[http://john.parnefjord.se/node/36| SANSurfer CLI on Etch]]</nowiki>

== External Links ==

* <nowiki>[[http://driverdownloads.qlogic.com/QLogicDriverDownloads_UI/SearchByProduct.aspx?ProductCategory=39&Product=934&Os=26|QLogic Drivers Downloads page]]</nowiki>
