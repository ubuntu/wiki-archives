{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



== MacBook Air (5,2) on Ubuntu 14.04 (Trusty Tahr) ==

This page aims to describe the steps needed, to fully enable all features of the '''5-th Generation MacBook Air''' (release date: mid 2012) when using '''Ubuntu 14.04, Trusty Tahr'''.<<BR>>
<<BR>>
'''ATTENTION: During my installation on MacBook Air 5.2, Ubuntu 14.04 has shown some stability issues!'''<<BR>>
<<BR>>

=== How to check your MacBook Air model ===

In OS X, click on the Apple logo on the top-left of the screen. And then "About This Mac". In the new opened windows, click on the "More Info..." button. Now, under the label "MacBook Air" you should be able to see your MacBook Air model (e.g. "13-inch, Mid 2012").
If you further click on "System Report...", you will see under the voice "Model Identifier:" your MacBook Air model - i.e. "MacBookAir5,2".<<BR>>
<<BR>>
Alternatively, in OS X, you can check your model in terminal with:
<pre>
sysctl hw.model
  </pre>
In Ubuntu with:
  <pre>
sudo dmidecode -s system-product-name
  </pre>
<<BR>>
If you have a different model, please go <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki> and find the right wiki.<<BR>>
<<BR>>

=== Overview ===

Anything not mentioned here probably already works out of the box. If not, please refer to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>.<<BR>>
<<BR>>

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| LCD Panel
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> The brightness is reset to the highest at every (re)boot.<<BR>>The resolution/color quality is not as good as in OS X.
|-
| Shutdown & Reboot
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Suspend
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> When performed manually.<<BR>><nowiki>[[File:IconsPage/dont.png]]</nowiki> The computer doesn't suspend properly when lid is closed. Be careful: CPU overheating possible!
|-
| Hibernate
| <nowiki>[[File:IconsPage/question.png]]</nowiki> Not tested.
|-
| Keyboard functions (Brightness,volume,...)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> Backlight works, but can be controlled only manually (no sensor).
|-
| Touchpad (appletouch)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> Without multi-touch.<<BR>>The quality of the touchpad is not as good as in OS X.
|-
| Wireless (Air``Port)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>[[#Wireless (AirPort)|<nowiki>[[File:IconsPage-info.png]]</nowiki>]] With proprietary driver. Eventual kernel craches while Wireless enabled.
|-
| Bluetooth
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>[[#Bluetooth|<nowiki>[[File:IconsPage-info.png]]</nowiki>]] Bluetooth always on after (re)boot. Fix available.
|-
| iSight
| <nowiki>[[#iSight|<nowiki>[[File:IconsPage-dont.png]]</nowiki></nowiki>]]
|-
| Sound
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Microphone
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| External Monitor
| <nowiki>[[File:IconsPage/question.png]]</nowiki> Not tested.
|-
| Thunderbolt
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> Thunderbolt-VGA,HDMI,DVI,Ethernet adapters works seamlessly. <<BR>> <nowiki>[[File:IconsPage/info.png]]</nowiki> Apple thunderbolt Display hotplug don't work, you should reboot after plugging. Thunderbolt HDD works with manual configuration.
|-
| SD card slot
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| HFS+ (OS X disc partition)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> Mount read-only.
|-
| Fan Control
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> According to <code>tlp stat</code>.
|-
| Sensors (temps & fans)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> According to <code>tlp stat</code>.
|-
| GPU Power Save
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|}

<<BR>>
'''Legend:'''
<<BR>>
<<BR>>
<nowiki>[[File:IconsPage/ok.png]]</nowiki> (works out-of-the-box) <<BR>>
<nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki> (works, with remarks) <<BR>>
<nowiki>[[File:IconsPage/warning.png]]</nowiki> (needs manual install) <<BR>>
<nowiki>[[File:IconsPage/dont.png]]</nowiki> (won't work)<<BR>>
<nowiki>[[File:IconsPage/question.png]]</nowiki> (not yet documented)<<BR>>
<<BR>>

=== Basic Installation Instructions ===

Common things about installing and maintaining Ubuntu on Intel-based Macs:
<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Intel CPU-based Macintosh Generic Installation Instructions]]</nowiki>

==== Prerequisites ====

1. MacBook Air 5,2 (see Section '''"How to check your MacBook Air model"''' above)

2. USB stick (1GB at least)

3. <nowiki>[[http://cdimage.ubuntu.com/releases/14.04/release/ubuntu-14.04-desktop-amd64+mac.iso]]</nowiki>.

==== Partition Harddisk ====

1. Boot MacBook Air into OS X

2. Open Disk Utility 
  <pre> 
open /Applications/Utility/Disk\ Utility.app 
  </pre>

3. Select "Macintosh HD" > (Tab)Partition
  Add (+) 3 more partitions (NOTE: leave the OS X partition, just resize it if necessary)
  2th Partition: Set 4 GB for Linux Swap partition <<BR>>
  3nd Partition: Set 25-40 GB for Ubuntu "/" <<BR>>
  4rd Partition: Use as much space as left for "/home" <<BR>>

==== Prepare USB-Stick ====

1. In OSX

2. Download iso image to ~/Downloads

3. Open Terminal (a detailed description can be found  <nowiki>[[http://www.ubuntu.com/download/desktop/create-a-usb-stick-on-mac-osx|here]]</nowiki>.
   <pre>
cd ~/Downloads
hdiutil convert -format UDRW -o ubuntu-14.04-desktop-amd64.img ubuntu-14.04-desktop-amd64.iso
open /Applications/Utilities/Disk\ Utility.app
diskutil list
diskutil unmountDisk /dev/disk1
sudo dd if=ubuntu-14.04-desktop-amd64.img.dmg of=/dev/rdisk1 bs=1m
   </pre>

==== Install rEFInd ====

1. Download rEFInd (<nowiki>[[http://www.rodsbooks.com/refind/getting.html|Binary Zip-File]]</nowiki>) (<nowiki>[[http://sourceforge.net/projects/refind/files/0.8.2/refind-bin-0.8.2.zip/download|Direct Download refind-bin-0.8.2.zip]]</nowiki>)<<BR>>

2. Follow the installation procedure "Installing rEFInd Manually Using Mac OS X" (<nowiki>[[http://www.rodsbooks.com/refind/installing.html]]</nowiki>)<<BR>>
   NOTE: If you use OS X whole-disk encryption (File Vault) you should install rEFInd in the EFI System Partition (ESP). (See <nowiki>[[http://www.rodsbooks.com/refind/installing.html#wde]]</nowiki>)<<BR>>
   The following is a short example of installing rEFInd in the ESP. Please, follow the rEFInd official guide, instead.<<BR>>
    Open a Terminal
   <pre>
mkdir /Volumes/esp
sudo mount -t msdos /dev/disk0s1 /Volumes/esp
sudo mkdir -p /Volumes/esp/efi/refind
sudo cp -r refind/* /Volumes/esp/efi/refind/
sudo rm /Volumes/esp/efi/refind/refind_ia32.efi
sudo rmdir /Volumes/esp/efi/refind/drivers_ia32
sudo mv /Volumes/esp/efi/refind/refind.conf-sample /Volumes/esp/efi/refind/refind.conf
sudo bless --mount /Volumes/esp --setBoot --file /Volumes/esp/efi/refind/refind_x64.efi
sudo umount /dev/disk0s1
   </pre>

3. If you use OS X whole-disk encryption (File Vault), at every reboot you may encounter a delay of about 30 seconds before rEFInd is properly started.<<BR>>
   There are various possible fix to this problem. For example, if you install rEFInd on the ESP, you can try to rename "/Volumes/esp/efi/refind/refind_ia64.efi" in "/Volumes/esp/efi/BOOT/bootx64.efi" in order to solve the problem (See <nowiki>[[http://www.rodsbooks.com/refind/installing.html#sluggish]]</nowiki>).

==== Install Ubuntu ====

1. Restart and press "Alt"-Key on startup.

2. Select first USB-device labled "EFI-Boot" and press "Enter".<<BR>>
   Select "Install Ubuntu"<<BR>>

3. Choose "Something else" for partitioning.<<BR>>
   Please check the sizes in the list according to the partitioning for the step above. <<BR>>
   OS X Disk Utility leaves unallocated partitions inbetween which usually are arround 128MB in size.<<BR>>
   Do not try to delete these "blank" partitions.<<BR>>
   2th partition should be swap (no format and mountpoint required)<<BR>>
   3nd partition should be ext4 formatted and mounted "/".<<BR>>
   4rd partition should be ext4 formatted and mounted "/home".<<BR>>
   Make sure you select the correct partition (i.e. "/") for the boot loader installation.<<BR>>
   Proceed...

4. The installation process should run through smoothly.
   It's suggested to choose to install 3rd party software (it will make the Wi-FI working properly).
   Encrypting the "/home" folder is all and good.

6. Restart. Now a Ubuntu should be shown.<<BR>>
   Select this an start it.<<BR>>

=== Wireless (AirPort) ===

<nowiki>[[File:IconsPage/restricted.png]]</nowiki>

Needed only if you didn't choose to install 3rd party software during the installation.

Requires an Apple USB-Ethernet Adapter.

1. Log into ubuntu 14.04 and open a terminal (Ctrl+Alt+t).
   Attach Apple USB-Ethernet Adapter.
   Enter the following commands:
   <pre>
sudo apt-get update
sudo apt-get upgrade
   </pre>
   This updates all packages

2. Start (Panel) > (Menu)System Settings > (Icon)Software & Updates or from terminal `/usr/bin/python3 /usr/bin/software-properties-gtk`
   Select (Tab)Additional Drivers and install Broadcom 802.11 Linux STA wireless driver from bcmwl-kernel-source

3. Now reboot again
   Select "Ubuntu"

=== iSight ===

<nowiki>[[File:IconsPage/webcam.png]]</nowiki>

iSight HD webcam does not work.<<BR>>
<<BR>>

=== Touchpad (appletouch) ===

Works. No multi-touch gesture.<<BR>>
The quality of the touchpad is not as good as in OS X.<<BR>>
<<BR>>

=== External Monitor ===

Not tested.<<BR>>
<<BR>>

=== Bluetooth ===

Works.<<BR>>
<<BR>>
There a problem in turning it off, which simply won't work.<<BR>>
<<BR>>
Changing the "InitiallyPowered" and the "DisablePlugins" entries in the bluetooth configuration file (i.e. /etc/bluetooth/main.conf) does not seem to work.<<BR>>
<<BR>>
However, I was able to to turn off the Bluetooth by blacklisting it.
<pre>
sudo gedit /etc/modprobe.d/blacklist-rare-network.conf
</pre>
Adding this:
<pre>
alias net-pf-31 off
</pre>
<<BR>>

=== Function Keys ===

Works. <<BR>>
You will probably want to switch the mapping of "cmd" with "alt". See <nowiki>[[AppleKeyboard#Corrections]]</nowiki> page this and other for fine tuning.<<BR>>

=== Finetuning Powersave functions ===

The battery duration is quite good by default. However, it can be boosted.

1. Install powertop
   <pre>
sudo apt-get install powertop
sudo powertop
   </pre>
   Toggle through with "TAB" to Tunables
   Lots of "Bad" values should be displayed.
   
2. Install TLP
   For detailed Instructions refer to <nowiki>[[http://thinkwiki.de/TLP_-_Linux_Stromsparen|tpl wiki]]</nowiki>.
   <pre>
sudo add-apt-repository ppa:linrunner/tlp
sudo apt-get update
sudo apt-get install tlp tlp-rdw
   </pre>
   
3. Restart tlp with <code>sudo /etc/init.d/tlp restart</code>
   Check if settings took effect with powertop.

=== Backlight ===

Works. No sensor. You can only control it manually.<<BR>>
<<BR>>

----
<nowiki>[[https://help.ubuntu.com/community/CategoryMac|CategoryMac]]</nowiki> 
----
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> Please update this page, if you have figured out anything, that is not mentioned here!
|}
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> The <nowiki>[[http://ubuntuforums.org/group.php?groupid=352|MactelSupportTeam]]</nowiki> is about to restructure and reorganize the documentation for Intel-based Macs. If you are interested in helping, please visit our <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam|team page]]</nowiki> for information. For all Mactel wikis, there is a starting place <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki>. There is also a <nowiki>[[http://ubuntuforums.org/showthread.php?t=969360|thread]]</nowiki> about planning the Mactel docummentation going on.
|}
<<BR>><<BR>>
