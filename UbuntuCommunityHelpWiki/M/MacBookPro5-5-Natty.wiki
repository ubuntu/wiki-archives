{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


'''NOTE: This wiki page is largely based on Maverick and is incomplete.'''
<<BR>>

== MacBookPro 5,5 and Ubuntu 11.04 (Natty Narwhal) ==
<<BR>><<BR>>

This page aims to describe the steps needed, to fully enable all features of the '''13.3 (mbp 5,5) and 15 inch (mbp 5,4) 5-th Generation MacBookPro''' (release date: June 2009) when using '''Ubuntu 11.04, Natty Narwhal'''.<<BR>>
<<BR>>
<nowiki>[[File:IconsPage/terminal.png]]</nowiki> You can find out, what model you have by typing at the terminal:<<BR>>
<pre>
sudo dmidecode -s system-product-name
</pre>
<<BR>>
 If you have a different model, please go <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki> and find the right wiki.

=== Overview ===

Anything not mentioned here probably already works out of the box. If not, please refer to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>.

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| <nowiki>[[#Sensors|Sensors (temps & fans)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Suspend|Suspend & Hibernate]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Reboot|Reboot]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Video|Video & Effects (Compiz)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#HFS|HFS+ (only read)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#CDDVD|CD-DVD Writing]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Bluetooth|Bluetooth]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Keyboard|Keyboard functions (Brightness,volume,...)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Touchpad|Touchpad (bcm5974)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Wireless|Wireless (AirPort)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#iSight|iSight]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Sound|Sound]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Microphone|Microphone]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#ExtMon|External Monitor]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#ARC|Apple Remote Control]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Firewire|Firewire]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|}
<nowiki>[[File:IconsPage/ok.png]]</nowiki> (works out-of-the-box) <<BR>>
<nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki> (works, with remarks) <<BR>>
<nowiki>[[File:IconsPage/warning.png]]</nowiki> (needs manual install) <<BR>>
<nowiki>[[File:IconsPage/dont.png]]</nowiki> (won't work)<<BR>>
<nowiki>[[File:IconsPage/question.png]]</nowiki> (not yet documented)<<BR>>

=== Basic Installation Instructions ===
<nowiki>[[http://ubuntuforums.org/showthread.php?p=10743955&posted=1#post10743955|Read this first!]]</nowiki>
<<BR>><<BR>>
Common things about installing and maintaining Ubuntu on Intel-based Macs:
<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Intel CPU-based Macintosh Generic Installation Instructions]]</nowiki>
<<BR>><<BR>>
''Note 1:'' You can boot from USB. It is not necessary to burn the ISO to a CD.
<<BR>>
''Note 2:'' Use a USB mouse during the installation process, as the touchpad appears to cause some freezes in the Keyboard Layout selection screen.

=== Package Support for Intel Macs ===
You need some modules from the <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/PPA|MactelSupportTeam/PPA]]</nowiki>
:
<pre>
sudo add-apt-repository ppa:mactel-support && sudo apt-get update
</pre>
'''UPDATE: Seems like the Led Display Brightness IS working out of the box. For the Keyboard backlit, just pommed is needed, no need to edit.'''
 
The mactel PPA modules needed on ubuntu on mac are nvidia-bl-dkms (for the LCD dimming support), and pommed (for the keyboard backlight control keys).

<pre>
sudo apt-get install nvidia-bl-dkms pommed
</pre>

nvidia-bl-dkms must be in ''/etc/modules'' file to load. Open the file in an editor with:
<pre>
gksudo gedit /etc/modules
</pre>
And add to the end this line:
<pre>
nvidia_bl shift=2
</pre>
The shift option reduces the dimming range to make it more comfortable. You can tune the value as you want.

If you use a different kernel like pae, you will need to install it again under the pae kernel to make it work LCD dimming keys work, and reboot.
<pre>
sudo apt-get remove nvidia-bl-dkms
sudo apt-get install nvidia-bl-dkms
</pre>

An alternative to using the nvidia-bl-dkms module for LCD dimming support (F1-F2 keys), is to add this line to the "Device" section of /etc/X11/xorg.conf:
<pre>
Option "RegistryDwords" "EnableBrightnessControl=1"
</pre>

=== Sensors (temps & fans) ===

Edit /etc/modules:
<pre>
gksudo gedit /etc/modules
</pre>
And add to the end:
<pre>
coretemp
</pre>
To enable temperature sensors.

=== Suspend & Hibernate ===
Suspend and Hibernate work if the machine has had the latest EFI update (version 1.7)
and the 195 version nVidia drivers.

Or if hibernate does not work, edit ''/etc/pm/config.d'':
<pre>
gksudo gedit /etc/pm/config.d/00sleep_module
</pre>
And add to the end:
<pre>
SUSPEND_MODULES="sky2"
</pre>

<<BR>>
=== Reboot ===
Rebooting and Shutdown seems to work fine.

=== Video & Effects (Compiz) ===
<nowiki>[[File:IconsPage/restricted.png]]</nowiki>
After installing the NVIDIA drivers, Unity will be enabled.
As with Maverick, you should use the restricted driver, install from:
System -> Administration -> Additional Drivers.
Select the NVidia graphics driver that says recommended and Activate.  Reboot to apply the change.

=== HFS+ (only read) ===
Confirmed working out of the box.

=== CD/DVD Writing ===
Both writing and reading work fine.

=== Bluetooth ===

Confirmed working out of the box:
* Detection of devices
* Sending files to devices (OBEX push)
* Bluetooth Mouse
* Bluetooth Keyboard

On other devices, the Mac is found. It does not offer any services, but this seems to be a software problem.

=== Keyboard Functions ===

What works:
* F1 and F2 for LCD dimming (with nvidia-bl-dkms packages installed)
* F3 and F4 can be correctly associated with any command in the system preferences.
* F7, F8 and F9 are correctly associated with audio player's 'previous', 'play/pause', 'forward' commands.
* F10, F11, F12 correctly mute and tune audio volume (after having correctly configured audio, see below)
* CAPSLOCK light (uninstalling mouseemu)

The default setting of the ''/etc/pommed.conf'', in the "Keyboard backlight control"-section, is a bit annoying.
To change this you may use some of these settings:

<pre>
default = 0
---
step = 16
---
auto = no
---
idle_timer = 300
</pre>

The mouseemu package might affect the caps-lock behaviour, if caps-lock fails to work remove this package if installed.

As of version 1.31, pommed supports the mbp 5,5 and mbp 5,4. The default settings work ok, and you can always tune its config file:

<pre>
gksudo gedit /etc/pommed.conf
</pre>

To swap the fn key functionality (e.g. use fn+F1 to dim the LCD etc..), edit ''/etc/pommed.conf'' and set the variable ''fnmode'' to 2, or add this line to ''/etc/modprobe.d/options'':
<pre>
options hid_apple fnmode=2
</pre>
<<BR>>

==== Keyboard backlight ====

Works out of the box!
<<BR>>

==== Capslock Light ====

Works out of the box!
<<BR>>

=== Touchpad (bcm5974) ===
The touchpad usually works out of the box. You can enable two-finger scrolling from the preference->mouse->touchpad applet. It also may help you to uncheck the "Enable mouse clicks with touchpad" checkbox under the Touchpad tab. Furthermore tweaking the drag and drop time to be less, helped significantly. The click-and-drag also works.

If you are upgrading from a previous ubuntu version, depending on your previous configuration, you may need to use the <nowiki>[[http://bitmath.org/code/multitouch/|xf86-input-multitouch driver]]</nowiki> and bcm5974-dkms kernel driver from the mactel PPA (Lucid users can try the one in <nowiki>[[https://launchpad.net/~jdstrand/+archive/ppa|ppa:jdstrand/ppa]]</nowiki>, which is the driver from the mactel ppa built with a backported mtdev library). After enabling these drivers, one, two and three finger clicks all work as expected (ie, one finger = left click, two finger = right click and three finger = middle click).

To enable the multitouch drivers, run this in a console:
<pre>
sudo apt-get install xf86-input-multitouch bcm5974-dkms
</pre>
Then add this to xorg.conf (or drop into /usr/lib/X11/xorg.conf.d/99-multitouch.conf on Lucid or /usr/share/X11/xorg.conf.d/99-multitouch.conf on Maverick and later).
<pre>
Section "InputClass"
    MatchIsTouchpad "true"
    Identifier "Multitouch Touchpad"
    Driver "multitouch"
EndSection
</pre>
Then reboot (so that the new bcm5974 kernel module is loaded and X is restarted).

=== Wireless (AirPort) ===
Works ok when power is connected, but overly aggressive power management decreases wireless performance when on battery power. To disable power management of the wireless interface, you can follow the instructions here: http://uselessuseofcat.com/?p=67

=== iSight ===
<nowiki>[[File:IconsPage/webcam.png]]</nowiki>
Confirmed working out of the box.  Tested using cheese (sudo apt-get install cheese) and skype.
Obs: It's necessary to use isight-firmware-tools. In case you don't wan to do this, you need boot OSX first to load the isight firmware, and reboot into Ubuntu. This will trigger OSX to load the firmware which should last until you poweroff the machine.
You will find a detailed tutorial <nowiki>[[http://help.ubuntu.com/community/MactelSupportTeam/AppleiSight|Here]]</nowiki>.

=== Sound ===

Works out of the box!

The S/PDIF optical audio interface defaults to on, which causes a red light to shine from the headphone port when audio is playing or the sound interface was active for any reason. To disable this, you can pass run some amixer commands:
<pre>
/usr/bin/amixer set 'IEC958' off
/usr/bin/amixer set 'IEC958 Default PCM' off
</pre>
You'll need to put those in a startup script or add an entry using the Startup Applications dialog since the alsa mixer setting does not stick after a reboot.

=== Microphone ===
Works out of the box!

=== External Monitor ===
Dual monitor tested successfully with Twinview on the recommended maverick drivers described above. My external monitor was detected correctly by nvidia-settings tool.
External VGA's resolution tested up to 1920x1080.

You may experience some trouble with the external VGA and the new drivers: if the detected resolution of externally connected monitors doesn't go beyond 640x480, you will need to inactivate EDID. Add:
<pre>
Option	   "NoEDID" "True"
</pre>
to /etc/X11/xorg.conf

=== Apple Remote Control ===
Text from Jaunty: It Works with Remarks. Volume control works. Forward and back works (even on Mozilla Firefox) Menu has no action Pause/Play not tested.

Install gnome-lirc-properties:
<pre>
  sudo apt-get install gnome-lirc-properties
</pre>

gnome-lirc-properties will give you an entry "Infrared Remote Control" in menu System > Administration. After launching this it will guide you through the configuration. Though my remote is model No A1294, gnome-lirc-properties detects its signals (however, he Enter button is detected as an additional Play button).

Although this seems to work, on my mbp 5,4 the remote does not actually control any applications, like the Totem Movie Player - more testing is required.

If when you try to open "Infrared Remote Control" from the menu, or run gnome-lirc-properties from the command line, and nothing opens up, check that you have hal installed, if not, install it.  That worked for me :)

Install hal:
<pre>
  sudo apt-get install hal
</pre>

=== Firewire ===
Works out of the box.

----
<nowiki>[[https://help.ubuntu.com/community/CategoryMac|CategoryMac]]</nowiki>
----
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> Please update this page, if you have figured out anything, that is not mentioned here!
|}
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> The <nowiki>[[http://ubuntuforums.org/group.php?groupid=352|MactelSupportTeam]]</nowiki> is about to restructure and reorganize the documentation for Intel-based Macs. If you are interested in helping, please visit our <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam|team page]]</nowiki> for information. For all Mactel wikis, there is a starting place <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki>. There is also a <nowiki>[[http://ubuntuforums.org/showthread.php?t=969360|thread]]</nowiki> about planning the Mactel docummentation going on.
|}
<<BR>><<BR>>
----
CategoryMac CategoryMac
