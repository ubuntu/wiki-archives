{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

<nowiki>[[https://help.ubuntu.com/community/MacBookPro5-1?action=show|<nowiki>[[File:IconsPage/index.png|up]]</nowiki></nowiki>]]

== MacBook Pro(5,1) and (5,2) on Ubuntu 11.04 (Natty Narwhal) ==
This page aims to describe the steps needed, to fully enable all features of the '''5th Generation <nowiki>[[MacBookPro|Macbook Pro]]</nowiki>''' (release date: late 2008, early 2009) when using '''Ubuntu 11.04, Natty Narwhal'''.<<BR>>
<<BR>>
<nowiki>[[File:IconsPage/terminal.png]]</nowiki> You can find out what model you have by typing at the terminal:<<BR>>
<pre>
sudo dmidecode -s system-product-name
</pre>
<<BR>>
This should either return '''<nowiki>[[MacBookPro5,1|MacBookPro5,1]]</nowiki>''' or '''<nowiki>[[MacBookPro5,2|MacBookPro5,2]]</nowiki>'''. If not, this page is not really so well suited for your situation. If you have a <nowiki>[[MacBookPro|MacBook Pro]]</nowiki>, but a different hardware revision, please go to the <nowiki>[[https://help.ubuntu.com/community/MacBookPro|MacBook Pro start page]]</nowiki>. If you have a different Intel CPU-based Macintosh product, go to the <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|Mactel Community Help Pages]]</nowiki> to find the right wiki.

=== Overview ===

Anything not mentioned here probably already works out of the box. If not, please refer to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>.

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| Sensors (temps & fans)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Suspend & Hibernate
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Reboot
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Desktop Effects (Compiz)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| HFS+ (only read)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| CD/DVD Writing
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Bluetooth
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Screen brightness adjustment
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Keyboard functions (Brightness, volume, etc)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Sound
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Microphone
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| External Monitor
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Wireless (Air``Port)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| Trackpad
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Webcam/iSight
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Apple Remote Control
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|}
<nowiki>[[File:IconsPage/ok.png]]</nowiki> (works out-of-the-box) <<BR>>
<nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki> (works, with remarks) <<BR>>
<nowiki>[[File:IconsPage/warning.png]]</nowiki> (needs manual install) <<BR>>
<nowiki>[[File:IconsPage/dont.png]]</nowiki> (won't work)<<BR>>
<nowiki>[[File:IconsPage/question.png]]</nowiki> (not yet documented)<<BR>>

=== Basic Installation Instructions ===

Common things about installing and maintaining Ubuntu on Intel-based Macs:
<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Intel CPU-based Macintosh Generic Installation Instructions]]</nowiki>, but remember that rEFIT supports this Mac``Book only from 0.12. For 64Bit Ubuntu use rEFITt 0.14 or higher. Info
rmation about rEFIt can be found at http://refit.sourceforge.net/

=== Package Support for Intel Macs ===
Ubuntu 11.04 requires no extra packages from the Mactel PPA anymore, all required packages are available in the standard distribution.

=== Boot/GRUB/Plymouth ===
The Natty LiveCD will not boot out of the box on MBP5,1 / MBP5,2 since nouveau fails on the 9600MGT (<nowiki>[[https://bugs.freedesktop.org/show_bug.cgi?id=27501|upstream bug report]]</nowiki>) - you can work around this by manually specifying the <nowiki>[[https://help.ubuntu.com/community/BootOptions|kernel command line option]]</nowiki>:

<code>nouveau.noaccel=1</code>
Some people have noticed that X wont start even with this setting unless the 9600Card is the selected card in macOS X
here is the bug about it: https://bugs.launchpad.net/ubuntu/+source/linux/+bug/787071

=== EFi booting / Disabling 9600Gt ===
This is doable but requires a little bit of manual intervention.
Make sure to boot from the efi grub from live cd/USB when installing ubuntu.
if you pick the auto-option when installing. The installer will install an efi boot-loader.
After rebooting into ubuntu (refit will show you an efi icon for ubuntu)
boot into single mode by adding single to your kernel parameter list in grub. You should also add nopat (this is required for X to start for me later on). 
lspci  |grep VGA will show you that both cards are available.
unload the nvidia module if loaded.
run gpupwr
 you can find it here http://ubuntuforums.org/showthread.php?t=1076879&page=3.
That will disable the card for you.
load the nvidia driver.
run lspci -H1 if you want to verify that the card has been disabled.
type /etc/init.d/gdm start  to start your desktop environemnt.

if you run nvidia-settings it will only show you the 9400 card.

some notes:
i noticed a bug after reboot. Where apt wants to remove grub-efi and replace it with grub-pc right after my first reboot. Seemed to be some kind of dependency bug/error. If you accept all packages your efi grub will be removed so be on the look out.

the reason to start in single mode and unloading the driver is that when i tried after closing X it hung my laptop.
Happy booting!

On the forum people have had to edit one value in gpupwr.c depending on wich graphicscard you have enabled in macosx. Worst case if you pick the wrong one. Your display will just be disabled and you have to reboot.

 

=== Reboot ===
Works fine out of the box.

=== Suspend & Hibernate ===
Suspend is working out of the box felt pretty fast.

Hibernate  not tested.

=== Wireless ===
When installing choose 'Enable non-free software' and the Broadcom STA driver should be installed at first boot. If not, enable the driver using the 'Additional Drivers' application and reboot.

=== Sensors ===
The following sensors should be available out of the box:
* One motion sensor <<BR>>
* Ambient light sensor<<BR>>
* One fan sensor<<BR>>
* 16 temperature sensors<<BR>>

You can verify this by using
<pre>
dmesg | grep applesmc
</pre>
Output should be something like:
<pre>
[  975.586518] applesmc: Apple MacBook Pro 5 detected:
[  975.586522] applesmc:  - Model with accelerometer
[  975.586524] applesmc:  - Model with light sensors and backlight
[  975.586526] applesmc:  - Model with 20 temperature sensors
[  975.587187] applesmc: device has already been initialized (0xe0, 0x00).
[  975.587189] applesmc: device successfully initialized.
[  975.588120] applesmc: 2 fans found.
[  975.590446] input: applesmc as /devices/platform/applesmc.768/input/input10
[  975.594503] applesmc: driver successfully loaded.
</pre>

Unfortunately, none of the sensors have correct names.  There is a legacy description suitable for other MacBook's at <nowiki>[[http://mactel-linux.sourceforge.net/wiki/AppleSMC|the old mactel-linux site]]</nowiki> with an (incorrect) sample sensors.conf at <nowiki>[[http://www.mail-archive.com/mactel-linux-devel@lists.sourceforge.net/msg00516.html|this mactel 2007 mail thread]]</nowiki>.

Add this to your sensors.conf or sensors3.conf file to provide context for some of the temperature sensors (this was generated on a MBP 5,2):
<pre>
chip "applesmc-isa-0300"
    label "temp1" "TB0T Enclosure Bottom 0"
    label "temp2" "TB1T Enclosure Bottom 1"
    label "temp3" "TB2T Enclosure Bottom 2"
    label "temp4" "TB3T Enclosure Bottom 3"
    label "temp5" "TC0D CPU Diode"
    label "temp6" "TC0F CPU ???"
    label "temp7" "TC0P CPU Pin"
    label "temp8" "TG0D GPU Diode"
    label "temp9" "TG0F GPU ???"
    label "temp10" "TG0H GPU Heatsink"
    label "temp11" "TG0P GPU Pin"
    label "temp12" "TG0T GPU Transistor"
    label "temp13" "TG1H GPU 2 Heatsink"
    label "temp14" "TN0D Northbridge Diode"
    label "temp15" "TN0P Northbridge Pin"
    label "temp16" "TTF0 Unknown"
    label "temp17" "Th2H Heatsink 2"
    label "temp18" "Tm0P Memory Controller"
    label "temp19" "Ts0P PCI Express Slot Pin"
    label "temp20" "Ts0S PCI Express Slot (unk)"
    label "fan1" "Left Fan"
    label "fan2" "Right Fan"

chip "coretemp-isa-0000"
   label temp1 "Core0"

chip "coretemp-isa-0001"
   label temp1 "Core1"
</pre>

=== Keyboard functions ===

All keyboard functions work out of the box except the Expose and Dashboard keys. In Ubuntu you can initiate an Expose like preview using 'Apple + w' keyboard shortcut. Ubuntu has no equivalent of the Dashboard.

=== Bluetooth ===
Pairing works out of the box. Access options from the bluetooth applet in the top panel.

=== Trackpad ===

Left-click, right-click (two finger) use and basic trackpad work out of the box. To enable two finger scrolling and tap to click:

* '''''System''''' ''>'' '''''Preferences''''' ''>'' '''''Mouse''''' ''>'' '''''Touchpad'''''

Unity also provides a number of multitouch shortcuts which also work out of the box (such as 3 finger zoom / pinch to maximize / unmaximize a window, three finger drag to move a window, 4 finger tap to reveal the dash, and 4 finger swipe to expose / hide the launcher)

=== Desktop Effects (Compiz) ===
You must enable the a non-free graphics driver to use Compiz. Start 'Additional Drivers' and choose the 'NVIDIA accelerated graphics driver (current version)' and then reboot.

=== External Monitor ===
Works out of the box.

=== Sound ===
Works out of the box.

=== Microphone ===
Works out the box.

Make sure the microphone is not muted and the correct input is selected by selecting 'Sound Preferences...' from the audio menu on the top panel.

=== Remote Control ===
No tested.

=== Screen brightness adjustment ===
Works out of the box. 

=== Known issues ===
None so far.

----

CategoryMac

----

<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> The <nowiki>[[http://ubuntuforums.org/group.php?groupid=352|MactelSupportTeam]]</nowiki> is about to restructure and reorganize the documentation for Intel-based Macs. If you are interested in helping, please visit our <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam|team page]]</nowiki> for information. For all Mactel wikis, there is a starting place <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki>. There is also a <nowiki>[[http://ubuntuforums.org/showthread.php?t=969360|thread]]</nowiki> about planning the Mactel documentation going on.
|}
----
CategoryMac
