{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


<nowiki>[[..-|Return to the main mkusb page]]</nowiki>
-----

== Introduction of dus-iso2usb ==

The first versions of the '''dus-iso2usb''' shellscript worked only in text mode. Later on it was integrated into mkusb: called by dus and menus and dialogue windows are graphical using zenity or text based using dialog or even very basic text, if neither zenity nor dialog is available.

=== Made for Ubuntu and community flavours ===

Please notice that dus-iso2usb works with iso files of Ubuntu and the Ubuntu community flavours, Kubuntu, Lubuntu, Ubuntu Budgie, Ubuntu Kylin, Ubuntu MATE, Ubuntu Studio and Xubuntu. You cannot expect it to work with other Linux distros. Instead you should

* use the '''cloning''' method for live (live-only) drives - works with most Linux distros (when the iso file is a <nowiki>[[..-isohybrid|hybrid iso file]]</nowiki>)
* use <nowiki>[[..-persistent|dus-persistent]]</nowiki> or <nowiki>[[..-plug|mkusb-plug]]</nowiki> for persistent live drives - likely to work with Debian and distros that are very similar to Ubuntu or Debian.

=== Main function ===

The main function of dus-iso2usb is to
* extract the first partitions and the grub structure from compressed image files
* create new partitions, one for an iso file labeled 'isodevice', and one optional for persistence labeled 'writable' (or in older systems labeled 'casper-rw').
* copy iso file to 'isodevice' and add some tweaks. 

This makes a system that can boot via grub into an iso file both in UEFI mode and BIOS mode (alias CSM alias legacy mode), 'grub-n-iso'. The following link describes how to do it manually.

<nowiki>[[https://help.ubuntu.com/community/Installation/iso2usb/isoboot|help.ubuntu.com/community/Installation/iso2usb/isoboot]]</nowiki>

<nowiki>[[https://help.ubuntu.com/community/Grub2/ISOBoot|help.ubuntu.com/community/Grub2/ISOBoot]]</nowiki>

<pre>
$ dus-iso2usb -h
Usage:
sudo -H dus-iso2usb <source> <target> <part-tbl> <grub-ver> <persistent or live-only> [boot-flag]
Example:
sudo -H dus-iso2usb lubuntu-22.04-desktop-amd64.iso /dev/sdc gpt grub-2.0.6 persistent
param 1: source file
param 2: target drive
param 3: partition table: gpt or msdos
param 4: grub version: grub-2.0.6 or grub-2.0.4
param 5: persistent or live-only
param 6: boot-flag [or blank] (for HP from ~ 2010)
Help:
 -h
Version:
 -v
Available drives 
NAME      SIZE TRAN   MODEL
sda     238,5G sata   SanDisk SD6SB1M2
sdb       3,7T sata   WDC WD4002FYYZ-0
sdc      55,9G usb    ITY3            
nvme0n1 232,9G nvme   KINGSTON SA2000M8250G
$ 
</pre>

=== Main purpose ===

The main purpose is to make a USB boot drive that
* 'just works'
* particularly in computers (new or old), that are difficult to boot.

An [optional] parameter, '''boot-flag''', can be added as parameter #6. It can be useful for some old HP computers (made around 2010), but also for some other computers. Some computers will not like it and the default setting is not to put a boot-flag onto the live and persistent live system.

With some computers and USB pendrives booting works with a boot-flag both in UEFI mode and BIOS mode (alias CSM alias legacy mode). Other computers are more picky about the settings. It was surprising that one USB pendrive was not bootable anywhere with a boot-flag on this system, while other pendrives as well as SSDs connected via an Asmedia USB3 to SATA adapter booted happily.

So if it is difficult to boot your computer from a cloned USB pendrive or memory card, please test various settings with

* the new dus-iso2usb
* the old dus-persistent
* and maybe also some different drives (because some USB drives can be difficult to boot from).

User friendliness: Other settings are fixed when '''msdos''' and/or '''boot-flag''' is selected, which avoids loops in [B][FONT=Courier New]dus[/FONT][/B] because of combinations of settings that are not compatible.

== dus-iso2usb is integrated into dus ==

dus-iso2usb is called via the menu system, both to make live (live-only) systems and to make persistent live systems.

=== Screenshots ===

The standard method for a '''live''' drive is '''cloning''', but when necessary, select iso2usb:

<nowiki>[[File:select_method-tool_live-only.png]]</nowiki>

The classic <nowiki>[[..-persistent|dus-persistent]]</nowiki> method is well debugged and tweaked to work is most cases, but when there are problems, select iso2usb:

<nowiki>[[File:select_method-tool_persistent.png]]</nowiki>

Select settings here. New computers should work with the defaults, but try other settings to make a working USB system for older computers:

<nowiki>[[File:settings_for_dus-iso2usb.png]]</nowiki>

-----

<nowiki>[[..-|Return to the main mkusb page]]</nowiki>
