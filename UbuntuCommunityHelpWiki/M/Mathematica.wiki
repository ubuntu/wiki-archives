{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



Mathematica is not free software, see ['UbuntuScience'] for alternatives.

== Installation ==

Mathematica has an installer named Math''''''Installer. It is in 
<pre>
/cdrom/Unix/Installers/Linux
</pre>
Math''''''Installer will not run from the CD since, by default, ubuntu mounts CDs with the <code>noexec</code> option. To solve this simply run the installer with the <code>sh</code> command
<pre>
sudo sh MathInstaller
</pre>

Alternatively you can copy the Linux installer to a temporary directory and run Math''''''Installer:
<pre>
mkdir -p /tmp/Mathematica/Installers
cp -r /cdrom/Unix/Installers/Linux /tmp/Mathematica/Installers
cd /tmp/Mathematica/Installers/Linux/
./MathInstaller
</pre>

After that, the script asks a series of questions, including the licensing information. 
It ends installing Mathematica in /usr/local, and it creates a symbolic link /usr/bin/mathematica. 

You may need to restart gnome to get the fonts working properly.

=== Autoloading Packages ===

Mathematica has a certain core set of functionality that is automatically available.  There are also a number of "packages" that can be manually loaded to get additional functions.  Examples include the <code>Graphics</code> and <code>LinearAlgebra</code> packages.  If, like me, you think that these should always be available, it is easy to make it so.  Simply run the commands below:

<pre>
cd /usr/local/Wolfram/5.1/AddOns/StandardPackages
for i in `find -name init.m | sed s/..//` ; do mkdir -p ~/.Mathematica/Autoload/`dirname $i` ; cp $i ~/.Mathematica/Autoload/`dirname $i` ; done
</pre>

This will make it so you no longer have to run <code><<`PackageName`</code> to load a package; it will load as soon as you use a function from the package.  The above command enables autoloading for you.  Change <code>~/.Mathematica/AutoLoad</code> to <code>/usr/local/Wolfram/5.1/AddOns/AutoLoad</code> to enable autoloading for all users.  Remember to change the version number if you don't have version 5.1.

== Known Issues and Workarounds ==

=== Environment Variables ===

A number of fixes involve setting environment variables.  There are several ways to set these and have them be seen by Mathematica (or other programs). First, you can add them to your <code>~/.bashrc</code>:
<pre>
 export VARIABLE=value
</pre>
This will make the variable visible to all programs you run from the command line. You can also set the variable when launching the program:
<pre>
 VARIABLE=value Mathematica
</pre>
Or you can make a launcher script like this:
<pre>
# !/bin/sh
 VARIABLE1=value1 VARIABLE2=value2 Mathematica -option1 -option2
</pre>

=== Applet Bug ===

On 5.10+ there is a bug with Mathematica and the window-list and workspace-switcher applets. After starting Mathematica the applets take up 100% of CPU.  
 
If you start mathematica with no splash screen 
<pre>
mathematica -noSplashScreen
</pre>
everything seems to work fine

You can use it for creating an Ubuntu launcher. 

=== Sound ===
Mathematica sound doesn't work in Linux, and Wolfram Research probably isn't going to integrate it anytime soon.  Here is a workaround that should work well.  It assumes that you have aRts installed and running.  To install aRts, 
<pre> 
sudo apt-get install arts 
</pre>
To start aRts, 
<pre> 
artswrapper -s 2 & 
</pre>

Now, create the file <code>~/.Mathematica/Kernel/sound.m</code> and copy the following Mathematica program into it.
<pre>
(*
* Set up a $SoundDisplayFunction for the
* Linux version of Mathematica and potentially other unixes, too.
* )
 
Begin["System`Private`"]

Unprotect[$SoundDisplayFunction]
Clear[$SoundDisplayFunction]

$SoundDisplayFunction =
    Module[{playCmd,soundFileName},
        Display[$SoundDisplay, #1];
        
        (* is there a way to get the sample rate, etc. from the audio stream? *)
        playCmd = "artsplay";
        soundFileName = "/dev/shm/" <> ToString[Unique["sound"]] <> ".wav";
        playCmd = playCmd <> " " <> soundFileName;
        
        Export[soundFileName, #1, "WAV"];
        Run[playCmd];
        Run["/bin/rm -f " <> soundFileName];
    ] &

Protect[$SoundDisplayFunction]

End[];
</pre>
Then add the following to <code>~/.Mathematica/Kernel/init.m</code>
<pre>
Get["sound.m"];
</pre>
Try using <code>Play[]</code> to see if it worked.

The command to start aRts could be placed in <code>init.m</code> (personally, I start it in ~/.xsession).  If you put it in <code>init.m</code>, then you'll probably want to suppress any error messages like this
<pre> 
artswrapper -s 2 >& /dev/null & 
</pre>
If you don't like aRts, by all means use a different command to play the sounds.  The <code>sound.m</code> file is pretty easy to follow.  

<code>sound.m</code> uses <code>/dev/shm</code> as a temporary directory.  This means that it's fast, but also can't handle huge sound files.  Change <code>/dev/shm</code> to, say, <code>/tmp</code> or <code>~/tmp</code> if you're concerned.

=== SMP Machines ===

There is a bug in Mathematica 5.1 (possibly others) where certain functions take a long time or hang the Mathematica Kernel on SMP machines.  An example function is <code>LinearSolve[]</code>.  You have an SMP machine if <code>/proc/cpuinfo</code> lists more than one processor.  The work around is to set an environment variable before launching Mathematica:
<pre>
export LD_ASSUME_KERNEL=2.4.1
</pre>
This tells the runtime linker (<code>ld</code>) to use the threading and other support libraries expected by Mathematica.   On some systems,
<pre>
export OMP_NUM_THREADS=1
</pre>
does the same.

=== [: 215: ==: unexpected operator ===
After upgrading to Ubuntu 7.10 starting the kernel in Mathematica 5.2 produced the following error message twice
<pre>
[: 215: ==: unexpected operator
</pre>
This is because the sh scripts uses bash syntax, and sh is not emulated by bash any more. You can fix this by editing the first line of the "math" and "Math``Kernel" scripts in Mathematica5.2/Executables from
<pre>
# !/bin/sh
</pre>
to
<pre>
# !/bin/bash
</pre>

=== X.org Composite Extension ===

Mathematica uses the Motif library (or some variant of it) to do its GUI.  Motif and its variants seem to have trouble with the X.org Composite extension, which is used by xcompmgr, Xgl, Compiz, etc.  It appears that just loading Composite when starting X is enough to trigger the bug; you don't have to use xcompmgr or any other compositor.  This bug affects other applications (e.g. Nedit) that use a Motif variant, and is not really a bug in Mathematica.  The bug basically causes bad updates to the notebook interface.  If you drag the scroll bar, it will "bleed" instead of just moving.  It is enough to resize the window or page up or down to cause a full redraw and fix the display, but it is very annoying.  A possible workaround is
<pre>
export XLIB_SKIP_ARGB_VISUALS=1
</pre>
If this doesn't work, you can just be careful about dragging the scroll bar, and the problem will be minimized.  You can use arrow keys, page up/down, click (not drag) in the scrollbar, or use scrollbar buttons.

=== Numlock / Alt / Ctrl / Backspace Problems ===

There are well known problems with Mathematica and X keymaps.  One particular problem is an inability to use Mathematica with Numlock on (which is probably one of the more useful keys for a mathematics package...).  This can be fixed with various combinations of Xresources and <code>xmodmap</code>.  It should be enough to set some Xresources.  Add the following to a file called <code>~/.Xresources</code>:
<pre>
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
! XMathematica settings
! system resources set in:
! /usr/local/Wolfram/Mathematica/5.1/SystemFiles/FrontEnd/SystemResources/X/XMathematica

! Set these if you need to change what the FE uses for Primary (Command)
! and Secondary (Option) modifier keys.
! this is an alternative to using xmodmap to redefine Mod3 (default NumLock)
!*primaryModifierMask: Mod2Mask
* secondaryModifierMask: Mod3Mask
</pre>

Then set them with 
<pre>
xrdb -merge ~/.Xresources
</pre>
or 
<pre>
xrdb -merge ~/.Xresources
</pre>

You can add the above line to a script that is run at login (e.g., ~/.xsession or ~/.xinitrc) to set them every time you login.  You can see all of the Xresources Mathematica recognizes (and their defaults) in the file mentioned above.

The other thing to look at is <code>xmodmap</code>, which is used to (re)define keymappings.  The following works for <nowiki>[[Jpkotta| me]]</nowiki> in conjunction with the above Xresources (these were done a long time ago, and I'm pretty sure that these don't address Mathematica problems).
<pre>
xmodmap -e "keycode 115 = Super_L"
xmodmap -e "keycode 116 = Super_R"
xmodmap -e "keycode 117 = Menu"
xmodmap -e "add mod4 = Super_L Super_R"
xmodmap -e "remove lock = Caps_Lock"
</pre>

=== Locale Errors ===

The bug manifests itself with:
* error complaining about the locale settings
* lots of lines repeating various blends of "Warning: translation table syntax error"
* window list applet got stuck when the splash screen appeared
* segmentation fault & Mathematica death

A workaround is:
<pre>
cd /usr/X11R6/lib/X11/
sudo mv locale locale.bck
sudo ln -s /usr/share/X11/XKeysymDB XKeysymDB
sudo ln -s /usr/share/X11/locale/ locale
</pre>

Also, the <code>-noSplashScreen</code> option should be used when starting Mathematica.

=== AMD 64 Users on Ubuntu 5.10 ===
Simply due to the architecture difference, Mathematica will complain with:
<pre>
MathKernel cannot determine operating system.</pre>

This can be remedied with this procedure:
* First, add the following lines to the "math" script using your favorite editor:
<pre>
                                x86_64)
                                        SystemIDList="Linux";;</pre>
so that part of the script looks like this: 
<pre>
if [ -z "${SystemIDList}" ]; then
        case `uname -s` in
                AIX)
                        SystemIDList="AIX-Power64 IBM-RISC";;
                HP-UX)
                        SystemIDList="HPUX-PA64 HP-RISC";;
                IRIX)
                        SystemIDList="SGI";;
                Linux)
                        case `uname -m` in
                                alpha)
                                        SystemIDList="Linux-AXP";;
                                ia64)
                                        SystemIDList="Linux-IA64";;
                                i?86)
                                        SystemIDList="Linux";;
############### Beginning of AMD64 Modification
                                x86_64)
                                        SystemIDList="Linux";;
############### End Modification
***************** )
                                        SystemIDList="Unknown";;
                        esac;;
                OSF1)
                        SystemIDList="DEC-AXP";;
                SunOS)
                        SystemIDList="UltraSPARC Solaris";;
********* )
                        SystemIDList="Unknown";;
        esac
fi</pre>

* Next, run "math" and enter all of your registration and licensing information.
''This step is important even though it may not seem to be at the time of doing this.  I could not seem to get the Reg splash screen to run for me, and Mathematica would crash out with a <code>Segmentation Fault</code>.''
* Finally, make the same exact addition to the "mathematica" script.
Now you should be able to run the "mathematica" script and have the GUI start up properly.

== External Links ==

http://support.wolfram.com/

== Comments ==

=== Wine ===
Installing Mathematica with Wine 0.9.31 works, although a bit unstable. For instance, the beep generated by warning/error messages causes it to crash. A quick fix is to disable them (Preferences > Global Options > MessageOptions)
