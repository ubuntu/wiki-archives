{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



This page aims to describe the steps needed, to fully enable all features of the '''5.2 White Macbook''' (release date: early 2009) when using '''Ubuntu 10.10, Maverick'''. You can check here if you own this model: <nowiki>[[http://en.wikipedia.org/wiki/MacBook#Model_specifications|on wikipedia]]</nowiki>, <nowiki>[[http://support.apple.com/kb/SP504|on apple.com]]</nowiki><<BR>>
<<BR>>

You can find out what model you have in OSX, System Profiler

If you have a different model, please go <nowiki>[[https://help.ubuntu.com/community/MacBook|here]]</nowiki> and find the right wiki.

=== Overview ===

Anything not mentioned here probably already works out of the box. If not, please refer to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>. 

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| Sound
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| Suspend
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Hibernate
| <nowiki>[[File:IconsPage/dont.png]]</nowiki>
|-
| Shutdown
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| ACPI, power management, etc
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| Shell/CTRL-ALT-Fn
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| Reboot
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Desktop Effects (Compiz)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Keyboard functions (Brightness,volume,...)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| CD/DVD Writing
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Bluetooth
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| External Monitor
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|-
| Wireless (Air``Port)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| iSight
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| Touchpad (appletouch)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| Apple Remote Control
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|-
| Firewire
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|}
<nowiki>[[File:IconsPage/ok.png]]</nowiki> (works out-of-the-box) <<BR>>
<nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki> (works perfectly, but needs a little job) <<BR>>
<nowiki>[[File:IconsPage/warning.png]]</nowiki> (works, with remarks) <<BR>>
<nowiki>[[File:IconsPage/dont.png]]</nowiki> (won't work - please post if you have hints)<<BR>>
<nowiki>[[File:IconsPage/question.png]]</nowiki> (not yet documented - please post if you can test)<<BR>>

=== Basic Installation Instructions ===
* As stated in Ubuntu 10.10 Release Notes, Macbooks with EFI will not be able to boot the 64bit (amd64) version of Ubuntu 10.10 live cd. The i386 CDs will work.

* If you really want to use the x86_64 version, you can download an alternate installation media from <nowiki>[[http://cdimage.ubuntu.com/ports/releases/maverick/release/ubuntu-10.10-desktop-amd64+mac.iso|here]]</nowiki>. This iso will work.

* Due to <nowiki>[[https://bugs.launchpad.net/acpi/+bug/341230|this bug]]</nowiki>, '''booting the kernel requires to use''' <code> maxcpus=1 </code> '''or''' <code> acpi=off </code> '''flags'''. While booting from the LiveCD, make sure to hit F6 in order to change the boot options. Since the Macbook is a laptop, I strongly suggest to use the <code> maxcpus=1 </code> option in order to save ACPI features.

Other common things about installing and maintaining Ubuntu on Intel-based Macs:
<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Intel CPU-based Macintosh Generic Installation Instructions]]</nowiki>

=== Wireless (AirPort) ===
To enable wireless you need to install the restricted Broadcom STA driver. Open <code> System -> Administration -> Additional Drivers </code> and choose '''Broadcom STA'''.
Otherwise, if you chose to install restricted software during Ubuntu's installation, the wireless card will automatically work.

=== Desktop Effects (Compiz) ===
You probably want to enable the proprietary graphics driver. Go to <code> System -> Administration -> Additional Drivers </code> and choose the NVIDIA accelerated graphics driver (latest version).

If desktop effect have strage behaviour, or if you are experiencing tearing, install the <code> compizconfig-settings-manager </code> package and edit compiz settings accordingly.

=== Touchpad ===
Left-click, right-click, two-finger use and basic trackpad work out of the box. It seems to be very slow and flaky, though. This can be fixed in <code> System > Preferences > Mouse </code> and change pointer speed (Acceleration & Sensitivity) Two finger scrolling can be activated from <code> System > Preferences > Mouse </code> and on tab Touchpad, change scrolling to Two finger scrolling. From here you can also deactivate the mouse click on the track pad which is very annoying.

Thanks to http://bugs.debian.org/cgi-bin/bugreport.cgi?msg=10;att=0;bug=576456

You should disable the mouse plugin in gnome-settings-daemon, since gnome-control-center can't handle every possible touchpad setting via gnome-mouse-properties. Open a terminal and type
<pre>
gconftool-2 --type boolean --set /apps/gnome_settings_daemon/plugins/mouse/active false
</pre>
Then, edit your <code> /etc/X11/xorg.conf </code>:
<pre>
Section "InputDevice"
    Identifier     "Mouse0"
    Driver         "synaptics"
    Option         "Protocol" "auto-dev"
    Option         "Device" "/dev/psaux"
    Option         "SendCoreEvents" "true"
    Option         "LeftEdge" "100"
    Option         "RightEdge" "1120"
    Option         "TopEdge" "50"
    Option         "BottomEdge" "310"
    Option         "FingerLow" "5"
    Option         "FingerHigh" "20"
    Option         "MaxTapTime" "100"
    Option         "MaxTapMove" "150"
    Option         "MaxDoubleTapTime" "180"
    Option         "VertScrollDelta" "20"
    Option         "HorizScrollDelta" "50"
    Option         "MinSpeed" "0.49"
    Option         "MaxSpeed" "0.78"
    Option         "AccelFactor" "0.0010"
    Option         "LockedDrags" "false"
    Option         "TapButton1" "1"
    Option         "TapButton2" "3"
    Option         "TapButton3" "2"
    Option         "VertTwoFingerScroll" "true"
    Option         "HorizTwoFingerScroll" "false"
    Option         "FastTaps" "true"
    Option         "VertEdgeScroll" "false"
    Option         "HorizEdgeScroll" "false"
    Option         "SHMConfig" "true"
EndSection
</pre>
If you keyboard stops working, add this lines too:
<pre>
Section "InputDevice"
    Identifier     "Keyboard0"
    Driver         "kbd"
EndSection
</pre>
If you want you can change these settings in order to reach your preferred config. Check man synaptics to find all options and tuning.

=== Keyboard functions ===
Volume Up (F12), Volume Down (F11), Volume Mute (F10), Eject will work out-of-the-box.

Adjusting the screen brightness works out of the box with the default free graphics driver. But when you install the restricted NVIDIA graphics driver, it won't work.

In order to control the monitor backlight with the restricted driver, you need to add the <nowiki>[[https://launchpad.net/~mactel-support/+archive/ppa|Mactel PPA]]</nowiki> on your <code> /etc/apt/sources.list </code> and then install the <code> nvidia-bl-dkms </code> package. A reboot might be necessary.

=== ACPI, power management, etc ===
Due to <nowiki>[[https://bugs.launchpad.net/acpi/+bug/341230|this bug]]</nowiki>, in order to make the system boot you need to add the <code> maxcpus=1 </code> or <code> acpi=off </code> options to your kernel boot line. Since the Macbook is a laptop, I strongly suggest to use the <code> maxcpus=1 </code> option in order to save ACPI features.

You can edit the <code> /etc/default/grub </code> file with the editor of your choice (nano, gedit, kwrite, etc.), but remember to apply the changes you make by running <code> sudo update-grub </code>

=== Shell/CTRL-ALT-Fn ===
Works out of the box with the free nouveau drivers. Seems to work with the restricted ones, but at low screen resolution.

=== External Monitor ===
Works fine with proprietary NVIDIA graphics driver, you just need to configure it with the nvidia-settings tool - no reboot is needed. You can find it in <code> System -> Administration </code>.

=== Sound and Headphones ===
Front speakers work out of the box, but with poor sound quality. By default, headphones are not working.

You can edit some settings in file <code> /etc/modprobe.d/options </code> OR <code> /etc/modprobe.d/alsa-base.conf </code> - you may need to create the former.

Add the following line. If you use this, you get the same poor sound quality but headphones working (you need to reboot) 
<pre>
options snd_hda_intel model=mbp3 power_save=5
</pre>
If you don't want to reboot, you can:
* close all audio applications
* unload the module snd-hda-intel typing a couple of times in a terminal
<pre>
sudo killall pulseaudio && modprobe -r snd-hda-intel
</pre>
* and than reload the module with this command
<pre>
sudo modprobe snd-hda-intel model=mbp3 power_save=5
</pre>

If you want good audio quality but NO headphones working, you can instead use this in the same file as above, and than reboot - or if you don't want, you can do as before:
<pre>
options snd_hda_intel model=acer-aspire-7730g power_save=5
</pre>

==== Microphone ====
The internal microphone works with both settings as in the section above.

=== Webcam/iSight ===
The built-in webcam works following this simple howto: <nowiki>[[https://help.ubuntu.com/community/AppleiSight|AppleiSight]]</nowiki> 

=== Suspend ===
Suspend works out of the box.

=== Remote Control ===
You have to install gnome-lirc-properties from repositories, and configure it following the wizard, choosing Apple Mac Mini IR Receiver with Custom remote control. Then go in <code> System -> Preferences -> Infrared Remote Control </code> , unlock the window, choose autodetect and select the IR receiver. Now you can test it: in the bottom of the window, you can see if you remote control works.

Then change the file /etc/lircd.conf.gnome into this:
<pre>
begin remote
  name             Apple_A1156
  bits             8
  eps              30
  aeps             100
  one              0 0
  zero             0 0
  pre_data_bits    24
  pre_data         0x87EE81
  gap              211982
  toggle_bit_mask  0x0
  ignore_mask      0x0000ff01

      begin codes
          KEY_VOLUMEUP       0x0B
          KEY_VOLUMEDOWN     0x0D
          KEY_PREVIOUSSONG   0x08
          KEY_NEXTSONG       0x07
          KEY_PLAYPAUSE      0x04
          KEY_MENU           0x02
      end codes

end remote
</pre>

Now, create and make executable two files in your home directory-I created them in the "script" directory: they will let you adjust audio volume from shell:
script/volume_up
<pre>

A=`pacmd dump | grep "set-sink-volume " | cut -d " " -f 3`
B=$((A + 0x01000))
if [ $(($B)) -gt $((0x10000)) ]
 then
    B=$((0x10000))
fi
pactl set-sink-volume 0 `printf "0x%X" $B`
</pre>
script/volume_down
<pre>

A=`pacmd dump | grep "set-sink-volume " | cut -d " " -f 3`
B=$((A - 0x01000))
if [ $(($B)) -lt $((0x00000)) ]
 then
    B=$((0x00000))
fi
pactl set-sink-volume 0 `printf "0x%X" $B`
</pre>
This two scripts are useful to control your audio level from the shell or in a script. If they don't work because you have some esoteric configs, maybe you can adjust them on line 3 - take a look at the output of the command
<pre>
pacmd dump
</pre>
in line beginning with "set-sink-volume" and adjust line 3 accordling.

Now, you have to create a file like this (this is my own config, you can change it according to your preferences) in your home directory:
.lircrc
<pre>
begin rhythmbox

begin
prog = Rhythmbox
button = play
config = playpause
end

begin
prog = Rhythmbox
button = pause
config = pause
end

begin
prog = Rhythmbox
button = forward
config = next
end

begin
prog = RhythmBox
button = backward
config = previous
end

begin
prog = RhythmBox
button = fw
config = seek_forward
end

begin
prog = RhythmBox
button = bw
config = seek_backward
end
end rhythmbox

begin
prog = irexec
button = volup
config = $HOME/script/volume_up
repeat = 2
end

begin
prog = irexec
button = voldown
config = $HOME/script/volume_down
repeat = 2
end

begin
prog = irexec
button = play
config = rhythmbox-client
end

begin
prog = irexec
button = menu
config = rhythmbox-client --set-rating 2
end
</pre>

and last add and enable the command "irexec --daemon" in System -> Preferences -> Session Properties (gnome-session-properties, from shell) - this will run irexec every time you log in into your home session and execute your favourite commands when you press something on your remote control.

With this .lircrc file:
* Pressing Play/Menu will start rhythmbox, if it is not already running
* Pressing vol+/vol- will change system volume
* Pressing Play will play/pause playback, if rhythmbox is running
* Pressing forward/backward will change song, if rhythmbox is running
* Pressing menu will rate with two stars the current song, if rhythmbox is running
You can change it as you prefere.

----
<nowiki>[[https://help.ubuntu.com/community/CategoryMac|CategoryMac]]</nowiki> 
----
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> Please update this page, if you have figured out anything, that is not mentioned here!
|}
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> The <nowiki>[[http://ubuntuforums.org/group.php?groupid=352|MactelSupportTeam]]</nowiki> is about to restructure and reorganize the documentation for Intel-based Macs. If you are interested in helping, please visit our <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam|team page]]</nowiki> for information. For all Mactel wikis, there is a starting place <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki>. There is also a <nowiki>[[http://ubuntuforums.org/showthread.php?t=969360|thread]]</nowiki> about planning the Mactel docummentation going on.
|}
<<BR>><<BR>>
