{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== How to auto transcode MYTHTV recorded shows. ==

== Introduction ==

The purpose of this documentation is to describe how to configure you Mythtv system to auto convert or transcode TV shows recorded using MythTV to DVD, XVID or DIVX cutting out the commercials. This documentation assumes that MYTHTV and MYTHWEB are already installed and running correctly.

'''Step 1: Install dependencies for nuvexport.'''

Code:
<pre>

sudo apt-get install mjpegtools libdbix-profile-perl libdate-manip-perl

</pre>

''' Step 2: Build ffmpeg with the xvid and other formats. '''

Code:
<pre>
 Follow these instructions 
</pre>

''' Step 3: Create a directory for nuvexport.'''

Code:
<pre>
mkdir nuvexport
</pre>

'''Step 4: Change into nuvexport.'''

Code:
<pre>
cd nuvexport
</pre>

''' Step 5: Grab nuvexport. '''

Code:
<pre>
wget http://www.forevermore.net/files/nuv...latest.tar.bz2
</pre>

NOTE: When MythTV 0.21 is released nuvexport will be integrated into MYTHTV.

''' Step 6: Extract. '''

Code:
<pre>
 tar jxvf nuvexport-latest.tar.bz2
</pre>

''' Step 7: Change into extracted directory. '''

Code:
<pre>
cd nuvexport-*

</pre>

''' Step 8: Install nuvexport. '''

Code:
<pre>
sudo make install
</pre>

''' Step 9: Test the output quality manually. '''

Before setting up the automated transcoding of your recorded shows run nuvexport manually a few times and play with the quality settings to suit your needs.

*** Login as the user that you have mythtv running.
*** From the command line run nuvexport.

Code:
<pre>

nuvexport
</pre>

*** step through the prompts.
*** remember the quality settings that you like, better write them down. I've included the settings that I use below in my nuvexportrc.

''' Step 10: Edit nuvexportrc '''

Code:
<pre>
sudo gedit /etc/nuvexportrc
</pre>

''' Step 11: Change Settings in the nuvexportrc. '''

NOTE: Below is my nuvexportrc. Change your nuvexportrc to match mine or tweak the quality settings in your nuvexportrc to suit your needs (see step9).
Also you might want to change the output path from "path = /media/videos/converted_tv" to something that you prefer.

Code:
<pre>
<nuvexport>

    
export_prog=ffmpeg
underscores=yes

filename=%t_-_%s_(%m) 

date=%m.%d.%y

    
crop_pct = 2

</nuvexport>

<generic>

    
path = /media/videos/converted_tv

    
use_cutlist = yes

 
gencutlist = yes

    
multipass = no

    
noise_reduction = no

    
deinterlace     = yes

    
crop = yes

    
fast_denoise = no

</generic>

<ffmpeg>
</ffmpeg>

<transcode>

    
force_mythtranscode = yes

    
mythtranscode_cutlist = yes

</transcode>

<mencoder>
</mencoder>

<XviD>

    vbr          = yes   # Enable vbr to get the multipass/quantisation options
############# (enabling multipass or quantisation automatically enables vbr)
    multipass    = no   # You get either multipass or quantisation; multipass will override
    quantisation = 3   # 4 through 6 is probably right...  1..31 are allowed (lower is better quality)

    a_bitrate    = 256   # Audio bitrate of 256 kbps
    v_bitrate    = 4500   # Remember, quantisation overrides video bitrate

    width        = 624   # Height adjusts automatically to width, according to aspect ratio
    height       = auto

</XviD>
<DIVX>

    vbr          = yes   # Enable vbr to get the multipass/quantisation options
############# (enabling multipass or quantisation automatically enables vbr)
    multipass    = no   # You get either multipass or quantisation; multipass will override
    quantisation = 2  # 4 through 6 is probably right...  1..31 are allowed (lower is better quality)

    a_bitrate    = 256   # Audio bitrate of 256 kbps
    v_bitrate    = 4500   # Remember, quantisation overrides video bitrate

    width        = 624   # Height adjusts automatically to width, according to aspect ratio
    height       = auto

</DIVX>
<DVD>

    vbr          = yes   # Enable vbr to get the multipass/quantisation options
############# (enabling multipass or quantisation automatically enables vbr)
    multipass    = no   # You get either multipass or quantisation; multipass will override
    quantisation = 2  # 4 through 6 is probably right...  1..31 are allowed (lower is better quality)

    a_bitrate    = 256   # Audio bitrate of 256 kbps
    v_bitrate    = 4500   # Remember, quantisation overrides video bitrate

    width        = 624   # Height adjusts automatically to width, according to aspect ratio
    height       = auto

</DVD>

<MP3>
    bitrate = 256
</MP3>

<ffmpeg::MP4>

    mp4_codec = mpeg4

    mp4_fps = auto

</ffmpeg::MP4>

<ffmpeg::PSP>

    psp_fps = low

    psp_resolution = 320x240

    psp_bitrate = high

    psp_thumbnail = yes

</ffmpeg::PSP>

<mencoder::XviD>

    multipass = no

</mencoder::XviD>

<profile::sample>

    title       = test

    export_prog = transcode
    mode        = xvid
    confirm     = true

</profile::sample>

</pre>

''' Step 12: Open a browser to your MythWeb. '''

The following is assuming that MythWeb is running on your MythTV box. The same process can be run from the MythTV box while logged in as your mythtv user. Run mythtv-setup and navigate to the last page of the General section until you see the "User Jobs."

*** Click on the "Edit MythWeb and MythTV Settings" button (i.e. the Key and the Wrench).
*** Click on the link "MythTV settings table."
*** Scroll down to the UserJob1.
*** Enter the following.

Code:

<pre>
nuvexport-xvid --nice 19 --input="%FILE%"
</pre>

*** Now enter a Description for UserJob1 under the setting UserJobDesc1 (i.e. Convert to XVID).
*** Scroll to the UserJob2.

Code:
<pre>
nuvexport-divx --nice 19 --input="%FILE%"
</pre>
*** Now enter a Description for UserJob2 under the setting UserJobDesc2 (i.e. Convert to DIVX).
*** Scroll to the UserJob3.

Code:
<pre>
nuvexport-dvd --nice 19 --input="%FILE%"
</pre>
*** Now enter a Description for UserJob3 under the setting UserJobDesc3(i.e. Convert to DVD).

''' Step 13: Set your scheduled shows to auto transcode. '''

*** From MythWeb click on "Recording Schedules (Manual, Custom)"
*** Click on one of your scheduled shows.
*** On the right side under "Schedule Options:" make sure that "Auto-flag commercials:" has a check next to it.
*** Just under the "Auto-transcode:" option you should now see the three options that you specified in step 12 (i.e. Convert to XVID, Convert to DIVX, and Convert to DVD). Select one to auto trancode your show.
*** Repeat Step 13 for other shows that you wish to auto transcode.
