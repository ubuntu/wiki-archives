{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



=== Introduction ===

This page is about installing Ubuntu 8.04 (Hardy Heron) on a <code>MacBookAir1,1</code>. The hardware is quite similar to <nowiki>[[MacBookPro4-1|MacBookPro4,1]]</nowiki>.

More discussion is going on in this forum thread: <nowiki>[[http://ubuntuforums.org/showthread.php?t=707988]]</nowiki>. Some information of this guide is adapted from <nowiki>[[http://www.isriya.com/node/1804/ubuntu-on-macbook-air]]</nowiki>.

=== Installation ===

<nowiki>[[How to install Ubuntu on MacBook Air using live CD]]</nowiki>

=== Working out-of-the-box ===

==== Bluetooth ====

But pay attention that bluetooth version 3.26 on hardy is buggy, so if you have 3.25 (default, no upgraded), don't upgrade untill next version

==== Microphone ====

But to be able to hear your test you need to see the Sound section

==== iSight ====

iSight works out of the box. Take a look with Kopete, Cheese, aMSN, ...

==== Suspend to Ram ====

Suspend to ram works really good out of the box and it suspends even more quickly than Mac OS !

=== Wireless Setup ===

Since Hardy can not detect Wi-Fi out of the box and MacBook Air has no ethernet port, the process is quite tricky. You need to download the apt package from the web and transfer to the Ubuntu partition. There are two ways for this process:

* USB disk
* Download to Mac OS X partition

Follow these steps

1. Download these packages (i386 architecture; the links are for 8.04):
** <nowiki>[[http://packages.ubuntu.com/hardy/ndiswrapper-common|ndiswrapper-common]]</nowiki>
** <nowiki>[[http://packages.ubuntu.com/hardy/ndiswrapper-utils-1.9|ndiswrapper-utils-1.9]]</nowiki>
** <nowiki>[[http://packages.ubuntu.com/hardy/unrar|unrar]]</nowiki>
2. Save them to the USB disk '''or''' your <code>/Users/[username]/Public</code> directory in the Mac OS X partition.
3. Insert the Mac OS X Install Disc 1 (it comes with the MacBook Air, in the "Everything else" envelope) into the external drive and reboot to Ubuntu. (You must do this before booting Ubuntu because the superdrive may not accept a disc after Ubuntu has booted.)
4. In Ubuntu, install those three packages by double-clicking on them. (install <code>ndiswrapper-common</code> before <code>ndiswrapper-utils-1.9</code>)
** If you put them on a USB disk, Ubuntu should mount it automatically. Double-click it.
** If you put them on the Mac OS X partition, go to <code>Places</code> then <code>Computer</code> and double-click on <code>Macintosh HD</code>. Enter your password to gain root permission. It will be mounted on the desktop. Go to <code>Users/[username]/Public</code> to grab the packages.
5. On the desktop, you should see the CD icon. Go to <code>boot camp</code>, <code>drivers</code> and copy the <code>broadcom</code> directory to your desktop.
6. Open Terminal from the Accessories menu. Type these commands:
<pre>
cd Desktop/broadcom
chmod u+w .
unrar x broadcomxpinstaller.exe
</pre>
7.#7 Install the wireless driver:
<pre>
sudo ndiswrapper -i bcmwl5.inf
sudo ndiswrapper -l
sudo ndiswrapper -m
sudo modprobe ndiswrapper
</pre>
8.#8 Then set ndiswrapper to auto load at boot time. Type:
<pre>
sudo nano /etc/modules 
</pre>
9.#9 add <code>ndiswrapper</code> as the last line and then save the file.
10. After the next reboot, Wireless will always be available.

=== Apple USB Ethernet Adapter ===

From http://marc.info/?l=linux-usb&m=121080766320582&w=4
Asix kernel module is the one to use but must be recompiled with a little patch to add the apple device id (in driver/net/usb/asix.c) as for the moment this device is too new.
<pre>
diff -puN drivers/net/usb/asix.c~net-usb-add-support-for-apple-usb-ethernet-adapter drivers/net/usb/asix.c
--- a/drivers/net/usb/asix.c~net-usb-add-support-for-apple-usb-ethernet-adapter
+++ a/drivers/net/usb/asix.c
@@ -1440,6 +1440,10 @@ static const struct usb_device_id        produc
        // Belkin F5D5055
        USB_DEVICE(0x050d, 0x5055),
        .driver_info = (unsigned long) &ax88178_info,
+}, {
+       // Apple USB Ethernet Adapter
+       USB_DEVICE(0x05ac, 0x1402),
+       .driver_info = (unsigned long) &ax88772_info,
 },
        { },            // END
 };
</pre>

It recognize the device as a new eth device, it's to say as eth0 on Macbook Air as wireless has wlan0.

For those who have no means of compiling their own kernel, and run the 2.6.24-17-generic kernel, here is a <nowiki>[[http://web.comhem.se/rydberg/Bits/|hotfix]]</nowiki> to apply to you kernel module tree.

=== Touchpad ===

There is a brand-new kernel driver for the BCM5974 device sitting in the Macbook Air.
Follow the <nowiki>[[http://ubuntuforums.org/showthread.php?t=840040|thread]]</nowiki> for downloads. Via the synaptics driver, the bcm5974 supports double/triple-finger clicks/taps, two-finger mouse scroll and swiping. This driver will be included as part of the 2.6.27 linux kernel and will be shipped with Ubuntu 8.10.

NOTE: The suggestions below are no longer needed, but kept for reference.

Here is a little script to alternate right and left click on the click button:

<pre>
export CHANGE=`/usr/bin/xmodmap -pp | awk '{print $2}' | tail -n 33 | head -n 1`
 if test 3 = $CHANGE
 then
 /usr/bin/xmodmap -e "pointer = 1 2 3"
 else
 /usr/bin/xmodmap -e "pointer = 3 2 1"
 fi
</pre>

Make this script executable and on your desktop settings, create a keyboard shortcul (like F4) to run the script in background.

=== Keyboard ===
==== FN Key ====
To handle the FN key for Multimedia keys, you need to install pommed :
<pre>
sudo apt-get install pommed
</pre>
Latest version can be found on ppa's mactel-linux project's repository, just add these lines in your /etc/apt/sources.list file:
<pre>
deb http://ppa.launchpad.net/mactel-support/ubuntu hardy main 
deb-src http://ppa.launchpad.net/mactel-support/ubuntu hardy main
</pre>
and don't forget to run
<pre>
sudo apt-get update
</pre>
to refresh packages list!

In order to have FN key usable in hardy you need also to put this line in /etc/modprobe.d/options:
<pre>
options usbhid quirks=0x05ac:0x0223:0x00000800,0x05ac:0x0224:0x00004800,0x05ac:0x0225:0x00000800
</pre>
(see https://bugs.launchpad.net/bugs/231920), also reboot is needed in order to apply this change (maybe reloading only usbhid can be enough)

==== Multimedia keys ====
* Volume keys and play/back/forward keys seems to work after enabling FN key.
* Screen brightness keys work but sometimes strangely as they don't react the same if on battery or on AC adpater.  
* F5 and F6 keys remains F5 and F6 keys for the moment instead of modify keyboard lighting, so doesn't know if keyboard light is working

To get the keyboard backlight working, check this thread: http://ubuntuforums.org/showthread.php?p=5232717

==== More Keyboard Configurations ====

<nowiki>[[MacBook Air Keyboard Canadian Multilingual]]</nowiki>

<nowiki>[[MacBook Air Keyboard Belgian Keyboard]]</nowiki>

=== Sound ===

Add the following to /etc/modprobe.d/options:

<pre>
options snd_hda_intel model=mbp3
</pre>
