{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



<<BR>>
[Not recommended to install currently, but you're welcome to test and report your findings/problems to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>]
<<BR>>

== MacBookPro 6,2 and Ubuntu 10.04 (Lucid Lynx) ==
<<BR>><<BR>>

This page aims to describe the steps needed, to fully enable all/most features of the '''15.3 (mbp 6,2) and probably other 6-th Generation MacBookPro''' (release date: April 2010) when using '''Ubuntu 10.04, Lucid Lynx'''.<<BR>>
<<BR>>
<nowiki>[[File:IconsPage/terminal.png]]</nowiki> You can find out, what model you have by typing at the terminal:<<BR>>
<pre>
sudo dmidecode -s system-product-name
</pre>
<<BR>>
 If you have a different model, please go <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki> and find the right wiki.

=== Overview ===

Anything not mentioned here probably already works out of the box. If not, please refer to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>.

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| <nowiki>[[#Sensors|Sensors (temps & fans)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Suspend|Suspend & Hibernate]]</nowiki>
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|-
| <nowiki>[[#Reboot|Reboot]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Video|Video & Effects (Compiz)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#LCD|LCD Brightness Control]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#HFS|HFS+ (only read)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#CDDVD|CD-DVD Writing]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Bluetooth|Bluetooth]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Keyboard|Keyboard functions (Brightness,volume,...)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Touchpad|Touchpad (bcm5974)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Wireless|Wireless (AirPort)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#iSight|iSight]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Sound|Sound]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Microphone|Microphone]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#ExtMon|External Monitor]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#ARC|Apple Remote Control]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Firewire|Firewire]]</nowiki>
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|-
| <nowiki>[[#MagicMouse|Magic Mouse]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|}
<nowiki>[[File:IconsPage/ok.png]]</nowiki> (works out-of-the-box) <<BR>>
<nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki> (works, with remarks) <<BR>>
<nowiki>[[File:IconsPage/warning.png]]</nowiki> (needs manual install) <<BR>>
<nowiki>[[File:IconsPage/dont.png]]</nowiki> (won't currently work (completely))<<BR>>
<nowiki>[[File:IconsPage/question.png]]</nowiki> (not yet documented)<<BR>>

=== Basic Installation Instructions ===
Common things about installing and maintaining Ubuntu on Intel-based Macs:
<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Intel CPU-based Macintosh Generic Installation Instructions]]</nowiki>

=== Package Support for Intel Macs ===
You need some modules from the <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/PPA|MactelSupportTeam/PPA]]</nowiki>
:
<pre>
sudo add-apt-repository ppa:mactel-support && sudo apt-get update
</pre>

The mactel PPA modules needed on Ubuntu on this MBP are applesmc-dkms (driver for light sensor, temperatures, fans and keyboard backlight), mbp-nvidia-bl-dkms (driver for the LCD panel backlight) and pommed (daemon to control them all).

<pre>
sudo apt-get install applesmc-dkms mbp-nvidia-bl-dkms pommed
</pre>

Hint: The mouseemu package interferes with pommed. Better remove it:

<pre>
sudo apt-get remove mouseemu
</pre>

The caps-lock key indicator should work too now.

Note: The packages mbp-nvidia-bl-dkms and pommed may not be updated yet; Wait for the updates or use the packages posted <nowiki>[[http://ubuntuforums.org/showthread.php?p=9247034|here]]</nowiki>

=== The system memory issue and 32/64bits kernel version ===
As the new MacBookPro 6,2 has 4 GB as base RAM and the Intel i5/i7 processors supports 64 bits, you may have to be careful with the selection of the architecture to install.
The base 32 bits version just detects and can use up to 3,1 Gb of RAM so the rest can't  be used. To solve this you can

By default, you MUST install the 64 bits Ubuntu version cause today the 64 version can be used without any problem.

For the other hand, if you select to install 32 bits version you have to take in notice that Ubuntu can't handle more that 3,1 GB of memory. As a workaround you can install the "linux-image-generic-pae" kernel package. This kernel adds support for more than 3,1 Gb and enables more features for virtualization with Xen. Just install the 32 version of Ubuntu as you would do normally and after that type this at your terminal:

<pre>
sudo apt-get install linux-image-generic-pae
</pre>

Note that PAE adds (extremely minor) overhead and that even with a PAE kernel, each individual process (or XEN virtual machine) will be limited to 4GB of memory.

If you choose to install 64 bits version your Ubuntu will handle more than 3,1 Gb out of the box.

=== Sensors (temps & fans) ===
Temperature, fanspeed, environmental light and keyboard backlight can be controlled over the sysfs exported interface at /sys/devices/platform/applesmc.768/.

One user <nowiki>[[https://bugs.launchpad.net/mactel-support/+bug/626079|reported]]</nowiki> that the environmental light sensor did not work initially until he applied a not further specified firmware update.

=== Suspend & Hibernate ===
Hibernate is not very well tested up to now. It seems to work, though it is a bit slow.

Suspend works actually reliably with the Nvidia 195 series drivers (no screen corruption). Sometimes, in case you configure suspend on lid-close and close the lid only very briefly, gnome power management gets confused and does not suspend the laptop anymore. Of course suspend still works e.g. through the Shutdown... GUI.

=== Reboot ===
Rebooting and Shutdown seems to work fine.

=== Video & Effects (Compiz) ===
<nowiki>[[File:IconsPage/restricted.png]]</nowiki>
You should use the restricted driver: The open source driver nouveau seems to currently causes random system freezes. Also with the powermizer functionality of the Nvidia driver you can get the laptop pretty cool at about 50 degrees Celsius instead of 65-70 degrees. Battery life is also better at about 4 hours currently (instead of 2:30).

Install from:
System -> Administration -> Hardware Drivers.
Select the NVidia graphics driver that says recommended and Activate.  Reboot to apply the change.
I installed version 195 which is available as recommended, it works great.

Edit your /etc/X11/xorg.conf to permanently operate the Nvidia graphics adapter in the lowest possible setting:
<pre>
  gksu gedit /etc/X11/xorg.conf
</pre>

Add the following lines to the Device section of the nvidia device:

<pre>
	Option  "Coolbits" "1"
	Option  "RegistryDwords" "PowerMizerEnable=0x1; PerfLevelSrc=0x2222; PowerMizerLevel=0x3; PowerMizerDefaultAC=0x3"
</pre>

<<BR>>

=== LCD Brightness Control ===
Brightness control works (incl. restore of old brightness value after a resume).

Wait for the updates in mbp-nvidia-bl-dkms and pommed or use the packages posted <nowiki>[[http://ubuntuforums.org/showthread.php?p=9247034|here]]</nowiki>. Make sure to remove older versions of mbp-nvidia-bl-dkms before installing the new version!

=== HFS+ (only read) ===
Confirmed working out of the box.

<<BR>>

=== CD/DVD Writing ===
Both writing and reading work.

<<BR>>

=== Bluetooth ===

MacBookPro6,2 notebooks use an Apple branded Broadcom <nowiki>[[http://www.broadcom.com/products/Bluetooth/Bluetooth-RF-Silicon-and-Software-Solutions/BCM2046|BCM2046]]</nowiki> solution that seem to be fully supported by the generic bluetooth USB (btusb) driver. Currently (May 2010) the product and device ids are not yet added to the generic USB driver and thus a workaround similar to <nowiki>[[http://ubuntuforums.org/showthread.php?t=1469437|this]]</nowiki> forum post is required.

Note that bluetooth keyboards and mice work even without the driver: there are hci to hid compatibility/emulation devices that are active as long as the bluetooth device is inactive.

<pre>
[38073.885671] Bluetooth: Generic Bluetooth USB driver ver 0.7
[38073.886642] usbcore: registered new interface driver btusb
[38073.911497] Bluetooth: L2CAP ver 2.14
[38073.911503] Bluetooth: L2CAP socket layer initialized
[38073.941353] Bluetooth: BNEP (Ethernet Emulation) ver 1.3
[38073.941357] Bluetooth: BNEP filters: protocol multicast
[38073.951236] Bridge firewalling registered
[38073.955646] Bluetooth: SCO (Voice Link) ver 0.6
[38073.955648] Bluetooth: SCO socket layer initialized
[38074.019858] usb 1-1.1.1: USB disconnect, address 7
[38074.030511] Bluetooth: RFCOMM TTY layer initialized
[38074.030517] Bluetooth: RFCOMM socket layer initialized
[38074.030520] Bluetooth: RFCOMM ver 1.11
[38074.288792] usb 1-1.1.2: USB disconnect, address 8
[38220.936249] bnep0: no IPv6 routers present
</pre>

Confirmed working:
* Detection of devices
* PANU (e.g. use a phone as Network Access Point)
* Bluetooth Keyboard (Apple)
* Sending files to devices (OBEX push)
* Magic Mouse (Apple) work out of the box but without scroll.

Not yet confirmed working:
* Bluetooth Mouse

=== Keyboard Functions ===

What works:
* F1 and F2 are correctly detected as monitor backlight dimming control keys and control with the help of pommed the LCD panel brightness (0-15).
* F3 and F4 can be correctly associated with any command in the system preferences.
* F5 and F6 are correctly detected as keyboard backlight dimming control keys and control with the help of pommed the keyboard brightness (0-255).
* F7, F8 and F9 are correctly associated with audio player's 'previous', 'play/pause', 'forward' commands.
* F10, F11, F12 correctly mute and tune audio volume (after having correctly configured audio, see below)

<<BR>>

==== Keyboard backlight without pommed ====
Consider this if you want a way to control the backlight from the command line or with the mouse.

You can choose a value from 0 to 255 to tune the keyboard backlight by writing to ''/sys/class/leds/smc::kbd_backlight/brightness''. For example this command switches the light completely on:

<pre>
  echo 255 | sudo tee -a /sys/class/leds/smc::kbd_backlight/brightness
</pre>

The file reporting the ambient light sensor is /sys/devices/platform/applesmc.768/light (the number 768 in the path might be different on your machine). To read the value do

<pre>
  cat /sys/devices/platform/applesmc.768/light
</pre>

which should give different values under different light conditions.

With the following method you can control the backlight through a GUI. Create a new file in /usr/local/bin:

<pre>
  gksu gedit /usr/local/bin/keyboard-backlight
</pre>

Copy this script into the file and save it:
<pre>
## !/bin/bash

## A little script to set the keyboard backlight
## Note: clicking "Cancel" in the dialog sets the backlight to 0.
## Note: needs to be called as root (with gksu or sudo) because
## of writing to /sys. Use "sudo visudo" to edit the /etc/sudoers file
## if you want to allow non-admin users to change this value, possibly
## without having to enter a password. Read "man sudoers" and, e.g., use
## ALL ALL = NOPASSWD:/usr/local/bin/keyboard-backlight
## to allow all users to execute this command on all hosts without
## a password.

## Read current value
  BACKLIGHT=$(cat /sys/class/leds/smc::kbd_backlight/brightness)

  BACKLIGHT=$(zenity \
                --title "Keyboard backlight" \
                --scale \
                --text="Adjust the keyboard backlight" \
                --value="$BACKLIGHT" \
                --min-value="0" \
                --max-value="255")

  echo $BACKLIGHT | tee -a /sys/class/leds/smc::kbd_backlight/brightness
  exit 0
</pre>

Use this command to make the file executable:

<pre>
  sudo chmod +x /usr/local/bin/keyboard-backlight
</pre>

You may want to create a launcher on the panel. In this case enter
<pre>
  gksu /usr/local/bin/keyboard-backlight
</pre>
as the command line. Very smartly, the dialog will recognise the word "keyboard" and suggest a good launcher icon automatically.

You could also use the ambient light value to extend the script to make the backlight depend on the ambient light.

<<BR>>
=== Touchpad (bcm5974) ===
The touchpad works out of the box. You can enable two-finger scrolling from the preference->mouse->touchpad applet. It also may help you to uncheck the "Enable mouse clicks with touchpad" checkbox under the Touchpad tab (see below). Furthermore tweaking the drag and drop time to be less, helped significantly. The click-and-drag also works.
<<BR>><<BR>>
If you choose to keep "Enable mouse clicks with touchpad" checked, you'll soon notice that while it's neat you don't have to 'click' the mousepad to initiate a click, the option "Disable touchpad while typing" does not disable the mouse when you accidentally rest your palms on the touchpad during typing, which causes the cursor to jump around. A solution has not yet been found, but a <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-input-synaptics/+bug/240738|bug report has been filed]]</nowiki>. Please mark yourself as affected if you experience it.
<<BR>>
=== Wireless (AirPort) ===
<nowiki>[[File:IconsPage/restricted.png]]</nowiki>
The Broadcom driver was not installed by default on Lucid. You'll need the STA one, goto "System->Administration->Hardware Drivers" and enable it. If you prefer the command line, execute on the Terminal:
<pre>
sudo apt-get install bcmwl-kernel-source
</pre>

Then reboot the system and you're OK. The driver seems to handle all situations fine - disable power management in case you experience unexpected connection loss (doesn't seem to be necessary although):

<pre>
sudo iwconfig eth1 power off
</pre>

Some users experience outages with network-manager due to driver incomparability while scanning or can't connect after sleep.  Please follow <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/network-manager/+bug/484366|bug 484366]]</nowiki> or <nowiki>[[http://art.ubuntuforums.org/showthread.php?t=1645143|reload the network module]]</nowiki> and try wicd.

=== iSight ===
<nowiki>[[File:IconsPage/webcam.png]]</nowiki>
Firmware cannot yet be extracted nor loaded. In order to use the webcam, you need to boot in OSX first to automatically load the firmware, then reboot to Linux. Work is under way to add support to the isight-firmware-tools: upcomming version 2.0 should include support.
<<BR>>
=== Sound ===

Sound works similar to the MBP 5,5: In case microphone or headphones are not working out of the box, follow this hint:
From the terminal, type:
<pre>
   gksudo gedit /etc/modprobe.d/alsa-base.conf
</pre>

Add the following line to the end of the file. Save the file. Reboot.
<pre>
   options snd-hda-intel model=mbp55
</pre>

In addition to modifying alsa-base.conf as indicted above, the front speakers seem to be initially muted and need to be unmuted by running ''alsamixer'' from the Terminal, or using gnome-alsamixer:

<pre>
  sudo apt-get install gnome-alsamixer
</pre>

To enable the optical output, check the IEC958 option, and you'll see a red light coming from your headphone jack.
<<BR>>

=== Microphone ===
Also working, see above.
<<BR>>
=== External Monitor ===

You may experience some trouble with the external VGA and the new drivers: if the detected resolution of externally connected monitors doesn't go beyond 640x480, you will need to inactivate EDID. Add:
<pre>
Option	   "NoEDID" "True"
</pre>
to /etc/X11/xorg.conf
=== Apple Remote Control ===

Install gnome-lirc-properties:
<pre>
  sudo apt-get install gnome-lirc-properties
</pre>

gnome-lirc-properties will give you an entry "Infrared Remote Control" in menu System > Administration. After launching this it will guide you through the configuration. Tested with remote model No A1294 (aluminum Apple remote): gnome-lirc-properties detects the signals (with some models the Enter button is detected as an additional Play button). Although this seems to work, the remote does not actually control any applications, like the Totem Movie Player - more testing is required. Could be that the key-binding are incorrect.
<<BR>>
=== Firewire ===
Not yet tested.
Ethernet over Firewire (modprobe eth1394) tested and confirmed working.
<<BR>>
=== Magic Mouse ===

If you want to get scrolling working on an Apple Magic Mouse, you must install the multitouch driver.

<pre>
sudo add-apt-repository ppa:chasedouglas/multitouch
sudo apt-get update
sudo apt-get install multitouch-kernel-source
</pre>

Scrolling work after a reboot.

----
<nowiki>[[https://help.ubuntu.com/community/CategoryMac|CategoryMac]]</nowiki>
----
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> Please update this page, if you have figured out anything, that is not mentioned here!
|}
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> The <nowiki>[[http://ubuntuforums.org/group.php?groupid=352|MactelSupportTeam]]</nowiki> is about to restructure and reorganize the documentation for Intel-based Macs. If you are interested in helping, please visit our <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam|team page]]</nowiki> for information. For all Mactel wikis, there is a starting place <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki>. There is also a <nowiki>[[http://ubuntuforums.org/showthread.php?t=969360|thread]]</nowiki> about planning the Mactel docummentation going on.
|}
<<BR>><<BR>>
----
CategoryMac CategoryMac
