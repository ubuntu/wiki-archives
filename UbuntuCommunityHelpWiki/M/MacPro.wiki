{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

=== About ===

This page helps you to find the right documentation, when you want to install  '''Ubuntu''' on a '''MacPro'''.

=== Determine your hardware revision ===

To determine which version / generation of MacPro you have, you have multiple options:

==== From the GUI in OS X ====

<nowiki>[[File:OSX.png]]</nowiki>

Click on the Apple on the top left > "About this Mac" > "More Info..." > "Overview" > "System Report ..." > "Hardware" in left-hand panel > "Hardware Overview" in right-hand panel > "Model Identifier". This will be a string like <code>"MacPro6,1"</code>.

==== From the Terminal in Ubuntu ====

<nowiki>[[File:IconsPage/ubuntu.png]]</nowiki> ... under Ubuntu, you can find out what model you have by typing at the terminal:
<pre>
sudo dmidecode -s system-product-name
</pre>
<nowiki>[[File:IconsPage/terminal.png]]</nowiki> A terminal is opened by going to Applications -> Accessories -> Terminal. 

It will tell you something like <code>"MacPro6,1"</code> for example. 

=== MacPro Hardware Models ===

Now go to the <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|MactelSupportTeam's wiki]]</nowiki> and choose the link to your model in the list.

=== MacPro Hardware Revisions and Ubuntu version-specific wikis ===

Now choose the link to the wiki of your hardware revision and the Ubuntu version you are looking for. If you haven't decided yet, what version you like to install, it is recommended to '''install the latest official LTS Ubuntu version'''. If no wiki article is available, ask for help in the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|support forum]]</nowiki>!

* <code>MacPro3,1</code>:
** <nowiki>[[#macpro_3-1|Ubuntu 14.04 (Trusty Tahr)]]</nowiki>
* <code>MacPro6,1</code>:
** <nowiki>[[https://help.ubuntu.com/community/MacPro6-1/Vivid|Ubuntu 15.04 (Vivid Vervet)]]</nowiki>

== MacPro 3,1 ==
----
=== Single Boot (Ubuntu as sole OS) ===
{X} '''WARNING''': The instructions below will erase OS X from your Mac Pro.  Make a backup of your data and have a copy of the OS X installation media handy in case something goes wrong.
==== Required Software ====
* <nowiki>[[http://www.ubuntu.com/download|Ubuntu 14.04]]</nowiki> - 64-bit (Do not use the Mac specific version)
* <nowiki>[[http://www.rodsbooks.com/refind/getting.html|rEFInd v0.8.1]]</nowiki> (Latest binary zip file will most likely work)
==== Installing REFind ====
* Copy the rEFInd zip file to your OS X machine and unzip it.
* Open a terminal window: '''Applications''' -> '''Utilities''' -> '''Terminal'''
* Change directories into folder that was extracted from the REFind zip file:
<pre>
$ cd Downloads/refind-bin-0.8.1
</pre>
* Run the following command to install rEFInd:
<pre>
$ sudo ./install.sh --esp
</pre>
 '''Note''': If all goes well you should see a successful message
==== Installing Ubuntu ====
* Insert the Ubuntu installation media (CD, USB Stick, etc)
* Reboot OS X
* The rEFInd bootloader should appear after a few seconds. Use the arrow keys to select the Ubuntu installation media and press '''Enter'''
* When presented with the Grub boot menu use the arrow keys to select the "Try Ubuntu without installing" and press '''e''' to edit this boot entry.
* At the end of the kernel line add '''nomodeset''' after ''quiet splash'' so it looks similar to below:
<pre>
quiet splash nomodeset --
</pre>
* Press '''F10''' to boot Ubuntu using the modified kernel line.
* Once Ubuntu finishes booting launch the installer and proceed until asked where to install Ubuntu.
* Select the option to create a custom partition scheme.
* Delete all partitions '''EXCEPT''' the partition labeled '''EFI'''
* Create your custom partitioning scheme
* When selecting the "Device for bootloader installation" choose ''/dev/sda<number>'', never choose the EFI partition.  If you don't divide your / partition up then choose whichever partition / is.
* Continue installing Ubuntu as you normally would.  When asked to reboot or continue trying Ubuntu choose to continue using Ubuntu.

==== Fixing Grub ====
* Mount the hard drive that Ubuntu was just installed on by either clicking on it in the dock or using the ''mount'' command in a terminal.
* Open a Terminal window in Ubuntu and perform the following commands replacing '''<path>''' with the path to your mounted ubuntu hard drive.
<pre>
$ sudo mount --bind /sys <path>/sys
$ sudo mount --bind /proc <path>/proc
$ sudo mount --bind /dev <path>/dev
$ sudo chroot <path>
</pre>
* Within the chroot environment open the grub file
<pre>
</pre>
* Change the line that begins with '''GRUB_CMDLINE_LINUX_DEFAULT''' to include the '''nomodeset''' parameter.
 <pre>
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash nomodeset"
</pre>
* Save the file and run the following command to update your grub configuration:
<pre>
</pre>
* Reboot Ubuntu and you're good to go!

==== Fixing WiFi ====
If you want to use the WiFi that's built into the Mac Pro you will need to open '''Additional Drivers''' application and tell it to install the proprietary Broadcom Wireless driver. 
----

=== Installation on a Macpro ===

{*} It is strongly suggested to use the Ubuntu 64 bits version (AMD64) to benefit from the full installed memory. Using the 32 bits will limit the memory to less than 3 Gb. The normal installation has been working seemlessly for a MacPro3,1 with Hardy (8.04 LTS), Jaunty  (9.04) and Karmic (9.10).

{*} The regular 64-bit Ubuntu CDs have trouble booting on older Intel Macs, such as MacPro1,1, due to EFI incompatibilities. You must download a special +mac CD of Ubuntu to work-around this problem. For 11.04, you can get it here: http://cdimage.ubuntu.com/releases/11.04/release/

If you try to use a regular 64-bit Ubuntu CD on such systems, you may get the following blocking message while trying to boot off the CD:

<pre>
1.
2.
Select CD-ROM Boot type:
</pre>

{X} '''WARNING''': It is '''important''' to install the Grub boot loader on the Ubuntu partition (e.g. ''/dev/sda3''), instead of the default disk root. This is done by selecting the ''Advanced'' options after partitioning and before the actual installation.

By default, Ubuntu installs the GRUB boot loader on the disk root (e.g. ''dev/sda'').
This does modify the EFI and GUID boot loader, which then potentially removes your Mac OSX boot.... <:( You '''must''' specify a partition for GRUB installation, e.g. ''/dev/sda3''

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| Sensors (temps & fans)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Reboot
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Video|Video & Effects (Compiz)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| HFS|HFS+ (only read)
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| CDDVD|CD/DVD Writing
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| Bluetooth|Bluetooth
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Keyboard|Keyboard functions (Brightness,volume,...)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Ethernet|Ethernet]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Wifi|Wireless ]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Sound|Sound]]</nowiki>
| <nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/DocTemplate#Wireless%20(AirPort)|<nowiki>[[File:IconsPage/warning.png]]</nowiki></nowiki>]]
|-
| <nowiki>[[#Firewire|Firewire]]</nowiki>
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|}
<nowiki>[[File:IconsPage/ok.png]]</nowiki> (works out-of-the-box) <<BR>>
<nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki> (works, with remarks) <<BR>>
<nowiki>[[File:IconsPage/warning.png]]</nowiki> (needs manual install) <<BR>>
<nowiki>[[File:IconsPage/dont.png]]</nowiki> (won't work)<<BR>>
<nowiki>[[File:IconsPage/question.png]]</nowiki> (not yet documented)<<BR>>

=== Quick Install Guide ===

Note: The best version of Ubuntu to use is 10.04.2, as 10.10 has issues with PulseAudio.

1. Get a wired USB keyboard and mouse to make the install easy. Before you install Ubuntu, if you have OSX running it is strongly advised that you use system updates to insure that your various firmwares are up to date (bluetooth,wifi,EFI). In particular your EFI firmware must be the latest version. See

http://support.apple.com/kb/ht1237

2. When you power on hold down the left mouse button as soon as hearing the chime sound until the CD drive opens. Drop in Ubuntu 10.04.2 / 64bit / desktop edition. Reboot, and this time hold the "c" key down after the chime sound to boot from the CD in the drive.

3. Boot into the live CD at the option screen. Not the install option.

4. Go to Applications -> Accessories -> Terminal. Then type 

<pre>
sudo dd if=/dev/zero of=/dev/sda
</pre>

This will delete all your files and your operating system currently on your hard drive. Since we only want to wipe the first few hundred MB of data at the beginning of the drive wait 2 minutes, then press Ctrl-C. The output should show how much of the drive was 'zeroed' or wiped, which gives you an indication of the transfer speed of that drive BTW.

5. Go to System -> Administration -> gparted

Now, Device -> New Partition Table.

Select msdos partition and press OK. This gives the BIOS on the Mac Pro a partition table it can boot from. If you don't do this, your new install will not boot when complete.

6. Finally double click the install button on the desktop. Select manual partitioning when the option comes up during the install. Click free space -> Add -> select the filesystem type as reiser or ext4 (your preference, google it, reiser is better for most) and the mountpoint is "/" without the commas. Click OK and continue and ignore the message about no swap partition, most are better off without it. 

7. Start by setting up your wifi / network connection (network manager icon top right). The next thing you should do is System -> Administration -> Update Manager and install all of the updates and then reboot. Next go to System -> Administration -> Hardware Drivers and install all of the closed source drivers for graphics cards and such. It is best to install restricted drivers for network and wifi cards last of all. Reboot after this also. If you want the restricted video codecs so you can play all media go to System -> Administration -> Synaptic. Quick search for restricted. Right click ubuntu-restricted-extras and mark for installation. Click Apply on the top bar.

8. To enable the sound on the headphone jack on the back facing side of the machine Applications -> Accessories -> Terminal. Now type

<pre>
sudo gedit /etc/modprobe.d/alsa-base.conf
</pre>

and scroll to the end of the file and add the line:

<pre>
options snd-hda-intel model=imac24
</pre>

Save and reboot. From here on the Mac Pro will run like any other Ubuntu install. Done.

=== Keyboard ===
Beware to specify the ''Macintosh keyboard layout'' during installation.
Using the Mac Aluminium keyboard may cause troubles. If you ever switch to ''NumLock'' and your keyboard goes crazy :-? press the F6 key for 1-2 secs.
Multimedia keys (F7-F12 for basck/forward/volume control) and Eject keys work out of the box.

=== Video ===
By default, the Vesa driver will be installed from the Ubuntu CD. This works OK. However, if you wish to speed-up display efficiency, and access 3D acceleration for e.g. OpenGL and Compiz, you should install the ad-hoc video driver.

The MacPro3,1 ATI card is an ATI XT2600HD. There are lots of artifacts. Using ATI drivers. During boot, the splash screen has a bunch of white flickering pixels.

Usually, the menu ''System/Administration/Hardware drivers'' should do well in most cases. Alternatively, you may try to install the required drivers using <nowiki>[[https://launchpad.net/envy|EnvyNG]]</nowiki>,  which comes as a set of packages in the ''universe'' repositories: envyng-core, envyng-qt, envyng-gtk.

{X} ''WARNING'': on Karmic, the ATI driver installation crashes the machine ; this can only be fixed by removing the radeon drivers, and returning to the default vesa driver. In a few words, '''avoid installing the proprietary drivers for the ATI card under Karmic'''. The only way to install the driver is to use <nowiki>[[https://launchpad.net/envy|EnvyNG]]</nowiki>.

The nvidia v180 drivers installed and worked fine for X, but the console will be flaky unless you build "vesafb" into the kernel and use a boot option that provides 1024x768 resolution

=== Bluetooth ===

The Apple bluetooth module in the Mac Pro works without issue under Ubuntu 10.04. However at boot the following error message is displayed and logged since the module connects to the USB bus.

kernel 2.6.32-24-generic : [    5.522591] hub 5-1:1.0: unable to enumerate USB device on port 3

=== Sound ===
For the HDA Realtek ALC885/intel sound, the default installation does not enable sound output. An easy solution is to edit:

<pre>
sudo gedit /etc/modprobe.d/alsa-base.conf
</pre>

and add at the end:

<pre>
options snd-hda-intel model=imac24
</pre>

This is the only option that works. Other ''model=macpro'' is not effective.
Currently Only the back sound output port is working properly. The front audio port does not output at full volume. Better than nothing :-)) .

=== Ethernet ===
A few ethernet issues have been reported (see below). Beware there are 2 ethernet plugs.

=== Wifi ===
===== Wifi Automatic installation =====
The Wifi card is a BCM 4328. It is usually well detected from the ''Administration/Hardware Drivers'' which should see a ''Broadcom STA wireless driver''.

It seems the SSB module may require to be unactivated in some cases, e.g. with

<pre>
sudo modprobe -r ssb
sudo modprobe wl
</pre>

then add ''wl'' at the end of file ''/etc/modules''

===== Wifi Manual installation from Broadcom =====

Manual install can be done using <nowiki>[[http://www.broadcom.com/support/802.11/linux_sta.php|Broadcom proprietary drivers]]</nowiki> and following the <nowiki>[[http://www.broadcom.com/docs/linux_sta/README.txt|README]]</nowiki>.

===== Wifi Manual installation using ''Ndiswrapper'' =====

Alternative is to use ''NdisWrapper''

<pre>
wget http://ftp.us.dell.com/network/R151517.EXE
mkdir driver
unzip -a R151517.EXE -d driver/
cd driver/DRIVER/
sudo ndiswrapper -i bcmwl5.inf
sudo ndiswrapper -l
sudo ndiswrapper -m
sudo modprobe ndiswrapper
</pre>
then add ''ndiswrapper'' at the end of ''/etc/modules''

Create file ''/etc/init.d/ndiswrapper'' with content:
<pre>
rmmod ohci_hcd
rmmod ssb
rmmod ndiswrapper
modprobe ndiswrapper
modprobe ssb
modprobe ohci_hcd
</pre>
Make it executable and start it as a boot process service with
<pre>
sudo chmod 755 /etc/init.d/ndiswrapper
sudo ln -s /etc/init.d/ndiswrapper /etc/rc2.d/S99ndiswrapper
</pre>

=== Multiple Hard Disks ===
http://wiki.debian.org/DebianOnIntelMacPro#line-187

=== Other ===

Further and related  information:

** http://mindbat.com/?p=30
** http://macprolinux.blogspot.com/
** https://help.ubuntu.com/community/MacBook%20Aluminum
** https://help.ubuntu.com/community/Intel_iMac
** https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation

=== Forum Postings ===

http://ubuntuforums.org/showthread.php?t=553587

http://ubuntuforums.org/showthread.php?t=842100

----
CategoryMac
CategoryHardware

This is to update my progress in getting a stable Ubuntu Jaunty amd_64 desktop on a dual processor, nehalem based MacPro(20091.1):

INSTALLATION:
1) I installed on a second drive using the Jaunty (9.x) amd64 desktop CD. My drive had an EFI boot partition and a small (40GB) OSX partition. I created a large ext3 partition
sdb3 and a small swap partition sdb4. I installed the boot loader on the ext partition in the "advanced" section of the partitioning section of the installation routine.

2) Installation was successful but upon rebooting there was a "no operating system" message when i tried to boot ubuntu. I rebooted the installation CD, selected the "run ubuntu with no changes" option. I then:

* ran gparted and flagged the ubuntu partition as bootable
* ran grub from the command line and issued the following commands:
<code>root (hd2,0)</code>

<code>setup (hd2,0)</code>
* booted from the rEFIT .13 cd and selected the "Linux" option.
* booted ubuntu and restarted without the rEFIT cd and since then the system has booted without problems.

3) the ethernet adapters in this machine have no drivers in kernel version less than 2.6.30. [for my initial installation i used a wired USB network adapter (Trendnet TU2-ET100) which worked effortlessly using boot discs from ubuntu 8.1x and 9.x

4) using that adapter i installed the packages required to build an ubuntu kernel. and used the ubuntu sources 2.6.28.11. the ubuntu config-2.6.28.11 worked without modification after patching the ethernet drivers. the patch for the pre 2.6.30 e1000e driver is available at http://kerneltrap.org/mailarchive/linux-netdev/2009/3/25/5235664s, but here it is:
----------------------------------------------------------------------------------
Add device ID for a new variant of the 82574 adapter.

Signed-off-by: Bruce Allan <bruce.w.allan@intel.com>
Acked-by: John Ronciak <john.ronciak@intel.com>
Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
---

 drivers/net/e1000e/hw.h     |    1 +
 drivers/net/e1000e/netdev.c |    1 +
 2 files changed, 2 insertions(+), 0 deletions(-)

diff --git a/drivers/net/e1000e/hw.h b/drivers/net/e1000e/hw.h
index 11a2f20..d8b8229 100644
--- a/drivers/net/e1000e/hw.h
+++ b/drivers/net/e1000e/hw.h
@@ -339,6 +339,7 @@ enum e1e_registers {
# define E1000_DEV_ID_82573E_IAMT		0x108C
# define E1000_DEV_ID_82573L			0x109A
# define E1000_DEV_ID_82574L			0x10D3
+#define E1000_DEV_ID_82574LA			0x10F6
# define E1000_DEV_ID_82583V                     0x150C

# define E1000_DEV_ID_80003ES2LAN_COPPER_DPT	0x1096
diff --git a/drivers/net/e1000e/netdev.c b/drivers/net/e1000e/netdev.c
index f388a01..15424ba 100644
--- a/drivers/net/e1000e/netdev.c
+++ b/drivers/net/e1000e/netdev.c
@@ -5130,6 +5130,7 @@ static struct pci_device_id e1000_pci_tbl[] = {
 	{ PCI_VDEVICE(INTEL, E1000_DEV_ID_82573L), board_82573 },

 	{ PCI_VDEVICE(INTEL, E1000_DEV_ID_82574L), board_82574 },
+	{ PCI_VDEVICE(INTEL, E1000_DEV_ID_82574LA), board_82574 },
 	{ PCI_VDEVICE(INTEL, E1000_DEV_ID_82583V), board_82583 },

 	{ PCI_VDEVICE(INTEL, E1000_DEV_ID_80003ES2LAN_COPPER_DPT),
------------------------------------------------------------------------------

the ubuntu kernel config-2.6.28.11-generic provided working ethernet after patching the e1000e drivers. (there is a kernel config that can be used as a starting point at http://wiki.debian.org/DebianOnIntelMacPro but will require lots of modification to get it working properly on the 2009.1 model MacPro)

----
----
CategoryHardware CategoryMac
