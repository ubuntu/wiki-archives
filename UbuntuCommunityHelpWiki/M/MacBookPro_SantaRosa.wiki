{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__



== Ubuntu on a Santa Rosa MacBook Pro ==

=== Preface ===
This page describes the differences between the '''3rd Generation Mac``Book Pro''' (Santa Rosa) compared to the 1st or 2nd Generation Mac``Book Pro.

For other guides and for other hardware. Please look at the <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|Hardware Version Matrix]]</nowiki>.

For Installation instructions, see the <nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation | AppleIntelInstallation]]</nowiki> page.

With the release in June 2007 of the third revision to the Mac``Book Pro line, several hardware incompatibilities were introduced with Ubuntu.

The primary hardware changes from previous hardware revisions include:
1. NVIDIA Graphics (Ge``Force 8600M GT)
2. Air``Port Extreme Wi-Fi 802.11a/b/g/n
3. Santa Rosa Integrated Sound <nowiki>[[https://cbg.dyndns.org/wiki/ReadingCorner/LinuxOnMacbookPro|(info)]]</nowiki>

As well, at least some models (the Mac``Book Pro 15" @ 2.5gHz) now use a Broadcom 4328 wireless card. Madwifi will not work for this chipset; instead see this thread: http://ubuntuforums.org/showthread.php?t=728530.

In order to document these incompatibilities and the workarounds a <nowiki>[[http://ubuntuforums.org/showthread.php?t=474144|thread]]</nowiki> was created. This wiki page is based on this thread, and on the contributions made by members in the forum. Other instructions can be found on <nowiki>[[https://cbg.dyndns.org/wiki/ReadingCorner/LinuxOnMacbookPro|this]]</nowiki> page.

==== Hardware support in Ubuntu 7.10 (Gutsy) ====
Here is the state of the hardware support in Ubuntu 7.10 (Gutsy Gibbon):
* NVIDIA graphics: fully working out-of-the-box with nv (2D) and nvidia-glx-new (3D) packages;
* Ethernet networking: fully working out-of-the-box;
* Wireless networking: fully working, with manipulations;
* Sound: fully working out-of-the-box;
* Backlight, keyboard light and hotkeys: working with the ''pommed'' package, just [apt://pommed click here to install] (link not working for now);
* CD/DVD drive: fully working out-of-the-box, media can be ejected using the eject key if you have pommed installed;
* TrackPad: fully working out-of-the-box, can be adjusted with manipulations;
* Bluetooth: fully working, out-of-the-box;
* Firewire: fully working, out-of-the-box;
* Sensors: working with the ''applesmc'' package, just [apt://applesmc click here to install] (link not working for now);
* Suspend: working out-of-the-box.  If using compiz, see <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/compiz/+bug/144732|bug 144732]]</nowiki>; If using the madwifi atheros driver, make sure it is removed before suspending to RAM (See below).
* iSight: fully working, out-of-the-box with V4L2;
* Battery: at least 2 and a half hours with Wi-Fi and Bluetooth on, or maybe more, someone must test it with Gutsy and edit this page.

Hardware support according to <nowiki>[[https://cbg.dyndns.org/wiki/ReadingCorner/LinuxOnMacbookPro|this page]]</nowiki>. If someone can test it, please, edit this page and share your experience.
* Apple InfraRed: not working without kernel patching, see below.
* PCI Express: working?
* Sensors still works (make sure that applesmc is installed and module is loaded), but ACPI does not see temperature in /proc/acpi/thermal_zone, which leads me to thinks that fan regulation is not optimal.  Temporarily you can use MacBookPro/SantaRosaFanControl.

=== Change 1: NVIDIA Graphics ===
The new NVIDIA Ge``Force 8600M GT graphics card runs on the 'nvidia-glx-new' graphics drivers. These drivers will be recommended to you for installation on first boot after installation. To install, just select the 'nvidia-glx-new' drivers in the Restricted Driver menu.

=== Change 2: AirPort Extreme ===
This Mac``Book``Pro has an Atheros wifi card with 802.11n capability. You should use the ath9k driver.

Instruction on installing the "madwifi" drivers are now depreciated. This driver has been replaced with the newer ath5k and ath9k drivers. For the Mac``Book``Pro3,1 you should use the ath9k driver. This driver is available in Ubuntu 8.10 Intrepid Ibex by default. You can also use the thread <nowiki>[[http://ubuntuforums.org/showpost.php?p=5535562&postcount=3|here]]</nowiki> to compile a newer version.

=== Change 3: Sound ===
'''NOTE:''' The file /etc/modprobe.d/options no longer exists in newer versions of Ubuntu. It is still supported by the kernel, however the filename needs the .conf extension, i.e. /etc/modprobe.d/options.conf would be the file you create to save your options. Actually the filename doesn't matter as long as the .conf extension is used. 

The sound chip in this revision of the Mac``Book Pro is on the ICH8 (Santa Rosa) rather than the ICH7 on older Mac``Books. Gutsy has support for this chip, in both the 32-bit and 64-bit versions, but it may not be automatically detected. To fix this, explicitly specify the model in <code>/etc/modprobe.d/options</code> by adding the line <code>options snd_hda_intel model=mbp3</code>. To automatically append this line to the appropriate file, use the following command:
<pre>
sudo sed -i~ '$a\\options snd_hda_intel model=mbp3' /etc/modprobe.d/options
</pre>

Then reboot, or input the following commands to restart the kernel module:
<pre>
rmmod snd_hda_intel
modprobe snd_hda_intel
</pre>

Note: Remember that alsa mixer settings are muted by default, so you may have to adjust them before hearing sound!

=== Change 4: Apple IR Remote ===
If this doesn't work for you (pressing up/down on the remote should adjust volume in Gutsy), then you need to rebuild the '''appleir''' kernel module. This procedure is detailed <nowiki>[[https://cbg.dyndns.org/wiki/ReadingCorner/LinuxOnMacbookPro|here]]</nowiki> or a simpler way (which builds a .deb) is detailed <nowiki>[[http://ubuntuforums.org/showthread.php?t=607797|here]]</nowiki>. 

There is a <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux-ubuntu-modules-2.6.22/+bug/157919|bug]]</nowiki> in launchpad for this issue as well.

If you want to make the remote work with Elisa (and most other media centres) <nowiki>[[http://dolphy-tech.net/log/?p=36|this post]]</nowiki> explains how to do it.
----
CategoryMac
