{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


The MacBookPro 6,2 is '''partially compatible''' with Ubuntu 11.04 Natty. 

''''' Note that <nowiki>[[#Sensors|some]]</nowiki> <nowiki>[[#Suspend|bugs]]</nowiki> may cause hardware damage. '''''

You may need to apply some of the adjustments listed below. For further discussions, see: <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>

== MacBookPro 6,2 and Ubuntu 11.04 (Natty Narwhal) ==

This page aims to describe the steps needed, to fully enable all/most features of the '''15.3 (mbp 6,2) and probably other 6-th Generation MacBookPro''' (release date: April 2010) when using '''Ubuntu 11.04, Natty Narwhal'''.

<nowiki>[[File:IconsPage/terminal.png]]</nowiki> You can find out what model you have by typing at the terminal:
<pre>
sudo dmidecode -s system-product-name
</pre>

If you have a different model, please go <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki> and find the right wiki.

=== Overview ===
Anything not mentioned here probably already works out of the box. If not, please refer to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>.

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| <nowiki>[[#Install|Installation]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Basics|Basics (Kernel stability)]]</nowiki>
| <nowiki>[[File:IconsPage/dont.png]]</nowiki>
|-
| <nowiki>[[#32bit-or-64bit|32 or 64 Bit]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Sensors|Sensors (temps & fans)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Suspend|Suspend & Hibernate]]</nowiki>
| <nowiki>[[File:IconsPage/dont.png]]</nowiki>
|-
| <nowiki>[[#Reboot|Reboot]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Video|Video & Effects (Compiz)]]</nowiki>
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|-
| <nowiki>[[#LCD|LCD Brightness Control]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Fan|Fan Control]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#HFS|HFS+]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#CDDVD|CD-DVD Writing]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#SSDs|Solid State Disks (SSDs)]]</nowiki>
| <nowiki>[[File:IconsPage/dont.png]]</nowiki>
|-
| <nowiki>[[#Bluetooth|Bluetooth]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Keyboard|Keyboard functions (Brightness,volume,...)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Touchpad|Touchpad (bcm5974)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Wireless|Wireless (AirPort)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#iSight|iSight]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Sound|Sound]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Microphone|Microphone]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#ExtMon|External Monitor]]</nowiki>
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|-
| <nowiki>[[#ARC|Apple Remote Control]]</nowiki>
| <nowiki>[[File:IconsPage/question.png]]</nowiki>
|-
| <nowiki>[[#Firewire|Firewire]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|}
<nowiki>[[File:IconsPage/ok.png]]</nowiki> (works out-of-the-box)
<nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki> (works, with remarks)
<nowiki>[[File:IconsPage/warning.png]]</nowiki> (needs manual install)
<nowiki>[[File:IconsPage/dont.png]]</nowiki> (won't currently work (completely))
<nowiki>[[File:IconsPage/question.png]]</nowiki> (not yet documented)

=== Basic Installation Instructions ===
Before beginning, verify that you have the latest available firmware for your machine (<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/grub2/+bug/774089|Bug 774089]]</nowiki>).

As of version 11.04, Ubuntu published a separate install CD for Mactel computers. It is highly recommended to use this CD rather than the standard "PC" install disk.

Common things about installing and maintaining Ubuntu on Intel-based Macs:
<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Intel CPU-based Macintosh Generic Installation Instructions]]</nowiki>

=== Package Support for Intel Macs ===
Already enabled are some modules from the <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/PPA|MactelSupportTeam/PPA]]</nowiki>.

The mactel PPA modules are: nvidia-bl-dkms (driver for the LCD panel backlight) and pommed (daemon to control them all), macfanctld (fan control), and btusb-dkms (bluetooth).

'''As of Alpha 3, Natty locks up about once an hour.''' <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/linux/+bug/741464|Bug report filed]]</nowiki>.
This may be caused by the default video driver in Alpha 3. Try enabling the NVIDIA Accelerated Graphics Driver instead.

 
=== The system memory issue and 32/64bits kernel version ===
The new MacBookPro 6,2 has 4 GB as base RAM and the Intel i5/i7 processors supports 64 bits.  When choosing 64-bit or 32-bit, there are a few points to consider.

The 64-bit version is very well tested and supported, and is the default install for the 6,2 MacBook.  This version will handle more than 3,1 Gb natively, without the small performance hit from PAE.

The 32-bit version includes a pae-kernel out of the box to handle more that 3,1 GB of memory. 

You can confirm this with:
<pre>
dpkg -l | grep linux-image-generic-pae
</pre>

And if it's not present, you can install it from your terminal with:

<pre>
sudo apt-get install linux-image-generic-pae
</pre>

Note that PAE adds (extremely minor) overhead and that even with a PAE kernel, each individual process (or XEN virtual machine) will be limited to 4GB of memory.

=== Sensors (temps & fans) ===

To enable proper detection of sensors edit /etc/modules:

<pre>
gksudo gedit /etc/modules
</pre>

Add to this to end of file, save and reboot:

<pre>
coretemp
</pre>

<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/lm-sensors-3/+bug/742257|Bug report filed]]</nowiki> to track this not being part of the stock install.

If you would like to monitor temperature readings and fan speed, install sensors-applet:

<pre>
sudo apt-get install sensors-applet
</pre>

Reboot and then add the applet to your panel.

Temperature, fanspeed, environmental light and keyboard backlight can be controlled over the sysfs exported interface at /sys/devices/platform/applesmc.768/.

One user <nowiki>[[https://bugs.launchpad.net/mactel-support/+bug/626079|reported]]</nowiki> that the environmental light sensor did not work initially until he applied a not further specified firmware update.

=== Suspend & Hibernate ===
Suspend seems to work fine out of box: multiple suspends during single session works.

Hibernate does not work. System stops responding and gets very hot. With the system unresponsive, I can only speculate that '''an unattended hibernation may cook the laptop.'''

=== Reboot ===
Rebooting and Shutdown work fine.

=== Video & Effects (Compiz) ===
<nowiki>[[File:IconsPage/restricted.png]]</nowiki> 
You should use the restricted video driver: The open source driver nouveau seems to currently causes random system freezes. Also with the powermizer functionality of the Nvidia driver you can get the laptop pretty cool at about 50 degrees Celsius instead of 65-70 degrees. Battery life is also better at about 4 hours currently (instead of 2:30).

Flash performance generally reduced with Compiz is enabled, as reported <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/compiz/+bug/673815|here]]</nowiki>.

Install from:
System -> Administration -> Hardware Drivers.
Select the NVidia graphics driver that says recommended and Activate.  Reboot to apply the change.

Edit your /etc/X11/xorg.conf to permanently operate the Nvidia graphics adapter in the lowest possible setting:
<pre>
gksu gedit /etc/X11/xorg.conf
</pre>

Add the following lines to the Device section of the nvidia device:

<pre>
Option  "Coolbits" "1"
Option  "RegistryDwords" "PowerMizerEnable=0x1; PerfLevelSrc=0x2222; PowerMizerLevel=0x3; PowerMizerDefaultAC=0x3"
</pre>

=== LCD Brightness Control ===
Either nvidia-bl-dkms alone will enable brightness control or install pommed as well. Restore of old brightness value after a resume also works.

If it doesn't work out-of-the-box, see <nowiki>[[http://ubuntuforums.org/showthread.php?p=10291987#post10291987|this thread]]</nowiki>. The nvidia-bl-dkms does not work, but the mbp-nvidia-bl-dkms does. See <nowiki>[[http://ubuntuforums.org/showthread.php?p=10958148#29|this reply]]</nowiki> of the previous cited thread for explanation on how to install the right package.

Update: the pages for the <nowiki>[[https://help.ubuntu.com/community/MacBookPro7-1/Maverick#Screen|MacBookPro 7,1]]</nowiki> suggest adding this to the RegistryDwords above:

<pre>
EnableBrightnessControl=1
</pre>

which works perfectly.

=== Colors ===
See the page for the <nowiki>[[https://help.ubuntu.com/community/MacBookPro7-1/Maverick#Colors|MacBookPro 7,1]]</nowiki> on how to obtain the color profile for your monitor.

The profile can be applied using the xcalib method mentioned there, or by using gnome-color-profile:
<pre>
sudo apt-get install gnome-color-profile
gcm-prefs
</pre>
=== Fan Control ===

Not currently working. <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/lm-sensors-3/+bug/742257|Bug reported]]</nowiki>.

=== HFS+ ===
* Read Only: Confirmed working out of the box.
* Read/Write: It is necessary to disable journal:
## Login macos and open a terminal.
## Identify the partition.
## Run diskutil to disable journaling.
<pre>
$ mount
/dev/disk0s2 on / [...]
$ sudo diskutil disableJournal force /dev/disk0s2
Journaling has been disabled for volume [...] on disk0s2
</pre>

=== CD/DVD Writing ===
Both writing and reading work.

=== Solid State Disks (SSDs) ===

SSDs perform badly in IDE mode (especially bad if the disk starts to get full):
* very high system load (6 to 7) during HD intensive tasks like a system update (apt-get dist-upgrade)
* freezes every 20-30 seconds during non-CPU intensive tasks (e.g. writing emails, browsing, editing text files, ...)

This behavior had been observed in combination with
* Cruzial RealSSD C300
* Intel SSD 320

Both disks behave much better (i.e., "normal") in AHCI mode on (at least) this MBP.

Heed this bug report:
https://bugs.launchpad.net/mactel-support/+bug/817017

(Essentially, DON'T sleep/wakeup if you switch your controller into AHCI mode: it CAN'T work right now!).

==== Details ====
'''Skip and switch to a non SSD disk, if you don't absolutely know what you're doing'''

The SATA controller operates by default in IDE mode and there is no known EFI setting to override this behavior. Fortunately, it can be put into AHCI mode before the Linux kernel is booted:

Make sure to use Grub2 and create the file /etc/grub.d/01_mbp_ahci [1]:
<pre>
echo "setpci -d 8086:3b28 90.b=60"
</pre>
(the setpci command sets bit 5 and 6 on register 0x90 -- lookup Intel document number 322169 for details)
Don't forget to make the file executable (+x) and run update-grub2.

[1] http://en.gentoo-wiki.com/wiki/Apple_Macbook_Pro (also contains useful hints to increase SSD performance).

=== Bluetooth ===

Device joins, but audio is poor/choppy. Icon does not display as "connected." (<nowiki>[[https://bugs.launchpad.net/ubuntu/+source/indicator-application/+bug/761766|Bug 761766]]</nowiki>)

=== Keyboard Functions ===

Everything seems to work with pommed installed:
* F1 and F2 can be used to adjust display brightness
* F3 and F4 can be correctly associated with any command in the system preferences.
* F5 and F6 can be used to adjust keyboard backlight brightness
* F7, F8 and F9 are correctly associated with audio player's 'previous', 'play/pause', 'forward' commands.
* F10, F11, F12 correctly mute and tune audio volume (after having correctly configured audio, see below)
* Eject key works

To toggle the function (Fn) key behavior, i.e.  Fn+F1 to adjust brightness:
<pre>
sudo -i
echo 2 > /sys/module/hid_apple/parameters/fnmode
</pre>
This setting might not be saved between reboots

==== Keyboard backlight without pommed ====
Consider this if you want a way to control the backlight from the command line or with the mouse.

You can choose a value from 0 to 255 to tune the keyboard backlight by writing to ''/sys/class/leds/smc::kbd_backlight/brightness''. For example this command switches the light completely on:

<pre>
echo 255 | sudo tee -a /sys/class/leds/smc::kbd_backlight/brightness
</pre>

The file reporting the ambient light sensor is /sys/devices/platform/applesmc.768/light (the number 768 in the path might be different on your machine). To read the value do

<pre>
cat /sys/devices/platform/applesmc.768/light
</pre>

which should give different values under different light conditions.

With the following method you can control the backlight through a GUI. Create a new file in /usr/local/bin:

<pre>
gksu gedit /usr/local/bin/keyboard-backlight
</pre>

Copy this script into the file and save it:
<pre>

BACKLIGHT=$(cat /sys/class/leds/smc::kbd_backlight/brightness)

BACKLIGHT=$(zenity \
        --title "Keyboard backlight" \
        --scale \
        --text="Adjust the keyboard backlight" \
        --value="$BACKLIGHT" \
        --min-value="0" \
        --max-value="255")

echo $BACKLIGHT | tee -a /sys/class/leds/smc::kbd_backlight/brightness
exit 0
</pre>

Use this command to make the file executable:

<pre>
sudo chmod +x /usr/local/bin/keyboard-backlight
</pre>

You may want to create a launcher on the panel. In this case enter
<pre>
gksu /usr/local/bin/keyboard-backlight
</pre>
as the command line. Very smartly, the dialog will recognise the word "keyboard" and suggest a good launcher icon automatically.

You could also use the ambient light value to extend the script to make the backlight depend on the ambient light.

=== Touchpad (bcm5974) ===
The touchpad works out of the box. However, not all gestures work yet and momentum scrolling does not work. You can enable two-finger scrolling from the preference->mouse->touchpad applet. If you are having accidental clicks while moving the mouse, it also may help you to uncheck the "Enable mouse clicks with touchpad" checkbox under the Touchpad tab. Furthermore tweaking the drag and drop time to be less may be help. The click-and-drag also works.

If the mouse jumps around while typing, and "Disable touchpad while typing" is already selected (under Preferences > Mouse > Touchpad,) mark yourself as affected by this bug: https://bugs.launchpad.net/ubuntu/+source/xserver-xorg-input-synaptics/+bug/240738.

Multitouch is available using xf86-input-multitouch drivers. Explanations from <nowiki>[[https://help.ubuntu.com/community/MacBookPro7-1/Maverick#Touchpad|MacBookPro7-1/Maverick#Touchpad]]</nowiki> are fully usable.

=== Wireless (AirPort) ===
<nowiki>[[File:IconsPage/restricted.png]]</nowiki>
After installing the recommended 'additional drivers', it picks up wireless-b, but not wireless-n. Performance may still be affected by note below:

Note: Should you experience slow connections when running on battery power then you can find a workaround in this thread: http://ubuntuforums.org/showthread.php?t=1596061#6

Some users find disabling network-manager and enabling wicd, as described in the <nowiki>[[https://help.ubuntu.com/community/MacBookPro6-2/Lucid#Wireless%20%28AirPort%29|10.04 documentation]]</nowiki>, improves wireless performance.

=== iSight ===
<nowiki>[[File:IconsPage/webcam.png]]</nowiki>

Works fine out of the box.

=== Sound ===
Internal speakers and headphones work out of box. However, internal speakers are very quiet. The volume for the front speaker (Front Sp) must turned up. This can be adjusted by running ''alsamixer'' from the Terminal, or using gnome-alsamixer

<pre>
sudo apt-get install gnome-alsamixer
</pre>

To enable the optical output (you'll see a red light coming from your headphone jack if it is enabled), make sure that the IEC958 option is checked.

If you find that sound seems only to come from the right speaker, make sure Surround Speaker is checked in gnome-alsamixer and that the Surround slider is set to maximum.

The Front Sp slider controls the subwoofer, while the Surround slider controls the tweeters. The placement of speakers on this Macbook Pro is explained in <nowiki>[[http://support.apple.com/kb/TS3336]]</nowiki>. You may notice that bass disappears when setting audio balance to the left speaker; that is because the subwoofer is treated as the front right speaker.

=== Microphone ===

Works great out of the box.  You will need to change sound preferences:
* Click the sound control (top-right of screen)
* Click 'Sound Preferences', and click the Input Tab
* Set connector: Internal Microphone
* Set Input volume: 100%, and unmuted

=== External Monitor ===

You may experience some trouble with the external VGA and the new drivers: if the detected resolution of externally connected monitors doesn't go beyond 640x480, you will need to inactivate EDID. Add:
<pre>
Option       "NoEDID" "True"
</pre>
to /etc/X11/xorg.conf

Mini !DisplayPort to HDMI works, but drops audio.

=== Apple Remote Control ===

Install gnome-lirc-properties:
<pre>
sudo apt-get install gnome-lirc-properties
</pre>

gnome-lirc-properties will give you an entry "Infrared Remote Control" in menu System > Administration. After launching this it will guide you through the configuration. Tested with remote model No A1294 (aluminum Apple remote): gnome-lirc-properties detects the signals (with some models the Enter button is detected as an additional Play button). Although this seems to work, the remote does not actually control any applications, like the Totem Movie Player - more testing is required. Could be that the key-binding are incorrect.

=== Firewire ===
Works fine out of the box.

----
<nowiki>[[https://help.ubuntu.com/community/CategoryMac|CategoryMac]]</nowiki>
----

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki> Please update this page, if you have figured out anything, that is not mentioned here!
|}

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki> The <nowiki>[[http://ubuntuforums.org/group.php?groupid=352|MactelSupportTeam]]</nowiki> is about to restructure and reorganize the documentation for Intel-based Macs. If you are interested in helping, please visit our <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam|team page]]</nowiki> for information. For all Mactel wikis, there is a starting place <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki>. There is also a <nowiki>[[http://ubuntuforums.org/showthread.php?t=969360|thread]]</nowiki> about planning the Mactel documentation going on.
|}

----
CategoryMac
