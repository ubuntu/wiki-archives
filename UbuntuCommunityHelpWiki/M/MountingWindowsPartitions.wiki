{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



Ubuntu is capable of reading and writing files stored on Windows formatted partitions.  These partitions are normally formatted with NTFS, but are sometimes formatted with FAT32.  You will also see FAT16 on other devices.

<<BR>>

== General Considerations ==

Ubuntu will show files and folders in NTFS/FAT32 filesystems which are hidden in Windows. Consequently, important hidden system files in the Windows C:\ partition will show up if this is mounted. Since it is all-too-easy to accidentally modify or delete files which are essential for Windows, it is advisable to mount your Windows C:\ partition as seldom as possible, preferably not at all, or read-only by configuring /etc/fstab (see below). If you have data which you want to access regularly from both Windows and Ubuntu, it is better to create a separate data partition for this, formatted NTFS.

Whether you write to your Windows C:\ partition or a shared NTFS data partition, be aware that if you are using Windows 7, and Windows 7 is in a hibernated state when you write to the NTFS partition from Ubuntu, you will lose all your changes. This is because when Windows 7 is hibernated it writes the system state to a file stored on disk and restores from that file when the system is re-awakened, thus restoring the whole fileystem to a state before any changes made from Ubuntu. In Windows 7 you must avoid using hibernation. With Windows 8, the situation is more complex in that, by default, it uses a hybrid hibernation/shutdown when you shut the system down. Any changes made by Ubuntu will be lost when you reboot into Ubuntu.

With both Windows 7 and Windows 8 (when installed to a legacy mbr partition table) there is usually a 100-200MB boot partition labelled "SYSTEM". Do not mount it - you do not need to. Similarly it is highly advisable to leave any recovery partitions unmounted.

<<BR>>

== Using the File Manager ==

For those using a desktop version of Ubuntu, or one of its offical derivatives, the easiest and quickest way of mounting NTFS or FAT32 partitions is from the file manager: Nautilus in Ubuntu, Thunar in Xubuntu, Dolphin in Kubuntu and PCManFM in Lubuntu. Simply look in the left pane of the file manager for the partition you wish to mount and click on it - it will be mounted and its contents will show up in the main pane. Partitions show with their labels if labelled, or their size if not.

Unless you require your Windows partition - or a NTFS/FAT32 partition for data shared with Windows - mounted every time you boot up for one of the reasons given below, mounting from the file manager in this way should suffice.

If you are using a <nowiki>[[Wubi]]</nowiki> version of Ubuntu and you wish to browse the host partition, you do not need to mount it - it is mounted already in the "host" folder. Click on "File System" in the left pane of the Nautilus file browser and then open the host folder which you will see in the main pane.

<<BR>>

== File System Differences ==
For a more in depth analysis, see <nowiki>[[LinuxFilesystemsExplained]]</nowiki>, but here are some basics:
* Windows 7, Vista, XP, 2000, older NT systems, and Windows Server 2003 and 2008 are formatted with NTFS. In rare cases, OEM manufacturers have pre-installed Windows XP and Windows 2000 to FAT32 filesystems.
* Older versions of Windows such as Windows ME, 98, and 95 are formatted with FAT32.
* Flash drives, such as a USB thumb drive or a camera's flash card are typically formatted as FAT16.  Some Flash drives are formatted with Microsoft's proprietary exFAT file system.

In Windows, you can check which filesystem your partition is formatted with by right-clicking the partition in Windows Explorer and selecting Properties.  In Ubuntu, run from <nowiki>[[UsingTheTerminal| terminal]]</nowiki>:
 <pre>
sudo fdisk -lu</pre>

=== NTFS ===

The '''ntfs-3g''' driver is used in Linux-based systems to read from and write to NTFS partitions.

NTFS (New Technology File System) is a file system developed by Microsoft and used by Windows computers (Windows 2000 and later).  Until 2007, Linux distros relied on the kernel ntfs driver which was read-only.  The userspace ntfs-3g driver now allows Linux-based systems to read from ''and'' write to NTFS formatted partitions.

The ntfs-3g driver is pre-installed in all recent versions of Ubuntu and healthy NTFS devices should work out of the box without further configuration. In Ubuntu versions 11.10 and later the ntfs-3g package included the functionality previously provided by ntfsprogs. Trying to install ntfsprogs in 11.10 (and possibly in 12.04) will cause the package-manager to ask if you wish to remove ntfs-3g. Users who have installed ntfsprogs and failed to notice the message from the package manager have unintentionally uninstalled ntfs-3g, after which the system falls back to the read-only kernel ntfs driver. Loss of the ntfs-3g driver for similar reasons has also been reported when upgrading from 11.04 to 11.10. If you are experiencing inability to write to a NTFS formatted partition or device, check whether or not the ntfs-3g package is installed.

=== FAT32 ===

The '''vfat''' driver is used in linux to read and write FAT32 and FAT16 partitions.

<<BR>>

== Configuring /etc/fstab ==

=== Preface ===

If you require one or more of your Windows partitions mounted automatically during bootup, it is necessary to add one line to the file /etc/fstab for each partition that is to be mounted. Some reasons for mounting partitions by means of /etc/fstab, rather than relying on the file manager, include:

* Convenience.

* Where more than one user account is in use during a session. Partitions mounted from one user account by means of the file manager are not accessible to the other account(s).

* Where libraries have been set up in applications such as Banshee or Rhythmbox (for music) or Shotwell (for photos). If those libraries contain files on partitions mounted by means of the file manager, an error will occur in a subsequent session if the partition is not mounted first.

* Where more advanced or special mount options are needed. Three working configurations for different needs are given below, but anything more advanced is beyond the scope of this wiki page. The <nowiki>[[http://www.tuxera.com/community/ntfs-3g-manual/|NTFS-3G]]</nowiki> manual gives a list of mount options suitable for NTFS filesystems.

=== Automatic Configuration ===

Although there are a number of GUI applications available from the Ubuntu Software Centre, none of these can be recommended at the time of this writing, unfortunately. They are obsolete and unmaintained and can all cause problems. Two examples are ntfs-config and PySDM. (PySDM is no longer in the repository with effect from 12.10.) If you find a recommendation anywhere for either of these applications, it is likely to be an old one, and should not be followed. At this time it is advisable to configure /etc/fstab manually.

=== Manual Configuration ===

First, you need to find the device locations of the partition(s) you wish to mount. Open a terminal and run:
 <pre>
sudo blkid</pre>

For illustration purposes, an example output from a computer setup with a Vista/Ubuntu dual-boot and shared NTFS data partition is shown here:

 <pre>
/dev/sda1: LABEL="Recovery" UUID="B23613F43613B875" TYPE="ntfs" 
/dev/sda2: LABEL="Windows" UUID="38CE9483CE943AD8" TYPE="ntfs" 
/dev/sda3: LABEL="Data" UUID="519CB82E5888AD0F" TYPE="ntfs" 
/dev/sda5: UUID="00d7d951-2a35-40fd-8e5d-411bb824ff3b" TYPE="swap" 
/dev/sda6: LABEL="Ubuntu" UUID="6044b1d0-208e-4ab3-850d-03a92e1516fc" TYPE="ext4" </pre>

The first three partitions, all NTFS, are the ones that concern us here. There are no FAT32 partitions. In this instance, all three NTFS partitions have partition labels, which makes it easier to identify the purpose of each. If your blkid output does not include partition labels, this means that the partitions do not have labels and you will have to determine which partition you wish to mount by another means. Of the three NTFS partitions, we are going to configure /etc/fstab with only the third, the Data partition. Partition /dev/sda1 is the OEM manufacturer's recovery partition and should be left unmounted, or as described below. Partition /dev/sda2 is the Windows C:\ partition and is best not included in /etc/fstab for the reasons described above, or mounted read-only - see below.

You will now need to create a mountpoint for each NTFS partition that you wish to mount by means of /etc/fstab. In our illustration we are going to add one entry only for /dev/sda3. From a terminal:

 <pre>
sudo mkdir /media/Data</pre>

In this case we have created a mountpoint with the same name – Data – as the partition label. You may use (almost) any string you wish.

Before editing /etc/fstab directly, it is a good idea to make a backup. From a terminal:

 <pre>
sudo cp /etc/fstab /etc/fstab.orig</pre>

Now open /etc/fstab in a text editor with root privileges. In Ubuntu:

 <pre>
gksudo gedit /etc/fstab</pre>

In Kubuntu:

 <pre>
kdesudo kate /etc/fstab</pre>

In Xubuntu or Lubuntu:

 <pre>
gksudo leafpad /etc/fstab</pre>

For a general-purpose read-write mount, add this line to the end of /etc/fstab:

 <pre>
UUID=519CB82E5888AD0F  /media/Data  ntfs-3g  defaults,windows_names,locale=en_US.utf8  0 0</pre>

Replace the UUID with the one relevant for your partition as shown in your blkid output. “519CB82E5888AD0F” will not work for you. 

Also, substitute your mountpoint for “/media/Data”. In case you have a blank space in the name of the mountpoint you want to use like "New Volume" instead of "Data" located in "/media" use  "/media/New\040Volume". The space character is created by using "\040" in the fstab.
 
You will also need to change the “locale=en_US.utf8” option to one suitable for your location and language if you are not in the USA. You can determine your locale with this terminal command:

 <pre>
locale</pre>

Or for a list of all locales available on your system:

 <pre>
locale -a</pre>

Now save your edited /etc/fstab and close the text editor. The partition(s) you have configured will be mounted the next time you reboot, but to mount them now:

 <pre>
sudo mount -a</pre>

'''Two special cases'''

Sample /etc/fstab lines are suggested for two special cases.

'''Option 1 - for mounting read-only access'''. For example, this would be suitable for mounting your Windows C:\ partition if you need to access it. Modify the line below with your UUID and mountpoint:

 <pre>
UUID=519CB82E5888AD0F  /media/Data  ntfs  defaults,umask=222  0 0</pre>

'''Option 2 - to ensure that Ubuntu does not mount the partition and also disables graphical mounting from the file manager'''. For example, you may wish to ensure that recovery and system partitions are never inadvertently mounted and do not appear in the file manager. In this case you need to create a mountpoint in /mnt, not /media. Modify the line below with your UUID and mountpoint:

 <pre>
UUID=519CB82E5888AD0F  /mnt/Data  ntfs  noauto,umask=222  0 0</pre>

'''Note:''' with these mount options, the partition does not appear in the Devices list in the left pane of Nautilus (the Ubuntu file manager), but it still appears in Dolphin, the Kubuntu File Manager. Clicking on the partition in Dolphin causes the display of an error message. This solution is less elegant in Dolphin than with Nautilus, but the desired effect is achieved - the partition cannot be mounted. 

If you need to revert to the original configuration:

 <pre>
sudo mv /etc/fstab.orig /etc/fstab
sudo umount  /media/<mountpoint> </pre>

Substitute your mountpoint in the second line.

'''FAT32 Partition'''

FAT32 partitions  are mostly only found in older systems. If you are creating a partition to be used for data to be shared between Windows and Ubuntu, it is better to choose NTFS. Should you have a FAT32 partition which you need to mount using /etc/fstab, this will work to mount it read-write:

 <pre>
UUID=<UUID> /media/<mountpoint> vfat defaults,user,exec,uid=1000,gid=100,umask=000 0 0</pre>

Replace <UUID> with the UUID that blkid reveals for your partition, and adjust for your mountpoint. These mount options will make all files in the partition executable. If you have other needs, you will need to modify the options, but this is beyond the scope of this wiki page.

<<BR>>

== Other Resources ==
<nowiki>[[File:IconsPage/resources.png]]</nowiki>
* <nowiki>[[http://www.tuxera.com/community/ntfs-3g-manual/|ntfs-3g homepage]]</nowiki>
* <nowiki>[[Fstab]]</nowiki>
* <nowiki>[[LinuxFilesystemsExplained]]</nowiki>
* <nowiki>[[http://ubuntuforums.org/showthread.php?t=283131|How to fstab]]</nowiki>
* <nowiki>[[CategoryBootAndPartition]]</nowiki>

<<BR>>

== Footnote ==

This page has recently been subject to significant revision. If you have any comments about current content, or suggestions for further additions or edits, please head over to <nowiki>[[http://ubuntuforums.org/showthread.php?t=2086952|this Ubuntu forums discussion thread]]</nowiki> so that we can co-ordinate our efforts.

----
