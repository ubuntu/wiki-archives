{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


== General ==

These instructions cover the late 2010 !MacBookAir3,1 and !MacBookAir3,2 models. Some of the information in this article is derived from the <nowiki>[[http://ubuntuforums.org/showthread.php?t=1603365|Ubuntu Forums]]</nowiki> and previous <nowiki>[[MacBookAir|MacBook Air]]</nowiki> installation instructions.

'''''Note:''''' ''These instructions may broken as of <code>linux-image-3.8.0-17-generic</code>. An early version of <code>linux-image-3.8.0-17-generic</code> broke the ability to build <code>nvidia-experimental-310</code> dkms modules. Please see <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/nvidia-graphics-drivers-updates/+bug/576648|LP Bug #576648 - package nvidia-* failed to install/upgrade: nvidia-* kernel module failed to build (Unable to determine the target kernel version.)]]</nowiki>. A fix was released but I am unable to test.''

== Installation ==

{| class="wikitable"
|-
| Installation works using the Apple !SuperDrive or generic USB DVD drive; additional steps may be required for other installation methods, such as <nowiki>[[http://ubuntuforums.org/showpost.php?p=10886829&postcount=320|these for an USB stick method]]</nowiki>.
|}

Use the <nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Intel CPU-based Macintosh Generic Installation Instructions]]</nowiki> with the <nowiki>[[http://cdimage.ubuntu.com/daily-live/current/raring-desktop-amd64+mac.iso|64-bit Mac (AMD64) desktop image]]</nowiki> (this link should be updated after release).

The default Nouveau NVIDIA GeForce 320M video drivers are extremely buggy on !MacBookAir3,1 and !MacBookAir3,2 and may result in a pulsating line on the right-hand side of the screen or random crashes and freezes. This will be fixed during Post-Install. If installation fails due to a crash simply start over; it will install successfully eventually.

Note: wondering what filesystem to choose? For SSDs, it seems recommended to pick ext4 with journaling as this supports TRIM functiality. Read more at http://sites.google.com/site/lightrush/random-1/howtoconfigureext4toenabletrimforssdsonubuntu

== Post-Install ==

Everything works out of the box with the exception of the Nouveau NVIDIA GeForce 320M drivers. The Nouveau drivers are extremely unstable and result in random crashes and freezes. 

=== Install NVIDIA drivers ===

Immediately upon rebooting run ''System Settings -> Software & Updates -> Additional Drivers'' and install ''Using Experimental NVIDIA binary Xorg driver, kernel module and VDPAU library from nvidia-experimental-310 (proprietary)''.

Before rebooting open a Terminal and execute the following to generate a default <code>xorg.conf</code>:

<pre>
sudo nvidia-xconfig
</pre> 

This is a critical step; not running <code>nvidia-xconfig</code> by hand results in a broken X. Please see <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/nvidia-graphics-drivers-experimental-310/+bug/1159269|LP Bug #1159269 - Installing nvidia-* results in black/blank screen on boot on MacBookAir3,1]]</nowiki>.

Reboot and login. Upon logging in immediately run ''NVIDIA X Server Settings'', select ''X Server Display Configuration'', and click ''Save to X Configuration File''. This customizes the generic <code>xorg.conf</code> generated by <code>nvidia-xconfig</code> and tailors it for your specific system.

=== Fixing brightness keys ===

An additional option needs to be added to the ''Device'' section of <code>xorg.conf</code>. Please see <nowiki>[[https://bugs.launchpad.net/ubuntu/+source/nvidia-graphics-drivers-experimental-310/+bug/1159274|LP Bug #1159274 - Brightness can't be adjusted after running nvidia-xconfig (nvidia-experimental-310) on MacBookAir3,1]]</nowiki>. Open a Terminal and execute the following to edit <code>xorg.conf</code>:

<pre>
sudo gedit /etc/X11/xorg.conf
</pre>

Find the ''Device'' section and add the following:

<pre>
    Option         "RegistryDwords" "EnableBrightnessControl=1"
</pre>

The entire ''Device'' section should looks similar to:

<pre>
Section "Device"
    Identifier     "Device0"
    Driver         "nvidia"
    VendorName     "NVIDIA Corporation"
    BoardName      "GeForce 320M"
    Option         "RegistryDwords" "EnableBrightnessControl=1"
EndSection
</pre>

=== Avoid long EFI wait before GRUB ===

If your Macbook spends 30 seconds with "white screen" before GRUB shows, try booting from your Mac OS X install disc, select language, then click ''Utilities -> Terminal'', and enter:

<pre>
bless --device /dev/disk0s1 --setBoot --legacy
</pre>

Assuming that the bootloader is on sda1, otherwise /dev/disk0s2 if it's on sda2, etc.
 ^https://wiki.archlinux.org/index.php/Macbook#Avoid_long_EFI_wait_before_GRUB^

=== Missing keys ===

You may have noticed that some keys are missing from the keyboard. Most of these can be accessed with the Fn key:
{| class="wikitable"
|-
| FN+Backspace
| Delete
|-
| FN+Return
| Insert
|-
| FN+Up
| Page Up
|-
| FN+Down
| Page Down
|-
| FN+Left
| Home
|-
| FN+Right
| End
|}

=== Superdrive Doesn't Work ===

Actually, it does, but only if you boot (or re-boot) the Macbook with the Superdrive plugged in.  It doesn't seem to work if you hot-plug it -- probably the same mechanism that keeps the Superdrive from working with any other system than the Macbook Air.

=== Disable the Mac Startup Sound ===

The "BONG" when you turn on your laptop driving you crazy?  Via the <nowiki>[[https://wiki.archlinux.org/index.php/MacBook#Mute_startup_chime|ArchLinux Wiki]]</nowiki>:
# Reboot into the OSX installation media (holding down C to boot from the DVD or USB stick)
# From the Utilities menu, start the Terminal
# Issue the following command:
<pre>
</pre>
'''Note''' - Think carefully before disabling the startup sound.  It serves the same purpose as the BIOS beep does on a PC - it lets you know that all the hardware was initialized properly.  You could be disabling an important diagnostic tool.

----
CategoryMac CategoryInstallation
