{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

=== Migrate a Wubi install manually ===
This page details the steps required to manually migrate a Wubi install to a normal dual boot.

==== Automatic Migration ====
To migrate your Wubi install automatically, please refer instead to: <nowiki>[[https://help.ubuntu.com/community/MigrateWubi]]</nowiki>

==== Manual Migration ====
It is '''not recommended''' to use these instructions to manually migrate your Wubi install. They are more for documentation of the process involved, or those with an interest in doing it manually. The automatic migration referred to above is much safer as it does a lot of validation that is not included here.

If you still choose to follow these instructions make sure you understand each command before running. The '''mkfs.ext4''' command will format the partition you specify '''without prompting for confirmation'''.

These instructions only work on Wubi installs from release 9.10 and later (that use Grub2, not Grub-legacy). The code examples shown assume that the install will be migrated to partition ''/dev/sda5'' and that there will be a swap on ''/dev/sda6''. If there is no swap, just ignore lines containing ''/dev/sda6''. If there is a swap partition it must be of type 'swap'. Change the device names as appropriate.

Most of these commands are best cut-and-pasted to avoid typos. If you need to change the device names, I recommend doing it in a text editor before pasting to terminal. Otherwise, if you paste a linefeed by accident the command will run before you have a chance to change it.
<<BR>>
<<BR>>
1. Do this all as root
<pre>
$ sudo -i
</pre>
<<BR>>
1.a. Ensure you do not have grub-legacy. If the output of the following shows version 0.97 then please do not continue. These instructions only work with grub versions 1.96 and greater.
<pre>
</pre>
<<BR>>
2. Format new partition if not done so already - make sure it's empty, large enough and unmounted
<<BR>>'''WARNING -- the next command will wipe all existing data on /dev/sda5'''<<BR>>
<pre>
</pre>
<<BR>>
3. Mount new partition and copy files.
<pre>
</pre>
<<BR>>
4. Setup swap partition and enable hibernation (swap must be at least as big as RAM to hibernate)
<pre>
</pre>
<<BR>>
5. Edit fstab (blank out wubi mounts with sed and add new partitions)
<pre>
</pre>
<<BR>>
6. Remove lupin support and update grub (all in chroot). Note that this step installs the grub bootloader to /dev/sda and will replace your windows bootloader (the line 'grub-install /dev/sda') -- see note below
<pre>
</pre>
<<BR>>
7. Update wubi grub menu to pick up new install and exit sudo
<pre>
</pre>
<<BR>>
You're done. When you reboot, you should see a grub menu instead of the windows boot menu. Select the first entry. If you didn't run 'grub-install' you can boot from the wubi menu, select your new install from the bottom after the Windows entry.
<<BR>>
<<BR>>
'''NOTE''' on installing the grub bootloader: you can try out the new installation by booting it from the wubi grub menu first - if you want to make sure everything is working before replacing the windows bootloader. To do this, bypass the line 'grub-install /dev/sda' and the following line (in step 6.). You can then install the grub2 bootloader manually later after booting into the new install. I also recommend updating the grub menu after booting into the target partition
<pre>
$ sudo update-grub
</pre>
<<BR>>
<<BR>>
Other comments:
1. Mounted partitions under /host and /media are excluded from the rsync copy automatically. Partitions mounted under other mountpoints are not and will be copied unless manually unmounted first (when running manual migration).
2. Only the current kernel's initrd.img is updated on the migrated install; if you require others you can update them with "sudo update-initramfs -u -k &lt;kernel version&gt;".
