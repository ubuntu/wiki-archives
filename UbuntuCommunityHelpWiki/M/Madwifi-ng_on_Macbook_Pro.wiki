{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

This page will show you how to get Madwifi-ng drivers to work on a Macbook Pro with AirPort Extreme That uses the '''Atheros chipset'''. This is only for people who want to enable injection and monitor mode support. If you do not need injection or monitor mode then just use madwifi drivers there is no need for you to patch them.

== Step 1 ==

Get The Tools needed to build the madwifi-ng drivers:
<pre>
sudo apt-get install build-essential subversion automake autoconf
</pre>
=== Step 2 ===

Get The madwifi driver source and the patch for injection:
<pre>
svn -r 3737 checkout http://svn.madwifi.org/madwifi/trunk/ madwifi-ng

wget http://patches.aircrack-ng.org/madwifi-ng-r3386v3.patch
</pre>
==== Step 3 ====

Patching the driver source:
<pre>
cd madwifi-ng

patch -Np1 -i ../madwifi-ng-r3386v3.patch
</pre>
When you run this it will say Hunk 2 failed this is normal.

===== Step 4 =====

Compiling and uploading the drivers:
<pre>
make

sudo make install
</pre>

====== Step 5 ======
Tweaking the install:
<pre>
sudo sed -i~ 's/^exit 0/modprobe ath_pci\nexit 0/' /etc/rc.local

sudo sed -i~ 's/^exit 0/modprobe wlan_scan_sta\nexit 0/' /etc/rc.local

sudo sed -i~ 's/^exit 0/iwpriv ath0 bgscan 0\nexit 0/' /etc/rc.local
</pre>

Finally, the Mad``Wifi driver will prevent you from resuming after suspend-to-ram. To fix this, edit <code>/etc/default/acpi-support</code> and add the <code>ath_pci</code> driver to the <code>MODULES</code> variable, like so:
<pre>
MODULES="ath_pci"

</pre>

Now the Drivers should work just Reboot.
