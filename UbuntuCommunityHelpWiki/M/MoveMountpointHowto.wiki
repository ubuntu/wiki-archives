{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


It is sometimes necessary to move mount points, for any number of reasons.  Perhaps you keep separate partitions for each folder in the root of the filesystem, or maybe you need to store a large database, or perhaps you just want to change where your second hard disk or data partition mounts.

== Who is this Guide For? ==
<nowiki>[[File:IconsPage/hdd.png]]</nowiki> This guide is for basic changing of mount points.  It will help you edit you file systems table configuration file, <code>/etc/fstab</code>, to achieve this.  Please refer to this link about <nowiki>[[Fstab| fstab]]</nowiki>; we will not be covering details from that page here, so it is recommended reading to accompany this guide.

<nowiki>[[File:IconsPage/dont.png]]</nowiki> If you are using external disks, you do not usually want to create mount points in fstab, but rather let them mount automatically based on their partition label.  In this case you can relabel the partitions instead - see <nowiki>[[RenameUSBDrive]]</nowiki>.

<nowiki>[[File:IconsPage/stop.png]]</nowiki> If you are looking to create a separate /home partition, see <nowiki>[[Partitioning-Home-Moving]]</nowiki>.

== Getting Started ==
<nowiki>[[File:IconsPage/terminal.png]]</nowiki> To change mount points, we must edit the fstab file (see link above), so let's open it and have it fork to the background with the & symbol.  For Ubuntu, open a terminal and run:
<pre>
gksudo gedit /etc/fstab &
</pre>
<nowiki>[[File:IconsPage/important.png]]</nowiki> '''Remember, the following are examples.  Do not copy and paste them to your system; they will not work for you.'''

== Basic Example ==
<nowiki>[[File:IconsPage/example.png]]</nowiki>  Let's say we want to change a mount point from <code>/media/disk2</code> to <code>/mnt/backup</code>.  First, unmount the partition, delete the old mount point, and make the new mount point.
<pre>
sudo umount /media/disk2
sudo rmdir /media/disk2
sudo mkdir /mnt/backup
</pre>

You must know which partition you want to change, so find what you are looking for by cross referencing the contents of fstab with the output of this command:
<pre>
sudo fdisk -l
</pre>
The output may look something like this:
<pre>
Disk /dev/sda: 80.0 GB, 80026361856 bytes
255 heads, 63 sectors/track, 9729 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x41ab2316

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1        5476    43985938+   7  HPFS/NTFS
/dev/sda2            5477        9548    32708340   83  Linux
/dev/sda3            9549        9729     1453882+   5  Extended
/dev/sda5            9549        9729     1453851   82  Linux swap / Solaris

Disk /dev/sdb: 300.0 GB, 300069051904 bytes
255 heads, 63 sectors/track, 36481 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Disk identifier: 0x3d9c576e

   Device Boot      Start         End      Blocks   Id  System
/dev/sdb1               1       36481   293033601    7  Linux
</pre>

Locate the entry you want to change.  Let's say you discover that the device is <code>/dev/sdb1</code>.  Then you will change the line in fstab from something like
<pre>
/dev/sdb1	/media/disk2	ext3	defaults,errors=remount-ro  0  2  
</pre>
to
<pre>
/dev/sdb1	/mnt/backup	ext3	defaults,errors=remount-ro  0  2  
</pre>

 <nowiki>[[File:IconsPage/tip.png]]</nowiki> What's that?  It has <code>UUID=<some_strange_number></code> instead of a /dev location?  <nowiki>[[UsingUUID| UUIDs]]</nowiki> are just newer way of identifying partitions - to view correspending /dev locations, you can run one of these commands:
<pre>
sudo blkid
 ls -l /dev/disk/by-uuid</pre>
 It is recommended that you keep the UUID instead of changing that column of fstab to a /dev location, but either will typically work.

Now that you have changed fstab, save and close the file.  You can now remount everything in fstab, including the partition you changed, by running
<pre>
sudo mount -a
</pre>

== Advanced Example ==
<nowiki>[[File:IconsPage/example.png]]</nowiki> Some users have each directory in the root of the filesystem mounted on different partitions.  While this isn't generally recommended to beginners, this method has its purposes, which will not be covered here.

Let's say your fstab file looks like this:
<pre>
proc        /proc             proc         defaults                    0  0  
/dev/hda10  /                 ext3         defaults,errors=remount-ro  0  1  
/dev/hda1   /boot             ext3         defaults                    0  2  
/dev/hda5   /ftp              ext3         noexec,user_xattr           0  2  
/dev/hda7   /home             ext3         defaults                    0  2  
/dev/hda9   /tmp              ext3         defaults                    0  2  
/dev/hda12  /usr              ext3         defaults                    0  2  
/dev/hda6   /usr/local/mysql  ext3         defaults                    0  2  
/dev/hda13  /var              ext3         defaults                    0  2  
/dev/hda11  /var/www          ext3         defaults                    0  2  
/dev/hda2   /share            ext3         defaults                    0  2  
/dev/hda8   none              swap         sw                          0  0  
/dev/hdc    /media/cdrom0     udf,iso9660  user,noauto                 0  0  
</pre>
I have isolated 3 mount points that will be important and surrounded them with "#####".

So now, you want to change <code>/dev/hda6</code> from <code>/usr/local/mysql</code> to <code>/var/lib/mysql</code>.  First, unmount the partition, delete the old mount point, and make the new mount point.
<pre>
sudo umount /usr/local/mysql
sudo rmdir /usr/local/mysql
sudo mkdir -p /var/lib/mysql
</pre>

Your first idea would be to simply change the mount point so that the relevant portion of fstab looks as follows:
<pre>
/dev/hda6   /var/lib/mysql    ext3         defaults                    0  2  
/dev/hda13  /var              ext3         defaults                    0  2  
/dev/hda11  /var/www          ext3         defaults                    0  2  
</pre>
However, you have a problem.  If you reboot the computer, you will get an error like
<pre>
Mounting Local File System Failed
</pre>
Why?  The main problem is that you are mounting <code>/var/lib/mysql</code> before <code>/var</code>.  As the original documenter of this page put it, the mount order must be like ''trunk first then limbs''.  You should mount the filesystem in alphabetical order, with subdirectories being mounted ''after'' their parent directories.  You must move <code>/dev/hda6</code> down in the file, so that the relevant portion of the file now reads:
<pre>
/dev/hda13  /var              ext3         defaults                    0  2  
/dev/hda6   /var/lib/mysql    ext3         defaults                    0  2  
/dev/hda11  /var/www          ext3         defaults                    0  2 
</pre>

== Having Problems? ==
<nowiki>[[File:IconsPage/question.png]]</nowiki>
1. If your partition won't initially unmount, make sure all programs using data on that device are closed, including nautilus (the file browser), and try a lazy unmount:

 <pre>
 sudo umount -l <foo></pre>

 In this case, <foo> is either the mount point or the /dev location.

1. If you get the error <code>rmdir: failed to remove `test': Directory not empty</code>, the partition is not unmounted correctly, see #1.

1. Getting errors when you try to mount?  Be sure that you have created the new mount point and have spelled it correctly in the directory structure and in fstab.  Do not use mount points with spaces in the name - while this is possible, it is a pain to deal with and is not worth the trouble.  If you have this problem, it is creating issues in your fstab file because the parser thinks that whatever is coming after the space is the next column in fstab.

1. Getting <code>Mounting Local File System Failed</code> at boot time?  Refer to the Advanced Example.

== Other Resources ==
<nowiki>[[File:IconsPage/resources.png]]</nowiki>
* <nowiki>[[Fstab]]</nowiki>
* <nowiki>[[http://ubuntuforums.org/showthread.php?t=283131|How to fstab]]</nowiki> - from the Ubuntu Forums
* <nowiki>[[MountingWindowsPartitions]]</nowiki>
* <nowiki>[[HowtoPartition]]</nowiki>
* <nowiki>[[InstallingANewHardDrive]]</nowiki>
----
