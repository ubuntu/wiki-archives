{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


<nowiki>[[..-|Return to the main mkusb-minp page]]</nowiki>
-----

== Detailed description to make a persistent live drive ==

* '''mkusb-minp''' can make '''persistent live''' drives with a simple <nowiki>[[https://ubuntuforums.org/showthread.php?t=2426728|'next to cloning' method]]</nowiki> suggested by F. Hauri.
** It works with Ubuntu 19.10, Debian 10 and newer versions.
** Use mainstream '''mkusb''' for older versions, for example Ubuntu 18.04.3 LTS and Debian 9.

* '''<nowiki>[[..-..-plug|mkusb-plug]]</nowiki>''' is a graphical tool ()GUI), that made 'mkusb-minp' more user friendly. 'mkusb-minp', the engine behind the GUI was developed into 'mkusb-sedd' and 'mkusb-tow'. The description in this page can be applied to 'mkusb-plug' too.

=== Commands for Ubuntu 19.10 and 20.04 LTS ===

The following commands create a persistent live drive from the hybrid iso file.

* '''sed''' (yes, it works also with a binary file)
* '''cloning command'''
* '''fdisk'''
* '''mkfs.ext2'''
* '''sync'''

The '''sed''' and 'cloning' commands can be merged, you can re-direct '''sed''' to the target device. This is done in '''mkusb-minp'''.

(The commands

* 'strings'
* 'ls'
* 'lsblk'

are only for checking.)

<pre>
strings eoan-desktop-amd64.iso |grep 'quiet splash'  # check that 'quiet splash' is there to be replaced 
sed 's/quiet splash/persistent  /' eoan-desktop-amd64.iso > persistent-eoan-desktop-amd64.iso  # 12 char
ls -l *eoan*  # check that the size is the same
strings persistent-eoan-desktop-amd64.iso |grep 'persistent  '  # check that 'persistent  ' is there now
dus persistent-eoan-desktop-amd64.iso  # you can use any cloning tool
sudo lsblk -fm  # check the device letter of the target drive (the USB drive)
sudo fdisk /dev/sdx  # x is the device letter of the target drive, please double-check
n           # new partition
p           # primary
<Return>    # default: 3
<Return>    # default: next free sector
<Return>    # default: last addressable sector
w           # write and quit
sudo lsblk -fm  # verify that partition #3 correct for the persistent data
sudo mkfs.ext2 -L casper-rw /dev/sdx3  # put label and file system into the partition of persistence
sudo lsblk -fm  # check that things look good
sync  # flush the buffers and wait for prompt
</pre>

After the '''sync''' command you can unplug the drive to test it in another computer or reboot to test it in the same computer.

=== Commands for Debian 10 ===

There are slight modifications for Debian, which are implemented in '''mkusb-minp''',

<pre>
sed 's/splash quiet/persistence /;s/quiet splash/persistence /'

mkfs.ext2 -L persistence /dev/sdx3

echo '/ union' > mountpoint/of/sdx3/persistence.conf
</pre>

=== Other code in the shellscript ===

There is a lot of code in '''mkusb-minp''' to

* check that you select the correct target device (the safety belt),
* check that you use the correct syntax for Ubuntu and for Debian,
* to help manage derivatives and respins and versions of Ubuntu and Debian,
* to update the partition table into the kernel between the tasks.

== Identification tips to check if mkusb-minp might work ==

Normally you can '''use the name of the downloaded iso file''', but in case it has been changed, there are some tips and tricks.

Example using a Sparky Linux iso file

=== 'quiet splash' ===

<pre>
grep --binary -e 'quiet splash' -e 'splash quiet' sparkylinux-5.9-x86_64-lxqt.iso
</pre>

=== /etc/lsb-release ===

<pre>
$ sudo mount -o loop sparkylinux-5.9-x86_64-lxqt.iso /mnt/lp1
$ sudo mount -o loop /mnt/lp1/live/filesystem.squashfs /mnt/lp2

$ grep 'DISTRIB_ID' /mnt/lp2/etc/lsb-release 
DISTRIB_ID=Sparky

$ grep 'DISTRIB_RELEASE' /mnt/lp2/etc/lsb-release 
DISTRIB_RELEASE=5.9
</pre>

== Tested linux distros made persistent live with mkusb-minp ==

The following distros are tested and '''mkusb-minp''' can make
bootable USB pendrives

* in BIOS and UEFI mode,
* when cloned and made persistent live.

=== Main distros ===

==== Debian 10 (and Debian 8 only in BIOS mode) ====

==== Ubuntu 19.10 and newer versions ====

=== Derivatives and respins ===

==== Extix 19.10 ====

 extix-19.10-64bit-lxqt-nvidia-1200mb-191023.iso

Please notice:

* 'quiet splash' is not identified, you must '''add the boot option 'persistence' manually at boot'''.
* Extix is based on Ubuntu, but the persistence should be made using the syntax for Debian.

So enter the letter '''d''' and press the Enter key:

<pre>
 Final checkpoint 
Do you want to overwrite  /dev/sdx ? (y/N) y
mount: /tmp/tmp.4i61r8C1ty: WARNING: device write-protected, mounted read-only.
* **** Neither Ubuntu nor Debian ***** 
Try persistence according to Ubuntu or Debian or live-only? (u/d/L)? d
</pre>

==== Kaisen Linux Rolling 2.2 RC2 System Rescue ====

 kaisenlinuxrolling2.2RC2-amd64-SR.iso

'quiet splash' is not identified, but there are already separate menuentries for persistence.

Select persistence according to Debian because it is based on Debian 10.

<pre>
* **** Neither Ubuntu nor Debian ***** 
Try persistence according to Ubuntu or Debian or live-only? (u/d/L)? d
</pre>

==== Kali Linux 2019.3 ====

 kali-linux-light-2019.3-amd64.iso

'quiet splash' is not identified, but there are already separate menuentries for persistence,

 '''Live USB Persistence'''

so '''mkusb-minp''' can create persistent live systems anyway without any tweaks. Persistence according to Debian is selected automatically.

==== LMDE 4 ====

 lmde-4-cinnamon-64bit.iso

Select persistence according to Debian because it is based on Debian 10.

So enter the letter '''d''' and press the Enter key:

<pre>
 Final checkpoint 
Do you want to overwrite  /dev/sdx ? (y/N) y
mount: /tmp/tmp.4i61r8C1ty: WARNING: device write-protected, mounted read-only.
* **** Neither Ubuntu nor Debian ***** 
Try persistence according to Ubuntu or Debian or live-only? (u/d/L)? d
</pre>

==== MX Linux 19.1 ====

 MX-19.1_x64.iso

mkusb cannot make a persistent live drive from an MX Linux iso file. But '''<nowiki>[[..-..-plug|mkusb-plug]]</nowiki>''' can create a live drive with a '''usbdata''' partition with the NTFS file system. When you boot into that system, (at boot) MX Linux you can create files for persistence in that partition (or in another drive, for example internal). 

==== Q4OS 3.9 ====

 q4os-3.9-x64-tde.r1.iso

Necessary tweak:

<pre>
sed 's/quiet nosplash/quiet splash  /' q4os-3.9-x64-tde.r1.iso > q4os-3.9-x64-tde.r1-minp.iso 
</pre>

Then run '''mkusb-minp''' using the modified iso file. Persistence according to Debian is selected automatically.

==== Rescatux 0.72-beta4 ====

 rescatux-0.72-beta4.iso

Persistence according to Debian is selected automatically.

==== Solyd 10 ====

 solydx_10_64_201909.iso

Select persistence according to Debian because it is based on Debian 10.

So enter the letter '''d''' and press the Enter key:

<pre>
 Final checkpoint 
Do you want to overwrite  /dev/sdx ? (y/N) y
mount: /tmp/tmp.4i61r8C1ty: WARNING: device write-protected, mounted read-only.
* **** Neither Ubuntu nor Debian ***** 
Try persistence according to Ubuntu or Debian or live-only? (u/d/L)? d
</pre>

==== Sparky Linux 5.9 ====

* sparkylinux-5.9-i686-lxqt.iso
* sparkylinux-5.9-x86_64-lxqt.iso

==== Sparky Linux 5.11 ====

 sparkylinux-5.11-x86_64-lxqt.iso

Select persistence according to Debian because it is based on
Debian 10.

Today, 2020-05-09, standard mkusb 12.4.5 (with mkusb-plug 2.6.1) is in the Sparky Linux repository. When it gets upgraded to mkusb 12.5.1 also mkusb-dus can create persistent live drives with Sparky.

==== Supergamer 5 ====

* !SuperGamer_V5.zip
* supergamer_v5.iso

Extract the iso file and checksum files from the zip file. Select persistence according to Ubuntu because it is based on Ubuntu 19.10.

So enter the letter '''u''' and press the Enter key:
<pre>
Try persistence according to Ubuntu or Debian or live-only? (u/d/L)? u
</pre>
-----
<nowiki>[[..-|Return to the main mkusb-minp page]]</nowiki>
