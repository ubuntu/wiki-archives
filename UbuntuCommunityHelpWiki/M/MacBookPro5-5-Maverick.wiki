{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


<<BR>>
[Tested with Maverick latest updates, you can contact me at tjbarber09@gmail.com]
<<BR>>

== MacBookPro 5,5 and Ubuntu 10.10 (Maverick Meerkat) ==
<<BR>><<BR>>

This page aims to describe the steps needed, to fully enable all features of the '''13.3 (mbp 5,5) and 15 inch (mbp 5,4) 5-th Generation MacBookPro''' (release date: June 2009) when using '''Ubuntu 10.10, Maverick Meerkat'''.<<BR>>
<<BR>>
<nowiki>[[File:IconsPage/terminal.png]]</nowiki> You can find out, what model you have by typing at the terminal:<<BR>>
<pre>
sudo dmidecode -s system-product-name
</pre>
<<BR>>
 If you have a different model, please go <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki> and find the right wiki.

=== Overview ===

Anything not mentioned here probably already works out of the box. If not, please refer to the <nowiki>[[http://ubuntuforums.org/forumdisplay.php?f=328|Ubuntu Apple Users forum]]</nowiki>.

{| class="wikitable"
|-
| <style="background-color: #f9eaaf;">Feature
| <style="background-color: #f9eaaf;"> Support status
|-
| <nowiki>[[#Sensors|Sensors (temps & fans)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#Suspend|Suspend & Hibernate]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Reboot|Reboot]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Video|Video & Effects (Compiz)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#HFS|HFS+ (only read)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#CDDVD|CD-DVD Writing]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Bluetooth|Bluetooth]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Keyboard|Keyboard functions (Brightness,volume,...)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Touchpad|Touchpad (bcm5974)]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Wireless|Wireless (AirPort)]]</nowiki>
| <nowiki>[[File:IconsPage/warning.png]]</nowiki>
|-
| <nowiki>[[#iSight|iSight]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#Sound|Sound]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Microphone|Microphone]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#ExtMon|External Monitor]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|-
| <nowiki>[[#ARC|Apple Remote Control]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki>
|-
| <nowiki>[[#Firewire|Firewire]]</nowiki>
| <nowiki>[[File:IconsPage/ok.png]]</nowiki>
|}
<nowiki>[[File:IconsPage/ok.png]]</nowiki> (works out-of-the-box) <<BR>>
<nowiki>[[File:IconsPage/ok.png]]</nowiki> <nowiki>[[File:IconsPage/info.png]]</nowiki> (works, with remarks) <<BR>>
<nowiki>[[File:IconsPage/warning.png]]</nowiki> (needs manual install) <<BR>>
<nowiki>[[File:IconsPage/dont.png]]</nowiki> (won't work)<<BR>>
<nowiki>[[File:IconsPage/question.png]]</nowiki> (not yet documented)<<BR>>

=== Basic Installation Instructions ===
Common things about installing and maintaining Ubuntu on Intel-based Macs:
<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|Intel CPU-based Macintosh Generic Installation Instructions]]</nowiki>

=== Package Support for Intel Macs ===
You need some modules from the <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/PPA|MactelSupportTeam/PPA]]</nowiki>
:
<pre>
sudo add-apt-repository ppa:mactel-support && sudo apt-get update
</pre>
'''UPDATE:''' Seems like the Led Display Brightness IS working out of the box. For the Keyboard backlit, just pommed is needed, no need to edit.
 
The mactel PPA modules needed on ubuntu on mac are nvidia-bl-dkms (for the LCD dimming support), and pommed (for the keyboard backlight control keys).

<pre>
sudo apt-get install nvidia-bl-dkms pommed
</pre>

nvidia-bl-dkms must be in ''/etc/modules'' file to load. Open the file in an editor with:
<pre>
gksudo gedit /etc/modules
</pre>
And add to the end this line:
<pre>
nvidia_bl shift=2
</pre>
The shift option reduces the dimming range to make it more comfortable. You can tune the value as you want.

If you use a different kernel like pae, you will need to install it again under the pae kernel to make it work LCD dimming keys work, and reboot.
<pre>
sudo apt-get remove nvidia-bl-dkms
sudo apt-get install nvidia-bl-dkms
</pre>

An alternative to using the nvidia-bl-dkms module for LCD dimming support (F1-F2 keys), is to add this line to the "Device" section of /etc/X11/xorg.conf:
<pre>
Option "RegistryDwords" "EnableBrightnessControl=1"
</pre>

=== Sensors (temps & fans) ===

To enable temperature sensors.

=== Suspend & Hibernate ===
Suspend and Hibernate work if the machine has had the latest EFI update (version 1.7)
and the 195 version nVidia drivers.

Or if hibernate does not work, edit ''/etc/pm/config.d'':
<pre>
gksudo gedit /etc/pm/config.d/00sleep_module
</pre>
And add to the end:
<pre>
SUSPEND_MODULES="sky2"
</pre>

<<BR>>
=== Reboot ===
Rebooting and Shutdown seems to work fine.

=== Video & Effects (Compiz) ===
<nowiki>[[File:IconsPage/restricted.png]]</nowiki>
You should use the restricted driver, install from:
System -> Administration -> Additional Drivers.
Select the NVidia graphics driver that says recommended and Activate.  Reboot to apply the change.
Some users reported that version 195, which is available as recommended, works great. But some other users, installing Maverick from scratch (e.g. not upgrading from Lucid) couldn't suspend or hibernate the computer with 195.x drivers. However, this cannot be confirmed. As of this writing, the latest NVidia driver works absolutely fine.

Instead, with version 173.x (from repositories) or 190.x (from the nvidia website), the computer went back to work for suspending/resuming & hibernating/waking up. Version 173.x didn't refresh long pages shown with Firefox when scrolling (Chromium worked fine), but version 190.x worked fine also with Firefox and Chromium. 
Bottom line: if you have some problems with your display using 195 drivers, try with 190.x first, until the bugs reported for nvidia at launchpad are completely fixed.

'''Note:''' I've found that making sure the mactel-support repository is added, and ALL current recommended-updates are installed, before activating the nVidia-current driver appears to alleviate all of the above problems mentioned.  Using the driver before updates appears to cause problems with the startup splash.

=== HFS+ (only read) ===
Confirmed working out of the box.

=== CD/DVD Writing ===
Both writing and reading work fine.

=== Bluetooth ===

Confirmed working out of the box:
* Detection of devices
* Sending files to devices (OBEX push)
* Bluetooth Mouse
* Bluetooth Keyboard

On other devices, the Mac is found. It does not offer any services, but this seems to be a software problem.

=== Keyboard Functions ===

What works:
* F1 and F2 for LCD dimming (with nvidia-bl-dkms packages installed)
* F3 and F4 can be correctly associated with any command in the system preferences.
* F7, F8 and F9 are correctly associated with audio player's 'previous', 'play/pause', 'forward' commands.
* F10, F11, F12 correctly mute and tune audio volume (after having correctly configured audio, see below)
* CAPSLOCK light (uninstalling mouseemu)

The default setting of the ''/etc/pommed.conf'', in the "Keyboard backlight control"-section, is a bit annoying.
To change this you may use some of these settings:

<pre>
default = 0
---
step = 16
---
auto = no
---
idle_timer = 300
</pre>

The mouseemu package might affect the caps-lock behaviour, if caps-lock fails to work remove this package if installed.

As of version 1.31, pommed supports the mbp 5,5 and mbp 5,4. The default settings work ok, and you can always tune its config file:

<pre>
gksudo gedit /etc/pommed.conf
</pre>

To swap the fn key functionality (e.g. use fn+F1 to dim the LCD etc..), edit ''/etc/pommed.conf'' and set the variable ''fnmode'' to 2, or add this line to ''/etc/modprobe.d/options'':
<pre>
options hid_apple fnmode=2
</pre>
<<BR>>

==== Keyboard backlight without pommed ====
Consider this if you want a way to control the backlight from the command line or with the mouse.

You can choose a value from 0 to 255 to tune the keyboard backlight by writing to ''/sys/class/leds/smc::kbd_backlight/brightness''. For example this command switches the light completely on:

<pre>
  echo 255 | sudo tee -a /sys/class/leds/smc::kbd_backlight/brightness
</pre>

The file reporting the ambient light sensor is /sys/devices/platform/applesmc.768/light (the number 768 in the path might be different on your machine). To read the value do

<pre>
  cat /sys/devices/platform/applesmc.768/light
</pre>

which should give different values under different light conditions.

With the following method you can control the backlight through a GUI. Create a new file in /usr/local/bin:

<pre>
  gksu gedit /usr/local/bin/keyboard-backlight
</pre>

Copy this script into the file and save it:
<pre>
## !/bin/bash

## A little script to set the keyboard backlight
## Note: clicking "Cancel" in the dialog sets the backlight to 0.
## Note: needs to be called as root (with gksu or sudo) because
## of writing to /sys. Use "sudo visudo" to edit the /etc/sudoers file
## if you want to allow non-admin users to change this value, possibly
## without having to enter a password. Read "man sudoers" and, e.g., use
## ALL ALL = NOPASSWD:/usr/local/bin/keyboard-backlight
## to allow all users to execute this command on all hosts without
## a password.

## Read current value
  BACKLIGHT=$(cat /sys/class/leds/smc::kbd_backlight/brightness)

  BACKLIGHT=$(zenity \
                --title "Keyboard backlight" \
                --scale \
                --text="Adjust the keyboard backlight" \
                --value="$BACKLIGHT" \
                --min-value="0" \
                --max-value="255")

  echo $BACKLIGHT | tee -a /sys/class/leds/smc::kbd_backlight/brightness
  exit 0
</pre>

Use this command to make the file executable:

<pre>
  sudo chmod +x /usr/local/bin/keyboard-backlight
</pre>

You may want to create a launcher on the panel. In this case enter
<pre>
  gksu /usr/local/bin/keyboard-backlight
</pre>
as the command line. Very smartly, the dialog will recognise the word "keyboard" and suggest a good launcher icon automatically.

You could also use the ambient light value to extend the script to make the backlight depend on the ambient light.

<<BR>>
==== Capslock Light ====

To enable the CAPSLOCK light you need to remove the mouseemu package.

For testing you can execute this command and then test switching CAPSLOCK:
<pre>
sudo killall mouseemu
</pre>

If everything is OK you can permanently remove mouseemu:
<pre>
sudo apt-get --purge remove mouseemu
</pre>
<<BR>>

=== Touchpad (bcm5974) ===
The touchpad usually works out of the box. You can enable two-finger scrolling from the preference->mouse->touchpad applet. It also may help you to uncheck the "Enable mouse clicks with touchpad" checkbox under the Touchpad tab. Furthermore tweaking the drag and drop time to be less, helped significantly. The click-and-drag also works.

If you are upgrading from a previous ubuntu version, depending on your previous configuration, you may need to use the <nowiki>[[http://bitmath.org/code/multitouch/|xf86-input-multitouch driver]]</nowiki> and bcm5974-dkms kernel driver from the mactel PPA (Lucid users can try the one in <nowiki>[[https://launchpad.net/~jdstrand/+archive/ppa|ppa:jdstrand/ppa]]</nowiki>, which is the driver from the mactel ppa built with a backported mtdev library). After enabling these drivers, one, two and three finger clicks all work as expected (ie, one finger = left click, two finger = right click and three finger = middle click).

To enable the multitouch drivers, run this in a console:
<pre>
sudo apt-get install xf86-input-multitouch bcm5974-dkms
</pre>
Then add this to xorg.conf (or drop into /usr/lib/X11/xorg.conf.d/99-multitouch.conf on Lucid or /usr/share/X11/xorg.conf.d/99-multitouch.conf on Maverick and later).
<pre>
Section "InputClass"
    MatchIsTouchpad "true"
    Identifier "Multitouch Touchpad"
    Driver "multitouch"
EndSection
</pre>
Then reboot (so that the new bcm5974 kernel module is loaded and X is restarted).

=== Wireless (AirPort) ===
<nowiki>[[File:IconsPage/restricted.png]]</nowiki>
The Broadcom driver was not installed by default on Maverick. You'll need the STA one, goto "System->Administration->Additional Drivers" and enable it. If you prefer the command line, execute on the Terminal:
<pre>
sudo apt-get install bcmwl-kernel-source
</pre>

Then reboot the system and you're OK.<<BR>>

Edit: With only installing the driver my wireless was very slow compared to it's functionality on Mac OS X. Turning off the power management for my wireless helped the stability of my connection, source: <nowiki>[[http://ubuntuforums.org/showpost.php?p=9972607&postcount=6|Wireless BCM4322 Slow Connection]]</nowiki>

Stick this script in /etc/network/if-up.d (I call the script powermode), and set its mode to 755. Make sure that DEVICE matches your broadcom device.

<pre>

DEVICE="eth1"

if [ "$IFACE" = "$DEVICE" -a "$PHASE" = "up" ]; then
  /sbin/iwconfig $DEVICE power off
fi

exit 0
</pre>

Then disable and re-enable your wireless connection. iwconfig eth1 should tell you that "Power management" is set to Off. Now test your connection stability and speed. It should be fine now :-)

=== iSight ===
<nowiki>[[File:IconsPage/webcam.png]]</nowiki>
Confirmed working out of the box.  Tested using cheese (sudo apt-get install cheese) and skype.
Obs: It's necessary to use isight-firmware-tools. In case you don't wan to do this, you need boot OSX first to load the isight firmware, and reboot into Ubuntu. This will trigger OSX to load the firmware which should last until you poweroff the machine.
You will find a detailed tutorial <nowiki>[[http://help.ubuntu.com/community/MactelSupportTeam/AppleiSight|Here]]</nowiki>.

=== Sound ===

Sound works for me out of the box. To unmute the front speakers run ''alsamixer'' from the Terminal, or use gnome-alsamixer:

<pre>
  sudo apt-get install gnome-alsamixer
</pre>

To enable the optical output, check the IEC958 option, and you'll see a red light coming from your headphone jack (However, the headphone jack seems to work without this. If you're not having any trouble with your headphone jack, then feel free to keep the IEC958 option unchecked).

If sound is not working the following may help.

From the terminal, type:
<pre>
   gksudo gedit /etc/modprobe.d/alsa-base.conf
</pre>

Add the following line to the end of the file. Save the file. Reboot.
<pre>
   options snd-hda-intel model=mbp55
</pre>

* **this also working for the new MBP 6,1 models.

=== Microphone ===
Also working, see above.

=== External Monitor ===
Dual monitor tested successfully with Twinview on the recommended maverick drivers described above. My external monitor was detected correctly by nvidia-settings tool.
External VGA's resolution tested up to 1920x1080.

You may experience some trouble with the external VGA and the new drivers: if the detected resolution of externally connected monitors doesn't go beyond 640x480, you will need to inactivate EDID. Add:
<pre>
Option	   "NoEDID" "True"
</pre>
to /etc/X11/xorg.conf

=== Apple Remote Control ===
Text from Jaunty: It Works with Remarks. Volume control works. Forward and back works (even on Mozilla Firefox) Menu has no action Pause/Play not tested.

Install gnome-lirc-properties:
<pre>
  sudo apt-get install gnome-lirc-properties
</pre>

gnome-lirc-properties will give you an entry "Infrared Remote Control" in menu System > Administration. After launching this it will guide you through the configuration. Though my remote is model No A1294, gnome-lirc-properties detects its signals (however, he Enter button is detected as an additional Play button).

Although this seems to work, on my mbp 5,4 the remote does not actually control any applications, like the Totem Movie Player - more testing is required.

If when you try to open "Infrared Remote Control" from the menu, or run gnome-lirc-properties from the command line, and nothing opens up, check that you have hal installed, if not, install it.  That worked for me :)

Install hal:
<pre>
  sudo apt-get install hal
</pre>

=== Firewire ===
Works out of the box.

----
<nowiki>[[https://help.ubuntu.com/community/CategoryMac|CategoryMac]]</nowiki>
----
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> Please update this page, if you have figured out anything, that is not mentioned here!
|}
<<BR>><<BR>>
{| class="wikitable"
|-
| <style="background-color: #f9eaaf;" tablewidth="100%"><nowiki>[[File:IconsPage/users.png]]</nowiki><<BR>> The <nowiki>[[http://ubuntuforums.org/group.php?groupid=352|MactelSupportTeam]]</nowiki> is about to restructure and reorganize the documentation for Intel-based Macs. If you are interested in helping, please visit our <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam|team page]]</nowiki> for information. For all Mactel wikis, there is a starting place <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki>. There is also a <nowiki>[[http://ubuntuforums.org/showthread.php?t=969360|thread]]</nowiki> about planning the Mactel docummentation going on.
|}
<<BR>><<BR>>
----
CategoryMac CategoryMac
