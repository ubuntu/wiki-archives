{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__


The AspireOne 751h has a 1366x768 pixel 11.6" screen.
== Trusty 14.04 ==
I added the following option to the boot parameters to solve system freezing when power gets disconnected: 

<pre>
intel_idle.max_cstate=3
</pre>

If this solves your problem you should add it to the GRUB_CMDLINE_LINUX_DEFAULT  string below.

== Precise 12.04 ==

The gma500 works out of the box with some minor modifications.

I use the following options in '''/etc/default/grub''' (all one line)

<pre>
GRUB_CMDLINE_LINUX_DEFAULT=”quiet splash console=tty1 acpi_backlight=vendor acpi_osi=Linux acer_wmi.blacklist=yes mem=1920mb”
</pre>

See also <nowiki>[[https://wiki.ubuntu.com/HardwareSupportComponentsVideoCardsPoulsbo| Ubuntu wiki HardwareSupportComponentsVideoCardsPoulsbo]]</nowiki>

=== Fixing suspend ===
In a terminal type
<pre>
sudo gedit /etc/pm/config.d/gma500
</pre>
a blank file will open, put in it 
<pre>
ADD_PARAMETERS='--quirk-vbemode-restore'
</pre>
then save.

== Lucid 10.04 ==

=== Verified Working Default install ===
* Wireless & Wired NIC
* Sound Output Speakers, and Head Phone Switching
* Sound Input Mic 
* WebCam
* MultiCard Reader

=== Verified Working Post Install Changes ===
* 1366x768 resolution (psb module)
* Dual Head display (psb module)

=== Known Issues ===

* LCD Brightness control doesn't work /proc/acpi/video missing
* Possible USB+3D problems resurface because of GMA500 video card driver. 
* Suspend/Resume broken with framebuffer & psb X driver known issue see:
 https://wiki.ubuntu.com/HardwareSupportComponentsVideoCardsPoulsbo/
* Using the B43 wireless card drivers causes issues at boot, use the STA drivers - http://ubuntuforums.org/showthread.php?t=1565236

=== Items's Needing verification ===
* IEGD Intel® Embedded Graphics Drivers (best GMA500 3D performance)
 http://edc.intel.com/Software/Downloads/IEGD/

 http://www.nanoant.com/linux/compiling-kernel-iegd-10x-module-for-any-linux-distribution

Note: IEGD version 10.3 and older only work with X version 1.6 and older.  Since Lucid runs X version 1.7 it's currently not supported
 

=== 1366x768 psb module ===
Please see the following for the latest directions in getting the GMA500 working here:
https://wiki.ubuntu.com/HardwareSupportComponentsVideoCardsPoulsbo/

=== 1366x768 in GRUB2 ===
These instructions will enable higher resolutions for GRUB2 Menus and Plymouth Splash Screens

Note that this requires GRUB2 to work; it also will not work with suspend at all.
GRUB2 should be installed by default; if not, install it before attempting to proceed.
The method described below involves changing the bootloader configuration.  If done wrong, your computer may fail to boot.  

'''Edit /etc/grub.d/40_custom'''

<pre>
exec tail -n +3 $0

loadfont (hd0,1)/splash/fonts/unicode.pf2
set gfxterm_font="20"
insmod 915resolution
915resolution 5c 1366 768
set gfxmode="1366x768x32"
set gfxpayload="1366x768x32"
insmod gfxterm
insmod vbe
insmod tga
terminal_output gfxterm
background_image (hd0,1)/splash/images/active.tga

</pre>

'''Note:''' 
* If you don't want a "splash-screen", just leave out the "background_image"-line.
* The above example shows the font file and wallpaper image on the first partition under a directory called '''splash'''. This example is for systems with an unencrypted `/boot` partition and the remainder of the disk encrypted and/or LVM 
 If you are not encrypting your disk, and using a single partition for `/` and '/boot' then the default locations would be:
<pre>
(hd0,1)/usr/share/grub/unicode.pf2
(hd0,1)/usr/share/images/grub/active.tga`
 </pre>
 If you are pulling you hair out trying to figure out why GRUB is not seeing your Wallpaper Image, maybe it cannot see the file system because of crypt or LVM (or if you use both together) or you have a separate partitions for / ans /boot. 
 Simple solution make a splash directory under boot and copy your files under there. 
* Grub2 can find your images on a separate and/or LVM volume, but you will need to load the LVM Grub module, and enter the Grub command shell to 'ls' your drives to see how Grub is seeing them. Then change (hd0,1) to what you find. 
 Find more GRUB2 info here. https://wiki.ubuntu.com/Grub2

'''Edit /etc/default/grub'''

<pre>

GRUB_DEFAULT="0"
GRUB_HIDDEN_TIMEOUT=0
GRUB_HIDDEN_TIMEOUT_QUIET=false
GRUB_TIMEOUT=10
GRUB_DISTRIBUTOR=`lsb_release -i -s 2> /dev/null || echo Debian`
GRUB_CMDLINE_LINUX_DEFAULT="quiet splash mem=1908mb"
GRUB_CMDLINE_LINUX=""

</pre>

'''Note:'''
* `GRUB_CMDLINE_LINUX_DEFAULT="quiet splash mem=1908mb"` the mem kernel argument fences the amount of memory you are allowing the kernel to see, and the remainder is for the Graphics Card. In this example this is a 2GB system (2048MB-1908MB=)140MB available for video. Adjust to your needs.

'''Now update your Grub Configuration'''

The following command will properly generate `/boot/grub/grub.cfg`
<pre>
UserName@YourSystem:~$ sudo update-grub
</pre>  
Reboot to test

=== Suspend and Hibernate ===

Still needing to be resolved

'''Note:'''
* In most cases your swap partition needs to be equal or greater the size of your physical ram, to avoid problems.  If your swap partition is not big enough to hold all RAM objects then you get random failures.  If you have a small swap it might work occasionally, if your memory consumption is smaller than your swap at time of suspend/hibernate.

== Versions < Lucid 10.04 ==

''BodhiZazen'' - Hats off the the UNR team, but be warned, the UNR remix is slow an almost usable on an AspireOne 751h (11.6"). Better to perform a standard install on this hardware.

=== Enabling 1366x768 Resolution ===
'''The below fixes do not work in 9.10 This is a confirmed bug under xorg(ubuntu).  ''' 
'''See below this section for a 10.04 workaround (may work with 9.10)'''
https://bugs.launchpad.net/ubuntu/+source/xorg/+bug/426791 xorg(ubuntu).  Instead use the work around found at https://wiki.ubuntu.com/HardwareSupportComponentsVideoCardsPoulsbo

With this variant (popular because it's available at Costco), the maximum graphics resolution (1366x768) does not work out of the box. To install an updated graphics driver, add the following line at the end of /etc/apt/sources.list: <pre>
deb http://ppa.launchpad.net/ubuntu-mobile/ppa/ubuntu jaunty main</pre>
then run the following commands in the terminal:<pre>
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys C6598A30
sudo apt-get update
sudo apt-get install xserver-xorg-video-psb psb-kernel-source
sudo shutdown -r now</pre>
If an update to a later version (such as an upgrade from 2.6.28-11 to 2.6.28-14) breaks the graphics driver on your 751h, continue booting to the desktop (select the '''Run one time session with low graphics''' option) then run the following commands in the terminal:<pre>
sudo apt-get remove psb-kernel-source
sudo apt-get install psb-kernel-source
sudo shutdown -r now</pre>
'''DO NOT''' use the <code>--reinstall</code> flag to attempt this fix (it will likely crash your session). Use the <code>remove</code> option first, followed by the <code>install</code> option as shown above.

Post install performance is a bit sluggish and can be fixed with a small edit to /etc/X11/xorg.conf. Open the file for editing (gksu gedit /etc/X11/xorg.conf ) and add these lines (under the "Device" section):

<pre>
Section "Device"
        Identifier      "Configured Video Device"
        Option          "AccelMethod" "exa"
        Option          "MigrationHeuristic" "greedy"
        Option          "NoDDC"
EndSection

Section "InputDevice"
        Identifier  "Mouse0"
        Driver      "synaptics"
        Option      "Protocol" "auto"
        Option      "Device" "/dev/input/mouse0"
        Option      "ZAxisMapping" "4 5 6 7"
        Option      "CorePointer"
        Option      "HorizEdgeScroll" "1"
EndSection
</pre>

Restart X (log off and back in).

Installing the Poulsbo as mentioned above also allows the Function Keys to change the LCD screen brightness.

=== Fixing Suspend ===
Poulsbo driver will break suspend. For fixing it, meanwhile <nowiki>[[http://lists.freedesktop.org/archives/hal/2009-August/013530.html|hal patch]]</nowiki> reaches ubuntu you can edit /usr/share/hal/fdi/information/10freedesktop/20-video-quirk-pm-acer.fdi and add the following at the end (before the last </match>):

<pre>
<match key="system.hardware.product" string="AO751h">
   <merge key="power_management.quirk.dpms_on" type="bool">true</merge>
   <merge key="power_management.quirk.vbemode_restore" type="bool">true</merge>
   <merge key="power_management.quirk.vbestate_restore" type="bool">true</merge>
 </match>
</pre>

To have laptop suspend when laptop lid is closed, modify the setting in System-->Preferences-->Power Management.

=== Fixing Microphone ===
Get newer version of <nowiki>[[http://www.alsa-project.org/main/index.php/Download|alsa-driver]]</nowiki> (version 1.0.22 tested and works)

unpack the source archive, run configure, compile, and then install with root perms
<pre>
tar -xjvf alsa-driver-1.0.22.tar.bz2 && cd alsa-driver-1.0.22 && ./configure && make
sudo make install
</pre>

Edit /etc/modprobe.d/alsa-base.conf and add the following to the end of the file
<pre>
alias snd-card-0 snd-hda-intel
options snd-hda-intel model=acer
</pre>

Reboot system

* Ok now this is the weird part* (tested and works for both alsa and pulseaudio)
 
Open your favorite sound mixer
change to the "Capture" or "Recording" section
For both the volume sliders Capture, Mic, Digital (depending on what you see)
turn the volume all the way down on the left slider
turn the volume all the way up on the right slider.

'''Note :''' If your mixer doesn't show Left and Right or only accepts moving the sliders as one, try the command-line amixer with root-privilgies (use sudo or root-terminal). First run "amixer -c 0 controls" to get the numid of the capture volume control. Then run "amixer -c 0 cset numid=9 0%,100%" (asuming only one sound-controller and that the volume control numid turns up to be 9).

'''Note :''' if both right and left sliders are equal or up you will get either no mic or heavy static when recording (not predictable which).  If you run Skype you will need to unselect "Allow Skype to adjust mixer levels" because it will gang the two channels together and stop working. Also mute the mic(s) in the "Playback" section until you tested everything works.

 
 

=== Wireless Configurations AO751h ===
Here is a personal comparison of all the possible ways to get your wireless working.  
I hope this information helps you decide which option you want to use.

Wireless NIC in the system for this comparison
<pre>
user@ubuntu:~$ lspci | grep -i wireless
03:00.0 Ethernet controller: Atheros Communications Inc. AR242x 802.11abg Wireless PCI Express Adapter (rev 01)
</pre>

Wireless router used in comparison: Linksys Wireless-N Broadband Router WRT160Nv2

==== Kernel Module: ath5k (default using on install) ====

Pros: works out of the box, acer wifi switch works

Cons: Slow performace, limited range from wireless access point, acer wireless lights don't work, Normally find the following log entry in /var/log/messages: "noise floor calibration timeout"

==== Kernel Module: ath_pci (madwifi driver) ====

Pros: included in the install, (but blacklisted due to conflict if using ath5k), Improved speed compared to ath5k, acer wifi switch works

Cons: limited range from wireless access point, acer wireless lights don't work

To enable ath_pci edit blacklist: /etc/modprobe.d/blacklist-ath_pci.conf

and reboot
<pre>

blacklist ath5k
</pre>

==== Kernel Module: ndiswrapper (Windows Wireless driver) ====

Pros: Fastest Speed, Greatest Distance from wireless access point, acer wifi switch and lights work

Cons: Need to update ndiswrapper (the version shipped with 9.04 didn't work), The dirty feeling you get resorting to a Windows driver (matter of principle)

To enable ndiswrapper change blacklist to stop both madwifi and ath5k from loading
/etc/modprobe.d/blacklist-ath_pci.conf
<pre>

blacklist ath_pci
blacklist ath5k
</pre>

Get newer version of <nowiki>[[http://sourceforge.net/apps/mediawiki/ndiswrapper/index.php|ndiswrapper]]</nowiki> (version 1.55 tested and works)

unpack the source archive, run configure, compile, and then install with root perms
<pre>
tar -xzvf ../ndiswrapper-1.55.tar.gz &&  cd ndiswrapper-1.55 && make clean && make
sudo make install
</pre>

reboot system, verify ndiswrapper is running
<pre>
user@ubuntu:~$ sudo lsmod | grep ndis
[sudo] password for user: 
ndiswrapper           193308  0 
</pre>

download the 32bit WinXP Wireless driver from Acer Website, unzip, install driver

<pre>
unzip "Wireless LAN_Atheros_7.6.1.221_XPx86_A.zip"  && cd "Wireless LAN_Atheros_7.6.1.221_XPx86"
sudo ndiswrapper -i netathw.inf
</pre>

Verify the driver is registered with ndiswrapper
<pre>
user@ubuntu:~$ sudo ndiswrapper -l
netathw : driver installed
	device (168C:001C) present (alternate driver: ath5k)
</pre>

At this point hal should know about the device and you should be able to use it.  If not try rebooting.
 

=== 3D Video (Alt. Config AO751h) ===

There is '''''another solution''''' to activate DRI (3D hardware accelaration, compatible '''with Compiz''') : freeing memory at the kernel level for the GMA500.
* http://ubuntuforums.org/showpost.php?p=7775498
* ''' http://ubuntuforums.org/showpost.php?p=7775498&postcount=9 '''

''Info'' : there is a <nowiki>[[http://www.facebook.com/group.php?gid=62711517402|facegroup Group]]</nowiki> in order to ''ask Intel to open the source of the GMA500 driver''.

Note: This Alternate configuration has been successfully tested to work without problems.

Here is quick script to get 3D working on 9.04 only, derived from the links above 

<pre>

apt-get -y update
apt-get -y dist-upgrade

cat >> /etc/apt/sources.list.d/ubuntu-mobile.list  <<EOF
deb http://ppa.launchpad.net/ubuntu-mobile/ppa/ubuntu jaunty main
deb-src http://ppa.launchpad.net/ubuntu-mobile/ppa/ubuntu jaunty main
EOF

apt-key adv --keyserver keyserver.ubuntu.com --recv-keys C6598A30

apt-get -y update
aptitude -y install poulsbo-driver-2d poulsbo-driver-3d psb-firmware

cat > /etc/X11/xorg.conf <<EOF

Section "ServerFlags"
        Option "DontZap" "False"
EndSection

Section "Device"
        Identifier      "GMA500"
        Option          "IgnoreACPI" "yes"
##### Use "exa" for X versions lower than 1.6 see: X -version
##### Option          "AccelMethod" "exa"
##### Use "uxa" for X versions 1.6 and higher (see X man page)
        Option          "AccelMethod" "UXA"
        Option          "MigrationHeuristic" "greedy"
        Option          "NoDDC"
        Option          "DRI" "on"
        Driver          "psb"
EndSection

Section "Monitor"
        Identifier      "Configured Monitor"
EndSection

Section "Screen"
        Identifier      "Default Screen"
        Monitor         "Configured Monitor"
        Device          "Configured Video Device"
EndSection

Section "InputDevice"
        Identifier  "Mouse0"
        Driver      "synaptics"
        Option      "Protocol" "auto"
        Option      "Device" "/dev/input/mouse0"
        Option      "ZAxisMapping" "4 5 6 7"
        Option      "CorePointer"
        Option      "HorizEdgeScroll" "1"
EndSection

EOF

sed -i 's/defoptions=/defoptions=mem=1984mb /;s/mem=1984mb mem=1984mb /mem=1984mb /' /boot/grub/menu.lst

update-grub

aptitude -y install compiz compiz-gnome compizconfig-settings-manager compiz-fusion-plugins-extra

sed -i 's/WHITELIST=\”/WHITELIST=\”psb /;s/psb psb /psb /' /usr/bin/compiz

</pre>

=== Fixing Wireless Led (AO751h) ===

To fixing the wireless LED, using the Kernel Module: ath5k

<pre>

Download a compat-wireless from http://wireless.kernel.org/download/compat-wireless-2.6/

tar -jxvf compat-wireless*.tar.bz2 or
tar -zxvf compat-wireless*.tar.gz
cd compat-wireless*
sudo make
sudo make install
sudo depmod -a

sudo rmmod ath5k
sudo modprobe ath5k

</pre>
