{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

=== Installing Adobe Photoshop CS4 on Jaunty ===
Some people need Adobe Photoshop, and CS4 actually seems to work perfectly. Unfortunately, it's a massive pain to install. We're going to need to compile Wine 1.1.25 (patched) and then add a bunch of things to it. You'll also need a legal version of Photoshop CS4.

This tutorial is Jaunty only (it might work on others, but I doubt it).

==== Programs you'll need ====
Before we start, get some generic compiling stuff:
<pre>
sudo aptitude install build-essential checkinstall
</pre>

==== Get rid of Wine ====
You want to remove your current Wine install:
<pre>
sudo aptitude remove wine
</pre>

==== Compiling Wine ====
First off, add the Wine PPA to your sources:
<pre>
sudo sh -c "echo 'deb http://ppa.launchpad.net/ubuntu-wine/ppa/ubuntu jaunty main' \
>> /etc/apt/sources.list"
sudo sh -c "echo 'deb-src http://ppa.launchpad.net/ubuntu-wine/ppa/ubuntu jaunty main' \
>> /etc/apt/sources.list"
</pre>
Add its key and update:
<pre>
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys F9CB8DB0
sudo apt-get update
</pre>

Now we need to grab some dependencies and the source:
<pre>
sudo apt-get build-dep wine
apt-get source wine
</pre>

Move into the wine folder:
<pre>
cd wine*
</pre>

Download the
 patch to make the installer work (<nowiki>[[http://bugs.winehq.org/show_bug.cgi?id=18070|This bug]]</nowiki>):
<pre>
wget http://bugs2.winehq.org/attachment.cgi?id=22139 -O msi_start_dummy_MTA_thread.diff
</pre>

Apply the patch:
<pre>
patch -p1 < msi_start_dummy_MTA_thread.diff
</pre>

Compile:
<pre>
./configure && make depend && make
</pre>
Note: if you have multiple processors, add -j(number_of_processors+1) to each make the command. For my 4 core system I used: ./configure && make -j5 depend && make -j5

Install (this will install Wine as a package):
<pre>
sudo checkinstall
</pre>

You should now have the latest version of Wine patched and installed. You'll also have a .deb file in your current folder if you need to use it on another machine.

==== Installing Photoshop's Dependencies ====
We need a script called winetricks to install some things for us:
<pre>
wget http://www.kegel.com/wine/winetricks
chmod 777 winetricks
</pre>

Get some things like MS XML, ie6, etc (this will start a bunch of installers, just click next):
<pre>
./winetricks msxml6 gdiplus gecko vcrun2005 ie6 
</pre>

Get some Windows fonts:
<pre>
sudo apt-get install msttcorefonts
</pre>

Note: My windows partition is mounted at /windows. Modify the following command accordingly.

If you have a Windows install, copy everything from C:\WINDOWS\Fonts to ~/.wine/drive_c/windows/Fonts. For me the command looked like this:
<pre>
cp /windows/WINDOWS/Fonts/* ~/.wine/drive_c/windows/Fonts
</pre>

Download atmlib.dll. You can search Google for this, or copy it from an existing Windows install (C:\WINDOWS\system32\atmlib.dll). Put the file in ~/.wine/drive_c/windows/system32. For me this was the command:
<pre>
cp /windows/WINDOWS/system32/atmlib.dll ~/.wine/drive_c/windows/system32
</pre>

Remove the Z: drive from wine:
<pre>
winecfg
</pre>
Go to the "drives" tab. Remove Z:. You can't have a / drive available to wine for some reason. You'll probably need to add a drive that points to your home directory though. Wine can't run the installer if it can't find it.

Install Photoshop. Go to the directory with the installer and run:
<pre>
wine Setup.exe
</pre>

You won't be able to choose components because of a bug in the installer, but besides that everything should work normally. Once it's done, just run Photoshop. it should work normally (except OpenGL rendering won't work). Woohoo!

Note: Although the check boxes don't show up because of the installer bug noted above, you can use Tab to cycle through input options and the check boxes will appear as you select them, allowing you to change options as needed.

==== Smooth fonts ====
You might have noticed by now that the fonts look terrible. Winetricks can also install font smoothing. There are 3 packages: fontsmooth-gray, fontsmooth-rgb, and fontsmooth-bgr. Most likely you need fontsmooth-rgb. Get into the winetricks directory (wherever you downloaded it before), and run:
<pre>
./winetricks fontsmooth-rgb
</pre>

If the fonts look funny to you, try the same command but with fontsmooth-bgr.

==== Fixing the Icon ====
By default the icon doesn't always seem to work right (I got it to show up in the menu, but not on Gnome Do). The icon is embedded in photoshop.exe, so you can use a program like <nowiki>[[http://www.nirsoft.net/utils/iconsext.html|IconsExtract]]</nowiki> to extract the .ico program. Use the GIMP to save the .ico as a png (but hide all layers except the biggest one). (Photoshop doesn't support .ico files by default)

Then rename the .png file photoshop.png and copy it to /usr/share/pixmaps:
<pre>
sudo cp photoshop.png /usr/share/pixmaps
</pre>
