{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


* ''tested with:'' Ubuntu 8.04 (Hardy Heron) and Ubuntu 9.10 (Karmic Koala)

== Introduction ==

ARPACK is a well known collection of FORTRAN subroutines designed to compute a few eigenvalues and eigenvectors of large scale sparse matrices. ARPACK++ is a collection of classes that offers c++ programmers an interface to ARPACK. It preserves the full capability, performance, accuracy and low memory requirements of the FORTRAN package, but takes advantage of the c++ object-oriented programming environment.

While in theory ARPACK++ is in the Ubuntu and in the Debian ditribution, it is an old wrapper and encounters errors with more recent compiler;  it must therefore be installed and fixed manually.

== Installation ==

=== Dependencies ===

Prior to installing Arpack++, the following packages have to be installed:

* '''gfortran'''
* '''lapack2-dev''' 
* '''superlu3-dev'''

either via '''synaptic''' or via '''apt-get'''

<pre>
apt-get install libarpack2-dev libsuperlu3-dev gfortran 
</pre>

=== Source Code ===

download arpack++ 1.2 (beta version) at <nowiki>[[ http:--www.ime.unicamp.br-~chico-arpack++- ]]</nowiki> and the patch for arpac++ 1.2 at <nowiki>[[ http:--reuter.mit.edu-index.php-software-arpackpatch- ]]</nowiki> in the same directory

open with an editor the patch file <code>arpack++1.2.patch.diff</code> 

<pre>
gedit arpack++1.2.patch.diff
</pre>

and change the (should be 9362th) line 

<pre>
+FORTRAN_LIBS = -lg2c
</pre>

into	

<pre>
+FORTRAN_LIBS = -lgfortran -lgfortranbegin -lnsl
</pre>

then untar arpack++

<pre>
tar -zxvf arpack++.tar.gz
</pre>

and check that it is version 1.2 with the command 

<pre>
head -1 arpack++/README
</pre>

that should return the string

<pre>
ARPACK++ version 1.2. Feb 20, 2000.
</pre>

now apply the patch

<pre>
cp arpack++1.2.patch.diff arpack++/
cd arpack++
patch -p 1 < arpack++1.2.patch.diff
</pre>

== Compiling with ARPACK++ ==

at this point arpack++ should be working: as it is only a c++ interface to arpack, there are no libraries but only header files to be included into your c++ code; therefore you need to compile with

<pre>
-I $whereisarpack/arpack++/include
</pre>

where you should substitute to <code>$whereisarpack</code> the place where arpack++.tar.gz has been untarred

A brief tutorial is contained in the directory <code>$whereisarpack/arpack++/doc</code>; anyhow, besides including the arpack++ headers, you need also to link with the required numerical libraries (arpack,superlu,lapack,blas....); to do so it is useful to look at the codes contained in <code>$whereisarpack/arpack++/examples/superlu/sym</code>

=== ARPACK++ examples ===

To check what you need to compile, let's examine the the examples in <code>$whereisarpack/arpack++/examples</code>  directory; in particular for finding the eigenvalues of a symmetric matrix using superlu, go to into the proper  subdirectory and compile:

<pre>
cd $whereisarpack/arpack++/examples/superlu/sym
make
</pre>

Notice that executable <code>lsymreg</code> is the only working example that does not core-dump;

Ignore the warnings (mostly deprecated conversion from string constant to 'char*') and pay attention to thecompilation lines

<pre>
g++ -g -Dlinux -I../../../include -I -Wall -ansi -pedantic-errors -I../../../examples/matrices/sym -I../../../include -c lsymreg.cc

g++ -g -Dlinux -I../../../include -I -Wall -ansi -pedantic-errors -I../../../examples/matrices/sym -o lsymreg lsymreg.o /usr/lib/libsuperlu.a  -larpack -llapack -lblas -lgfortran -lgfortranbegin -lnsl 
</pre>

while the <code>-I../../../examples/matrices/sym</code> include is needed as the program refers to some matrix classes defined in <code>$whereisarpack/arpack++/examples/matrices/sym</code> needed by <code>lsymreg</code>, the other include

<pre>
-I../../../include
</pre>

and linking

<pre>
/usr/lib/libsuperlu.a  -larpack -llapack -lblas -lgfortran -lgfortranbegin -lnsl
</pre>

are the ones needed for general compilation (with '''superlu''' libraries); ~+__therefore the full options needed are__+~ 

<pre>
-I $whereisarpack/arpack++/include -lsuperlu -larpack -llapack -lblas -lgfortran -lgfortranbegin -lnsl
</pre>

As a final check try to compile by ourself <code>lsymreg.cc</code>:

<pre>
g++ lsymreg.cc -o my_lsymreg -I $whereisarpack/arpack++/examples/matrices/sym -I $whereisarpack/arpack++/include -lsuperlu -larpack -llapack -lblas -lgfortran -lgfortranbegin -lnsl
</pre>

(remember to substitute to <code>$whereisarpack</code> the directory where ARPACK++ is) and check that the executable <code>my_lsymreg</code> exists and works

== Links ==

* <nowiki>[[http://en.wikipedia.org/wiki/Sparse_matrix/|Sparse matrices - Wikipedia]]</nowiki>
* <nowiki>[[http://www.caam.rice.edu/software/ARPACK//|ARPACK]]</nowiki> - documentation and information
* <nowiki>[[http://www.ime.unicamp.br/~chico/arpack++/|ARPACK++]]</nowiki> - documentation and information
* <nowiki>[[http://crd.lbl.gov/~xiaoye/SuperLU/|SuperLU]]</nowiki> - documentation and information

----
CategoryInstallation CategoryScience
