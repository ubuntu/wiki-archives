{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

{| class="wikitable"
|-
| <tablestyle="background-color: #fdd; color: #000;"> /!\ '''This document is a work in progress''' -- it is incomplete and some parts '''do not work'''. This being updated from <nowiki>[[http://ubuntuforums.org/showthread.php?t=154092|info at the Ubuntu Forums]]</nowiki>.
|}

== Sierra Wireless AC850 wireless card installation in Ubuntu ==

'''Hardware used:'''
* Sierra Wireless AC850 PC-Card
* Thinkpad r60e

=== Initial setup ===
Before you start, make sure that the AirCard is not inserted into the PCMCIA slot. 

==== Getting the firmware files ====
1. Download the <nowiki>[[http://www.sierrawireless.com/software/8x0/AirCard_8xx_Linux.tar.gz|Aircard_Linux.tar]]</nowiki> file, extract it:<pre>
user@laptop:~$ tar -xzvf AirCard_8xx_Linux.tar.gz
[messages indicating extraction of files...]
</pre>
1. Copy the firmware file and overwrite the older version 7xx into /lib/firmware: <pre>
sudo mv  SW_8xx_SER.dat /lib/firmware/SW_7xx_SER.cis 
</pre>

==== Configuring Ubuntu to recognize the AC850 ====
The following will configure the AirCard as a serial-only device:

1. Add the following to the '''/etc/pcmcia/config''' file under the ''Modems and other serial devices'' section:<pre>
card "Sierra Wireless AC850 3G Network Adapter R1"
manfid 0x0192, 0x0710
cis "cis/SW_8xx_SER.dat"
bind "serial_cs"
</pre>
# Copy the file SW_8xx_SER.dat in the archive in /etc/pcmcia/cis/
# Restart the computer
# Insert the AirCard

When the card is inserted two high beeps should be heard, indicating that the AirCard has been recognized and the serial driver has been successfully loaded. The AirCard can be accessed as /dev/modem when inserted. Running minicom should allow access to the AT command interface.

==== Serial port mapping ====
We now must create a ''udev rules'' file so the card is mapped to a UMTS device.

First, find out the card ID:
1. From a terminal window: <pre>
user@laptop:~$ pccardctl ident
</pre> should give something like <pre>
Socket 0:
  product info: "Sierra Wireless", "AC850", "3G Network Adapter", "R1"
  manfid: 0x0192, '''0x0710'''
  function: 6 (network)</pre>
1. Take note of the second string at the ''manfid:'' line, in this case it's '''0x710'''

Now create de udev rules file:
1. From a terminal window: <pre>
gksudo gedit /etc/udev/rules.d/99-aircard.rules
</pre>
1. Insert this line, replace as appropriate the card ID: <pre>BUS=="pcmcia", SYSFS{card_id}=="0x0710", NAME="umts", SYMLINK="tts/umts", RUN+="/usr/local/bin/umtsinit"
</pre>

For ''udev'' to recognize this new card's rules, it must be restarted. From a terminal window, type this command:
<pre>
sudo /etc/init.d/udev restart
</pre>

You will see something like:
<pre>
* Loading additional hardware drivers...   [ ok ] 
</pre>

If the device is mapped correctly, a /dev/umts device will be setup by udev. This can be verified with <pre>
ls /dev/um*
</pre>

If it's not the case, check /var/log/syslog to see whether an error happened. This can be done with the command:
<pre>
tail /var/log/syslog
</pre>

=== Connecting to the Internet ===
Two scripts will be needed for this.

Create the first one with this command:
<pre>
gksudo gedit /etc/chatscripts/ac850chat
</pre>

Copy this in the open editor window and save the result:
<pre>
'' AT
TIMEOUT 5
OK ATD*99#
CONNECT ''</pre>

and also
<pre>
gksudo gedit /etc/ppp/peers/ac850
</pre>

Copy the following in the open editor:
<pre>
-detach
/dev/umts
57600
noauth
debug
defaultroute
usepeerdns
crtscts
lock
connect '/etc/chatscripts/ac850chat'</pre>

The connection is established with the following instruction:
<pre>
pon ac850
</pre>

The connection is terminated with:
<pre>
poff
</pre>

If the connection is established but no data is received, it can be because another connection is active. Open the network manager and deactivete all other active connections.

''pon'' without argument will use the “more provider” configuration file. One can rename thus “more provider” in “provider.orig” and “ac850” in “more provider” with the instructions:

<pre>
sudo mv /etc/ppp/peers/provider /etc/ppp/peers/provider.orig
sudo mv /etc/ppp/peers/ac850 /etc/ppp/peers/provider
</pre>

==== Connecting with GPRSSEC ====
* Install GPRSEC from http://darrenalbers.com/gprsec/
* Run gprsec, select preferences and select the serial port you determined from dmesg.
* Save the settings and click connect

=== References ===
* <nowiki>[[http://en.wikipedia.org/wiki/Universal_Mobile_Telecommunications_System|Universal Mobile Telecommunications System]]</nowiki> (UMTS)
* <nowiki>[[http://www.sierrawireless.com/faq/ShowFAQ.aspx?ID=118|Sierra Wireless]]</nowiki> documentation
* <nowiki>[[http://mycusthelp.com/sierrawireless/supportkbitem.asp?sSessionID=&Inc=4703&sFilA=FAQ%20Category&sFilB=Products&sFilC=&FA=19&FB=26&FC=-1|Original article in German]]</nowiki>
* <nowiki>[[http://wiki.chaostreff.ch/index.php/Sierra_Wireless_AC850|Another article]]</nowiki> in German about the same hardware
* http://www.murga-linux.com/puppy/viewtopic.php?t=7648
* http://www.pcurtis.com/ubuntu-mobile.htm
* http://ubuntuforums.org/showthread.php?t=338004

=== Keywords ===
AC 850, networking

----
CategoryInternet
