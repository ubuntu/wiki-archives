{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__



This page documents how to restore or recover the boot-loader (<nowiki>[[Grub2|GRUB]]</nowiki>) after installing Windows. Some reasons to repair your boot-loader might include installing Microsoft Windows after you have installed Ubuntu, adding or removing a hard drive, or changing hard drive settings.

Note: this tutorial does not apply if you had installed Ubuntu inside Windows (via the <nowiki>[[Wubi]]</nowiki> installer). In this case, please read <nowiki>[[ReinstallWindowsWithoutLosingUbuntu|this page]]</nowiki>.

== Using the Ubuntu CD (Recommended) ==

=== The graphical way ===
* Insert your Ubuntu CD, reboot your computer and set it to boot from CD in the BIOS and boot into a live session. You can also use a LiveUSB if you have created one in the past.
* Install and run <nowiki>[[Boot-Repair]]</nowiki>
* Click "Recommended Repair".
* Now reboot your system. The usual GRUB boot menu should appear. If it does not, hold Left Shift while booting. You will be able to choose between Ubuntu and Windows.
=== The terminal way ===
* Open a terminal. As of Ubuntu 11.10 and 11.04, this can be done by opening the Unity Dash (you can click the Ubuntu logo in the top panel or use the Windows key on your keyboard) and typing in "Terminal", and clicking what comes up. On earlier versions, you can achieve this by going to Applications -> Accessories -> Terminal. 
Alternately use the Keyboard Shortcut: CTRL + ALT + T.
 
For full details on using terminal to fix grub on hard drive from Live Installer DVD or Flash:
https://help.ubuntu.com/community/Grub2/Installing#via_the_LiveCD_terminal

* You are then presented with a standard bash prompt, type - this only works to reinstall to MBR of a working system:
<pre>
sudo grub-install /dev/XXX
</pre>
where XXX is the device of your Ubuntu install. (eg: ''grub-install /dev/sdb''). '''Hint:''' You can also use /dev/disk/by-label/ if the partition you installed on has a label. You can determine the /dev node for such a device by running:
<pre>
ls -l /dev/disk/by-label/
</pre>
This will give the output of something like:
<pre>
lrwxrwxrwx 1 root root 10 Oct 16 10:27 data -> ../../sdb2
lrwxrwxrwx 1 root root 10 Oct 16 10:27 data2 -> ../../sda2
lrwxrwxrwx 1 root root 10 Oct 16 10:27 fat -> ../../sda6
lrwxrwxrwx 1 root root 10 Oct 16 10:27 home -> ../../sda7
lrwxrwxrwx 1 root root 10 Oct 16 10:27 root -> ../../sda1
lrwxrwxrwx 1 root root 10 Oct 16 10:27 swap -> ../../sda5
lrwxrwxrwx 1 root root 10 Oct 16 10:27 windows -> ../../sdb1
</pre>
You can also use fdisk if you do not see the /dev/disk/by-label:
<pre>
$ sudo fdisk -l

Disk /dev/sda: 160.0 GB, 160041885696 bytes
255 heads, 63 sectors/track, 19457 cylinders
Units = cylinders of 16065 * 512 = 8225280 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x0001bc54

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *           1       18725   150403072   83  Linux
/dev/sda2           18725       19458     5884929    5  Extended
/dev/sda5           18725       19458     5884928   82  Linux swap / Solaris
</pre>

From here, find only the drive name, '''ignore the partition number''', that is, for partitions labeled "root", "data2", "fat", "home" and "swap" it's all still just sda. This is due to the fact that GRUB is installed in the MBR of the drive, and not on a partition.

'''Trouble?''' If other things are messed up, e.g. if you have deleted the partition from where Grub was previously installed, grub-install may return an error message such as "cannot find a device for /... (is /dev mounted?)". You may have to do grub-install a bit differently. Refer to the handy <nowiki>[[Grub2-Installing#Fixing_a_Broken_System|guide on fixing a broken system]]</nowiki>

'''Now reboot your system'''. The usual GRUB boot menu should appear. If it does not, hold Left Shift while booting. You will be able to choose between Ubuntu and Windows.

== Using the Ubuntu Alternate CD ==

* Boot your system from the Ubuntu Alternate CD.
* When the Ubuntu splash screen comes up with the '''boot:''' prompt, type in '''rescue''' and press enter.
* Choose your language, location (country) and then keyboard layout as if you were doing a fresh install.
* Enter a host name, or leave it with the default (Ubuntu).
* At this stage you are presented with a screen where you can select which partition is your root partition (there is a list of the partitions on your hard drive, so you are required to know which partition number Ubuntu is on). This will be  <code>dev/discs/discY/partX</code>, where the '''X''' is a partition number and '''Y''' is the number of the drive.
* Now proceed as described in "The terminal way" above.

== See also ==
** <nowiki>[[GRUB2]]</nowiki>

----
CategoryLive CategoryBackupRecovery CategoryBootAndPartition CategoryInstallation CategoryBootAndPartition
