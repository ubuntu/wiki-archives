{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work.
* A '''full compressed version''' of the wiki is available on archive.org
|}

__TOC__

{| class="wikitable"
|-
| <tablestyle="float:right; font-size: 0.9em; width:40%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em;">'''Содержание'''<<BR>>
|}

В Linux (да и в Unix вообще) суперпользователь (root user) имеет доступ ко всему.  Это аналог пользователя Администратор в Windows. Как бы вы ни настроили свою учетную запись, вы все равно не сможете заблокировать доступ суперпользователя к каким-либо ресурсам компьютера. Кроме того, суперпользователь имеет доступ ко всем командам операционной системы и всем ее устройствам. Многие начинающие пользователи активно используют учетную запись root, поскольку это очень удобно. Тем не менее существуют причины, по которым учетную запись суперпользователя не
следует применять для повседневной работы.
* Доступ такого уровня к ресурсам компьютера необходим далеко не всегда.
* Доступ на уровне суперпользователя— это, скорее, большая ответственность, нежели благодать. При обычном доступе вы работаете только с ресурсами своей учетной записи. Если же вы находитесь в системе в качестве суперпользователя, вы можете случайно сделать ошибку и удалить все — да-да, все файлы всей системы Linux!
Думаете, с вами такого не случится? Даже опытные администраторы Linux рассказывают жуткие истории о том дне, когда они сделали роковую опечатку или не задумывались над тем, что они делают, работая под именем суперпользователя.

По умолчанию учетная запись суперпользователя отключена в Ubuntu. Это означает, что вы не сможете зайти в систему как '''root'''. Однако, инсталлятор настраивает '''sudo''' для пользователя, созданного во время установки. Команда '''sudo''' позволяет выполнять все приложения, требующие привилегий суперпользователя.

Когда '''sudo''' спрашивает пароль, вы должны ввести '''пароль ВАШЕГО пользователя''' ! То есть пароль root'a вам не нужен !

=== Заметки ===
* Пароль сохраняется по умолчанию на 15 минут. По истечении этого времени, вам нужно будет ввести пароль снова.
* Несмотря на то, что при вводе пароль не отображается на экране (даже в виде звездочек), он все-равно вводится!
* Для выполнения графических конфигурационных утилит с <code>sudo</code>, просто запустите приложение через меню.
* Для запуска программ через <code>sudo</code>, которые обычно запускаются под обычным пользователем (например '''gedit'''), нажмите Alt+F2 и введите <code>gksudo gedit</code>. В Kubuntu используйте вместо <code>gksudo</code> программу <code>kdesu</code>.
* Использование <code>sudo</code> в командной строке:
''Пример #1'' - смена пользователя и группы для файлов в домашней папке пользователя
<pre>
sudo chown bob:bob /home/bob/*
</pre>
''Пример #2'' - перезапуск сетевых служб
<pre>
sudo /etc/init.d/networking restart
</pre>
* Для запуска графических программ используйте <code>gksudo</code> или <code>kdesu</code>, иначе попытка входа может провалиться. Если это происходит и при входе вылазит ошибка: "Unable to read ICE authority file", войдите в безопасный терминал и выполните следующую команду, подставив своё имя пользователя:
<pre>
rm /home/user/.{ICE,X}authority
</pre>
* Для запуска режима суперпользователя в терминале (''root shell'', т.е. командная строка, где вы можете выполнять команды под пользователем root), запустите терминал и выполните команду:
<pre>
sudo -i     (эквивалент команды "sudo su -")
</pre>
* Для запуска режима суперпользователя, оставив текущие переменные окружения, введите:
<pre>
sudo -s     (эквивалент команды "sudo su")
</pre>
* Вход под другим пользователем (для графического входа, используйте что-то типа gdmflexiserver):
<pre>
sudo -i -u username
</pre>

=== Разрешение другим пользователям использовать sudo ===

Чтобы разрешить пользователю использовать sudo, откройте '''Система → Администрирование → Пользователи и группы'''. Затем выберите пользователя и нажмите на кнопке '''Свойства'''. В появившемся окне зайдите на вкладку '''Привилегии пользователя''' и поставьте галочку '''Администрировать систему'''.

/!\ Аналог этой же процедуры в терминале: <code>sudo adduser $user admin</code>, где $user - имя пользователя.

=== Преимущества использования sudo ===

Причины, по которым пользователь '''root''' отключен по умолчанию, заключаются в следующем:

* Программа установки задаёт меньше вопросов.
* Пользователям не нужно запоминать дополнительный пароль, который они могут забыть.
* Перед тем как произойдёт выполнение команды, вас попросят ввести пароль. Это даст время подумать о возможных последствиях.
* sudo добавляет в лог выполненные команды (<code>/var/log/auth.log</code>).
* Все попытки взломщиков, пытающихся подобрать пароль к '''root''', будут обречены на провал.
* sudo позволяет легко предоставлять права администратора на долгий или короткий период другим пользователям, просто добавляя и удаляя их из группы, при этом не трогая корневую учетную запись.
* sudo можно настроить с более fine-grained политикой безопасности.
* Аутентификация автоматически истекает по окончании определенного промежутка времени.

=== Минусы использования sudo ===

Хотя выгода для использования sudo на персональных компьютерах велика, есть некоторые моменты, которые надо отметить:

* Redirecting the output of commands run with sudo can catch new users out. For instance consider <code>sudo ls > /root/somefile</code> will not work since it is the shell that tries to write to that file. You can use `ls | sudo tee -a /root/somefile` to append, or `ls | sudo tee /root/somefile` to overwrite contents. You could also pass the whole command to a shell process run under sudo to have the file written to with root permissions, such as `sudo bash -c "ls > /root/somefile"`.
* Во многих офисных системах только один локальный пользователь в системе root. Все остальные пользователи импортируются через NSS технологии, такие как nss-ldap. Для настройки рабочей станции в случае повреждения сети, при поломке nss-ldap, необходим root. This tends to leave the system unusable unless cracked. An extra local user, or an enabled root password is needed here.

=== Заблуждения ===

* ''Разве sudo не менее безопасно, чет su?''

  Основая модель безопасности одинакова в обоих случаях, поэтому и уязвимость будет одинаковой. Любой пользователь, использующий '''su''' или '''sudo''' рассматривается как привилегированный пользователь.  If that user's account is compromised attby an attacker, the attacker can also gain root privileges the next time the user does so. The user account is the weak link in this chain, and so must be protected with the same care as root.

  On a more esoteric level, `sudo` provides some features which encourage different work habits, which can positively impact the security of the system.  `sudo` is commonly used to execute only a single command, while `su` is generally used to open a shell and execute multiple commands.  The `sudo` approach reduces the likelihood of a root shell being left open indefinitely, and encourages the user to minimize their use of root privileges.

* ''Я не буду иметь возможность загрузиться в однопользовательском режиме!''

 Программа sulogin в Ubuntu изменена для того чтобы можно было войти в однопользовательский режим, даже если пользователь root отключен. 

* ''Я могу получить права администратора из консоли без ввода пароля!''

  Вам потребуется ввести пароль для этого.

  Console users have access to the boot loader, and can gain administrative privileges in various ways during the boot process.  For example, by specifying an alternate `init(8)` program.  Linux systems are not typically configured to be secure at the console, and additional steps (for example, setting a root password, a boot loader password and a BIOS password) are necessary in order to make them so.  Note that console users usually have physical access to the machine and so can manipulate it in other ways as well.

=== Возврат к традиционной учетной записи root ===
<!> '''Не рекомендуется это делать!'''

Consider using the below command instead:
<pre>
sudo -i
</pre>

Использование этой команды временно откроет консоль с правами root. Активация аккаунта root в Ubuntu не поддерживается из-за ненадобности. Всё, что вам требуется сделать с правами администратора в Ubuntu можно сделать через sudo или gksudo.

Если root включен, и вы хотите отключить его, откройте терминал и введите следующую команду:
<pre>
sudo passwd -l root
</pre>

=== Drag & Drop Sudo ===

Этот трюк взят из <nowiki>[[http://www.ubuntuforums.org/showthread.php?t=24008|форумов]]</nowiki>.

Создайте кнопку <nowiki>[[HowToAddaLauncher|запуска]]</nowiki> со следующей командой:
<pre>
gksudo "gnome-open %u"
</pre>
Теперь при перетаскивании любого файла на эту кнопку, будет запущено ассоциированное с этим файлом приложение с привилегиями суперпользователя. Это особенно удобно при редактировании конфигурационных файлов.
