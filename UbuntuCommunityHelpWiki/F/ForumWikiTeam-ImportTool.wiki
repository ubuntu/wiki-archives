{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

== Forum Import Tool ==

''' This tool is still in development and subject to change.  '''

=== Installing the software ===

<pre>

<nowiki>[[ -x -usr-bin-html2wiki ]]</nowiki> || sudo apt-get -y install libhtml-wikiconverter-moinmoin-perl
<nowiki>[[ -x -usr-bin-zenity ]]</nowiki> || sudo apt-get -y install zenity

DIR="${HOME}/Documents/wiki"
<nowiki>[[ -d "${DIR}" ]]</nowiki> || mkdir -p "${DIR}"
AWK=$(which awk)
GREP=$(which egrep)
SED=$(which sed)
CONVERT='html2wiki --dialect MoinMoin'
WGET=$(which wget)
ZENITY=$(which zenity)
NAME=''
URL=''
if [ -x /usr/bin/gedit ]; then
  EDIT='/usr/bin/gedit'
elif [ -x /usr/bin/kate ]; then
  EDIT='/usr/bin/kate'
elif [ -x /usr/bin/leafpad ]; then
  EDIT='/usr/bin/leafpad'
else
  EDIT=$($ZENITY --title="Please choose an editor" --file-selection)
  return_value=$?
  if [ "$return_value" -ne "0" ]; then exit 1; fi
fi
CAT='/bin/cat'

URL=$($ZENITY --entry --title="Tutorial to transcribe" --text="Paste the tutorial URL from your browser")
return_value=$?
if [ "$return_value" -ne "0" ]; then exit 1; fi

NAME=$($ZENITY --entry --title="Title?" --text="Please enter your title")
return_value=$?
if [ "$return_value" -ne "0" ]; then exit 1; fi
FILE="${DIR}/${NAME}.html"
CLEAN="${DIR}/${NAME}.clean.html"
WIKI="${DIR}/${NAME}.wiki"

$WGET "${URL}" -O "${FILE}"
return_value=$?
if [ "$return_value" -ne "0" ]; then echo -e '\e[0;31m' "Download Failed"; exit 1; fi

$AWK '/-- message --/ {n++}; /-- \/ message --/ {n++} ;{if (n == 1) {print}}; {if ( n > 1 ) {exit}}' "${FILE}" | $GREP -v '(Code|Quote):' > "${CLEAN}"
return_value=$?
if [ "$return_value" -ne "0" ]; then echo -e '\e[0;31m' "Cleanup Failed"; exit 1; fi

$CAT <<EOF>"${WIKI}"
EOF

$CONVERT "${CLEAN}" |  $SED -e 's|\[\[BR\]\]|\n|g' | $SED -e 's/\(\[http[s]*:\S*\)\(.*\]\)\(.*\)/\[\1|\2\]\3 /g' >> "${WIKI}"
return_value=$?
if [ "$return_value" -ne "0" ]; then echo -e '\e[0;31m' "Conversion Failed"; exit 1; fi

echo -e "\nOriginally posted <nowiki>[[${URL}|The Ubuntu Forums (ubuntuforums.org)]]</nowiki>" >> "${WIKI}"

sed -i 's/&lt;/</g' ${WIKI}
sed -i 's/&gt;/>/g' ${WIKI}
sed -i 's/\&amp;/\&/g' ${WIKI}

$EDIT "${WIKI}"
return_value=$?
if [ "$return_value" -ne "0" ]; then echo -e '\e[0;31m' "Opening document with your editor failed"; exit 1; fi

</pre>

Save this as 
/usr/local/bin/ubforums2ubwiki.sh

or 

~/bin/ubforums2ubwiki.sh

Make it executable

<pre>
sudo chmod a+x /usr/local/bin/ubforums2ubwiki.sh
</pre>

Run the tool
<pre>
ubforums2ubwiki.sh
</pre>

or create a desktop launcher. An image to be used as an icon can be found at https://launchpadlibrarian.net/101180651/logo64.png

{{https://launchpadlibrarian.net/101180651/logo64.png}}

'''Be aware that the tool only looks at the first post of the thread - any information within the thread will need to be manually added to the wiki once the initial paste has been done.'''

Running the tool will cause an entry box to show - paste in the URL for the first post of the tutorial you wish to convert. Followed when prompted by name for the new wiki - do not use spaces in the name.

<nowiki>[[File:url.png]]</nowiki>

<nowiki>[[File:title.png]]</nowiki>

Once the tool has run - a text editor window will open (the tool checks for the availability of a text editor)  with the text, you can copy this for use in the wiki creation.

<nowiki>[[attachment:gedit.png|<nowiki>[[File:gedit.png||width=750]]</nowiki></nowiki>]]

You can either create a new page by directly entering it's name, if it does not exist you will be prompted to create the new page.

Please make sure to not have spaces in the name you choose.

Alternatively you can use the <nowiki>[[https://help.ubuntu.com/community/WikiGuide/PageCreation | Page Creation]]</nowiki> macro to do so.

Once you have the new page, paste in the text from your new foo.txt.new file, check for any further editing and when happy save changes. You can if you wish preview the page before saving.

<nowiki>[[attachment:wikidone.png|<nowiki>[[File:wikidone.png||width=750]]</nowiki></nowiki>]] 

=== Other Options ===

----

If you would like to just make us aware of threads that could be suitable for conversion to a wiki then please add them to the <nowiki>[[https://help.ubuntu.com/community/Pages%20For%20Import| Import Page ]]</nowiki>
