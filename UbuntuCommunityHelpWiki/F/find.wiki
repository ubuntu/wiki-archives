{|
| '''Warning'''
* This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
* '''Images''' and '''attachments''' have been removed to conserve space.
* '''Links''' may not work and there may be formatting issues.
* A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__

{| class="wikitable"
|-
| <tablestyle="float:right; font-size: 0.9em; width:40%; background:#F1F1ED; margin: 0 0 1em 1em;" style="padding:0.5em;"><<BR>>
|}

== Introduction ==

The GNU find command searches files within a directory and its subdirectories according to several criteria such as name, size and time of last read/write. By default find prints the name of the located files but it can also perform commands on these files. 

The GNU find command is part of the <nowiki>[[http://www.gnu.org/software/findutils/|GNU findutils]]</nowiki> and is installed on every Ubuntu system. findutils is actually made up of 4 utilities:

## '''find''' - search for files in a directory hierarchy, whether its a database or not
## '''locate''' - list files in databases that match a pattern, i.e. find inside updatedb's list
## '''updatedb''' - update a file name database, i.e. collection of '''db's only''', such as sqlite
## '''xargs''' - build and execute command lines from standard input - usually you do this directly w/o xargs

This wiki page will be only be dealing with find while also briefly mentioning xargs. Hopefully <nowiki>[[locate]]</nowiki> and <nowiki>[[updatedb]]</nowiki> will be covered on their own page in the near future. "find", like "locate", can find database-files as well, but "locate" is more specialized for this task. You would run updatedb before using locate, which relies on the data produced by "updateDB".

== The Basics ==

'''<pre>
find ~ -name readme.txt 
</pre>'''

will find this file below the home directory. find works '''incredibly fast on the second run!''' You can search the whole /  root-dir-tree in a mere approx. 3 seconds (on second run, when cache is effective) on a 500 GB ext4-fs hard disk.

The syntax for using find is:

<pre>
find [-H] [-L] [-P] [path...] [expression]
</pre>

The 3 options [-H] [-L] [-P] are not commonly seen but should at least be noted if only to realise that the -P option will be the ''default'' unless another option is specified:

* -H : Do  not  follow symbolic links, except while processing the command line arguments. 
* -L : Follow symbolic links.
* -P : Never follow symbolic links: the default option.

The option [path...] refers to the particular location that you wish to search, whether it be your $HOME directory, a particular directory such as /usr, your present working directory which can simply be expressed as '.' or your entire computer which can be expressed as '/'. 

The option [expression] refers to one or a series of options which effect the overall option of the find command. These options can involve a search by name, by size, by access time or can also involve actions taken upon these files. 

=== Locating Files by Name ===

The most common use of find is in the search for a specific file by use of its name. The following command searches the home directory and all of its subdirectories looking for the file mysong.ogg:

<pre>
find $HOME -name 'mysong.ogg' 
</pre>

It is important to get into the habit of quoting patterns in your search as seen above or your search results can be a little unpredictable. Such a search can be much more sophisticated though. For example if you wished to search for ''all'' of the ogg files in your home directory, some of which you think might be named 'OGG' rather than 'ogg', you would run:

<pre>
find $HOME -iname '*.ogg' 
</pre>

Here the option '-iname' performs a case-insensitive search while the wildcard character '*' matches any character, or number of characters, or zero characters. To perform the same search on your ''entire drive'' you would run:

<pre>
sudo find / -iname '*.ogg' 
</pre>

This could be a slow search depending on the number of directories, sub-directories and files on your system. This highlights an important difference in the way that find operates in that it examines the system ''directly'' each time unlike programs like locate or slocate which actually examine a regularly updated ''database'' of filnames and locations.

=== Locating Files by Size ===

Another possible search is to search for files by ''size''. To demonstrate this we can again search the home directory for Ogg Vorbis files but this time looking for those that are 100 megabytes or larger:

<pre>
find $HOME -iname '*.ogg' -size +100M 
</pre>

There are several options with -size, I have used 'M' for 'megabytes' here but 'k' for 'kilobytes' can be used or 'G' for 'Gigabytes'. This search can then be altered to look for ''files'' only that are ''less'' than 100 megabytes:

<pre>
find $HOME -iname '*.ogg' -type f -size -100M 
</pre>

Are you starting to see the power of find, and the thought involved in constructing a focused search? If you are interested there is more discussion of these ''combined'' searches in the Advanced Usage section below.

=== Locating Files by Access Time ===

It is also possible to locate files based on their access time or the time that they were last used, or viewed by the system. For example to show all files that have not been accessed in the $HOME directory for 30 days or more:

<pre>
find $HOME -atime +30
</pre>

This type of search is normally more useful when combined with ''other'' find searches. For example one could search for all ogg files in the $HOME directory that have an access time of greater than 30 days:

<pre>
find $HOME -iname '*.ogg' -atime +30
</pre>

The syntax works from left to right and by default find joins the 2 expressions with an implied "and". This is dealt with in more depth in the section below entitled "Combining Searches".

== Advanced Usage ==

The sections above detail the most common usage of find and this would be enough for most searches. However there are many more possibilities in the usage of find for quite advanced searches and this sections discusses a few of these possibilities.

=== Combining Searches ===

It is possible to combine searches when using find with the use of what is known in the find man pages as ''operators''. These are 

{| class="wikitable"
|-
| -and
| -or
| -not
|}

as in
'''<pre>
find ~ -name 'xx*' -and -not -name 'xxx'
</pre>'''

unless you prefer the cryptic syntax below (-o instead of -or)

The classic example is the use of a logical AND syntax:

<pre>
find $HOME -iname '*.ogg' -size +20M 
</pre>

This find search performs initially a case insensitive search for all the ogg files in your $HOME directory and for every true results it then searches for those with a size of 20 megabytes and over. This contains and implied operator which could be written joined with an ''-a''. This search can be altered slightly by use of an exclamation point to signify negation of the result:

<pre>
find $HOME -iname '*.ogg' ! -size +20M 
</pre>

This performs the same search as before but will look for ogg files that are ''not'' greater than 20 megabytes. It is possible also to use a logical OR in your find search:

<pre>
find $HOME -iname '*.ogg' -o -iname '*.mp3'
</pre>

This will perform a case insensitive search in the $HOME directories and find all files that are either ogg OR mp3 files. There is great scope here for creating very complex and finely honed searches and I would encourage a through reading of the find man pages searching for the topic OPERATORS. 

=== Acting On The files ===

One advanced but highly useful aspect of find usage is the ability to perform a user-specified action on the result of a find search. For example the following search looks for all ogg vorbis files in the $HOME directory and then uses -exec to pass the result to the du program to give the size of each file:

<pre>
find $HOME -name '*.ogg' -type f -exec du -h '{}' \;
</pre>

This syntax is often used to delete files by using ''-exec rm -rf'' but this must be used with great caution, if at all, as recovery of any deleted files can be quite difficult.

=== Using xargs ===

'''xargs <<< /  ls'''

same as:   ls /

xargs feeds here-string '''/''' as parameter ("argument") to the ls command 

When using a really complex search it is often a good idea to use another member of the findutils package: xargs. Without its use the message ''Argument list too long'' could be seen signalling that the kernel limit on the combined length of a commandline and its environment variables has been exceeded. xargs works by feeding the results of the search to the subsequent command in batches calculated on the system capabilities (based on ARG_MAX). An example:

<pre>
find /tmp -iname '*.mp3' -print0 | xargs -0 rm
</pre>

This example searches the /tmp folder for all mp3 files and then deletes them. You will note the use of both ''-print0'' and ''xargs -0'' which is a deliberate strategy to avoid problems with spaces and/or newlines in the filenames. Modern kernels do not have the ARG_MAX limitation but to keep your searches portable it is an excellent idea to use xargs in complex searches with subsequent commands.

== More Information ==

* <nowiki>[[http://ubuntuforums.org/showthread.php?t=1128937|Linux Basics: A gentle introduction to 'find']]</nowiki> - An Ubuntu Forums guide that was incorporated into this wiki article with the gracious permission of its author.

* <nowiki>[[http://mywiki.wooledge.org/UsingFind|Using Find - Greg's Wiki]]</nowiki> - A very comprehensive guide to using find, along similar lines to this guide, that is well worth reading through.
 
* <nowiki>[[http://www.youtube.com/watch?v=x_R_JSiupzo|Linux Tutorial: The Power of the Linux Find Command]]</nowiki> The amazing Nixie Pixel gives a video demonstration of find.

----
CategoryCommandLine
