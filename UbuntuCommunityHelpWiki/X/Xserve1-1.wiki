{|
  | '''Warning'''
  * This is a '''readonly''' and '''text-based''' archive of a deprecated wiki.
  * '''Images''' and '''attachments''' have been removed to conserve space.
  * '''Links''' may not work and there may be formatting issues.
  * A '''compressed''' version with images and the original syntax is in the repo '''Releases'''.
|}

__TOC__


<nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|<nowiki>[[File:IconsPage/index.png|up]]</nowiki></nowiki>]]

== Xserve ==

<nowiki>[[File:Xserve.png]]</nowiki>

<<BR>><<BR>>
This page started 2 July 2009.
Apple Intel Xserve requires EFI booting to install and run ubuntu linux which can be done using grub2 grub.efi built by grub-mkimage from a grub-efi package installation.
The Xserve is a rack mounting server.
Xserve1,1 uses 32bit EFI which requires the --target=i386 ( AKA x86) build of grub2 --with-platform=efi. This does not imply limitation to 32bit linux installation.

<<BR>>
<<BR>>
<nowiki>[[File:IconsPage/terminal.png]]</nowiki> You can find out, what model you have by typing at the terminal:<<BR>>
<pre>
sudo dmidecode -s system-product-name
</pre> Or in OSX, < About This Mac: More Info... : Hardware >
<<BR>>

 If you have a different model, please go <nowiki>[[https://wiki.ubuntu.com/MactelSupportTeam/CommunityHelpPages|here]]</nowiki> and find the right wiki.

== Introduction ==

Using grub.efi to boot linux installer, and then booting the installed linux system.

The alternative efi bootloader elilo used for IA32 and IA64 systems is not suitable for Apple's EFI implementation without extensive debugging, and not considered here (as at july 2009).

It is not intended to go into detail of various linux installations and post-install optimizations here.

It is assumed that Xserve may be used 
1. as a server with CLI console or minimal GUI with frame buffer video driver.
2. as workstation with CLI and desktop, regarded as experimental. This may need restriction to xorg fbdev GUI, depending on the hardware.

Initially I am using information from the ubuntuforums grub efi discussion thread in debuggiing grub.efi and application to Xserve to successfully boot linux, but I do not have an Xserve to vefify results. Bootability for Apple EFI depends on linux kernel EFI configuration and kernel version variations. 
 
Xserve1,1 now boots using grub32.efi from the grub2 after debugging. Requires SVN grub2 revision 2074 with patches for Xserve or later (2121 at 20april2009). More input is needed from Xserve users to confirm essential details.

The GRUB WIKI has recently been updated for the latest intel mac grub.efi installation.<<BR>><nowiki>[[http://grub.enbug.org/TestingOnMacbook|GRUB WIKI - efi on mac]]</nowiki>

Generic Grub2 common features, grub2 utilities, grub2 drive numbering, grub.cfg format<<BR>>
<nowiki>[[https://wiki.ubuntu.com/Grub2|Grub2 - Ubuntu Wiki]]</nowiki>

Background EFI and Apple Mac info<<BR>>
<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/EFI-Boot-Mactel|EFI and apple macs]]</nowiki>

== Configuration ==
An outline of the configuration used to boot the linux installer and linux OS -

Assume that an OSX hfsplus partition with the bless utiity and rEFIt is available.

Install bootloader on OSX partition root, or separate hfsplus partition-
<pre>
 /efi/refit/refit.efi,other refit files
 /efi/grub/grub.efi,grub.cfg,grub modules 
# # or grub.efi in the root with preloaded modules only
 /grub.efi,grub.cfg
</pre>

=== Booting Installer ===
The Xserve cannot boot directly from a linux install CD.
A text based alternate install cd, or netboot kernel and initrd on an hfsplus partition, can be booted using this grub.cfg

<pre>
timeout=10
default=0
set F1=ctrl-x
set F2=ctrl-c

menuentry "2.6.28 x86 alternate installer cd" {
	fakebios
	search --set /install/vmlinuz
	linux /install/vmlinuz video=efifb
	initrd /install/initrd.gz
}
menuentry "2.6.26 x86 net install images" {
	fakebios
	search --set /lenny64/linux
	linux /lenny64/linux video=efifb
	initrd /lenny64/initrd.gz
}
menuentry "REBOOT" {
	reboot
}
</pre>

=== Booting OS ===

After the linux OS is installed, reboot using additional grub.cfg menuentries -
More options may be needed here depending on the kernel version and specific hardware.

<pre>
menuentry "2.6.27 i386 fbdev sda4" {
	fakebios
	root=hd0,4
	linux /vmlinuz root=/dev/sda4 video=efifb
	initrd /initrd.img
}
menuentry "2.6.28 amd64 fbdev sda8 single" {
	fakebios
	root=hd0,8
	linux /vmlinuz root=/dev/sda8 video=efifb noefi single
	initrd /initrd.img
}
</pre>

Other configurations possible for agp 3d graphics are assumed not applicable, but who knows.
 ------------------------------

=== Please Contribute ===
If you have an alternative working Xserve/linux grub.efi or other linux bootloader configuration please feel free to edit below here.

<nowiki>[[http://ubuntuforums.org/showthread.php?t=995704|grub.efi discussion thread ]]</nowiki> and for debugging.

<nowiki>[[https://help.ubuntu.com/community/MactelSupportTeam/AppleIntelInstallation|general Apple Intel installation info]]</nowiki>
